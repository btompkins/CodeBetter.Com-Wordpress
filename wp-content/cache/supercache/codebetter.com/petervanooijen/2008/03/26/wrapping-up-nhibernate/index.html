<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Wrapping up nHibernate | Peter van Ooijen</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/petervanooijen/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://cdn1.codebetter.com/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/petervanooijen/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Peter van Ooijen' href='http://codebetter.com/petervanooijen/' />
<link rel='start' title='Hello weblog' href='http://codebetter.com/petervanooijen/2003/06/03/hello-weblog/' />
<link rel='prev' title='Setting and retrieving the database connectionstring in nHibernate' href='http://codebetter.com/petervanooijen/2008/03/07/setting-and-retrieving-the-database-connectionstring-in-nhibernate/' />
<link rel='next' title='Wrapping up nHibernate in repositories' href='http://codebetter.com/petervanooijen/2008/04/04/wrapping-up-nhibernate-in-repositories/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/petervanooijen/2008/03/26/wrapping-up-nhibernate/' />
<link rel='shortlink' href='http://codebetter.com/petervanooijen/?p=532' />
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/codebetterpetergekkosblog/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-532" class="post-532 post type-post status-publish format-standard hentry category-coding category-data category-featured">
					<h1 class="entry-title">Wrapping up nHibernate</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/petervanooijen/author/petervanooijen/" title="View all posts by Peter van Ooijen">Peter van Ooijen</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/petervanooijen/2008/03/26/wrapping-up-nhibernate/" title="11:01 am" rel="bookmark"><span class="entry-date">March 26, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/petervanooijen/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/petervanooijen/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>In a relative short span of time nHibernate has become a major member of my toolbox. It has become <em>the</em> way to work with a database, not only a small hap-snap apps but it&#8217;s also making big strides into a constantly evolving system I&#8217;m working on. Setting up nHibernate several times has given me the opportunity to do some playing around. Browsing around you can find several ways to do it, some ways just focus on getting it done, some ways focus on performance, and some ways focus on resource management. Here I would like to discuss my way where I tried to take all aspects in account. Don&#8217;t take it as <em>the </em>way; please do share your thoughts. </p>
<p>&lt;update&gt;After a <a href="http://codebetter.com/blogs/peter.van.ooijen/archive/2008/03/26/wrapping-up-nhibernate.aspx#175892">very good comment</a> by rui I have corrected some of the code for the repository part. Thanks ! Blogging is just the best public code review you can get <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> &lt;/update&gt;</p>
<p>Code will work with two very important nHibernate objects </p>
<ul>
<li>The sessionfactory. This object swallows the configuration, from the mappings to the connectionstring to the database. Instantiating it is quite a job as it has to parse all mappings and check for corresponding domain classes. The good thing is that it will actively check all mappings; when the sessionfactory is successfully instantiated you know you&#8217;re more than halfway. (Note that the sessionfactory does not check the database, in case there are errors in columns names of the mappings or in the connectionstring your code will not hit an exception until it actually tries to connect to the database). The sessionfactory is thread-safe all your code can work with one and the same sessionfactory. And as it is expensive to create the thing it pays off to create it only once. </li>
<li>The session. The sessionfactory provides you with session objects to work with the database. A session wraps up an actual connection to the database, so it holds an expensive unmanged resource. The mantra for &quot;classical&quot; ado.net code was always to open the connection as late as possible and to close immediately after firing your sql. More details on that <a href="http://codebetter.com/blogs/peter.van.ooijen/archive/2007/12/03/back-to-basics-from-the-db-to-a-simple-domain-object.aspx">here</a>. The nHibernate sessionfactory provides session objects containing an open connection to the database. The session object has a method to close the connection, but there are several reasons not to do that. The most obvious one is lazy loading. For example when you load an invoice object from the database nHibernate will not load the data of the associated customer until your code actively touches the customer&#8217;s properties. In case your code doesn&#8217;t touch the customer the data will not be loaded. To load the data from the database nHibernate needs an open connection. In case you had already closed the session your code will hit a LazyLoadException. So a session object holds an open connection to the database, which requires extra care. </li>
</ul>
<p>I&#8217;m going to manage both the sessionfactory and the session in one nHibernateHelper class. The code needs only one sessionfactory, which has to be instantiated once. The sessionfactory is going to be a static (shared) member of the class. I took the idea to instantiate the sessionfactory in a static constructor from <a href="http://www.theserverside.net/tt/articles/showarticle.tss?id=NHibernateP2">an nice article on theserverside</a>. A static constructor fires the moment the class is loaded. That is the moment the class is first touched by running code. In the original code the configuration is loaded from a configuration file. My problem with that is that I want to be independent from that for reasons of testability and custom configuration. Most settings can be hard coded but something like the database connectionstring has to be set from code. A static constructor does not have any parameters and I can not set any members, the moment I touch the class the static constructor fires first and I&#8217;m too late. What does work is a small helper class. </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">internal</span><span style="color: black"> </span><span style="color: blue">class</span><span style="color: black"> </span><span style="color: #2b91af">nHibernateConnectionHelper</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">internal</span><span style="color: black"> </span><span style="color: blue">static</span><span style="color: black"> </span><span style="color: blue">string</span><span style="color: black"> connectionString = </span><span style="color: #a31515">&quot;&quot;</span><span style="color: black">; </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">internal</span><span style="color: black"> </span><span style="color: blue">class</span><span style="color: black"> </span><span style="color: #2b91af">NhibernateHelper</span><span style="color: black"> : </span><span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">private</span><span style="color: black"> </span><span style="color: blue">static</span><span style="color: black"> </span><span style="color: blue">readonly</span><span style="color: black"> </span><span style="color: #2b91af">ISessionFactory</span><span style="color: black"> sessionFactory; </span></span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">static</span><span style="color: black"> NhibernateHelper() </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Configuration</span><span style="color: black"> cfg = </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Configuration</span><span style="color: black">(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">IDictionary</span><span style="color: black"> props = </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Hashtable</span><span style="color: black">(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; props.Add(</span><span style="color: #a31515">&quot;hibernate.dialect&quot;</span><span style="color: black">, </span><span style="color: #a31515">&quot;NHibernate.Dialect.MsSql2005Dialect&quot;</span><span style="color: black">); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; props.Add(</span><span style="color: #a31515">&quot;hibernate.connection.provider&quot;</span><span style="color: black">, </span><span style="color: #a31515">&quot;NHibernate.Connection.DriverConnectionProvider&quot;</span><span style="color: black">); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; props.Add(</span><span style="color: #a31515">&quot;hibernate.connection.connection_string&quot;</span><span style="color: black">, </span><span style="color: #2b91af"><strong>nHibernateConnectionHelper</strong></span><span style="color: black"><strong>.connectionString</strong>); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; cfg.SetProperties(props); </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; cfg.AddAssembly(</span><span style="color: #a31515">&quot;dlcr.domain&quot;</span><span style="color: black">); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; sessionFactory = cfg.BuildSessionFactory(); </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p>&#160;</p>
<p>When the nHibernateConnectionHelperClass is touched first the static constructor of the NhibernateHelper class reads the updated connectionstring. It is used like this: </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">class</span><span style="color: black"> </span><span style="color: #2b91af">NhibernateHelperFactory</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">static</span><span style="color: black"> </span><span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> CreateHelper(</span><span style="color: blue">string</span><span style="color: black"> dbConnection) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">nHibernateConnectionHelper</span><span style="color: black">.connectionString = dbConnection; </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">return</span><span style="color: black"> </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">NhibernateHelper</span><span style="color: black">(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>Now the static constructor works as intended. This trick also works when both classes are in the same cs file. How the sessionfactory itself is set up is in a <a href="http://codebetter.com/blogs/peter.van.ooijen/archive/2008/03/07/setting-and-retrieving-the-database-connectionstring-in-nhibernate.aspx">previous post</a>. </p>
<p>With the sessionfactory ready the nHibernatehelper can start its core business: managing a session. A new session is instantiated and opened in the instance constructor. This constructor performs some checks whether the sessionfactory will provide a session with the expected database. It reads the connectionstring from the sessionfactory property as described in the <a href="http://codebetter.com/blogs/peter.van.ooijen/archive/2008/03/07/setting-and-retrieving-the-database-connectionstring-in-nhibernate.aspx">previous post</a>. </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">internal</span><span style="color: black"> NhibernateHelper() </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">if</span><span style="color: black"> (</span><span style="color: blue">string</span><span style="color: black">.IsNullOrEmpty(</span><span style="color: #2b91af">nHibernateConnectionHelper</span><span style="color: black">.connectionString)) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">throw</span><span style="color: black"> </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Exception</span><span style="color: black">(</span><span style="color: #a31515">&quot;Sessionfactory needs a connectionstring&quot;</span><span style="color: black">); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">if</span><span style="color: black"> (</span><span style="color: #2b91af">nHibernateConnectionHelper</span><span style="color: black">.connectionString != connectionString) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">throw</span><span style="color: black"> </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Exception</span><span style="color: black">(</span><span style="color: blue">string</span><span style="color: black">.Format(</span><span style="color: #a31515">&quot;Sessionfactory connection allready initialized as {0}&quot;</span><span style="color: black">,connectionString)); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; currentSession = sessionFactory.OpenSession(); </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>As my nHibernateHelper objects wrap up an unmanaged resource (the database connection in the currentSession object) it has to implement IDisposable. The session object itself also implements IDisposable so the helper&#8217;s implementation can be pretty straightforward. </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">void</span><span style="color: black"> Dispose() </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; currentSession.Dispose(); </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>The only thing exposed is the nHibernateHelperFactory which servers IHibernateHelper objects. My IHibernateHelper is pretty straightforward </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">interface</span><span style="color: black"> </span><span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> : </span><span style="color: #2b91af">IDisposable</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: #2b91af">IQuery</span><span style="color: black"> Query(</span><span style="color: blue">string</span><span style="color: black"> className); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: #2b91af">IQuery</span><span style="color: black"> Query(</span><span style="color: blue">string</span><span style="color: black"> className, </span><span style="color: blue">string</span><span style="color: black"> propertyName, </span><span style="color: blue">string</span><span style="color: black"> propertyValue); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: #2b91af">IQuery</span><span style="color: black"> Query(</span><span style="color: blue">string</span><span style="color: black"> className, </span><span style="color: blue">string</span><span style="color: black"> propertyName, </span><span style="color: blue">long</span><span style="color: black"> propertyValue); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: #2b91af">IQuery</span><span style="color: black"> Query(</span><span style="color: blue">string</span><span style="color: black"> className, </span><span style="color: blue">string</span><span style="color: black"> whereClause); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">void</span><span style="color: black"> Save(</span><span style="color: blue">object</span><span style="color: black"> domainObject); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">void</span><span style="color: black"> Save(</span><span style="color: blue">object</span><span style="color: black">[] domainObjects); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">void</span><span style="color: black"> Delete(</span><span style="color: blue">object</span><span style="color: black"> domainObject); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>It has methods to query, save or delete objects. These are the methods my repository needs to interact with the database. This is a sample repository </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">class</span><span style="color: black"> </span><span style="color: #2b91af">Repository</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">private</span><span style="color: black"> </span><span style="color: blue">readonly</span><span style="color: black"> </span><span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> nhh; </span></span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">public</span><span style="color: black"> Repository(</span><span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> nHhibernateHelper) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; nhh = nHhibernateHelper; </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">public</span><span style="color: black"> </span><span style="color: #2b91af">IList</span><span style="color: black">&lt;</span><span style="color: #2b91af">IBoeking</span><span style="color: black">&gt; Boekingen() </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">return</span><span style="color: black"> nhh.Query(</span><span style="color: #a31515">&quot;Boeking&quot;</span><span style="color: black">).List&lt;</span><span style="color: #2b91af">IBoeking</span><span style="color: black">&gt;(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">public</span><span style="color: black"> </span><span style="color: #2b91af">IBTWpercentage</span><span style="color: black"> BTWpercentage(</span><span style="color: blue">string</span><span style="color: black"> naam) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">IQuery</span><span style="color: black"> query = nhh.Query(</span><span style="color: #a31515">&quot;BTWpercentage&quot;</span><span style="color: black">, </span><span style="color: #a31515">&quot;Omschrijving&quot;</span><span style="color: black">, naam); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">return</span><span style="color: black"> query.UniqueResult&lt;</span><span style="color: #2b91af">IBTWpercentage</span><span style="color: black">&gt;(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">void</span><span style="color: black"> Save(</span><span style="color: blue">object</span><span style="color: black"> o) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; nhh.Save(o); </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>The helper is injected in the repository&#8217;s constructor. For testing purposes I could also inject a mock. </p>
<p>The overall result is that by using a disposable helper I&#8217;m in full control of the connection to the database and I have all nHibernate&#8217;s benefits like lazy loading. </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">[</span><span style="color: #2b91af">Test</span><span style="color: black">] </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: blue">public</span><span style="color: black"> </span><span style="color: blue">void</span><span style="color: black"> CanDemoHibernate() </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">{ </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160; </span><span style="color: blue">using</span><span style="color: black"> (<span style="color: #2b91af">INhibernateHelper</span><span style="color: black"> nhl = </span><span style="color: #2b91af">NhibernateHelperFactory</span><span style="color: black">.CreateHelper(</span><span style="color: #a31515">&quot;Data Source=.;Initial Catalog=DLCR;Integrated Security=True&quot;</span><span style="color: black">)</span></span><span style="color: black">) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">Repository</span><span style="color: black"> rps = </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Repository</span><span style="color: black">(nhl)</span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">IBoeking</span><span style="color: black"> bks = </span><span style="color: #2b91af">StubFactory</span><span style="color: black">.BoekingStub(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">IBTWpercentage</span><span style="color: black"> bts = </span><span style="color: #2b91af">StubFactory</span><span style="color: black">.BTWstub(); </span></span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Boeking</span><span style="color: black"> bk = </span><span style="color: blue">new</span><span style="color: black"> </span><span style="color: #2b91af">Boeking</span><span style="color: black">(); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; bk.Omschrijving = bks.Omschrijving; </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; bk.Totaal = bks.Totaal; </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; bk.BTW = bts.Percentage; </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; rps.Save(bk); </span></p>
<p style="background: white">&#160;&#160; </p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: green">// Lazy load ahead</span><span style="color: black"> </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">ISet</span><span style="color: black">&lt;</span><span style="color: #2b91af">BoekingsRegel</span><span style="color: black">&gt; regels = bk.Regels; </span></span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: blue">foreach</span><span style="color: black"> (</span><span style="color: #2b91af">BoekingsRegel</span><span style="color: black"> regel </span><span style="color: blue">in</span><span style="color: black"> regels) </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; { </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Console</span><span style="color: black">.Write(regel.DeDato); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; tab(); </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Console</span><span style="color: black">.Write(regel.Links); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; tab(); </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Console</span><span style="color: black">.WriteLine(regel.Rechts); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160;&#160;&#160;&#160;&#160; } </span></p>
<p style="background: white"><span style="font-size: 13pt;font-family: courier new"><span style="color: black">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="color: #2b91af">Assert</span><span style="color: black">.Greater(regels.Count, 0); </span></span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">&#160;&#160;&#160; } </span></p>
<p style="background: white"><span style="font-size: 13pt;color: black;font-family: courier new">} </span></p>
<p>&#160;</p>
<p>By <strong><em>using</em></strong> the helper I will be sure the session is always properly closed, also when an exception is hit. </p>
<p>Perhaps I&#8217;m somewhat over concerned when it comes to keeping control over open connections. Once <a href="http://codebetter.com/blogs/peter.van.ooijen/archive/2005/11/08/134418.aspx">I doubted ado.net&#8217;s connection pooling</a> only to find out that works very well. Also nHibernate does a good job of keeping the number of open connection&#8217;s under control. When I open multiple repositories each using it&#8217;s own nHibernateHelper object these will all use the same connection. My main point is that my helper gives me the feeling I&#8217;m still in control without sacrificing performance or functionality. </p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/petervanooijen/category/coding/" title="View all posts in Coding" rel="category tag">Coding</a>, <a href="http://codebetter.com/petervanooijen/category/data/" title="View all posts in Data" rel="category tag">Data</a>, <a href="http://codebetter.com/petervanooijen/category/featured/" title="View all posts in Featured" rel="category tag">Featured</a>. Bookmark the <a href="http://codebetter.com/petervanooijen/2008/03/26/wrapping-up-nhibernate/" title="Permalink to Wrapping up nHibernate" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/petervanooijen/2008/03/26/wrapping-up-nhibernate/feed/" title="Comments RSS to Wrapping up nHibernate" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-532 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/petervanooijen/2008/03/07/setting-and-retrieving-the-database-connectionstring-in-nhibernate/" rel="prev"><span class="meta-nav">&larr;</span> Setting and retrieving the database connectionstring in nHibernate</a></div>
					<div class="nav-next"><a href="http://codebetter.com/petervanooijen/2008/04/04/wrapping-up-nhibernate-in-repositories/" rel="next">Wrapping up nHibernate in repositories <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-2583">
					<div id="dsq-comment-header-2583" class="dsq-comment-header">
						<cite id="dsq-cite-2583">
								<span id="dsq-author-user-2583">cristian</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2583" class="dsq-comment-body">
						<div id="dsq-comment-message-2583" class="dsq-comment-message"><p>Nice pattern! Throw in some generics and it&#8217;s even better.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2584">
					<div id="dsq-comment-header-2584" class="dsq-comment-header">
						<cite id="dsq-cite-2584">
								<span id="dsq-author-user-2584">Rui Santos</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2584" class="dsq-comment-body">
						<div id="dsq-comment-message-2584" class="dsq-comment-message"><p>It seems to me that the INhibernateHelper shouldn&#8217;t be disposed by Repository. It an injected dependency, it isn&#8217;t created be Repository therefore shouldn&#8217;t be disposed be it. </p>
<p>Cheers,<br />
Rui</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2585">
					<div id="dsq-comment-header-2585" class="dsq-comment-header">
						<cite id="dsq-cite-2585">
								<span id="dsq-author-user-2585">Rui Santos</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2585" class="dsq-comment-body">
						<div id="dsq-comment-message-2585" class="dsq-comment-message"><p>&#8230; &#8220;it isn&#8217;t created by Repository therefore shouldn&#8217;t be disposed by it&#8221;.</p>
<p>Why? I would like to do something like this.</p>
<p>INhibernateHelper nhl = NhibernateHelperFactory.CreateHelper(&#8220;&#8230;&#8221;);</p>
<p>Repository rep1 = new Repository(nhl);<br />
Repository rep2 = new Repository(nhl);</p>
<p>Who disposes INhibernateHelper? rep1 or rep2.</p>
<p>maybe &#8230;</p>
<p>using(INhibernateHelper nhl = NhibernateHelperFactory.CreateHelper(&#8220;&#8230;&#8221;))<br />
{<br />
Repository rep1 = new Repository(nhl);<br />
// do stuff with rep1<br />
Repository rep2 = new Repository(nhl);<br />
// do stuff with rep2</p>
<p>nhl.Commit();<br />
}</p>
<p>cheers,<br />
rui</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2586">
					<div id="dsq-comment-header-2586" class="dsq-comment-header">
						<cite id="dsq-cite-2586">
	http://codebetter.com/blogs/peter.van.ooijen/							<span id="dsq-author-user-2586">pvanooijen</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2586" class="dsq-comment-body">
						<div id="dsq-comment-message-2586" class="dsq-comment-message"><p>@Rui : you&#8217;re absolutely right! Thanks for setting that straight. I&#8217;ve corrected the post itself</p>
<p>@cristian : I will dive deeper into that in a later post. Which will also look at the actual implementaion of the other helper methods.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2587">
					<div id="dsq-comment-header-2587" class="dsq-comment-header">
						<cite id="dsq-cite-2587">
	http://www.flux88.com							<span id="dsq-author-user-2587">Ben Scheirman</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2587" class="dsq-comment-body">
						<div id="dsq-comment-message-2587" class="dsq-comment-message"><p>a couple of things to note:  </p>
<p>* session.close != connection.close</p>
<p>Closing the session doesn&#8217;t necessarily prevent you from lazy loading.  The session just has to be around, because it carries with it an identity map and some other internal state required for lazy loading to work.  Re-opening the connection is not an issue.  Just don&#8217;t dispose the session.</p>
<p>*  your repository should line up with domain entities</p>
<p>If you have a customer, you&#8217;d have CustomerRepository.  If customer had addresses (value objects), then you&#8217;d retrieve them through the customer object itself (or via query on Customer service, depending on your preference) but there wouldn&#8217;t be an AddressRepository.  DDD by Evans can shed some light on this.  There shouldn&#8217;t be one repository for all entities.  RhinoCommons has a good implementation of IRepository<t> where T is your entity.</p>
<p>*  if you&#8217;re looking at using this in ASP.NET, it is a good idea to scope your session in an HttpModule, so you can open it at the begin request and close at the end.  This offers a clean lifecycle.  Shorter ones can prevent you from benefitting from cache &#038; lazy loading, and longer ones can stay around WAY too long hogging limited resources.  Take a look at SessionScope, also in RhinoCommons.</p>
<p>Also, you might be interested in updating your sample to 2.0, which was just released <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </t></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2588">
					<div id="dsq-comment-header-2588" class="dsq-comment-header">
						<cite id="dsq-cite-2588">
	http://codebetter.com/blogs/peter.van.ooijen/							<span id="dsq-author-user-2588">pvanooijen</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2588" class="dsq-comment-body">
						<div id="dsq-comment-message-2588" class="dsq-comment-message"><p>@Ben,</p>
<p>Session close does do  more than just clossing the connection. Perhaps it does not even close the actuel connection. You can also work with a long running session in nHibernate to which your code connects and disconnects. I&#8217;m not doing that here. Performing a session close here will lead to lazy load exceptions.</p>
<p>You&#8217;re quite right about the repositories. This here is to much of a hap snap thing pointing at a direction to continue. As promised, I&#8217;ll elaborate on that later.</p>
<p>In most asp.net examples it&#8217;s common practice to store the session in the httpcontext. But most of the samples don&#8217;t pay much attention to the sessionfactory. Be my guest and store this helperobject in the session.</p>
<p>2.0 ? That crept in quietely <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2589">
					<div id="dsq-comment-header-2589" class="dsq-comment-header">
						<cite id="dsq-cite-2589">
								<span id="dsq-author-user-2589">David</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2589" class="dsq-comment-body">
						<div id="dsq-comment-message-2589" class="dsq-comment-message"><p>I&#8217;m new to nHibernate and I&#8217;m wondering about the performance cost of creating a new session using OpenSession() especially when a complex asp.net page could ask the Repository 10&#8242;s of times.  Or am I going about it wrong?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2590">
					<div id="dsq-comment-header-2590" class="dsq-comment-header">
						<cite id="dsq-cite-2590">
	http://codebetter.com/members/pvanooijen/default.aspx							<span id="dsq-author-user-2590">pvanooijen</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2590" class="dsq-comment-body">
						<div id="dsq-comment-message-2590" class="dsq-comment-message"><p>Creating the sessionfactory is expensive. Opening a session is not. Compare it to Connection.Open in ADO.NET</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/petervanooijen/2008/03/26/wrapping-up-nhibernate/ ';
	var disqus_identifier = '532 /blogs/peter.van.ooijen/archive/2008/03/26/wrapping-up-nhibernate.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'codebetterpetergekkosblog';
	var disqus_title = "Wrapping up nHibernate";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData â€” fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=532');
		});
					};
	var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/petervanooijen\/2008\/03\/26\/wrapping-up-nhibernate\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">Small bio</h3><div class="ub-grav" style="margin:5px 5px 0px 5px;float: none;"><img alt='' src='http://1.gravatar.com/avatar/5cb0e972c5e405e6bff7e7f2da237c6d?s=96&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D96&amp;r=G' class='avatar avatar-96 photo' height='96' width='96' /></div>
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="tag_cloud-3" class="widget-container widget_tag_cloud"><h3 class="widget-title">Post categories</h3><div class="tagcloud"><a href='http://codebetter.com/petervanooijen/category/asp-net/' class='tag-link-1725' title='67 topics' style='font-size: 16.3151515152pt;'>ASP.NET</a>
<a href='http://codebetter.com/petervanooijen/category/chatter/' class='tag-link-6709' title='69 topics' style='font-size: 16.4848484848pt;'>Chatter</a>
<a href='http://codebetter.com/petervanooijen/category/coding/' class='tag-link-6706' title='49 topics' style='font-size: 15.2121212121pt;'>Coding</a>
<a href='http://codebetter.com/petervanooijen/category/data/' class='tag-link-6708' title='45 topics' style='font-size: 14.8727272727pt;'>Data</a>
<a href='http://codebetter.com/petervanooijen/category/featured/' class='tag-link-1356' title='6 topics' style='font-size: 8pt;'>Featured</a>
<a href='http://codebetter.com/petervanooijen/category/hardware/' class='tag-link-4927' title='13 topics' style='font-size: 10.5454545455pt;'>Hardware</a>
<a href='http://codebetter.com/petervanooijen/category/mobile/' class='tag-link-6712' title='13 topics' style='font-size: 10.5454545455pt;'>Mobile</a>
<a href='http://codebetter.com/petervanooijen/category/outofcontrol/' class='tag-link-6705' title='13 topics' style='font-size: 10.5454545455pt;'>Out+of+control</a>
<a href='http://codebetter.com/petervanooijen/category/tabletpc/' class='tag-link-6707' title='45 topics' style='font-size: 14.8727272727pt;'>Tablet+PC</a>
<a href='http://codebetter.com/petervanooijen/category/uncategorized/' class='tag-link-1044' title='318 topics' style='font-size: 22pt;'>Uncategorized</a>
<a href='http://codebetter.com/petervanooijen/category/usergroupsandmeetings/' class='tag-link-6711' title='25 topics' style='font-size: 12.7515151515pt;'>User+groups+and+meetings</a></div>
</li>		<li id="recent-posts-3" class="widget-container widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
				<li><a href="http://codebetter.com/petervanooijen/2011/01/31/c-for-the-iphone-monotouch-is-here-to-stay/" title="C# for the iPhone: Monotouch is here to stay">C# for the iPhone: Monotouch is here to stay</a></li>
				<li><a href="http://codebetter.com/petervanooijen/2010/12/28/seasons-gifts-from-the-monotouch-iphone-treasure-chest-background-gps-tasks-and-uicontrol/" title="Seasons gifts from the MonoTouch (iPhone) treasure chest. Background (GPS) tasks and UIControl">Seasons gifts from the MonoTouch (iPhone) treasure chest. Background (GPS) tasks and UIControl</a></li>
				<li><a href="http://codebetter.com/petervanooijen/2010/11/05/kalifescope-and-monotouch-from-idea-to-the-appstore/" title="Kalifescope and Monotouch, from idea to the AppStore">Kalifescope and Monotouch, from idea to the AppStore</a></li>
				<li><a href="http://codebetter.com/petervanooijen/2010/10/28/monotouch-your-c-app-on-a-real-iphone/" title="Monotouch: your C# app on a real iPhone">Monotouch: your C# app on a real iPhone</a></li>
				<li><a href="http://codebetter.com/petervanooijen/2010/09/28/monotouch-drawing-an-image-pixel-by-pixel/" title="Monotouch: drawing an image pixel by pixel">Monotouch: drawing an image pixel by pixel</a></li>
				</ul>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.Gekko-Software.nl" title="Website Gekko Software">My company</a></li>

	</ul>
</li>
<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Post archive</h3>		<ul>
			<li><a href='http://codebetter.com/petervanooijen/2011/01/' title='January 2011'>January 2011</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/12/' title='December 2010'>December 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/11/' title='November 2010'>November 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/10/' title='October 2010'>October 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/09/' title='September 2010'>September 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/08/' title='August 2010'>August 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/07/' title='July 2010'>July 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/06/' title='June 2010'>June 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/05/' title='May 2010'>May 2010</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/04/' title='April 2010'>April 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/03/' title='March 2010'>March 2010</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/02/' title='February 2010'>February 2010</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2010/01/' title='January 2010'>January 2010</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/12/' title='December 2009'>December 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/11/' title='November 2009'>November 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/10/' title='October 2009'>October 2009</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/09/' title='September 2009'>September 2009</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/08/' title='August 2009'>August 2009</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/07/' title='July 2009'>July 2009</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/06/' title='June 2009'>June 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/05/' title='May 2009'>May 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/04/' title='April 2009'>April 2009</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/03/' title='March 2009'>March 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/02/' title='February 2009'>February 2009</a>&nbsp;(3)</li>
	<li><a href='http://codebetter.com/petervanooijen/2009/01/' title='January 2009'>January 2009</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/12/' title='December 2008'>December 2008</a>&nbsp;(3)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/11/' title='November 2008'>November 2008</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/10/' title='October 2008'>October 2008</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/09/' title='September 2008'>September 2008</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/08/' title='August 2008'>August 2008</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/07/' title='July 2008'>July 2008</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/06/' title='June 2008'>June 2008</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/05/' title='May 2008'>May 2008</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/04/' title='April 2008'>April 2008</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/03/' title='March 2008'>March 2008</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/02/' title='February 2008'>February 2008</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2008/01/' title='January 2008'>January 2008</a>&nbsp;(3)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/12/' title='December 2007'>December 2007</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/11/' title='November 2007'>November 2007</a>&nbsp;(3)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/10/' title='October 2007'>October 2007</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/09/' title='September 2007'>September 2007</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/08/' title='August 2007'>August 2007</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/07/' title='July 2007'>July 2007</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/06/' title='June 2007'>June 2007</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/05/' title='May 2007'>May 2007</a>&nbsp;(1)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/04/' title='April 2007'>April 2007</a>&nbsp;(2)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/03/' title='March 2007'>March 2007</a>&nbsp;(3)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/02/' title='February 2007'>February 2007</a>&nbsp;(6)</li>
	<li><a href='http://codebetter.com/petervanooijen/2007/01/' title='January 2007'>January 2007</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/12/' title='December 2006'>December 2006</a>&nbsp;(6)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/11/' title='November 2006'>November 2006</a>&nbsp;(7)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/10/' title='October 2006'>October 2006</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/09/' title='September 2006'>September 2006</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/08/' title='August 2006'>August 2006</a>&nbsp;(6)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/07/' title='July 2006'>July 2006</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/06/' title='June 2006'>June 2006</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/05/' title='May 2006'>May 2006</a>&nbsp;(6)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/04/' title='April 2006'>April 2006</a>&nbsp;(8)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/03/' title='March 2006'>March 2006</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/02/' title='February 2006'>February 2006</a>&nbsp;(10)</li>
	<li><a href='http://codebetter.com/petervanooijen/2006/01/' title='January 2006'>January 2006</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/12/' title='December 2005'>December 2005</a>&nbsp;(4)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/11/' title='November 2005'>November 2005</a>&nbsp;(7)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/10/' title='October 2005'>October 2005</a>&nbsp;(12)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/09/' title='September 2005'>September 2005</a>&nbsp;(11)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/08/' title='August 2005'>August 2005</a>&nbsp;(11)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/07/' title='July 2005'>July 2005</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/06/' title='June 2005'>June 2005</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/05/' title='May 2005'>May 2005</a>&nbsp;(11)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/04/' title='April 2005'>April 2005</a>&nbsp;(12)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/03/' title='March 2005'>March 2005</a>&nbsp;(11)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/02/' title='February 2005'>February 2005</a>&nbsp;(27)</li>
	<li><a href='http://codebetter.com/petervanooijen/2005/01/' title='January 2005'>January 2005</a>&nbsp;(15)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/12/' title='December 2004'>December 2004</a>&nbsp;(12)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/11/' title='November 2004'>November 2004</a>&nbsp;(12)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/10/' title='October 2004'>October 2004</a>&nbsp;(11)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/09/' title='September 2004'>September 2004</a>&nbsp;(9)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/08/' title='August 2004'>August 2004</a>&nbsp;(8)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/07/' title='July 2004'>July 2004</a>&nbsp;(15)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/06/' title='June 2004'>June 2004</a>&nbsp;(13)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/05/' title='May 2004'>May 2004</a>&nbsp;(13)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/04/' title='April 2004'>April 2004</a>&nbsp;(15)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/03/' title='March 2004'>March 2004</a>&nbsp;(21)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/02/' title='February 2004'>February 2004</a>&nbsp;(23)</li>
	<li><a href='http://codebetter.com/petervanooijen/2004/01/' title='January 2004'>January 2004</a>&nbsp;(14)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/12/' title='December 2003'>December 2003</a>&nbsp;(15)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/11/' title='November 2003'>November 2003</a>&nbsp;(20)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/10/' title='October 2003'>October 2003</a>&nbsp;(30)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/09/' title='September 2003'>September 2003</a>&nbsp;(13)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/08/' title='August 2003'>August 2003</a>&nbsp;(12)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/07/' title='July 2003'>July 2003</a>&nbsp;(5)</li>
	<li><a href='http://codebetter.com/petervanooijen/2003/06/' title='June 2003'>June 2003</a>&nbsp;(4)</li>
		</ul>
</li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.342 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-31 13:01:00 -->
<!-- super cache -->