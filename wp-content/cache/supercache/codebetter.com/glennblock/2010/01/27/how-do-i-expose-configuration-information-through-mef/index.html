<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>How do I expose configuration information through MEF? | Glenn Block</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/glennblock/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/glennblock/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Hosting MEF within application and libraries.' href='http://codebetter.com/glennblock/2010/01/15/hosting-mef-within-your-applications/' />
<link rel='next' title='Exporting dynamically changing configuration values' href='http://codebetter.com/glennblock/2010/01/31/exporting-dynamically-changing-configuration-values/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/glennblock/?p=115' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,158] -->
<link rel="canonical" href="http://codebetter.com/glennblock/2010/01/27/how-do-i-expose-configuration-information-through-mef/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=3981720249">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-115" class="post-115 post type-post status-publish format-standard hentry category-mef category-silverlight category-wpf">
					<h1 class="entry-title">How do I expose configuration information through MEF?</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/glennblock/author/glennblock/" title="View all posts by Glenn Block">Glenn Block</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/glennblock/2010/01/27/how-do-i-expose-configuration-information-through-mef/" title="7:01 pm" rel="bookmark"><span class="entry-date">January 27, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/glennblock/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/glennblock/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>&lt;Goal&gt;Post in 15 mins or less <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> &lt;/Goal&gt;</p>
<p>This question which recently popped on our <a href="http://mef.codeplex.com/Thread/View.aspx?ThreadId=82114">forums</a> is one of the common questions we hear from customers. In this particular case, wcoenen (the person in the forums) had recently used information that he wanted to pull from configuration and pipe to a part. He solved the problem by creating a special configuration provider service which he injected into the part to provide the config. The code for the consumer looked like this:</p>
<pre><pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">[ImportingConstructor]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"><span style="color: #0000ff">public</span> RecentlyUsedTracker(IConfigurationProvider configurationProvider)
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">{   
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">this</span>.recentlyUsedFile = configurationFile.GetValue&lt;<span style="color: #0000ff">string</span>&gt;("<span style="color: #8b0000">recentlyUsedTracker.File</span>");   
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">this</span>.maxItems = configurationProvider.GetValue&lt;<span style="color: #0000ff">int</span>&gt;("<span style="color: #8b0000">recentlyUsedTracker.maxItems</span>");
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">}</pre>
<p>As you can see above RecentlyUsedTracker takes an import of configuration provider. The solution above does work. The biggest issue wcoenen raised is that coupling of the part to the config provider makes testing more difficult. It requires a mock service to be passed in to every test. Another subtlety is that you won&rsquo;t know if the data is actually present until the code executes.</p>
<h1>An alternative approach, use property exports.</h1>
<p>A different way to approach this problem is to actually export the individual configuration values. We can still use the generic configuration provider, but we can keep a nice separation of concerns.&nbsp; The part can then import these values like any other import. MEF provides a very powerful facility for doing this called property exports. A property export is a property which is decorated with an export attribute. It is special because it provides a place for you to execute custom logic for retrieving a value and returning it to MEF, i.e. a custom factory. This is a different model than the traditional class-level exports which MEF is responsible for the creation . So using a property export we can easily surface configuration information and we can use any method we choose to get the value including the provider. For example, take a look at the code below.</p>
<p>&nbsp;</p>
<pre><pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"><span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> RecentlyUsedTrackerConfiguration
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">{
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">private</span> IConfigurationProvider _provider;
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"></pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [ImportingConstructor]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> RecentlyUsedTrackerConfiguration(IConfigurationProvider provider)
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  {
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">     _provider = provider;
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">     File = _provider.GetValue&lt;<span style="color: #0000ff">string</span>&gt;("<span style="color: #8b0000">recentlyUsedTracker.file</span>");
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">     MaxItems = provider.GetValue&lt;<span style="color: #0000ff">string</span>&gt;("<span style="color: #8b0000">recentlyUsedTracker.maxItems</span>");
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  }
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"></pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [Export("<span style="color: #8b0000">RecentlyUsedTracker.File</span>")]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> <span style="color: #0000ff">string</span> File {<span style="color: #0000ff">get</span>;<span style="color: #0000ff">private</span> <span style="color: #0000ff">set</span>;}
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"></pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [Export("<span style="color: #8b0000">RecentlyUsedTracker.MaxItems</span>")]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> <span style="color: #0000ff">int</span> MaxItems {<span style="color: #0000ff">get</span>;<span style="color: #0000ff">private</span> <span style="color: #0000ff">set</span>;}
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">}
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"></pre>
<p>RecentlyUsedTrackerConfiguration IS a part as you can see it has an importing constructor which takes a provider. But instead of exporting itself, it exports it&rsquo;s properties which use the provider to get the values. It then assigns a string contract to each export which correlates to the configuration item it is exporting.</p>
<p><strong>Note: You can&nbsp; make this more compile safe, by using constants or creating custom export attributes</strong></p>
<p>Now let&rsquo;s take a look at our consumer.</p>
<pre><pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">[Export]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"><span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> RecentlyUsedTracker {
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [Import("<span style="color: #8b0000">RecentlyUsedTracker.File</span>")]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> <span style="color: #0000ff">string</span> File {<span style="color: #0000ff">get</span>;<span style="color: #0000ff">set</span>;}
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"> 
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [Import("<span style="color: #8b0000">RecnetlyUsedTracker.MaxItems</span>")]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> <span style="color: #0000ff">int</span> MaxItems {<span style="color: #0000ff">get</span>;<span style="color: #0000ff">set</span>;}
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">}
</pre>
<p>RecentlyUsedTracker imports File and MaxItems. It&rsquo;s nice and clean (aside from the attributes <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  ). We can now easily test RecentlyUsedTracker, as he has no dependency on a provider. All he cares about is that the exports he needs are in the container.</p>
<p>&nbsp;</p>
<h1>An additional benefit the above approach introduces.</h1>
<p>If you read my my or <a href="http://blogs.msdn.com/nblumhardt">Nick&rsquo;s</a> blog&rsquo;s, then you&rsquo;ve heard us talk about Stable Composition and Rejection. Parts that don&rsquo;t have there required dependencies are rejected. That means that RecentlyUsedTracker will be rejected unless the config items he needs are present. It&rsquo;s consistent with the way the rest of MEF works it ensures consistency of the system. Of course if you <em>want</em> to allow the part to be created even though the data is not present, you can always set the AllowDefault property on Import = true.</p>
<p>&nbsp;</p>
<h1>What else can use this approach for?</h1>
<p>Using property exports has a million and one uses. Any time you need to integrate legacy or non-MEF components to MEF, property exports are usually a sure win! For example, let&rsquo;s say you have an existing third-party class which you use in your system which is sealed. You can create that class in a property export and surface it to MEF. It&rsquo;s also a great way to surface singletons that you don&rsquo;t want parts to depend on. What do I mean? Check the code below as an example.</p>
<pre><pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px"><span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> ApplicationPart
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">{
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  [Export]
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  <span style="color: #0000ff">public</span> Application App {
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">    <span style="color: #0000ff">get</span>{ <span style="color: #0000ff">return</span> Application.Current;
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">  }
</pre>
<pre style="background-color: #ffffff;margin: 0em;width: 100%;font-family: consolas,'Courier New',courier,monospace;font-size: 10px">}</pre>
<p><strong>Any questions?</strong></p>
<div class="shr-publisher-115"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/glennblock/category/mef/" title="View all posts in MEF" rel="category tag">MEF</a>, <a href="http://codebetter.com/glennblock/category/silverlight/" title="View all posts in silverlight" rel="category tag">silverlight</a>, <a href="http://codebetter.com/glennblock/category/wpf/" title="View all posts in WPF" rel="category tag">WPF</a>. Bookmark the <a href="http://codebetter.com/glennblock/2010/01/27/how-do-i-expose-configuration-information-through-mef/" title="Permalink to How do I expose configuration information through MEF?" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/glennblock/2010/01/27/how-do-i-expose-configuration-information-through-mef/feed/" title="Comments RSS to How do I expose configuration information through MEF?" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-115 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/glennblock/2010/01/15/hosting-mef-within-your-applications/" rel="prev"><span class="meta-nav">&larr;</span> Hosting MEF within application and libraries.</a></div>
					<div class="nav-next"><a href="http://codebetter.com/glennblock/2010/01/31/exporting-dynamically-changing-configuration-values/" rel="next">Exporting dynamically changing configuration values <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-507">
                    <div id="dsq-comment-header-507" class="dsq-comment-header">
                        <cite id="dsq-cite-507">
                                <span id="dsq-author-user-507">natl</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-507" class="dsq-comment-body">
                        <div id="dsq-comment-message-507" class="dsq-comment-message"><p>Thanks for answering that. What if the configuration can be changed dynamically? </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-508">
                    <div id="dsq-comment-header-508" class="dsq-comment-header">
                        <cite id="dsq-cite-508">
    http://codebetter.com/members/gblock/default.aspx                            <span id="dsq-author-user-508">Glenn Block</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-508" class="dsq-comment-body">
                        <div id="dsq-comment-message-508" class="dsq-comment-message"><p>Good question. If you change the part to have a creation policy non-shared then each pull on the config will create a new part instance rather than sharing the same. If that were the case then I would advise putting the logic in the getter rather than the ctor as it would be expensive to pull all values.</p>
<p>If what you are asking about is having the config be recomposable, that is a whole other ball of wax and will require a more sophisticated route. </p>
<p>Do you need that?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-509">
                    <div id="dsq-comment-header-509" class="dsq-comment-header">
                        <cite id="dsq-cite-509">
                                <span id="dsq-author-user-509">Mike</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-509" class="dsq-comment-body">
                        <div id="dsq-comment-message-509" class="dsq-comment-message"><p>Could you not create a catalog that exposed automatically exposed the values from the appSettings section of the config file?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-510">
                    <div id="dsq-comment-header-510" class="dsq-comment-header">
                        <cite id="dsq-cite-510">
                                <span id="dsq-author-user-510">natl</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-510" class="dsq-comment-body">
                        <div id="dsq-comment-message-510" class="dsq-comment-message"><p>just because some of the configuration can be  changed by the user. If you define a singleton configuration object, you can change it at anytime.. configuration injection via property import won&#8217;t help in this case&#8230;</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-511">
                    <div id="dsq-comment-header-511" class="dsq-comment-header">
                        <cite id="dsq-cite-511">
    http://codebetter.com/members/gblock/default.aspx                            <span id="dsq-author-user-511">Glenn Block</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-511" class="dsq-comment-body">
                        <div id="dsq-comment-message-511" class="dsq-comment-message"><p>@Mike</p>
<p>You could definitely do that. I would opt for using a custom ExportProvider over a catalog though. The reason is because ExportProviders are designed to just return values. </p>
<p>Catalogs are ideal when you are representing parts which have imports that need to be satisifed by the container. In the case of config, you are normally dealing with values pulled from somewhere (app.config, a database, etc) thus EPs are ideal.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-512">
                    <div id="dsq-comment-header-512" class="dsq-comment-header">
                        <cite id="dsq-cite-512">
    http://codebetter.com/members/gblock/default.aspx                            <span id="dsq-author-user-512">Glenn Block</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-512" class="dsq-comment-body">
                        <div id="dsq-comment-message-512" class="dsq-comment-message"><p>I see what  you are saying. There are several ways you could address it. In keeping with the spirit of keeping the testing simple, I think the following approach would work. Export a Func<t> rather than T. This gives the opportunity for the value to change everytime the func is accessed. MEF also supports method exports, which would work great for this scenario.</p>
<p>For example:</p>
<p>public class RecentlyUsedTrackerConfigiuration {<br />
  &#8230;</p>
<p>  [Export("RecentlyUsedTracker.File")]<br />
  public string GetRecentlFile() {<br />
    return _provider.GetValue<string>(&#8220;recentlyUsedTracker.file&#8221;);<br />
  }<br />
}</p>
<p>Above the export is a Func</string><string> rather than a string. The importer will import Func</string><string></p>
<p>[Export]<br />
public class RecentlyUsedTracker {</p>
<p>  [Import("RecentlyUsedTracker.File")]<br />
  public Func</string><string> File {get;set;}</p>
<p>   [Import("RecentlyUsedTracker.MaxItems")]<br />
  public int MaxItems {get;set;}<br />
}</p>
<p>As you can see above, method exports are  imported.</p>
<p>The next question might be what if one wants to observe that the object changes? If the importer needed to monitor changes, you could export an IObservable<t> instead. In that case you wouldn&#8217;t use a method export, but would revert back to a property.</p>
<p>Note: You could also have used a property export above instead of a method. The method export syntax is more readable and intuitive, which is why I opted for it.</p>
<p>Seem reasonable?</t></string></t></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-513">
                    <div id="dsq-comment-header-513" class="dsq-comment-header">
                        <cite id="dsq-cite-513">
    http://codebetter.com/members/gblock/default.aspx                            <span id="dsq-author-user-513">Glenn Block</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-513" class="dsq-comment-body">
                        <div id="dsq-comment-message-513" class="dsq-comment-message"><p>@natl I did a follow up post based on the dynamic config exports: <a href="http://codebetter.com/blogs/glenn.block/archive/2010/01/31/exporting-dynamically-changing-configuration-values.aspx" rel="nofollow">http://codebetter.com/blogs/glenn.block/archive/2010/01/31/exporting-dynamically-changing-configuration-values.aspx</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-514">
                    <div id="dsq-comment-header-514" class="dsq-comment-header">
                        <cite id="dsq-cite-514">
                                <span id="dsq-author-user-514">Abog</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-514" class="dsq-comment-body">
                        <div id="dsq-comment-message-514" class="dsq-comment-message"><p>I&#8217;m trying to use this approach to export a third party control. The problem I&#8217;m facing is that this control is a visual control and it is placed in the main page. So if I expose it through some  property in the Main page I cannot call SatisfyImports on that page anymore since it has exports in it.<br />
I guess I could move that property to some helper class, export it and then import to the Main page and to every other place needed but then i will have to add it in a code behind and loose the Blendability (whatever it is called). So I&#8217;d like the control to stay on the Main page (added in Xaml) but then I cannot think a way to export it.<br />
I hope i made it clear. Any suggestions are welcome</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/glennblock/2010/01/27/how-do-i-expose-configuration-information-through-mef/';
    var disqus_identifier = '115 /blogs/glenn.block/archive/2010/01/27/how-do-i-expose-configuration-information-through-mef.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'mytechnobabble';
    var disqus_title = "How do I expose configuration information through MEF?";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData â€” fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=115');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/glennblock\/2010\/01\/27\/how-do-i-expose-configuration-information-through-mef\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.501 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 21:03:32 -->
<!-- super cache -->