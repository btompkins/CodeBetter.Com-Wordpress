<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Using an NHibernate Formula to aid searching | Kyle Baley</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/kylebaley/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/kylebaley/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='YouTrack for OSS Projects, or “How to broadcast your issues”' href='http://codebetter.com/kylebaley/2010/07/30/youtrack-for-oss-projects-or-how-to-broadcast-your-issues/' />
<link rel='next' title='Tools for disparate teams: AgileZen Edition' href='http://codebetter.com/kylebaley/2010/08/18/tools-for-disparate-teams-agilezen-edition/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/kylebaley/?p=183' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,147] -->
<link rel="canonical" href="http://codebetter.com/kylebaley/2010/07/30/using-an-nhibernate-formula-to-aid-searching/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-183" class="post-183 post type-post status-publish format-standard hentry category-linq category-nhibernate">
					<h1 class="entry-title">Using an NHibernate Formula to aid searching</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley/author/kylebaley/" title="View all posts by Kyle Baley">Kyle Baley</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/kylebaley/2010/07/30/using-an-nhibernate-formula-to-aid-searching/" title="2:34 pm" rel="bookmark"><span class="entry-date">July 30, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/kylebaley/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/kylebaley/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><strong>Executive Summary</strong>: Use a formula in an NHibernate mapping to facilitate searching the entire string, “LastName, FirstName”, for a User object.</p>
<p>Will see how long this Executive Summary thing lasts. Getting tired of people wasting my time by posting comments saying I’m wasting their time. (I’m also working on an idea for curbing “<a href="http://codebetter.com/blogs/kyle.baley/archive/2010/07/28/why-java-or-how-to-describe-a-decision-process.aspx">Smells like fail</a>” comments as well but it’ll involve some serious changes to your browser. Or, based on the average age of people that say things like that, a call to your parents to discuss how much time you spend on Facebook.)</p>
<p>When I’m not Google Web Toolkittin’, I have a nice side project that I use to keep my .NET skills sharp, keep one foot in the door, and whatever other reason I can think of to avoid saying the real reason, which is “pay the bills”. Because one thing start-ups ain’t got a lot of is stable (read: any) income.</p>
<p>In said project, I have a page with an auto-suggest feature to search for users. I.e. you enter some text, and it finds any users with the entered text in the name and displays them in a dropdown. I’d show a screenshot but in the time between when I developed it and when I wrote this, the feature was dropped.</p>
<p>The mechanics of the auto-suggest might be the subject of another post but I doubt it because it’s been covered to death (though not so much in <a href="http://www.sencha.com/">ExtJS</a> which is what we’re using). I’m going to talk about what happens in the back-end. That is, how do I get the data from the database with NHibernate.</p>
<p>We’re using Linq to NHibernate so my first pass was straight-forward:</p>
<pre>public IList&lt;User&gt; Search(string searchText) {
    var session = NHibernateSession.Current;

    return ( from w in session.Linq&lt;User&gt;()
                where w.FirstName.Contains(searchText) || w.LastName.Contains(searchText)
                select w).ToList();
}</pre>
<p>This works exactly as one would expect. If the user enters &quot;will&quot;, it will display &quot;William F. Buckley&quot; and &quot;Ted Williams&quot; and &quot;William &#8216;Wild Bill&#8217; W. Williamson&quot; in the search results. Or rather, it will show &quot;Buckley, William F.&quot;, &quot;Williams, Ted&quot;, and &quot;Williamson, William &#8216;Wild Bill&#8217; W.&quot; because that&#8217;s how we&#8217;re displaying our search results.</p>
<p>And to facilitate that display, we have a Name property on the User object:</p>
<pre>public string Name {
   get { return LastName + &quot;, &quot; + FirstName; }
}</pre>
<p>Problem is that this search doesn&#8217;t cover a common scenario. What if the user types &#8216;Williams, T&#8217;? This would be a natural thing to do. They want Ted Williams, so they start typing Williams. The search results are too big and they are showing items in the &quot;Last, First&quot; format so it makes sense to keep typing and try to narrow it down further.</p>
<p>The code above will return zero results for such a search. Really what we want is to search the Name property, like so:</p>
<pre>public IList&lt;User&gt; Search(string searchText) {
    var session = NHibernateSession.Current;

    return ( from w in session.Linq&lt;User&gt;()
                where w.Name.Contains(searchText)
                select w).ToList();
}</pre>
<p>Which doesn&#8217;t work either because Name isn&#8217;t a database field and as yet, NHibernate is not able to parse formulas in your properties and convert them into SQL or Criterion.</p>
<p>But NHibernate *does* allow formulas if you describe the formula to it in the mapping. We&#8217;re using Fluent NHibernate (assuming it hasn&#8217;t been merged into the NHibernate project yet and completely replaced mapping files, which it should be):</p>
<pre>public class UserMapOverride : IAutoMappingOverride&lt;User&gt;
{
    public void Override(AutoMapping&lt;User&gt; mapping)
    {
        mapping.Map(x =&gt; x.Name).Formula(&quot;LastName + ', ' + FirstName&quot;);
    }
}</pre>
<p>And update the Name property in the User object accordingly: </p>
<pre>public virtual string Name { get; private set; }</pre>
<p>Now, our Search function works the way I want.</p>
<p>Kyle the Formulaic</p>
<div class="shr-publisher-183"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/kylebaley/category/linq/" title="View all posts in Linq" rel="category tag">Linq</a>, <a href="http://codebetter.com/kylebaley/category/nhibernate/" title="View all posts in NHibernate" rel="category tag">NHibernate</a>. Bookmark the <a href="http://codebetter.com/kylebaley/2010/07/30/using-an-nhibernate-formula-to-aid-searching/" title="Permalink to Using an NHibernate Formula to aid searching" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/kylebaley/2010/07/30/using-an-nhibernate-formula-to-aid-searching/feed/" title="Comments RSS to Using an NHibernate Formula to aid searching" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-183 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/kylebaley/2010/07/30/youtrack-for-oss-projects-or-how-to-broadcast-your-issues/" rel="prev"><span class="meta-nav">&larr;</span> YouTrack for OSS Projects, or “How to broadcast your issues”</a></div>
					<div class="nav-next"><a href="http://codebetter.com/kylebaley/2010/08/18/tools-for-disparate-teams-agilezen-edition/" rel="next">Tools for disparate teams: AgileZen Edition <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-1025">
                    <div id="dsq-comment-header-1025" class="dsq-comment-header">
                        <cite id="dsq-cite-1025">
    http://tunatoksoz.com                            <span id="dsq-author-user-1025">Tuna Toksoz</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1025" class="dsq-comment-body">
                        <div id="dsq-comment-message-1025" class="dsq-comment-message"><p>Perhaps NH Search would fit better, but yeah, would be an overkill. On the other hand, you may fall back to HQL and remove that Name property completely (with query only properties ayende. com/ Blog/ archive/ 2009/ 06/ 10/ nhibernate- ndash- query- only- properties. aspx).</p>
<p>I also wonder, can&#8217;t you do that in linq part? </p>
<p>return ( from w in session.Linq<user>()<br />
                where (w.Lastname+&#8221;, +w.FirstnameName).Contains(searchText)<br />
                select w).ToList();  </p>
<p>Also it coame to my attention: you&#8217;re probably using the old provider.</user></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1026">
                    <div id="dsq-comment-header-1026" class="dsq-comment-header">
                        <cite id="dsq-cite-1026">
    http://codebetter.com/members/kylebaley/default.aspx                            <span id="dsq-author-user-1026">Kyle Baley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1026" class="dsq-comment-body">
                        <div id="dsq-comment-message-1026" class="dsq-comment-message"><p>I tried that exact code but left it out of the narrative. It doesn&#8217;t work but I don&#8217;t remember the exact error. I also considered HQL but I&#8217;ve never liked the magic stringness of it. Truth be told, I&#8217;ve always used the criteria API or LINQ. Never had the need to use HQL.</p>
<p>The query-only properties was new to me so thanks for that. In any case, we still need the Name property for other reasons anyway.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1027">
                    <div id="dsq-comment-header-1027" class="dsq-comment-header">
                        <cite id="dsq-cite-1027">
    http://sharemyp0int.blogspot.com                            <span id="dsq-author-user-1027">Moutasem al-awa</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1027" class="dsq-comment-body">
                        <div id="dsq-comment-message-1027" class="dsq-comment-message"><p>I kindda like it, its clean and make your life easy .. thanks for sharing </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1028">
                    <div id="dsq-comment-header-1028" class="dsq-comment-header">
                        <cite id="dsq-cite-1028">
                                <span id="dsq-author-user-1028">James</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1028" class="dsq-comment-body">
                        <div id="dsq-comment-message-1028" class="dsq-comment-message"><p>Can&#8217;t you do something like:</p>
<p>return ( from w in session.Linq<user>()<br />
                let name = w.Lastname + &#8220;, &#8221; + w.Firstname<br />
               where name.Contains(searchText)<br />
               select w).ToList();  </user></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1029">
                    <div id="dsq-comment-header-1029" class="dsq-comment-header">
                        <cite id="dsq-cite-1029">
    http://codebetter.com/members/kylebaley/default.aspx                            <span id="dsq-author-user-1029">Kyle Baley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1029" class="dsq-comment-body">
                        <div id="dsq-comment-message-1029" class="dsq-comment-message"><p>See, now that&#8217;s why I always use a &#8220;here&#8217;s what I did&#8221; tone rather than a &#8220;here&#8217;s what you should do&#8221; one in my blog. I had no idea &#8220;let&#8221; existed (or &#8220;into&#8221; which I discovered while looking into this). James is an honorary Hillbilly for a day for making me learn stuff.</p>
<p>That said, I also like the idea of using my existing Name property to perform the search rather than having to redefine the formula in the query. That way, I don&#8217;t have to change anything if we decide to change to a &#8220;First Last&#8221; format.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1030">
                    <div id="dsq-comment-header-1030" class="dsq-comment-header">
                        <cite id="dsq-cite-1030">
                                <span id="dsq-author-user-1030">NC</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1030" class="dsq-comment-body">
                        <div id="dsq-comment-message-1030" class="dsq-comment-message"><p>If you were to curb my comments how can I post as James? (tho my name isn&#8217;t James, it was just a random name I picked).</p>
<p>Anyway after posting that I gave it a test, using Ayende&#8217;s LINQ to NHibernate, it doesn&#8217;t work <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_sad.gif' alt=':(' class='wp-smiley' />  not sure if it will with in NH3.0 because I haven&#8217;t had a chance to play around with it. </p>
<p>It does work in L2S / EF however.</p>
<p>This is from L2S:</p>
<p>exec sp_executesql N&#8217;SELECT [t1].[UserId], [t1].[FirstName], [t1].[LastName], [t1].[Username], [t1].[Password], [t1].[SomeXML]<br />
FROM (<br />
    SELECT [t0].[UserId], [t0].[FirstName], [t0].[LastName], [t0].[Username], [t0].[Password], [t0].[SomeXML], ([t0].[FirstName] + @p0) + [t0].[LastName] AS [value]<br />
    FROM [dbo].[tbUser] AS [t0]<br />
    ) AS [t1]<br />
WHERE [t1].[value] LIKE @p1&#8242;,N&#8217;@p0 nvarchar(2),@p1 nvarchar(5)&#8217;,@p0=N&#8217;, &#8216;,@p1=N&#8217;%lip%&#8217;</p>
<p>Tho I perfer your Formula way, since if you had a property which joined the fields to return &#8216;FullName&#8217;, and you were passing expressions, you have to know before-hand that the FullName doesn&#8217;t exist.</p>
<p>e.g</p>
<p>public IList<user> Search(Expression<func <User, bool>> searchCriteria) {<br />
    var session = NHibernateSession.Current;   </p>
<p>    return session.Linq<user>().Where(searchCriteria).ToList();<br />
} </p>
<p>var result = Search(x=>x.FullName.Contains(&#8216;banana&#8217;));<br />
^this would fail since FullName doesn&#8217;t exist in the mapping or db.</user></func></user></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1031">
                    <div id="dsq-comment-header-1031" class="dsq-comment-header">
                        <cite id="dsq-cite-1031">
                                <span id="dsq-author-user-1031">NC</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1031" class="dsq-comment-body">
                        <div id="dsq-comment-message-1031" class="dsq-comment-message"><p>Got some time today to test out latest build of Fluent/NH from Hornget, so i could test out NH3.</p>
<p>It seems to generate the query but it throws an exception. Possible bug but I don&#8217;t know where to submit NH bugs/issues.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1032">
                    <div id="dsq-comment-header-1032" class="dsq-comment-header">
                        <cite id="dsq-cite-1032">
                                <span id="dsq-author-user-1032">David</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1032" class="dsq-comment-body">
                        <div id="dsq-comment-message-1032" class="dsq-comment-message"><p>&#8220;I also considered HQL but I&#8217;ve never liked the magic stringness of it. &#8221;<br />
Aren&#8217;t there still magic strings in the mapping override?<br />
Just curious because I&#8217;ve seen this sort of comment quite a few times (from various folk).</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1033">
                    <div id="dsq-comment-header-1033" class="dsq-comment-header">
                        <cite id="dsq-cite-1033">
    http://codebetter.com/members/kylebaley/default.aspx                            <span id="dsq-author-user-1033">Kyle Baley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1033" class="dsq-comment-body">
                        <div id="dsq-comment-message-1033" class="dsq-comment-message"><p>@David,</p>
<p>Yes, that&#8217;s true. It was more of a comment against HQL in general. But the argument has gotten weaker and weaker in my head over the years.</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/kylebaley/2010/07/30/using-an-nhibernate-formula-to-aid-searching/';
    var disqus_identifier = '183 /blogs/kyle.baley/archive/2010/07/30/using-an-nhibernate-formula-to-aid-searching.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'kylebaleycb';
    var disqus_title = "Using an NHibernate Formula to aid searching";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=183');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/kylebaley\/2010\/07\/30\/using-an-nhibernate-formula-to-aid-searching\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="text-3" class="widget-container widget_text"><h3 class="widget-title">What am I working on?</h3>			<div class="textwidget">Check out the next generation of online scheduling<br />
<a href="http://getbookedin.com/?cid=16"><img src="http://getbookedin.com/a/images/logo2.png" /></a></div>
		</li><li id="tag_cloud-3" class="widget-container widget_tag_cloud"><h3 class="widget-title">Categories</h3><div class="tagcloud"><a href='http://codebetter.com/kylebaley/category/alt-net/' class='tag-link-1362' title='4 topics' style='font-size: 12.705882352941pt;'>alt.net</a>
<a href='http://codebetter.com/kylebaley/category/asp-net-mvc/' class='tag-link-2007' title='30 topics' style='font-size: 22pt;'>ASP.NET MVC</a>
<a href='http://codebetter.com/kylebaley/category/bahanet/' class='tag-link-5979' title='9 topics' style='font-size: 16.235294117647pt;'>Bahanet</a>
<a href='http://codebetter.com/kylebaley/category/bdd/' class='tag-link-2123' title='3 topics' style='font-size: 11.529411764706pt;'>BDD</a>
<a href='http://codebetter.com/kylebaley/category/bookedin/' class='tag-link-5996' title='6 topics' style='font-size: 14.470588235294pt;'>BookedIN</a>
<a href='http://codebetter.com/kylebaley/category/brownfield/' class='tag-link-5961' title='20 topics' style='font-size: 20pt;'>Brownfield</a>
<a href='http://codebetter.com/kylebaley/category/career/' class='tag-link-5964' title='10 topics' style='font-size: 16.705882352941pt;'>Career</a>
<a href='http://codebetter.com/kylebaley/category/castle/' class='tag-link-3989' title='1 topic' style='font-size: 8pt;'>Castle</a>
<a href='http://codebetter.com/kylebaley/category/code-coverage/' class='tag-link-5962' title='1 topic' style='font-size: 8pt;'>Code coverage</a>
<a href='http://codebetter.com/kylebaley/category/code-review/' class='tag-link-5994' title='3 topics' style='font-size: 11.529411764706pt;'>Code review</a>
<a href='http://codebetter.com/kylebaley/category/coding-style/' class='tag-link-5959' title='6 topics' style='font-size: 14.470588235294pt;'>Coding Style</a>
<a href='http://codebetter.com/kylebaley/category/community/' class='tag-link-2532' title='20 topics' style='font-size: 20pt;'>Community</a>
<a href='http://codebetter.com/kylebaley/category/conscientious-coding/' class='tag-link-5978' title='19 topics' style='font-size: 19.764705882353pt;'>Conscientious Coding</a>
<a href='http://codebetter.com/kylebaley/category/continuous-integration/' class='tag-link-1347' title='15 topics' style='font-size: 18.588235294118pt;'>Continuous Integration</a>
<a href='http://codebetter.com/kylebaley/category/estimating/' class='tag-link-5972' title='1 topic' style='font-size: 8pt;'>Estimating</a>
<a href='http://codebetter.com/kylebaley/category/featured/' class='tag-link-1356' title='14 topics' style='font-size: 18.352941176471pt;'>Featured</a>
<a href='http://codebetter.com/kylebaley/category/google-app-engine/' class='tag-link-5993' title='11 topics' style='font-size: 17.176470588235pt;'>Google App Engine</a>
<a href='http://codebetter.com/kylebaley/category/gwt/' class='tag-link-5992' title='18 topics' style='font-size: 19.529411764706pt;'>GWT</a>
<a href='http://codebetter.com/kylebaley/category/hardware/' class='tag-link-4927' title='2 topics' style='font-size: 10.117647058824pt;'>Hardware</a>
<a href='http://codebetter.com/kylebaley/category/java/' class='tag-link-5991' title='3 topics' style='font-size: 11.529411764706pt;'>Java</a>
<a href='http://codebetter.com/kylebaley/category/javascript/' class='tag-link-1732' title='9 topics' style='font-size: 16.235294117647pt;'>Javascript</a>
<a href='http://codebetter.com/kylebaley/category/linq/' class='tag-link-1741' title='2 topics' style='font-size: 10.117647058824pt;'>Linq</a>
<a href='http://codebetter.com/kylebaley/category/lucene-net/' class='tag-link-5989' title='2 topics' style='font-size: 10.117647058824pt;'>Lucene.NET</a>
<a href='http://codebetter.com/kylebaley/category/mbunit/' class='tag-link-5960' title='1 topic' style='font-size: 8pt;'>MbUnit</a>
<a href='http://codebetter.com/kylebaley/category/metrics/' class='tag-link-2529' title='1 topic' style='font-size: 8pt;'>Metrics</a>
<a href='http://codebetter.com/kylebaley/category/mocking/' class='tag-link-2119' title='4 topics' style='font-size: 12.705882352941pt;'>Mocking</a>
<a href='http://codebetter.com/kylebaley/category/nant/' class='tag-link-2621' title='4 topics' style='font-size: 12.705882352941pt;'>NAnt</a>
<a href='http://codebetter.com/kylebaley/category/nhibernate/' class='tag-link-2527' title='13 topics' style='font-size: 18pt;'>NHibernate</a>
<a href='http://codebetter.com/kylebaley/category/ninject/' class='tag-link-5983' title='1 topic' style='font-size: 8pt;'>NInject</a>
<a href='http://codebetter.com/kylebaley/category/open-rasta/' class='tag-link-5990' title='1 topic' style='font-size: 8pt;'>Open Rasta</a>
<a href='http://codebetter.com/kylebaley/category/presenting/' class='tag-link-5969' title='14 topics' style='font-size: 18.352941176471pt;'>Presenting</a>
<a href='http://codebetter.com/kylebaley/category/refactoring/' class='tag-link-4737' title='10 topics' style='font-size: 16.705882352941pt;'>Refactoring</a>
<a href='http://codebetter.com/kylebaley/category/resharper/' class='tag-link-2131' title='6 topics' style='font-size: 14.470588235294pt;'>ReSharper</a>
<a href='http://codebetter.com/kylebaley/category/rest/' class='tag-link-5987' title='3 topics' style='font-size: 11.529411764706pt;'>REST</a>
<a href='http://codebetter.com/kylebaley/category/ruby/' class='tag-link-1723' title='1 topic' style='font-size: 8pt;'>Ruby</a>
<a href='http://codebetter.com/kylebaley/category/sarp-architecture/' class='tag-link-5982' title='5 topics' style='font-size: 13.647058823529pt;'>S#arp Architecture</a>
<a href='http://codebetter.com/kylebaley/category/sundry/' class='tag-link-5971' title='20 topics' style='font-size: 20pt;'>Sundry</a>
<a href='http://codebetter.com/kylebaley/category/tdd/' class='tag-link-2572' title='6 topics' style='font-size: 14.470588235294pt;'>TDD</a>
<a href='http://codebetter.com/kylebaley/category/teamcity/' class='tag-link-2135' title='7 topics' style='font-size: 15.058823529412pt;'>TeamCity</a>
<a href='http://codebetter.com/kylebaley/category/tools/' class='tag-link-1998' title='5 topics' style='font-size: 13.647058823529pt;'>Tools</a>
<a href='http://codebetter.com/kylebaley/category/uncategorized/' class='tag-link-1044' title='16 topics' style='font-size: 18.941176470588pt;'>Uncategorized</a>
<a href='http://codebetter.com/kylebaley/category/user-interface/' class='tag-link-5980' title='6 topics' style='font-size: 14.470588235294pt;'>User Interface</a>
<a href='http://codebetter.com/kylebaley/category/utilities/' class='tag-link-5957' title='8 topics' style='font-size: 15.647058823529pt;'>Utilities</a>
<a href='http://codebetter.com/kylebaley/category/working-remotely/' class='tag-link-5963' title='9 topics' style='font-size: 16.235294117647pt;'>Working Remotely</a>
<a href='http://codebetter.com/kylebaley/category/youtrack/' class='tag-link-5995' title='1 topic' style='font-size: 8pt;'>YouTrack</a></div>
</li><li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/kylebaley/2012/04/' title='April 2012'>April 2012</a></li>
	<li><a href='http://codebetter.com/kylebaley/2012/03/' title='March 2012'>March 2012</a></li>
	<li><a href='http://codebetter.com/kylebaley/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/11/' title='November 2011'>November 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/08/' title='August 2011'>August 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2011/02/' title='February 2011'>February 2011</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/10/' title='October 2010'>October 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/04/' title='April 2010'>April 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/kylebaley/2007/12/' title='December 2007'>December 2007</a></li>
		</ul>
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.516 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 15:32:30 -->
<!-- super cache -->