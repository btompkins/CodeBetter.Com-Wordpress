<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Using and Abusing the F# Dynamic Lookup Operator | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='A Kick in the Monads – Writer Edition' href='http://codebetter.com/matthewpodwysocki/2010/02/02/a-kick-in-the-monads-writer-edition/' />
<link rel='next' title='Exploring MongoDB with F#' href='http://codebetter.com/matthewpodwysocki/2010/02/09/exploring-mongodb-with-f/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=197' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,159] -->
<link rel="canonical" href="http://codebetter.com/matthewpodwysocki/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-197" class="post-197 post type-post status-publish format-standard hentry category-f">
					<h1 class="entry-title">Using and Abusing the F# Dynamic Lookup Operator</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by Matthew Podwysocki">Matthew Podwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator/" title="9:18 pm" rel="bookmark"><span class="entry-date">February 5, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>Lately, I’ve been playing with such things as MongoDB using F# to rapidly prototype ideas.&#160; With that, I’ve tried to rid myself of magic strings by using the F# dynamic lookup operator.&#160; I’ll cover exactly what I’m doing in the next post when using MongoDB, but in this post I’d like to explore a little of what you could do with a little noticed dynamic lookup operator in F#.</p>
<h2>The Dynamic Lookup Operator</h2>
<p>Much like C# 4.0 has the ability to do dynamic lookup, F# also has the same capability, although in a different capacity.&#160; The language has support for a dynamic lookup get operator ( ? ) and set operator ( ?&lt;- ), but note that I said support and not actual implementation.&#160; The actual implementation is up to you and how you want to use it.&#160; </p>
<h2>The Get Operator</h2>
<p>Let’s start off by implementing the get operator to get a public property (not super useful yet).</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?</span><span style="color: #000000">) (this : </span><span style="color: #800000">'</span><span style="color: #800000">Source) (prop : string) : </span><span style="color: #800000">'</span><span style="color: #000000">Result </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> p </span><span style="color: #000000">=</span><span style="color: #000000"> this.GetType().GetProperty(prop)
  p.GetValue(this, </span><span style="color: #0000FF">null</span><span style="color: #000000">) :</span><span style="color: #000000">?&gt;</span><span style="color: #000000"> </span><span style="color: #800000">'</span><span style="color: #800000">Result</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>We can write an example that verifies the behavior such as comparing a normal invocation and our “dynamic” invocation, as in this example of comparing getting the length of a string.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">[</span><span style="color: #000000">&lt;</span><span style="color: #000000">Fact</span><span style="color: #000000">&gt;</span><span style="color: #000000">]
</span><span style="color: #0000FF">let</span><span style="color: #000000"> ``Dynamic lookup should equal normal``() </span><span style="color: #000000">=</span><span style="color: #000000">
  areEqual </span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">.Length </span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">?</span><span style="color: #000000">Length</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>But, we’re not limited to that.&#160; For example, we could instead decide that we want to get a private member instead of a public one.&#160; We could change up our example from above just slightly.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?</span><span style="color: #000000">) (this : </span><span style="color: #800000">'</span><span style="color: #800000">Source) (prop : string) : </span><span style="color: #800000">'</span><span style="color: #000000">Result </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> flags </span><span style="color: #000000">=</span><span style="color: #000000"> BindingFlags.GetProperty </span><span style="color: #000000">|||</span><span style="color: #000000">
              BindingFlags.NonPublic
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> p </span><span style="color: #000000">=</span><span style="color: #000000"> this.GetType().GetProperty(prop, flags)
  p.GetValue(this, </span><span style="color: #0000FF">null</span><span style="color: #000000">) :</span><span style="color: #000000">?&gt;</span><span style="color: #000000"> </span><span style="color: #800000">'</span><span style="color: #800000">Result</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>We can verify our behavior of this idea with a little example, for example invoking a private property in a custom class such as the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">type</span><span style="color: #000000"> PrivateProperty(propValue : </span><span style="color: #0000FF">string</span><span style="color: #000000">) </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">member</span><span style="color: #000000"> </span><span style="color: #0000FF">private</span><span style="color: #000000"> __.PropValue
    </span><span style="color: #0000FF">with</span><span style="color: #000000"> get() </span><span style="color: #000000">=</span><span style="color: #000000"> propValue
    
[</span><span style="color: #000000">&lt;</span><span style="color: #000000">Fact</span><span style="color: #000000">&gt;</span><span style="color: #000000">]
</span><span style="color: #0000FF">let</span><span style="color: #000000"> ``Can invoke </span><span style="color: #0000FF">private</span><span style="color: #000000"> property``() </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> expected </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> p </span><span style="color: #000000">=</span><span style="color: #000000"> PrivateProperty(expected)
  
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> actual : </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #000000">=</span><span style="color: #000000"> p</span><span style="color: #000000">?</span><span style="color: #000000">PropValue
  
  areEqual expected actual</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>So, as you can see, this is quite useful so far, but we’ve only scratched the surface.&#160; We’ve just dealt with properties so far, but what about methods?&#160; The same applies here as well.&#160; In this instance, let’s take a method that could have any number of arguments and invoke it just as if we would normally.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">open</span><span style="color: #000000"> Microsoft.FSharp.Reflection
</span><span style="color: #0000FF">open</span><span style="color: #000000"> System.Reflection

</span><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?</span><span style="color: #000000">) (this : </span><span style="color: #800000">'</span><span style="color: #800000">Source) (member</span><span style="color: #800000">'</span><span style="color: #000000"> : </span><span style="color: #0000FF">string</span><span style="color: #000000">) (args : </span><span style="color: #800000">'</span><span style="color: #800000">Args) : </span><span style="color: #800000">'</span><span style="color: #000000">Result </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> argArray </span><span style="color: #000000">=</span><span style="color: #000000">
    </span><span style="color: #0000FF">if</span><span style="color: #000000"> box args </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #0000FF">then</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000">
    </span><span style="color: #0000FF">elif</span><span style="color: #000000"> FSharpType.IsTuple (args.GetType()) </span><span style="color: #0000FF">then</span><span style="color: #000000">
      FSharpValue.GetTupleFields args
    </span><span style="color: #0000FF">else</span><span style="color: #000000"> [</span><span style="color: #000000">|</span><span style="color: #000000">args</span><span style="color: #000000">|</span><span style="color: #000000">]

  </span><span style="color: #0000FF">let</span><span style="color: #000000"> flags </span><span style="color: #000000">=</span><span style="color: #000000"> BindingFlags.GetProperty </span><span style="color: #000000">|||</span><span style="color: #000000"> BindingFlags.InvokeMethod
  this.GetType().InvokeMember(</span><span style="color: #0000FF">member</span><span style="color: #800000">'</span><span style="color: #800000">, flags, null, this, argArray) <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_confused.gif' alt=':?' class='wp-smiley' /> &gt; </span><span style="color: #800000">'</span><span style="color: #000000">Result</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>What we needed to do here is take not only the member but the arguments as well.&#160; If the arguments object is null (or unit), then we pass a null objet array, else if our type is a tuple, then we create an array from our tuple, and finally if it’s a single argument, then we make it into an array.&#160; Finally we invoke our member with the flags to say it is either a property getter or a method and invoke with our arguments.&#160; Let’s write an example of how to use this.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">[</span><span style="color: #000000">&lt;</span><span style="color: #000000">Fact</span><span style="color: #000000">&gt;</span><span style="color: #000000">]
</span><span style="color: #0000FF">let</span><span style="color: #000000"> ``Can invoke method </span><span style="color: #0000FF">with</span><span style="color: #000000"> dynamic lookup``() </span><span style="color: #000000">=</span><span style="color: #000000">
  isTrue (</span><span style="color: #800000">"</span><span style="color: #800000">dynamic</span><span style="color: #800000">"</span><span style="color: #000000">?</span><span style="color: #000000">Length() </span><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #800080">0</span><span style="color: #000000">)
  isTrue (</span><span style="color: #800000">"</span><span style="color: #800000">dynamic</span><span style="color: #800000">"</span><span style="color: #000000">?</span><span style="color: #000000">EndsWith(</span><span style="color: #800000">"</span><span style="color: #800000">ic</span><span style="color: #800000">"</span><span style="color: #000000">))
  areEqual </span><span style="color: #800000">"</span><span style="color: #800000">dyn</span><span style="color: #800000">"</span><span style="color: #000000"> (</span><span style="color: #800000">"</span><span style="color: #800000">dynamic</span><span style="color: #800000">"</span><span style="color: #000000">?</span><span style="color: #000000">Substring(</span><span style="color: #800080">0</span><span style="color: #000000">,</span><span style="color: #800080">3</span><span style="color: #000000">))</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Above are three tests which show no arguments, a single argument, and finally tupled arguments.&#160; But what about setters?</p>
<h2>The Set Operator</h2>
<p>Just as we have the ( ? ) operator reserved for the get operator, we have the ( ?&lt;- ) operator reserved for the set.&#160; This allows us to be able to set any number of things with the same ease as the get.&#160; For example, we could set a public property:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?&lt;-</span><span style="color: #000000">) (this : </span><span style="color: #800000">'</span><span style="color: #800000">Source) (property : string) (value : </span><span style="color: #800000">'</span><span style="color: #000000">Value) </span><span style="color: #000000">=</span><span style="color: #000000">
  this.GetType().GetProperty(property).SetValue(this, value, </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>This simply gets the property and then sets the appropriate value.&#160; And then we can write a test as an example of how it should work.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">type</span><span style="color: #000000"> MutablePropertyClass(value : </span><span style="color: #0000FF">string</span><span style="color: #000000">) </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> mutable v </span><span style="color: #000000">=</span><span style="color: #000000"> value
  
  </span><span style="color: #0000FF">member</span><span style="color: #000000"> __.Value 
    </span><span style="color: #0000FF">with</span><span style="color: #000000"> get() </span><span style="color: #000000">=</span><span style="color: #000000"> v
    </span><span style="color: #0000FF">and</span><span style="color: #000000">  set(value) </span><span style="color: #000000">=</span><span style="color: #000000"> v </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> value
    
[</span><span style="color: #000000">&lt;</span><span style="color: #000000">Fact</span><span style="color: #000000">&gt;</span><span style="color: #000000">]    
</span><span style="color: #0000FF">let</span><span style="color: #000000"> ``Dynamic setter should set property``() </span><span style="color: #000000">=</span><span style="color: #000000">    
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> m </span><span style="color: #000000">=</span><span style="color: #000000"> MutablePropertyClass(</span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">)
  
  m</span><span style="color: #000000">?</span><span style="color: #000000">Value </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">dynamic</span><span style="color: #800000">"</span><span style="color: #000000">
  
  areEqual </span><span style="color: #800000">"</span><span style="color: #800000">dynamic</span><span style="color: #800000">"</span><span style="color: #000000"> m.Value</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>In this example, we have a simple class with a property with a getter and setter and then we set our property using our special operator and then compare the values.&#160; Once again, this is flexible enough where we could set private properties much as we retrieved them above.&#160; Now, let’s put them together for a few quick examples.</p>
<h2>The Dictionary Example</h2>
<p>One idea that we could go with is instead of using string keys for dealing with key value pairs, we could use our dynamic getter and setter instead.&#160; Nothing like a bit of syntactic sugar to brighten your day to lessen the noise.&#160; Our goal for this is to go from:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> d </span><span style="color: #000000">=</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">,obj</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
d.[</span><span style="color: #800000">"</span><span style="color: #800000">StaticKey</span><span style="color: #800000">"</span><span style="color: #000000">] </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">Meh</span><span style="color: #800000">"</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>To something like the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> d </span><span style="color: #000000">=</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">,obj</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
d</span><span style="color: #000000">?</span><span style="color: #000000">DynamicKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">Totally!</span><span style="color: #800000">"</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>How could we pull this one off?&#160; Well, we could implement the dynamic lookup getter and setter to do nothing more than look in the dictionary as follows:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">open</span><span style="color: #000000"> System.Collections

</span><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?</span><span style="color: #000000">) (this : #IDictionary) key </span><span style="color: #000000">=</span><span style="color: #000000">
  this.[key]

</span><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">?&lt;-</span><span style="color: #000000">) (this : #IDictionary) key value </span><span style="color: #000000">=</span><span style="color: #000000">
  this.[key] </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> value</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now we can verify our behavior with our test that we should have written first.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> ``Dictionary should get </span><span style="color: #0000FF">and</span><span style="color: #000000"> set dynamically``() </span><span style="color: #000000">=</span><span style="color: #000000"> 
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> d </span><span style="color: #000000">=</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">,obj</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
  
  d</span><span style="color: #000000">?</span><span style="color: #000000">DynamicKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">hello</span><span style="color: #800000">"</span><span style="color: #000000">
  
  areEqual d.[</span><span style="color: #800000">"</span><span style="color: #800000">DynamicKey</span><span style="color: #800000">"</span><span style="color: #000000">] d</span><span style="color: #000000">?</span><span style="color: #000000">DynamicKey</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>A solution like this could work well for situations like MongoDB, which we’ll get into with our next post.&#160; But, could go a step further and to say anything with the Item property could be ours for the taking.</p>
<h2>The Item Indexer Property Example</h2>
<p>In the .NET libraries, we have a few classes which expose an indexer property like an array, a Dictionary, and even a string.&#160; It would be nice to have a way to both get and set this value through the use of our dynamic lookup operator, but how could we pull this off?&#160; In some previous posts, I talked about generic restrictions in the F# language, and one in particular stands out, the member restriction operator.&#160; This operators lets us constrain a given object parameter so that it must implement the following methods and properties.</p>
<p>Remember, our overall goal is to support calling this:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">open</span><span style="color: #000000"> System.Collections.Generic

</span><span style="color: #0000FF">let</span><span style="color: #000000"> d </span><span style="color: #000000">=</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">,</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
d</span><span style="color: #000000">?</span><span style="color: #000000">DynamicKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">Totally!</span><span style="color: #800000">"</span><span style="color: #000000">

</span><span style="color: #0000FF">type</span><span style="color: #000000"> IndexedObject() </span><span style="color: #000000">=</span><span style="color: #000000"> 
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> d </span><span style="color: #000000">=</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">,</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000">()

  </span><span style="color: #0000FF">member</span><span style="color: #000000"> self.Item
    </span><span style="color: #0000FF">with</span><span style="color: #000000"> get(key) </span><span style="color: #000000">=</span><span style="color: #000000">
      d.[key]
    </span><span style="color: #0000FF">and</span><span style="color: #000000"> set key value </span><span style="color: #000000">=</span><span style="color: #000000">
      d.[key] </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> value
      
</span><span style="color: #0000FF">let</span><span style="color: #000000"> i </span><span style="color: #000000">=</span><span style="color: #000000"> IndexedObject()
h</span><span style="color: #000000">?</span><span style="color: #000000">IndexedKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">IndexedValue</span><span style="color: #800000">"</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>So, what we have is both a Dictionary&lt;TKey,TValue&gt; and a custom indexed object.&#160; Since they do not follow an inheritance chain which exposes an Item property, we cannot use the example from above with the IDictionary.&#160; Instead, we’ll use member restrictions for both the method get_Item and set_Item.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #0000FF">inline</span><span style="color: #000000"> (</span><span style="color: #000000">?</span><span style="color: #000000">) this key </span><span style="color: #000000">=</span><span style="color: #000000">
  ( </span><span style="color: #000000">^</span><span style="color: #000000">a : (</span><span style="color: #0000FF">member</span><span style="color: #000000"> get_Item : </span><span style="color: #000000">^</span><span style="color: #000000">b </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> </span><span style="color: #000000">^</span><span style="color: #000000">c) (this,key))
 
</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #0000FF">inline</span><span style="color: #000000"> (</span><span style="color: #000000">?&lt;-</span><span style="color: #000000">) this key value </span><span style="color: #000000">=</span><span style="color: #000000">
  ( </span><span style="color: #000000">^</span><span style="color: #000000">a : (</span><span style="color: #0000FF">member</span><span style="color: #000000"> set_Item : </span><span style="color: #000000">^</span><span style="color: #000000">b </span><span style="color: #000000">*</span><span style="color: #000000"> </span><span style="color: #000000">^</span><span style="color: #000000">c </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> </span><span style="color: #000000">^</span><span style="color: #000000">d) (this,key,value))</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>What you see is that we’re calling both the get_Item and set_Item properties, which are the raw method names for the Item property.&#160; Now we’re able to verify our test using our IndexedObject class from above:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> ``Can </span><span style="color: #0000FF">use</span><span style="color: #000000"> dynamic indexed getter </span><span style="color: #0000FF">and</span><span style="color: #000000"> setter``() </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> i </span><span style="color: #000000">=</span><span style="color: #000000"> IndexedObject()
  
  i</span><span style="color: #000000">?</span><span style="color: #000000">SomeKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">Some value</span><span style="color: #800000">"</span><span style="color: #000000">
  
  areEqual i.[</span><span style="color: #800000">"</span><span style="color: #800000">SomeKey</span><span style="color: #800000">"</span><span style="color: #000000">] i</span><span style="color: #000000">?</span><span style="color: #000000">SomeKey</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p><strong><em>A big word of caution</em></strong> when using this approach is that you’ll get a nice warning from the F# compiler that doing this may cause unverified code as F# treats the Item property specially.&#160; For example, all value types must be boxed before putting them into the collection.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> h </span><span style="color: #000000">=</span><span style="color: #000000"> Hashtable()
h</span><span style="color: #000000">?</span><span style="color: #000000">MyKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> </span><span style="color: #800080">3</span><span style="color: #000000"> </span><span style="color: #008000">//</span><span style="color: #008000"> Don't do this</span><span style="color: #008000">
</span><span style="color: #000000">
h</span><span style="color: #000000">?</span><span style="color: #000000">MyKey </span><span style="color: #000000">&lt;-</span><span style="color: #000000"> box </span><span style="color: #800080">3</span><span style="color: #000000"> </span><span style="color: #008000">//</span><span style="color: #008000"> Do this</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Very powerful way of doing things but also you must be careful with this approach if you use it at all.</p>
<h2>Conclusion</h2>
<p>So, as you can see, F#, just like C# has the facilities for dynamic lookup, although in F# you are left to implement it yourself in any which way you like.&#160; One great thing about these operator is that it doesn’t require .NET 4.0 to implement and use them.&#160; But with any power comes of course some responsibility for it, so use it wisely. </p>
<div class="shr-publisher-197"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/f/" title="View all posts in F#" rel="category tag">F#</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator/" title="Permalink to Using and Abusing the F# Dynamic Lookup Operator" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator/feed/" title="Comments RSS to Using and Abusing the F# Dynamic Lookup Operator" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-197 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2010/02/02/a-kick-in-the-monads-writer-edition/" rel="prev"><span class="meta-nav">&larr;</span> A Kick in the Monads – Writer Edition</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2010/02/09/exploring-mongodb-with-f/" rel="next">Exploring MongoDB with F# <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-464">
                    <div id="dsq-comment-header-464" class="dsq-comment-header">
                        <cite id="dsq-cite-464">
    http://codebetter.com/members/Paks/default.aspx                            <span id="dsq-author-user-464">Cesar Mendoza</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-464" class="dsq-comment-body">
                        <div id="dsq-comment-message-464" class="dsq-comment-message"><p>I think it should be stressed that the &#8220;inline&#8221; keyword is very important when using member restrictions. Otherwise we would get a compiler error or warnings about the code being less generic. That surprised me the first time I tried to use member restrictions.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-465">
                    <div id="dsq-comment-header-465" class="dsq-comment-header">
                        <cite id="dsq-cite-465">
    http://codebetter.com/members/Matthew.Podwysocki/default.aspx                            <span id="dsq-author-user-465">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-465" class="dsq-comment-body">
                        <div id="dsq-comment-message-465" class="dsq-comment-message"><p>@Cesar,</p>
<p>You&#8217;re right, the inlining has everything to do with it, to allow for the member restrictions.  It&#8217;s something I forget once in a while until the compiler complains</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-466">
                    <div id="dsq-comment-header-466" class="dsq-comment-header">
                        <cite id="dsq-cite-466">
    http://wizardsofsmart.net/                            <span id="dsq-author-user-466">Ryan Riley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-466" class="dsq-comment-body">
                        <div id="dsq-comment-message-466" class="dsq-comment-message"><p>This is terrific stuff, Matt. Thanks for sharing! Btw, is there a way to execute xUnit tests from an fsi session?</p>
<p>Thanks,<br />
Ryan</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-467">
                    <div id="dsq-comment-header-467" class="dsq-comment-header">
                        <cite id="dsq-cite-467">
    http://wizardsofsmart.net/                            <span id="dsq-author-user-467">Ryan Riley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-467" class="dsq-comment-body">
                        <div id="dsq-comment-message-467" class="dsq-comment-message"><p>This is really cool stuff. The dictionary and indexer stuff worked for me, but the property and method invocation failed with:</p>
<p>stdin(381,1): error FS0030: Value restriction. The value &#8216;it&#8217; has been inferred to have generic type<br />
    val it : &#8216;_a<br />
Either define &#8216;it&#8217; as a simple data term, make it a function with explicit arguments or, if you do not intend for it to<br />
be generic, add a type annotation.</p>
<p>When trying to create the IndexedObject type, I got:<br />
stdin(403,25): error FS0436: The property &#8216;Item&#8217; has the same name as another property in this type, but one takes indexer arguments and the other does not. You may be missing an indexer argument to one of your properties.<br />
> type IndexedObject() =<br />
-   let mine = Dictionary<string , string>()<br />
-   member self.Item<br />
-     with get(key) =<br />
-       mine.[key]<br />
-     and  set(key, value) =<br />
-       mine.[key] <- value;;</p>
<p>      with get(key) =<br />
  &#8212;&#8212;&#8212;^^^</p>
<p>stdin(408,10): error FS0436: The property &#8216;Item&#8217; has the same name as another property in this type, but one takes indexer arguments and the other does not. You may be missing an indexer argument to one of your properties.</p>
<p>I&#8217;m using the VS2008 fsi. Could that be the problem?</p>
<p>Thanks,<br />
Ryan</string></p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/matthewpodwysocki/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator/';
    var disqus_identifier = '197 /blogs/matthew.podwysocki/archive/2010/02/05/using-and-abusing-the-f-dynamic-lookup-operator.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'matthewpodwysocki';
    var disqus_title = "Using and Abusing the F# Dynamic Lookup Operator";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=197');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2010\/02\/05\/using-and-abusing-the-f-dynamic-lookup-operator\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.554 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 21:08:44 -->
<!-- super cache -->