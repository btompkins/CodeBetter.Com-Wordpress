<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Introduction to the Reactive Extensions for JavaScript – Creating Observables | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/matthewpodwysocki/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/matthewpodwysocki/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Matthew Podwysocki' href='http://codebetter.com/matthewpodwysocki/' />
<link rel='start' title='let Matt = CodeBetter + 1' href='http://codebetter.com/matthewpodwysocki/2008/04/24/let-matt-codebetter-1/' />
<link rel='prev' title='Introduction to the Reactive Extensions to JavaScript' href='http://codebetter.com/matthewpodwysocki/2010/02/16/introduction-to-the-reactive-extensions-to-javascript/' />
<link rel='next' title='Introduction to the Reactive Extensions for JavaScript – Creating Observers' href='http://codebetter.com/matthewpodwysocki/2010/02/27/introduction-to-the-reactive-extensions-for-javascript-creating-observers/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/matthewpodwysocki/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables/' />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=204' />
<link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/matthewpodwysocki/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-204" class="post-204 post type-post status-publish format-standard hentry category-event-based-porgramming category-javascript category-jsconf category-reactive-framework">
					<h1 class="entry-title">Introduction to the Reactive Extensions for JavaScript – Creating Observables</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by matthewpodwysocki">matthewpodwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables/" title="6:34 am" rel="bookmark"><span class="entry-date">February 23, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/matthewpodwysocki/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>In <a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/02/16/introduction-to-the-reactive-extensions-to-javascript.aspx">the previous post</a>, we covered a little about the Reactive Framework (Rx) for JavaScript.&#160; Since that time we’ve learned that Jeffrey Van Gogh will be attending the upcoming JSConf 2010 and hoping to bring along some Reactive Extensions for JavaScript for anyone who is interested.</p>
<p>Back to the subject at hand, let’s take a step back and look at what we’re trying to accomplish with Rx for JavaScript.&#160; As we should know, the model of the web is largely asynchronous in that we shouldn’t block for potentially long running operations.&#160; For example, we could have a large and potentially expensive collection to iterate through and process, which is in turn a blocking call.&#160; What if we could instead turn from these pull collections to a push model?&#160; What about going from a pull model or interactive design:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:White;overflow: auto"><span style="color: #0000FF">function</span><span style="color: #000000"> processItems(items) {
    $.each(items, </span><span style="color: #0000FF">function</span><span style="color: #000000">(index, item) {
        </span><span style="color: #008000">//</span><span style="color: #008000"> Do something like append</span><span style="color: #008000">
</span><span style="color: #000000">        $(</span><span style="color: #000000">"</span><span style="color: #000000">#results</span><span style="color: #000000">"</span><span style="color: #000000">).append(</span><span style="color: #000000">"</span><span style="color: #000000">&lt;li&gt;</span><span style="color: #000000">"</span><span style="color: #000000"> </span><span style="color: #000000">+</span><span style="color: #000000"> item.name </span><span style="color: #000000">+</span><span style="color: #000000"> </span><span style="color: #000000">"</span><span style="color: #000000">&lt;/li&gt;</span><span style="color: #000000">"</span><span style="color: #000000">);
    });
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>To more of the push model or reactive model:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">function</span><span style="color: #000000"> processItems(items) {
    items.Subscribe(</span><span style="color: #0000FF">function</span><span style="color: #000000">(item) {
        </span><span style="color: #008000">//</span><span style="color: #008000"> Do something like append</span><span style="color: #008000">
</span><span style="color: #000000">        $(</span><span style="color: #000000">"</span><span style="color: #000000">#results</span><span style="color: #000000">"</span><span style="color: #000000">).append(</span><span style="color: #000000">"</span><span style="color: #000000">&lt;li&gt;</span><span style="color: #000000">"</span><span style="color: #000000"> </span><span style="color: #000000">+</span><span style="color: #000000"> item.name </span><span style="color: #000000">+</span><span style="color: #000000"> </span><span style="color: #000000">"</span><span style="color: #000000">&lt;/li&gt;</span><span style="color: #000000">"</span><span style="color: #000000">);
    });
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Things such as events are perfect examples of reactive programming and a natural fit, but potentially any blocking call sequence could be as well.&#160; Before we look into how we create them, let’s first look at the two big pieces, Observer and Observable.</p>
<h2>Understanding Observer and Observable</h2>
<p>The two main players, as they are in the Reactive Extensions for .NET are the Observer and Observable types.&#160; Let’s first look at the Observer.&#160; The relationship between the two is that the Observable is the producer of values, and we subscribe through an Observer where we can handle each value as they come along, as well as any potential exception, and when the Observable is complete.&#160; Let’s first look at the Observer class in pseudo-code to show you what the signature looks like.&#160; The Observer contains three methods, the OnNext, called when producing the next value in the sequence, the OnError which is called when an error is produced, and finally OnCompleted when the observable sequence has completed.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> Observer </span><span style="color: #000000">=</span><span style="color: #000000"> {
    </span><span style="color: #0000FF">this</span><span style="color: #000000">.OnNext : </span><span style="color: #0000FF">function</span><span style="color: #000000">(next) { ... },
    </span><span style="color: #0000FF">this</span><span style="color: #000000">.OnError : </span><span style="color: #0000FF">function</span><span style="color: #000000">(exn) { ... },
    </span><span style="color: #0000FF">this</span><span style="color: #000000">.OnCompleted </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000">() { ... }
};</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Next, let’s look at the Obsevable type which has any number of methods, but let’s cover the Subscribe which takes an Observer and invokes the appropriate methods such as OnNext for the next value, OnError for any errors that might come up and OnCompleted, when the sequence completes.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> Observable </span><span style="color: #000000">=</span><span style="color: #000000"> {
    </span><span style="color: #0000FF">this</span><span style="color: #000000">.Subscribe : </span><span style="color: #0000FF">function</span><span style="color: #000000">(obs) { ... }
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now that we have a basic understanding of Observer and Observable, let’s go ahead and create some Observables.</p>
<h2>Ways to Create Observables</h2>
<p>We’ve covered briefly how to turn JavaScript HTML events into observables in the last post, but let’s dive deeper into how we create them not only from events, but from scratch as well.&#160; We have many options at our disposal to do this, so we’ll cover each one&#160; in turn.&#160; One concern that was raised when I was first covering this is the testability.&#160; After all, if I’m strictly tied to events such as mouse moves and other HTML events, then I’d agree about the testability, but luckily we’re not as we’ll see below.</p>
<h2>Creating an Observable</h2>
<p>First, we have the method Observable.Create which creates an observable sequence from the subscribe implementation.&#160; This method takes a function with an Observer and returns a no parameter function which acts as the cleanup/Dispose.&#160;&#160; In this simple example, I’ll yield one value and then complete.&#160; Finally, I must return a function which is to serve as our cleanup which is to be run after we unsubscribe.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.Create(</span><span style="color: #0000FF">function</span><span style="color: #000000">(obs) {
    obs.OnNext(</span><span style="color: #000000">3</span><span style="color: #000000">);
    obs.OnCompleted();

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000">() { };
});</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Just as well, we can handle errors inside of this Create function to handle any exceptions that could arise.&#160; In this simple example, I’ll throw an exception in the error block and then in the catch block, I will compensate by invoking the OnError compensation.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.Create(</span><span style="color: #0000FF">function</span><span style="color: #000000">(obs) {
    </span><span style="color: #0000FF">try</span><span style="color: #000000"> {
        </span><span style="color: #0000FF">throw</span><span style="color: #000000"> </span><span style="color: #000000">"</span><span style="color: #000000">ahoy, an exception!</span><span style="color: #000000">"</span><span style="color: #000000">;
    } </span><span style="color: #0000FF">catch</span><span style="color: #000000">(err) {
        obs.OnError(</span><span style="color: #000000">"</span><span style="color: #000000">Arr! </span><span style="color: #000000">"</span><span style="color: #000000"> </span><span style="color: #000000">+</span><span style="color: #000000"> err);
        obs.OnCompleted();
    }

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000">() { };
});</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Next, we have the CreateWithDisposable which has the same intent as Create, but instead of returning a function, we create an object with an object with a Dispose method.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.CreateWithDisposable(</span><span style="color: #0000FF">function</span><span style="color: #000000">(obs) {
    obs.OnNext(</span><span style="color: #000000">3</span><span style="color: #000000">);
    obs.OnCompleted();

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> { Dispose : </span><span style="color: #0000FF">function</span><span style="color: #000000">() {} };
});</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>These are all well and good but there must be some other ways of creating observable sequences.</p>
<h2>Yielding a Single Value with Return</h2>
<p>Another way to create an observable to yield a single value is through the Return method.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> item </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #000000">"</span><span style="color: #000000">Just one item</span><span style="color: #000000">"</span><span style="color: #000000">;
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.Return(item);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<h2>Creating an Observable Sequence with Range</h2>
<p>Just as we can return a single value, we can also return a range of numbers using the Range method.&#160; This method has the same signature of its LINQ Enumerable counterpart with a start value and a count.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> rangedObservable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.Range(</span><span style="color: #000000">1</span><span style="color: #000000">, </span><span style="color: #000000">100</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<h2>Creating an Observable Sequence with Generate</h2>
<p>A more flexible way of creating sequences than the Range method would be the Generate function.&#160; This function takes an initial state, a conditional function, a result selector and finally an iterator.&#160; To give a basic idea of how this works, let’s just go from 0 to 9 using the Generate function:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.Generate(
    </span><span style="color: #000000">0</span><span style="color: #000000">,                                </span><span style="color: #008000">//</span><span style="color: #008000"> initial state</span><span style="color: #008000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000">(x) { </span><span style="color: #0000FF">return</span><span style="color: #000000"> x </span><span style="color: #000000">&lt;</span><span style="color: #000000"> </span><span style="color: #000000">10</span><span style="color: #000000">; },    </span><span style="color: #008000">//</span><span style="color: #008000"> condition</span><span style="color: #008000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000">(x) { </span><span style="color: #0000FF">return</span><span style="color: #000000"> x; },        </span><span style="color: #008000">//</span><span style="color: #008000"> selector</span><span style="color: #008000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000">(x) { </span><span style="color: #0000FF">return</span><span style="color: #000000"> x </span><span style="color: #000000">+</span><span style="color: #000000"> </span><span style="color: #000000">1</span><span style="color: #000000">});    </span><span style="color: #008000">//</span><span style="color: #008000"> iterate</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<h2>From Array to Observable</h2>
<p>In addition to creating our observable sequences from scratch with the Create method, we can take existing arrays and go from the pull model to the push model by calling the FromArray method.&#160; This in turn takes all values from our array and puts them into an observable sequence for us.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> items </span><span style="color: #000000">=</span><span style="color: #000000"> [</span><span style="color: #000000">"</span><span style="color: #000000">one</span><span style="color: #000000">"</span><span style="color: #000000">,</span><span style="color: #000000">"</span><span style="color: #000000">two</span><span style="color: #000000">"</span><span style="color: #000000">,</span><span style="color: #000000">"</span><span style="color: #000000">three</span><span style="color: #000000">"</span><span style="color: #000000">];
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromArray(items);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>This is also great for testing scenarios, to replace such things as mouse movements with a simple array for testability purposes.&#160; Now, let’s move onto tackling events.</p>
<h2>From HTML Events to Observables</h2>
<p>We covered this in the first post a bit, but let’s revisit this again.&#160; As you well know by your adventures in JavaScript and DOM land that there are quite a few events in the browser that we can take utilize.&#160; Anything from mouse movements, keyboard presses to HTML forms, it covers the gamut as you can see from the list <a href="http://en.wikipedia.org/wiki/DOM_Events">here</a>.&#160; Let’s take a standard mouse movement and go from an event to an observable sequence by using the FromDOMEvent method.&#160; In order to create this event, we need a reference to our element of interest and a string naming the event we want to capture.&#160; </p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> mainCanvas </span><span style="color: #000000">=</span><span style="color: #000000"> document.getElementById(</span><span style="color: #000000">"</span><span style="color: #000000">mainCanvas</span><span style="color: #000000">"</span><span style="color: #000000">);
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromDOMEvent(mainCanvas, </span><span style="color: #000000">"</span><span style="color: #000000">mousemove</span><span style="color: #000000">"</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Using jQuery, we can also get a hold of our element of interest by doing the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> mainCanvas </span><span style="color: #000000">=</span><span style="color: #000000"> $(</span><span style="color: #000000">"</span><span style="color: #000000">#mainCanvas</span><span style="color: #000000">"</span><span style="color: #000000">).get(</span><span style="color: #000000">0</span><span style="color: #000000">);
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromDOMEvent(mainCanvas, </span><span style="color: #000000">"</span><span style="color: #000000">mousemove</span><span style="color: #000000">"</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>But, we’re not limited to just standard HTML events.&#160; Internet Explorer also introduced a few custom events such as clipboard events and data binding, and some of which have been picked up by other browsers (and some not).&#160; For example, we could attach to the cut event of a given text box element by using the FromIEEvent method:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> textElement </span><span style="color: #000000">=</span><span style="color: #000000"> $(</span><span style="color: #000000">"</span><span style="color: #000000">#textElement</span><span style="color: #000000">"</span><span style="color: #000000">).get(</span><span style="color: #000000">0</span><span style="color: #000000">);
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromIEEvent(textElement, </span><span style="color: #000000">"</span><span style="color: #000000">oncut</span><span style="color: #000000">"</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>But, having to differentiate between the two can be kind of annoying, so how about a unifying concept to bring both sets together?&#160; The FromHtmlEvent does just that by checking whether it is an IE event or a DOM event, so we needn’t worry about which is which.&#160; We can now take the mouse move from above and use the FromHtmlEvent instead.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> mainCanvas </span><span style="color: #000000">=</span><span style="color: #000000"> $(</span><span style="color: #000000">"</span><span style="color: #000000">#mainCanvas</span><span style="color: #000000">"</span><span style="color: #000000">).get(</span><span style="color: #000000">0</span><span style="color: #000000">);
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromHtmlEvent(mainCanvas, </span><span style="color: #000000">"</span><span style="color: #000000">mousemove</span><span style="color: #000000">"</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Just as well, we could also take our IE specific event and call from HtmlEvent as well.&#160; Note, however, that the event now must exclude the “on” prefix in order to make this work:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> textElement </span><span style="color: #000000">=</span><span style="color: #000000"> $(</span><span style="color: #000000">"</span><span style="color: #000000">#textElement</span><span style="color: #000000">"</span><span style="color: #000000">).get(</span><span style="color: #000000">0</span><span style="color: #000000">);
</span><span style="color: #0000FF">var</span><span style="color: #000000"> observable </span><span style="color: #000000">=</span><span style="color: #000000"> Rx.Observable.FromHtmlEvent(textElement, </span><span style="color: #000000">"</span><span style="color: #000000">cut</span><span style="color: #000000">"</span><span style="color: #000000">);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>That’s plenty for now on how to get started creating observable sequences of your own.</p>
<h2>Conclusion</h2>
<p>This of course is only scratching the surface of what capabilities this library has and there is much more yet left to cover.&#160; The question you’re probably asking now is where can I get it?&#160; Well, for that you’ll have to stay tuned.&#160; I hope to have more announcements soon about its general availability.&#160; </p>
<p>What can I say?&#160; I love JavaScript and very much looking forward to the upcoming <a href="http://jsconf.us/2010">JSConf 2010</a> here in Washington, DC where the Reactive Extensions for JavaScript will be shown in its full glory with Jeffrey Van Gogh.&#160; For too many times, we’ve looked for the abstractions over the natural language of the web (HTML, CSS and JavaScript) and created monstrosities instead of embracing the web for what it is.&#160; With libraries such as jQuery and indeed the Reactive Extensions for JavaScript gives us better tools for dealing with the troubled child that is DOM manipulation and especially events.</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/event-based-porgramming/" title="View all posts in Event-based Porgramming" rel="category tag">Event-based Porgramming</a>, <a href="http://codebetter.com/matthewpodwysocki/category/javascript/" title="View all posts in JavaScript" rel="category tag">JavaScript</a>, <a href="http://codebetter.com/matthewpodwysocki/category/jsconf/" title="View all posts in JSConf" rel="category tag">JSConf</a>, <a href="http://codebetter.com/matthewpodwysocki/category/reactive-framework/" title="View all posts in Reactive Framework" rel="category tag">Reactive Framework</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables/" title="Permalink to Introduction to the Reactive Extensions for JavaScript – Creating Observables" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables/feed/" title="Comments RSS to Introduction to the Reactive Extensions for JavaScript – Creating Observables" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-204 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2010/02/16/introduction-to-the-reactive-extensions-to-javascript/" rel="prev"><span class="meta-nav">&larr;</span> Introduction to the Reactive Extensions to JavaScript</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2010/02/27/introduction-to-the-reactive-extensions-for-javascript-creating-observers/" rel="next">Introduction to the Reactive Extensions for JavaScript – Creating Observers <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-483">
					<div id="dsq-comment-header-483" class="dsq-comment-header">
						<cite id="dsq-cite-483">
	http://thedwalker.blogspot.com							<span id="dsq-author-user-483">Thedric Walker</span>
							</cite>
					</div>
					<div id="dsq-comment-body-483" class="dsq-comment-body">
						<div id="dsq-comment-message-483" class="dsq-comment-message"><p>This seems to follow in the same vein as the paper &#8220;Directing Javascript with Arrows&#8221;. It  was a paper that dealt with minimizing the complexity of compositing JS event to do things like drag-n-drop by using Hughes Arrows.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-484">
					<div id="dsq-comment-header-484" class="dsq-comment-header">
						<cite id="dsq-cite-484">
	http://www.javascriptbank.com/							<span id="dsq-author-user-484">JavascriptBank.com</span>
							</cite>
					</div>
					<div id="dsq-comment-body-484" class="dsq-comment-body">
						<div id="dsq-comment-message-484" class="dsq-comment-message"><p>very cool &#038; good tip, thank you very much for sharing.</p>
<p>Can I <a href="http://www.javascriptbank.com/submit/">share this post</a> on my JavaScript library?</p>
<p>Awaiting your response. Thank</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-485">
					<div id="dsq-comment-header-485" class="dsq-comment-header">
						<cite id="dsq-cite-485">
	http://codebetter.com/members/Matthew.Podwysocki/default.aspx							<span id="dsq-author-user-485">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-485" class="dsq-comment-body">
						<div id="dsq-comment-message-485" class="dsq-comment-message"><p>@Thedric,</p>
<p>Interesting. &nbsp;I was not aware of that paper. &nbsp;After reading, yes, there are some similarities, but FlapJax is a much closer fit to what Rx for JS is doing. &nbsp;The inspiration for the Reactive Extensions for .NET/JavaScript is primarily as an implementation of the continuation monad and the realization of the duality between IEnumerable (pull) and IObservable (push). &nbsp;The arrows seem to deal more with state machines than queries ala LINQ. &nbsp;Thanks for the pointer!</p>
<p>Matt</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/matthewpodwysocki/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables/ ';
	var disqus_identifier = '204 /blogs/matthew.podwysocki/archive/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'matthewpodwysocki';
	var disqus_title = "Introduction to the Reactive Extensions for JavaScript – Creating Observables";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=204');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/matthewpodwysocki/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2010\/02\/23\/introduction-to-the-reactive-extensions-for-javascript-creating-observables\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.269 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 11:27:03 -->
<!-- super cache -->