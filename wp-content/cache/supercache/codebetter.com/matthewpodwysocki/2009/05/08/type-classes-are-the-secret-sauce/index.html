<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Type Classes Are The Secret Sauce | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Functionally Implementing Intersperse' href='http://codebetter.com/matthewpodwysocki/2009/05/06/functionally-implementing-intersperse/' />
<link rel='next' title='Axum Hits CTP' href='http://codebetter.com/matthewpodwysocki/2009/05/08/axum-hits-ctp/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=138' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,144] -->
<link rel="canonical" href="http://codebetter.com/matthewpodwysocki/2009/05/08/type-classes-are-the-secret-sauce/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-138" class="post-138 post type-post status-publish format-standard hentry category-f category-functional-programming category-haskell">
					<h1 class="entry-title">Type Classes Are The Secret Sauce</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by Matthew Podwysocki">Matthew Podwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2009/05/08/type-classes-are-the-secret-sauce/" title="6:34 am" rel="bookmark"><span class="entry-date">May 8, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>I came across a recent post on <a href="http://mixedsyntax.wordpress.com/2009/04/28/adding-ruby-and-c-operators-to-f/">adding Ruby and C# operators to F#</a> that sparked a few thoughts in my head.&#160; The post was good, but yet there were operators that already existed for some of the operations mentioned such as the defaultArg and ( @ ).&#160; But what really got me was thinking about type classes again due to the fact that extension operators aren’t currently supported in the language whereas extension events, properties, methods and statics are.&#160; I covered this in the past in regards to implementing an approximate equality check for my <a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/01/20/functional-programming-unit-testing-using-type-classes.aspx">Functional Programming Unit Testing series</a>, but I want to dive further into that subject a little more in this post.</p>
<h2>Just What Are Type Classes?</h2>
<p>As you may note that I do cover a bit of Haskell on this blog, and I think for very good reason.&#160; It’s a great language for incubating a lot of interesting ideas.&#160; Some of these ideas have been distilled into other languages such as concepts as monads.&#160; Type classes is another great feature of the language that I have come to know and love.&#160; </p>
<p>When we talk about implementing functions, we have two main types of polymorphism, parametric and overloading.&#160; Talking about parametric polymorphism is the typical programming with generics in which a function allows arguments of arbitrary related types of an unlimited nature.&#160; One such example of this is the map function, or the Select method for those in the LINQ land which allows us to specify both the source and destination types which might be just about anything.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">Prelude</span><span style="color: #000000">&gt;</span><span style="color: #000000"> :t map
map :: (a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> b) </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> [ a ] </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> [ b ]</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>On the other hand, we have ad-hoc polymorphism or overloading, which depending on its context, can assume more than one type.&#160; If the allowable types are limited and must be known ahead of time, this makes is ad-hoc.&#160; This polymorphism type is made possible in Haskell through the use of type classes.&#160; For example, if we want to check for equality between two given algebraic types, this type must either derive the Eq type class or we create and instance of our own.&#160; Let’s make this a little more clear by actually looking at one.&#160; Instead of taking a look at the Eq or Equality check, let’s look at the Ord which contains the comparison operators.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">Prelude</span><span style="color: #000000">&gt;</span><span style="color: #000000"> :i Ord
</span><span style="color: #0000FF">class</span><span style="color: #000000"> (Eq a) </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> Ord a </span><span style="color: #0000FF">where</span><span style="color: #000000">
  compare :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Ordering
  (</span><span style="color: #000000">&lt;</span><span style="color: #000000">) :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Bool
  (</span><span style="color: #000000">&gt;=</span><span style="color: #000000">) :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Bool
  (</span><span style="color: #000000">&gt;</span><span style="color: #000000">) :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Bool
  (</span><span style="color: #000000">&lt;=</span><span style="color: #000000">) :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Bool
  max :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a
  min :: a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> a
      </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in GHC.Classes</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>This type class lays out our basic comparison operators such as greater than, less than, min, max, etc.&#160; But, it also has a restriction which states that any implementation of this type class must also have an associated implementation of the Eq type class which checks for equality.&#160; You can think of this as generic restrictions.&#160; The command we ran above, the info command also not only gave us information about the type class, but also some implementations such as the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">instance</span><span style="color: #000000"> (Ord a) </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> Ord (Maybe a) </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in Data.Maybe</span><span style="color: #008000">
</span><span style="color: #0000FF">instance</span><span style="color: #000000"> (Ord a, Ord b) </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> Ord (Either a b)
  </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in Data.Either</span><span style="color: #008000">
</span><span style="color: #0000FF">instance</span><span style="color: #000000"> Ord Integer </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in efined in GHC.Base</span><span style="color: #008000">
</span><span style="color: #0000FF">instance</span><span style="color: #000000"> Ord Char </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in GHC.Base</span><span style="color: #008000">
</span><span style="color: #0000FF">instance</span><span style="color: #000000"> (Ord a) </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> Ord [ a ] </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in GHC.Base</span><span style="color: #008000">
</span><span style="color: #0000FF">instance</span><span style="color: #000000"> Ord Int </span><span style="color: #008000">--</span><span style="color: #008000"> Defined in GHC.Base</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>In order to provide that functionality such as ordering checking, we must create an instance of the Ord class and implement some members.&#160; We needn’t implement all, just the ones we need for our given scenario.&#160; To give you a sense of how this works, let’s take a look at the implementation of Ord for the Bool type.&#160; </p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">instance</span><span style="color: #000000"> Ord Bool </span><span style="color: #0000FF">where</span><span style="color: #000000">
    compare </span><span style="color: #0000FF">False</span><span style="color: #000000"> </span><span style="color: #0000FF">True</span><span style="color: #000000">  </span><span style="color: #000000">=</span><span style="color: #000000"> LT
    compare </span><span style="color: #0000FF">True</span><span style="color: #000000">  </span><span style="color: #0000FF">False</span><span style="color: #000000"> </span><span style="color: #000000">=</span><span style="color: #000000"> GT
    compare _     _     </span><span style="color: #000000">=</span><span style="color: #000000"> EQ</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now we have the compare function available to use with the Bool type.&#160; Pretty nice and easy.&#160; Because of this, we can determine whether one is greater than the other such as the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">Prelude</span><span style="color: #000000">&gt;</span><span style="color: #000000"> compare </span><span style="color: #0000FF">True</span><span style="color: #000000"> </span><span style="color: #0000FF">False</span><span style="color: #000000">
GT</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Besides the Eq and the Ord I’ve already mentioned, there are others such as:</p>
<ul>
<li>Show – Converting values to strings </li>
<li>Read – Converting strings to other values (opposite of Show) </li>
<li>Num – Numeric operations such as addition, subtraction, multiplication, etc </li>
<li>Enum – Enumeration operations </li>
<li>Fractional &#8211; Division </li>
</ul>
<p>And the list goes on.&#160; But what I &#8216;like about this, is the opt-in nature of providing a given set of operations and implementing only what you need.&#160; Also, it allows everything to be open so that I can create new instances of a type class for a given type as I see fit, even outside of the module in which it was created.&#160; If you want to go deeper on the subject, <a href="http://byorgey.wordpress.com/">Brent Yorgey</a> has a great article called the <a href="http://www.haskell.org/sitewiki/images/8/85/TMR-Issue13.pdf">Typeclassopedia</a> in the Monad Reader Issue 13.</p>
<h2>A Poor Man’s Type Class in F#</h2>
<p>Ah, but alas we do not have type classes in F#.&#160; It would be great if we did, but I’m sure it might take some changes to the CLR to make this happen such as allowing for higher-kinded polymorphism, which I’ve covered in the past.&#160; As it is, creating generic functions such as the basic math ones can prove to be rather difficult even with the CLR generics.&#160; What it essentially does is checks to see if that given operator exists for your given class among other things.&#160; But, what if you don’t own that class, how could you possibly extend it this way, for example things like adding two Colors?&#160; That’s the power of type classes.</p>
<p>Although not supported natively, we can add that behavior to our classes.&#160; Take for example checking for approximate equality for floating point arithmetic.&#160; As we know, the precise nature of checking for equality of floating points isn’t the same as for integers, and instead must be checked if the difference is less than epsilon.&#160; Let’s define an interface for what that might look like:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">open</span><span style="color: #000000"> System
</span><span style="color: #0000FF">open</span><span style="color: #000000"> System.Collections.Generic

</span><span style="color: #008000">//</span><span style="color: #008000"> Define the type class and it's global associations table</span><span style="color: #008000">
</span><span style="color: #0000FF">type</span><span style="color: #000000"> IApproxEq</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt; = </span><span style="color: #800000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">member</span><span style="color: #000000"> approxEqual    : </span><span style="color: #800000">'</span><span style="color: #800000">a -&gt; </span><span style="color: #800000">'</span><span style="color: #000000">a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> bool
    </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">member</span><span style="color: #000000"> approxNotEqual : </span><span style="color: #800000">'</span><span style="color: #800000">a -&gt; </span><span style="color: #800000">'</span><span style="color: #000000">a </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> bool</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>What we have here is the beginning of a type class as to define two functions, one for equality and one for inequality.&#160; Next, we need to have some sort of repository for our instances that we declare so that we can dynamically look them up and perform the given operation.&#160; That might look like the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">[</span><span style="color: #000000">&lt;</span><span style="color: #000000">AbstractClass</span><span style="color: #000000">&gt;</span><span style="color: #000000">]
[</span><span style="color: #000000">&lt;</span><span style="color: #000000">Sealed</span><span style="color: #000000">&gt;</span><span style="color: #000000">]
</span><span style="color: #0000FF">type</span><span style="color: #000000"> ApproxEqualAssociations </span><span style="color: #0000FF">private</span><span style="color: #000000">() </span><span style="color: #000000">=</span><span style="color: #000000"> 
  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> associations </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #000000">Type, obj</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">member</span><span style="color: #000000"> Add</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;(approxEqual : IApproxEq&lt;</span><span style="color: #800000">'</span><span style="color: #000000">a</span><span style="color: #000000">&gt;</span><span style="color: #000000">) </span><span style="color: #000000">=</span><span style="color: #000000"> associations.Add(typeof</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;, approxEqual)</span><span style="color: #800000">
</span><span style="color: #000000">  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">member</span><span style="color: #000000"> Get</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;() = </span><span style="color: #800000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">match</span><span style="color: #000000"> associations.TryGetValue(typeof</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;) with </span><span style="color: #800000">
</span><span style="color: #000000">    </span><span style="color: #000000">|</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">, assoc </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> assoc :</span><span style="color: #000000">?&gt;</span><span style="color: #000000"> IApproxEq</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;</span><span style="color: #800000">
</span><span style="color: #000000">    </span><span style="color: #000000">|</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">, _    </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> failwithf </span><span style="color: #800000">"</span><span style="color: #800000">Type %O does not have an implementation of IApproxEq</span><span style="color: #800000">"</span><span style="color: #000000"> </span><span style="color: #000000">&lt;|</span><span style="color: #000000"> typeof</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt;</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>This solution gives us a global singleton in a way of dealing with these operators.&#160; As we shouldn’t be adding to them frequently, and instead reading, it shouldn’t be too much of an issue, but it is an issue nonetheless.&#160; Now that we have this repository of them, let’s declare ones for both single precision floating point and double precision floating points.&#160; </p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">type</span><span style="color: #000000"> SingleApproxEqual() </span><span style="color: #000000">=</span><span style="color: #000000">
    </span><span style="color: #0000FF">let</span><span style="color: #000000"> epsilon </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #800080">0.001f</span><span style="color: #000000">
    </span><span style="color: #0000FF">interface</span><span style="color: #000000"> IApproxEq</span><span style="color: #000000">&lt;</span><span style="color: #000000">float32</span><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">with</span><span style="color: #000000">
        </span><span style="color: #0000FF">member</span><span style="color: #000000"> this.approxEqual x x</span><span style="color: #800000">'</span><span style="color: #800000"> = abs(x - x</span><span style="color: #800000">'</span><span style="color: #000000">) </span><span style="color: #000000">&lt;</span><span style="color: #000000"> epsilon
        </span><span style="color: #0000FF">member</span><span style="color: #000000"> this.approxNotEqual x x</span><span style="color: #800000">'</span><span style="color: #800000"> = abs(x - x</span><span style="color: #800000">'</span><span style="color: #000000">) </span><span style="color: #000000">&gt;=</span><span style="color: #000000"> epsilon  
</span><span style="color: #0000FF">type</span><span style="color: #000000"> DoubleApproxEqual() </span><span style="color: #000000">=</span><span style="color: #000000">
    </span><span style="color: #0000FF">let</span><span style="color: #000000"> epsilon </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #800080">0.001</span><span style="color: #000000">
    </span><span style="color: #0000FF">interface</span><span style="color: #000000"> IApproxEq</span><span style="color: #000000">&lt;</span><span style="color: #000000">float</span><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">with</span><span style="color: #000000">
        </span><span style="color: #0000FF">member</span><span style="color: #000000"> this.approxEqual x x</span><span style="color: #800000">'</span><span style="color: #800000"> = abs(x - x</span><span style="color: #800000">'</span><span style="color: #000000">) </span><span style="color: #000000">&lt;</span><span style="color: #000000"> epsilon
        </span><span style="color: #0000FF">member</span><span style="color: #000000"> this.approxNotEqual x x</span><span style="color: #800000">'</span><span style="color: #800000"> = abs(x - x</span><span style="color: #800000">'</span><span style="color: #000000">) </span><span style="color: #000000">&gt;=</span><span style="color: #000000"> epsilon      
ApproxEqualAssociations.Add(</span><span style="color: #0000FF">new</span><span style="color: #000000"> SingleApproxEqual())       
ApproxEqualAssociations.Add(</span><span style="color: #0000FF">new</span><span style="color: #000000"> DoubleApproxEqual())</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Once we’ve created these two implementations and added them to our associations table, it’s time to put some syntactic sugar on top to make them a real infix operator.&#160; </p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">=~</span><span style="color: #000000">) x x</span><span style="color: #800000">'</span><span style="color: #800000"> = ApproxEqualAssociations.Get().approxEqual x x</span><span style="color: #800000">'</span><span style="color: #000000">
</span><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">/~</span><span style="color: #000000">) x x</span><span style="color: #800000">'</span><span style="color: #800000"> = ApproxEqualAssociations.Get().approxNotEqual x x</span><span style="color: #800000">'</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now we have an extensible operator that can be added to at any given time.&#160; Say if we wanted to say that some colors are considered approximately equal?&#160; It wouldn’t be hard to implement something like that and add it to the associations table.&#160; We can now test our behavior such as the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #800080">4.000001f</span><span style="color: #000000"> </span><span style="color: #000000">=~</span><span style="color: #000000"> </span><span style="color: #800080">4.0f</span><span style="color: #000000">;; </span><span style="color: #008000">//</span><span style="color: #008000"> Testing with float32</span><span style="color: #008000">
</span><span style="color: #0000FF">val</span><span style="color: #000000"> it : bool </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">
</span><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #800080">5.1</span><span style="color: #000000"> </span><span style="color: #000000">/~</span><span style="color: #000000"> </span><span style="color: #800080">5.01</span><span style="color: #000000">;; </span><span style="color: #008000">//</span><span style="color: #008000"> Testing with float</span><span style="color: #008000">
</span><span style="color: #0000FF">val</span><span style="color: #000000"> it : bool </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>The true power of this approach is that it opens up the function for future implementations that may want to enlist in our behavior.&#160; Take this in contrast to the typical way we create operators in F# which lock us in to one type, although it can be circumvented, but it’s not well known and not well documented.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> (</span><span style="color: #000000">+*</span><span style="color: #000000">) x y </span><span style="color: #000000">=</span><span style="color: #000000"> (x </span><span style="color: #000000">*</span><span style="color: #000000"> y) </span><span style="color: #000000">+</span><span style="color: #000000"> (x </span><span style="color: #000000">+</span><span style="color: #000000"> y);;
</span><span style="color: #0000FF">val</span><span style="color: #000000"> ( </span><span style="color: #000000">+*</span><span style="color: #000000"> ) : int </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> int </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> int</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>As you can see, we’re locked into the integer implementation which isn’t extensible.&#160; I noted above there are ways around this and if you look through the F# implementation, you will find some pretty interesting code for how they implemented the standard operators.</p>
<h2>What Are the Limitations?</h2>
<p>So like everything, there are limitations.&#160; For example, there is no such thing as compile time safety, which doesn’t actually bother many people, especially those in the dynamically typed world.&#160; Another issue is of course the maintenance of this global association table per type class can also be a little much as it might grow over time.&#160; It’s not the ideal solution, but it’s a solution.&#160; Do I think that F# should incorporate this?&#160; Absolutely!&#160; I really do like this language feature of type classes in Haskell and there are other lessons other languages can take from it.</p>
<div class="shr-publisher-138"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/f/" title="View all posts in F#" rel="category tag">F#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/functional-programming/" title="View all posts in Functional Programming" rel="category tag">Functional Programming</a>, <a href="http://codebetter.com/matthewpodwysocki/category/haskell/" title="View all posts in Haskell" rel="category tag">Haskell</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2009/05/08/type-classes-are-the-secret-sauce/" title="Permalink to Type Classes Are The Secret Sauce" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2009/05/08/type-classes-are-the-secret-sauce/feed/" title="Comments RSS to Type Classes Are The Secret Sauce" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-138 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2009/05/06/functionally-implementing-intersperse/" rel="prev"><span class="meta-nav">&larr;</span> Functionally Implementing Intersperse</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2009/05/08/axum-hits-ctp/" rel="next">Axum Hits CTP <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-337">
                    <div id="dsq-comment-header-337" class="dsq-comment-header">
                        <cite id="dsq-cite-337">
                                <span id="dsq-author-user-337">PaulSmith</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-337" class="dsq-comment-body">
                        <div id="dsq-comment-message-337" class="dsq-comment-message"><p>For some reason, parts of your code are being converted to smilies.  This post, and the intersperse post.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-338">
                    <div id="dsq-comment-header-338" class="dsq-comment-header">
                        <cite id="dsq-cite-338">
    http://codebetter.com/members/Matthew.Podwysocki/default.aspx                            <span id="dsq-author-user-338">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-338" class="dsq-comment-body">
                        <div id="dsq-comment-message-338" class="dsq-comment-message"><p>@Paul,</p>
<p>Yes, I realize that now and will fix it.  It&#8217;s quite annoying to have a technical blog with emoticons as my code can frequently cause those to show up.  I&#8217;d love to have them removed quite frankly, but for now I&#8217;ll fix the code.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-339">
                    <div id="dsq-comment-header-339" class="dsq-comment-header">
                        <cite id="dsq-cite-339">
                                <span id="dsq-author-user-339">augustss</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-339" class="dsq-comment-body">
                        <div id="dsq-comment-message-339" class="dsq-comment-message"><p>I know your blog post was not about approximate equality, but it always irks me when seeing floating point numbers being compared with an absolute epsilon.</p>
<p>So 1.0 and 1.0001 are considered approximately equal but not 1.0e10 and 1.0001e10.  Why discriminate the poor large numbers?  And why are all small numbers equal? <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>(Of course, comparing with a relative epsilon is trickier; probably worth a blog post on its own.)</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-340">
                    <div id="dsq-comment-header-340" class="dsq-comment-header">
                        <cite id="dsq-cite-340">
    http://codebetter.com/members/Matthew.Podwysocki/default.aspx                            <span id="dsq-author-user-340">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-340" class="dsq-comment-body">
                        <div id="dsq-comment-message-340" class="dsq-comment-message"><p>@Lennart,</p>
<p>You&#8217;re right that a relative epsilon would be a little trickier and I&#8217;m not opposed.  I was just using this as a quick example for verifying that my average property based check holds true and it works like a charm.  But, I agree it&#8217;s less than optimal.  As for a post, I&#8217;d love to see it <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>Matt</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/matthewpodwysocki/2009/05/08/type-classes-are-the-secret-sauce/';
    var disqus_identifier = '138 /blogs/matthew.podwysocki/archive/2009/05/08/type-classes-are-the-secret-sauce.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'matthewpodwysocki';
    var disqus_title = "Type Classes Are The Secret Sauce";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=138');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2009\/05\/08\/type-classes-are-the-secret-sauce\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.532 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 19:08:08 -->
<!-- super cache -->