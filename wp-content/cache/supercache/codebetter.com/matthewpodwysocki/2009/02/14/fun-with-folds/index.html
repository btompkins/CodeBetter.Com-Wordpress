<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Fun with Folds | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Resolved Language Debates?' href='http://codebetter.com/matthewpodwysocki/2009/02/11/resolved-language-debates/' />
<link rel='next' title='Much Ado About Monads – List Edition' href='http://codebetter.com/matthewpodwysocki/2009/02/20/much-ado-about-monads-list-edition/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=107' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,125] -->
<link rel="canonical" href="http://codebetter.com/matthewpodwysocki/2009/02/14/fun-with-folds/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<meta property='og:image' content='http://codebetter.com/blogs/matthew.podwysocki/foldr_thumb_5980EDBA.jpg' />

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-107" class="post-107 post type-post status-publish format-standard hentry category-c category-f category-functional-programming category-haskell category-user-groups">
					<h1 class="entry-title">Fun with Folds</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by Matthew Podwysocki">Matthew Podwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2009/02/14/fun-with-folds/" title="8:13 am" rel="bookmark"><span class="entry-date">February 14, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>As I’ve announced earlier, and if you follow me on Twitter, I’ve been doing a bit of Haskell lately through the <a href="http://groups.google.com/group/real-world-haskell-book-club">Real World Haskell book club</a> that I started.&nbsp; Most recently, through our learnings, we have been covering the basic fundamentals of functional programming.&nbsp; The most fundamental piece to this is to understand how to apply the basic three higher-order functions, map, filter and fold.&nbsp; This time, we’re covering the <a href="http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29">fold function</a> in a neat challenge to convert functions which use explicit recursion to use folds instead.&nbsp; So, what are folds anyways? </p>
<h2>Understanding Folds</h2>
<p><a href="http://codebetter.com/blogs/matthew.podwysocki/foldr_258C9A01.jpg"><img src="http://codebetter.com/blogs/matthew.podwysocki/foldr_thumb_5980EDBA.jpg" style="border-width: 0px" alt="foldr" width="244" align="left" border="0" height="196"></a> What is a fold anyhow?&nbsp; Simply put, a fold is a higher-order function that knows how to reduce a given data structure (typically a sequence of elements) into a single return value.&nbsp; We could describe it as&nbsp; doing something to each value in the list, updating an accumulator as we go, and returning the value of the accumulator when we’re finished.&nbsp; There are two sorts of folds, a left fold and a right fold. The difference is the way the data is &#8220;folded&#8221;, as we will discuss here shortly.</p>
<h3>The Left Fold</h3>
<p>The left fold is used for folding from the left, otherwise known as the start of the list.&nbsp; The basic definition of the left fold is the following in Haskell:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Left Fold     <br />foldl :: (a -&gt; b -&gt; a) -&gt; a -&gt; [ b ] –&gt; a</div>
<div style="font-family: courier new">&nbsp;</div>
<p>The left fold function takes a step function, an initial value for the accumulator, and the list itself.&nbsp; The function calls the step function on the current accumulator and current element in the list, and then passes the new accumulator value to itself recursively to build up the accumulator until the list is exhausted.</p>
<p>To understand how this works, let’s walk through a simple example of the trite factorial, walking through each step of the calculation.&nbsp; In this example, we’ll walk through each step of calculating the factorial of 3 in F#.&nbsp; </p>
<div style="font-family: courier new">List<span style="color: blue">.</span>fold_left <span style="color: green">(*) 1 [1..3]&nbsp; <br />&nbsp; = List.fold_left (*)</span>&nbsp;<span style="color: blue">(</span><span style="color: maroon">1</span> * <span style="color: maroon">1</span><span style="color: blue">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">(</span><span style="color: maroon">2</span><span style="color: blue">:</span><span style="color: blue">:</span><span style="color: maroon">3</span><span style="color: blue">:</span><span style="color: blue">:</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">)</span>&nbsp; <br />&nbsp; = List<span style="color: blue">.</span>fold_left <span style="color: green">(*) ((1 * 1) * 2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3::[])&nbsp; <br />&nbsp; = List.fold_left (*)</span>&nbsp;<span style="color: blue">(</span><span style="color: blue">(</span><span style="color: blue">(</span><span style="color: maroon">1</span> * <span style="color: maroon">1</span><span style="color: blue">)</span> * <span style="color: maroon">2</span><span style="color: blue">)</span> * <span style="color: maroon">3</span><span style="color: blue">)</span>&nbsp;<span style="color: blue">(</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">)</span>&nbsp; <br />&nbsp; =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">(</span><span style="color: blue">(</span><span style="color: blue">(</span><span style="color: maroon">1</span> * <span style="color: maroon">1</span><span style="color: blue">)</span> * <span style="color: maroon">2</span><span style="color: blue">)</span> * <span style="color: maroon">3</span><span style="color: blue">)</span>     <br />&nbsp; = <span style="color: maroon">6</span></div>
<p>Now that we have a basic handle on how this is done, let’s look at the other fold function and what it can do for us.</p>
<p>&nbsp;</p>
<h3>The Right Fold</h3>
<p> The other type of fold is the right fold, which folds from the right, or end of a given list.&nbsp; The basic definition of a right fold is the following in Haskell:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Right fold     <br />foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [ a ] –&gt; b</div>
<div style="font-family: courier new">&nbsp;</div>
<p>The signature looks very similar to the left fold, so in order to see the difference between the two, let’s walk through a right fold of our factorial once again.</p>
<div style="font-family: courier new">List<span style="color: blue">.</span>fold_right <span style="color: green">(*) [1..3] 1      <br />&nbsp; = 1 *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List.fold_right (*)</span>&nbsp;<span style="color: blue">(</span><span style="color: maroon">2</span><span style="color: blue">:</span><span style="color: blue">:</span><span style="color: maroon">3</span><span style="color: blue">:</span><span style="color: blue">:</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">)</span>&nbsp;<span style="color: maroon">1</span>     <br />&nbsp; = <span style="color: maroon">1</span> * <span style="color: blue">(</span><span style="color: maroon">2</span> *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List<span style="color: blue">.</span>fold_right <span style="color: green">(*) (3::[]) 1)      <br />&nbsp; = 1 * (2 * (3 * List.fold_right (*)</span>&nbsp;<span style="color: blue">(</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">)</span>&nbsp;<span style="color: maroon">1</span><span style="color: blue">)</span><span style="color: blue">)</span>     <br />&nbsp; = <span style="color: maroon">1</span> * <span style="color: blue">(</span><span style="color: maroon">2</span> * <span style="color: blue">(</span><span style="color: maroon">3</span> * <span style="color: maroon">1</span><span style="color: blue">)</span><span style="color: blue">)</span>     <br />&nbsp; = <span style="color: maroon">6</span></div>
<p>The difference between the two should be a little bit more apparent now.&nbsp; With a left fold, the empty list element is on the left, and the parentheses group to the left.&nbsp; With our right fold, the 1 value is on the right, and the parentheses group to the right.</p>
<p>But, how useful is it?&nbsp; Well, we could write any number of functions such as filter and map in terms of a right fold such as the following:</p>
<div style="font-family: courier new"><span style="color: blue">let</span> filter&#8217; p xs =&nbsp; <br />&nbsp; <span style="color: blue">let</span> step x ys = <span style="color: blue">if</span> p x <span style="color: blue">then</span> x<span style="color: blue">:</span><span style="color: blue">:</span>ys <span style="color: blue">else</span> ys     <br />&nbsp; List<span style="color: blue">.</span>fold_right step xs <span style="color: blue">[</span><span style="color: blue">]</span>     </p>
<p><span style="color: blue">let</span> map&#8217; f xs =&nbsp; <br />&nbsp; <span style="color: blue">let</span> step x ys = f x <span style="color: blue">:</span><span style="color: blue">:</span> ys     <br />&nbsp; List<span style="color: blue">.</span>fold_right step xs <span style="color: blue">[</span><span style="color: blue">]</span></div>
<p>And that brings us to our challenge today, of rewriting other functions using folds instead of explicit recursion.&nbsp; But, first, let’s look at one fold function you may already be familiar with.</p>
<h3>The LINQ Aggregate</h3>
<p>Sure enough, the LINQ Aggregate function is an implementation of a left fold.&nbsp; Let’s look at the signature of one of the Aggregate overloads to get an idea of how it maps to our above functions:</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&nbsp;<span style="color: blue">static</span> TAccumulate Aggregate&lt;TSource, TAccumulate&gt;(     <br />&nbsp; <span style="color: blue">this</span> IEnumerable&lt;TSource&gt; source,&nbsp; <br />&nbsp; TAccumulate seed,&nbsp; <br />&nbsp; Func&lt;TAccumulate, TSource, TAccumulate&gt; func); </div>
<div style="font-family: courier new">&nbsp;</div>
<p>As you can see, we have our source, the seed and a function which passes the the accumulator and the current element to calculate the new accumulator value.&nbsp; We could now use LINQ to implement our factorial function once again such as the following in C#:</p>
<div style="font-family: courier new"><span style="color: green">// Left fold</span>     <br />Enumerable.Range(<span style="color: maroon">1</span>, <span style="color: maroon">3</span>).Aggregate(<span style="color: maroon">1</span>, (a, n) =&gt; a * n));&nbsp; </p>
<p><span style="color: green">// Right fold by way of a left fold</span>     <br />Enumerable.Range(<span style="color: maroon">1</span>, <span style="color: maroon">3</span>).Aggregate&lt;<span style="color: blue">int</span>,Func&lt;<span style="color: blue">int</span>,<span style="color: blue">int</span>&gt;&gt;     <br />&nbsp; (x =&gt; x, (f, n) =&gt; x =&gt; f(x * n))(<span style="color: maroon">1</span>)); </div>
<p>LINQ was built on the standard three higher-order functions of map (Select), filter (Where) and Fold (Aggregate).&nbsp; Understanding the fold is probably the more difficult to understand of them, but one of the most powerful.&nbsp; <a href="http://community.bartdesmet.net/blogs/bart/">Bart De Smet</a> covers more of the subject in detail in his post <a href="http://community.bartdesmet.net/blogs/bart/archive/2008/08/17/folding-left-right-and-the-linq-aggregation-operator.aspx">Folding left, right and the LINQ aggregation operator</a>.</p>
<p>But, now it’s time we stop postponing and get to the challenge!</p>
<h2>The Challenge</h2>
<p>Question 10 in Chapter 4 of the <a href="http://www.amazon.com/Real-World-Haskell-Bryan-OSullivan/dp/0596514980/">Real World Haskell</a> book gives a particularly interesting challenge.&nbsp; How many of the following standard Prelude functions can be rewritten as folds:</p>
<ul>
<li>any </li>
<li>cycle </li>
<li>words </li>
<li>unlines </li>
</ul>
<p>Let’s take each one of these and determine whether you can take the standard definition and rewrite them using folds.&nbsp; The first function is the <b>any</b> function which is defined here:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Applies a predicate to each item in the list to see if&nbsp; <br /><span style="color: green">&#8211;</span> any satisfies     <br /><b>any :: (a -&gt; Bool) -&gt; [ a ] -&gt; Bool</b>     <br />any _ []&nbsp;&nbsp;&nbsp;&nbsp; = False     <br />any p (x:xs) = p x || any p xs</div>
<p>Or as written in F#, might look something like this:</p>
<div style="font-family: courier new"><span style="color: blue">let</span>&nbsp;<span style="color: blue">rec</span> any <span style="color: blue">(</span>p<span style="color: blue">:</span>&#8216;a <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">bool</span><span style="color: blue">)</span>&nbsp;<span style="color: blue">:</span> &#8216;a list <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">bool</span> = <span style="color: blue">function</span>     <br />&nbsp; <span style="color: blue">|</span>&nbsp;<span style="color: blue">[</span><span style="color: blue">]</span>&nbsp;&nbsp;&nbsp; <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">false</span>     <br />&nbsp; <span style="color: blue">|</span> x<span style="color: blue">:</span><span style="color: blue">:</span>xs <span style="color: blue">-&gt;</span> p x <span style="color: blue">|</span><span style="color: blue">|</span> any p xs;;</div>
<p>&nbsp;</p>
<p>The logic for this function is rather straight forward:</p>
<ul>
<li>If the incoming list is empty, then return false </li>
<li>Else, apply a logical-or to the predicate of the head and the recursive call to the any function to determine the result </li>
</ul>
<p>The behavior of the function should operate as the following:</p>
<div style="font-family: courier new">ghci&gt; any even [1,3,5,7,8,9]    <br />True</div>
<p>The question is, can we rewrite this function as a fold, and if so how?&nbsp; The answer is actually quite simple.&nbsp; By applying a right fold, we are able to step through each value and pass a Boolean accumulator which allows us to determine if any matched our predicate function.&nbsp; We won’t bother applying the function to our item in the list if we should already be true.&nbsp; Knowing this, could now rewrite the any such as the following:</p>
<div style="font-family: courier new"><b>any&#8217; :: (a -&gt; Bool) -&gt; [ a ] -&gt; Bool</b>     <br />any&#8217; p = foldr step False     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where step x acc = acc || p x</div>
<p>Just as easily, we could write this in F# as well using the List.fold_right, such as this:</p>
<div style="font-family: courier new"><span style="color: blue">let</span> any&#8217; <span style="color: blue">(</span>p<span style="color: blue">:</span>&#8216;a <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">bool</span><span style="color: blue">)</span>&nbsp;<span style="color: blue">(</span>xs<span style="color: blue">:</span>&#8216;a list<span style="color: blue">)</span>&nbsp;<span style="color: blue">:</span>&nbsp;<span style="color: blue">bool</span> =     <br />&nbsp; <span style="color: blue">let</span> step x acc = acc <span style="color: blue">|</span><span style="color: blue">|</span> p x     <br />&nbsp; List<span style="color: blue">.</span>fold_right step xs <span style="color: blue">false</span></div>
<p>&nbsp;</p>
<p>We can now verify the behavior of our any’ function such as the following:</p>
<div style="font-family: courier new">&gt; <span style="color: blue">let</span> even x = x % <span style="color: maroon">2</span> = <span style="color: maroon">0</span>     <br />&nbsp; any&#8217; even <span style="color: blue">[</span><span style="color: maroon">1</span>;<span style="color: maroon">3</span>;<span style="color: maroon">5</span>;<span style="color: maroon">7</span>;<span style="color: maroon">8</span>;<span style="color: maroon">9</span><span style="color: blue">]</span>;;     <br /><span style="color: blue">val</span> it <span style="color: blue">:</span>&nbsp;<span style="color: blue">bool</span> = <span style="color: blue">true</span></div>
<p>Our next challenge is the <b>cycle</b> function.&nbsp; This function is defined as the following:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Takes a finite list and turns it into an infinite circular one     <br /><b>cycle :: [ a ] -&gt; [ a ]</b>     <br />cycle [] = error &#8220;Prelude.cycle: empty list&#8221;     <br />cycle xs = xs&#8217; where xs&#8217; = xs ++ xs&#8217;</div>
<p>The behavior of the function should operate as the following:</p>
<div style="font-family: courier new">ghci&gt; let c = take 10 . cycle    <br />ghci&gt; c [1..3]     <br />[1,2,3,1,2,3,1,2,3,1]     </div>
<p>Since Haskell is a lazily evaluated language, such constructs as these work nicely to create an infinite list.&nbsp; And since F# is not, let’s skip this example and focus on Haskell only.&nbsp; Trying to replicate the code here will only cause nice StackOverflowExceptions to occur and we don’t want that.&nbsp; So, how would we solve this problem using a fold?&nbsp; Consider the following logic:</p>
<ul>
<li>Apply a right fold with a concat operator to bind collections</li>
<li>Repeat input using the repeat function instead of recursion</li>
</ul>
<p>Our solution might look something like this:</p>
<div style="font-family: courier new"><b>cycle&#8217; :: [ a ] -&gt; [ a ]      <br /></b>cycle&#8217; xs = foldr (++) [] (repeat xs)</div>
<p>We can verify the behavior of our code now such as the following:</p>
<div style="font-family: courier new">ghci&gt; let c = take 10 . cycle&#8217;    <br />ghci&gt; c [1..3]     <br />[1,2,3,1,2,3,1,2,3,1]</div>
<p>The next challenger is the <b>words</b> function.&nbsp; This function is defined as the following:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Breaks a string into a list based upon whitespace     <br /><b>words :: String -&gt; [String]</b>     <br />words s = case dropWhile isSpace s of     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#8220;&#8221; -&gt; []     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s&#8217; -&gt; w : words s&#8221;     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where (w, s&#8221;) =     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break isSpace s&#8217;</div>
<div style="font-family: courier new"></div>
<p>The behavior of the function should operate as the following:</p>
<div style="font-family: courier new">ghci&gt; words &#8220;foo bar&#8221;    <br />["foo","bar"]</div>
<p>For those who are coming from the F# world, you may realize that Haskell treats strings as character lists, as opposed to an IEnumerable&lt;char&gt;.&nbsp; Looking at the above code sample, how might we be able to use a fold instead of recursion here?&nbsp; Consider the following logic:</p>
<ul>
<li>Accumulate a list of strings as we build our result</li>
<li>If we encounter a space, we drop it, and then cons an empty to the accumulator</li>
<li>Else, we cons the character to our list.</li>
</ul>
<p>Let’s see how that looks in code:</p>
<div style="font-family: courier new"><b>words&#8217; :: String -&gt; [String]</b>     <br />words&#8217; [] = [[]]     <br />words&#8217; s = foldr step [[]] s     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where step c acc@(a:as&#8217;)     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | isSpace c = [] : acc     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | otherwise = (c:a):as&#8217;</div>
<p>Of course, we could write this using F# as well, although it’s not quite as elegant, due to the fact that strings are not considered character lists, but instead sequences.&nbsp; Let’s go over briefly what the code might look like:</p>
<div style="font-family: courier new"><span style="color: blue">module</span> Char =     <br />&nbsp; <span style="color: blue">let</span> is_space = System<span style="color: blue">.</span>Char<span style="color: blue">.</span>IsWhiteSpace     </p>
<p><span style="color: blue">module</span> String =     <br />&nbsp; <span style="color: blue">let</span> of_list <span style="color: blue">(</span>xs<span style="color: blue">:</span><span style="color: blue">char</span> list<span style="color: blue">)</span>&nbsp;<span style="color: blue">:</span>&nbsp;<span style="color: blue">string</span> =     <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">new</span>&nbsp;<span style="color: blue">string</span><span style="color: blue">(</span>Array<span style="color: blue">.</span>of_list xs<span style="color: blue">)</span>     </p>
<p><span style="color: blue">let</span> words&#8217; <span style="color: blue">:</span>&nbsp;<span style="color: blue">string</span>&nbsp;<span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">string</span> list =     <br />&nbsp; <span style="color: blue">let</span> words&#8221; <span style="color: blue">:</span>&nbsp;<span style="color: blue">char</span> list <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">char</span> list list = <span style="color: blue">function</span>     <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">|</span>&nbsp;<span style="color: blue">[</span><span style="color: blue">]</span>&nbsp;<span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">[</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">]</span>     <br />&nbsp;&nbsp;&nbsp; <span style="color: blue">|</span> s&nbsp; <span style="color: blue">-&gt;</span>&nbsp;<span style="color: blue">let</span> step c acc =     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">let</span>&nbsp;<span style="color: blue">(</span>a<span style="color: blue">:</span><span style="color: blue">:</span><span style="color: blue">as</span>&#8216;<span style="color: blue">)</span> = acc     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">if</span> Char<span style="color: blue">.</span>is_space c <span style="color: blue">then</span>&nbsp;<span style="color: blue">[</span><span style="color: blue">]</span>&nbsp;<span style="color: blue">:</span><span style="color: blue">:</span> acc     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">else</span>&nbsp;<span style="color: blue">(</span>c<span style="color: blue">:</span><span style="color: blue">:</span>a<span style="color: blue">)</span><span style="color: blue">:</span><span style="color: blue">:</span><span style="color: blue">as</span>&#8216;     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List<span style="color: blue">.</span>fold_right step s <span style="color: blue">[</span><span style="color: blue">[</span><span style="color: blue">]</span><span style="color: blue">]</span>&nbsp; <br />&nbsp; Seq<span style="color: blue">.</span>to_list &gt;&gt; words&#8221; &gt;&gt; List<span style="color: blue">.</span>map String<span style="color: blue">.</span>of_list</div>
<p>We can verify the behavior of the function in F# such as the following:</p>
<div style="font-family: courier new">&gt; words&#8217; <span style="color: maroon">&#8220;foo bar&#8221;</span>;;     <br /><span style="color: blue">val</span> it <span style="color: blue">:</span>&nbsp;<span style="color: blue">string</span> list = <span style="color: blue">[</span><span style="color: maroon">"foo"</span>; <span style="color: maroon">"bar"</span><span style="color: blue">]</span></div>
<p>The final challenge is the <b>unlines</b> function.&nbsp; It is defined as the following:</p>
<div style="font-family: courier new"><span style="color: green">&#8211;</span> Joins strings together with a line terminator in between     <br /><b>unlines :: [String] -&gt; String</b>     <br />unlines [] = []     <br />unlines (l:ls) = l ++ &#8216;\n&#8217; : unlines ls</div>
<p>What this function does is to take each line and concat the a cons of an ‘\n’ character plus the recursive call to unlines.&nbsp; Knowing what we know from the above examples, this should also be easy.&nbsp; How might we do it?&nbsp; Let’s take the following logic:</p>
<ul>
<li>Use a fold right to enumerate the lines </li>
<li>Create a step function which first concats the \r\n (Windows style)&nbsp; and then concats the rest of the list </li>
<li>Use an empty list accumulator </li>
</ul>
<div style="font-family: courier new"><b>unlines&#8217; :: [String] -&gt; String</b>     <br />unlines&#8217; = foldr step []     <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where step = ((++) . (++ &#8220;\r\n&#8221;)) </div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Using some of these techniques, we could also apply this to F# as well.&nbsp; Taking the List module from above, we could write the code as the following:</p>
<div style="font-family: courier new"><span style="color: blue">let</span> flip f x y = f y x     <br /><span style="color: blue">let</span> unlines&#8217; <span style="color: blue">(</span>xs<span style="color: blue">:</span><span style="color: blue">string</span> list<span style="color: blue">)</span>&nbsp;<span style="color: blue">:</span>&nbsp;<span style="color: blue">string</span> =     <br />&nbsp; <span style="color: blue">let</span> step = <span style="color: blue">(</span><span style="color: blue">(</span>@<span style="color: blue">)</span> &lt;&lt; <span style="color: blue">(</span>flip <span style="color: blue">(</span>@<span style="color: blue">)</span>&nbsp;<span style="color: blue">(</span>Seq<span style="color: blue">.</span>to_list <span style="color: maroon">&#8220;\r\n&#8221;</span><span style="color: blue">)</span><span style="color: blue">)</span><span style="color: blue">)</span>     <br />&nbsp; List<span style="color: blue">.</span>fold_right step <span style="color: blue">(</span>List<span style="color: blue">.</span>map Seq<span style="color: blue">.</span>to_list xs<span style="color: blue">)</span>&nbsp;<span style="color: blue">[</span><span style="color: blue">]</span>&nbsp;<span style="color: blue">|</span>&gt; String<span style="color: blue">.</span>of_list</div>
<p>We can now evaluate the results of our function such as the following which should follow our expected behavior.</p>
<div style="font-family: courier new">&gt; unlines&#8217; <span style="color: blue">[</span><span style="color: maroon">"foo"</span>;<span style="color: maroon">"bar"</span><span style="color: blue">]</span>;;     <br /><span style="color: blue">val</span> it <span style="color: blue">:</span>&nbsp;<span style="color: blue">string</span> = <span style="color: maroon">&#8220;foo\r\nbar\r\n&#8221;</span></div>
<div style="font-family: courier new"><span style="color: maroon"></span></div>
<div style="font-family: courier new"><span style="color: maroon"></span></div>
<p>So the answer to the question is, yes, all of the above functions can be expressed in terms of a fold function.&nbsp; And I think we learned a bit along the way as well.</p>
<h2>Conclusion</h2>
<p>In functional programming, the use of folds are extremely common.&nbsp; With a little practice, as I’ve shown above, we will have an easier time understanding how to use folds instead of explicit recursion.&nbsp; Indeed, many of the problems for which we use explicit recursion to solve could easily be solved with folds.&nbsp; </p>
<p>Why use folds over explicit recursion?&nbsp; Because using folds gives us well defined and explicit behavior, whereas explicit recursion may take many forms and harder to get just right.&nbsp; By applying the basic three higher-order functions, we only need to learn this behavior once and then anyone who looks at our code will quickly understand our intent.&nbsp; Because of this, you’ll be able to write much more concise code.</p>
<div class="shr-publisher-107"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/c/" title="View all posts in C#" rel="category tag">C#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/f/" title="View all posts in F#" rel="category tag">F#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/functional-programming/" title="View all posts in Functional Programming" rel="category tag">Functional Programming</a>, <a href="http://codebetter.com/matthewpodwysocki/category/haskell/" title="View all posts in Haskell" rel="category tag">Haskell</a>, <a href="http://codebetter.com/matthewpodwysocki/category/user-groups/" title="View all posts in User Groups" rel="category tag">User Groups</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2009/02/14/fun-with-folds/" title="Permalink to Fun with Folds" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2009/02/14/fun-with-folds/feed/" title="Comments RSS to Fun with Folds" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-107 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2009/02/11/resolved-language-debates/" rel="prev"><span class="meta-nav">&larr;</span> Resolved Language Debates?</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2009/02/20/much-ado-about-monads-list-edition/" rel="next">Much Ado About Monads – List Edition <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-263">
                    <div id="dsq-comment-header-263" class="dsq-comment-header">
                        <cite id="dsq-cite-263">
                                <span id="dsq-author-user-263">Larry Lary</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-263" class="dsq-comment-body">
                        <div id="dsq-comment-message-263" class="dsq-comment-message"><p>You&#8217;ve got some amusing emoticon substitution going on for ( b ) and ( a ) up there&#8230;</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-264">
                    <div id="dsq-comment-header-264" class="dsq-comment-header">
                        <cite id="dsq-cite-264">
    http://blog.kamil.dworakowski.name                            <span id="dsq-author-user-264">Kamil Dworakowski</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-264" class="dsq-comment-body">
                        <div id="dsq-comment-message-264" class="dsq-comment-message"><p>your implementation of words&#8217; is wrong ;P</p>
<p>for a start: words &#8220;&#8221; != words&#8217; &#8220;&#8221;, moreover it doesn&#8217;t handle double spaces, I think</p>
<p>words&#8221; xs = snd $ foldr f (&#8220;&#8221;, []) (&#8216; &#8216;:xs) where<br />
    f &#8216; &#8216; (&#8220;&#8221;, ws) = (&#8220;&#8221;, ws)<br />
    f &#8216; &#8216; (w, ws) = (&#8220;&#8221;, w:ws)<br />
    f x a = first (x:) a</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-265">
                    <div id="dsq-comment-header-265" class="dsq-comment-header">
                        <cite id="dsq-cite-265">
    http://splonderzoek.blogspot.com/                            <span id="dsq-author-user-265">Sean Leather</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-265" class="dsq-comment-body">
                        <div id="dsq-comment-message-265" class="dsq-comment-message"><p>Your description of a fold as &#8220;a higher-order function that knows how to reduce a given data structure (typically a sequence of elements) into a single return value&#8221; is better known as a &#8220;crush&#8221; in the literature:</p>
<p><a href="http://www.citeulike.org/user/spl/tag/crush" rel="nofollow">http://www.citeulike.org/user/spl/tag/crush</a></p>
<p>For lists, the fold and the crush are the same. The generic programming library EMGM</p>
<p><a href="http://www.cs.uu.nl/wiki/GenericProgramming/EMGM" rel="nofollow">http://www.cs.uu.nl/wiki/GenericProgramming/EMGM</a></p>
<p>actually has a generic crush function that can be used with many datatypes.</p>
<p><a href="http://hackage.haskell.org/packages/archive/emgm/0.2/doc/html/Generics-EMGM-Functions-Crush.html" rel="nofollow">http://hackage.haskell.org/packages/archive/emgm/0.2/doc/html/Generics-EMGM-Functions-Crush.html</a></p>
<p>A fold (also called a catamorphism) is actually something that replaces each constructor in an algebraic datatype with a new value. Here&#8217;s some references.</p>
<p><a href="http://www.citeulike.org/user/spl/tag/fold" rel="nofollow">http://www.citeulike.org/user/spl/tag/fold</a></p>
<p>But the Haskell libraries will try to tell you otherwise, considering the type class Foldable and various things called &#8216;fold&#8217;.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-266">
                    <div id="dsq-comment-header-266" class="dsq-comment-header">
                        <cite id="dsq-cite-266">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-266">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-266" class="dsq-comment-body">
                        <div id="dsq-comment-message-266" class="dsq-comment-message"><p>@Larry,</p>
<p>Thanks for noticing.  I should have checked that before I posted because I&#8217;ve run into this problem before.</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-267">
                    <div id="dsq-comment-header-267" class="dsq-comment-header">
                        <cite id="dsq-cite-267">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-267">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-267" class="dsq-comment-body">
                        <div id="dsq-comment-message-267" class="dsq-comment-message"><p>@Sean,</p>
<p>Interesting, and that&#8217;s usually what I refer to when I&#8217;m talking about folds is explicitly lists, but I&#8217;ll be sure to make sure of my language next time.</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-268">
                    <div id="dsq-comment-header-268" class="dsq-comment-header">
                        <cite id="dsq-cite-268">
                                <span id="dsq-author-user-268">Daniel Kullmann</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-268" class="dsq-comment-body">
                        <div id="dsq-comment-message-268" class="dsq-comment-message"><p>Hi Matthew,</p>
<p>I think your answer to any is wrong: There is no equivalent implementation using fold. This is because the function any stops evaluation of the input list if it finds an element for which the predicate is true. So for the following lists, any and any&#8217; show different behaviour:<br />
[1,2,undefined] and<br />
[1..]</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-269">
                    <div id="dsq-comment-header-269" class="dsq-comment-header">
                        <cite id="dsq-cite-269">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-269">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-269" class="dsq-comment-body">
                        <div id="dsq-comment-message-269" class="dsq-comment-message"><p>@Daniel</p>
<p>Ok, I was using QuickCheck to test my implementations such as this and found out no issues:</p>
<p>prop_any&#8217; :: [Int] -> Bool<br />
prop_any&#8217; xs = any&#8217; even xs == any even xs</p>
<p>Which is why I thought it worked.  Interesting case though what you found.  I guess I need to re-evaluate.</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/matthewpodwysocki/2009/02/14/fun-with-folds/';
    var disqus_identifier = '107 /blogs/matthew.podwysocki/archive/2009/02/14/fun-with-folds.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'matthewpodwysocki';
    var disqus_title = "Fun with Folds";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=107');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2009\/02\/14\/fun-with-folds\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.527 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 20:07:31 -->
<!-- super cache -->