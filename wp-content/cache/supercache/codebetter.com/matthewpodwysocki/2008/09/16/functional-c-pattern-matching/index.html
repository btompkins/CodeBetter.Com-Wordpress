<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Functional C# &#8211; Pattern Matching | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Object Oriented F# &#8211; More Extension Everything' href='http://codebetter.com/matthewpodwysocki/2008/09/13/object-oriented-f-more-extension-everything/' />
<link rel='next' title='Herding Code Episode 18 &#8211; Functional Programming and F#' href='http://codebetter.com/matthewpodwysocki/2008/09/19/herding-code-episode-18-functional-programming-and-f/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=56' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,149] -->
<link rel="canonical" href="http://codebetter.com/matthewpodwysocki/2008/09/16/functional-c-pattern-matching/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-56" class="post-56 post type-post status-publish format-standard hentry category-c category-f category-functional-programming">
					<h1 class="entry-title">Functional C# &#8211; Pattern Matching</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by Matthew Podwysocki">Matthew Podwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2008/09/16/functional-c-pattern-matching/" title="11:47 pm" rel="bookmark"><span class="entry-date">September 16, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>In the past, I&#8217;ve covered quite a bit of functional programming in C# 3.0 and how you can implement some of the basic constructs using the language.&#160; In preparation for the <a href="http://richmondcodecamp.org/default.aspx">Richmond Code Camp</a> coming up on October 4th, for which I&#8217;m planning to present &quot;Functional C# <strong>-or-</strong> How I lost the foreach and learned to love LINQ&quot;, I&#8217;m revisiting some of the topics I&#8217;ve talked about in the past.&#160; One of those topics is <a href="http://en.wikipedia.org/wiki/Pattern_matching">pattern matching</a>.</p>
<p> <br />
<h2>Pattern Matching</h2>
<p>Earlier in my introduction to F# series, I covered pattern matching and how clear and concise it can make your programs.&#160; You can more program to your intent instead of needing to switch between if statements, case statements and so on.&#160; Basically, pattern matching is the way of checking for conditions on a given parameter with rigid specifications.&#160; Pattern matching is a strongly functional programming concept and is present in F#, OCaml, Haskell, Erlang, etc.&#160; Erlang is an interesting one here as you can define the patterns, which in turn will define the type.&#160; As Erlang is a dynamic language, you do not need to specify the type beforehand, so implementing patterns then define that type.</p>
<p>Pattern matching in F# is pretty flexible as it allows to match against explicit values, structures, lists, guarded ranges, .NET types, active patterns and so on.&#160; The basic syntax is match &#8230; with &#8230; expressions such as this.</p>
<div style="font-family: courier new"><span style="color: blue">match</span> expression <span style="color: blue">with</span>     <br /><span style="color: blue">|</span> pattern_1 <span style="color: blue">-&gt;</span> expression_1     <br /><span style="color: blue">|</span> pattern_2 <span style="color: blue">-&gt;</span> expression_2     <br /><span style="color: blue">|</span> pattern_n <span style="color: blue">-&gt;</span> expression_n</div>
<div style="font-family: courier new">&#160;</div>
<p>Similarly, I could use the function keyword should I create a function with the parameter to pattern match against instead of the above syntax, such as this.</p>
<div style="font-family: courier new"><span style="color: blue">let</span> get_value = <span style="color: blue">function</span>     <br />&#160; <span style="color: blue">|</span> None <span style="color: blue">-&gt;</span>&#160;<span style="color: maroon">0</span>     <br />&#160; <span style="color: blue">|</span> Some n <span style="color: blue">-&gt;</span> n     </p>
<p><span style="color: blue">let</span> value = get_value <span style="color: blue">(</span>Some <span style="color: maroon">25</span><span style="color: blue">)</span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<p>As you may notice, F# has very flexible syntax for describing these, so let&#8217;s look at a few more ideas before we move on.</p>
<p> <br />
<h3>Data Structure Matching</h3>
<p>We can pattern match against data structures, such as lists quite easily.&#160; Lists are a special case as it allows you to match against the head and the tail of the given list.&#160; By using the head::tail notation allows us to specify that we will receive the head and tail values should they be present.&#160; Such an example might be to get the evens from a given list.</p>
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">let</span>&#160;<span style="color: blue">rec</span> even_list = <span style="color: blue">function</span>     <br />&#160; <span style="color: blue">|</span>&#160;<span style="color: blue">[</span><span style="color: blue">]</span>&#160;<span style="color: blue">-&gt;</span>&#160;<span style="color: blue">[</span><span style="color: blue">]</span>     <br />&#160; <span style="color: blue">|</span> h<span style="color: blue">:</span><span style="color: blue">:</span>t <span style="color: blue">when</span> h % <span style="color: maroon">2</span> = <span style="color: maroon">0</span>&#160;<span style="color: blue">-&gt;</span> h<span style="color: blue">:</span><span style="color: blue">:</span>even_list t     <br />&#160; <span style="color: blue">|</span> h<span style="color: blue">:</span><span style="color: blue">:</span>t <span style="color: blue">-&gt;</span> even_list t     </p>
<p><span style="color: blue">let</span> evens = <span style="color: blue">[</span><span style="color: maroon">1</span><span style="color: blue">.</span><span style="color: maroon">.20</span><span style="color: blue">]</span>&#160;<span style="color: blue">|</span>&gt; even_list</div>
<div style="font-family: courier new">&#160;</div>
<h3>Active Patterns</h3>
<p>Pattern matching in F# is extremely flexible, as you can extend what you can pattern match.&#160; Through a mechanism called &quot;Active Patterns&quot;, you can extend the syntax quite easily.&#160; Let&#8217;s say for instance that we want to create a pattern to determine whether a given number is either a composite number, prime number or neither.&#160; We can define a pattern over that such as the following code:</p>
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">let</span> is_prime x =     <br />&#160; <span style="color: blue">let</span> lim = <span style="color: blue">int</span><span style="color: blue">(</span>sqrt<span style="color: blue">(</span><span style="color: blue">float</span><span style="color: blue">(</span>x<span style="color: blue">)</span><span style="color: blue">)</span><span style="color: blue">)</span>     <br />&#160; <span style="color: blue">let</span>&#160;<span style="color: blue">rec</span> check y =     <br />&#160;&#160;&#160; y &gt; lim <span style="color: blue">or</span>&#160;<span style="color: blue">(</span>x % y &lt;&gt; <span style="color: maroon">0</span> &amp;&amp; check<span style="color: blue">(</span>y + <span style="color: maroon">1</span><span style="color: blue">)</span><span style="color: blue">)</span>     <br />&#160; check <span style="color: maroon">2</span>     <br />&#160;&#160; <br /><span style="color: blue">let</span>&#160;<span style="color: blue">(</span><span style="color: blue">|</span>Prime<span style="color: blue">|</span>Composite<span style="color: blue">|</span>Neither<span style="color: blue">|</span><span style="color: blue">)</span> x =&#160; <br />&#160; <span style="color: blue">if</span> x &lt; <span style="color: maroon">2</span>&#160;<span style="color: blue">then</span> Neither     <br />&#160; <font color="#0000ff">elif</font> is_prime x <span style="color: blue">then</span> Prime&#160; <br />&#160; <span style="color: blue">else</span> Composite     </p>
<p><span style="color: blue">let</span> prime_or_composite x =&#160; <br />&#160; <span style="color: blue">match</span> x <span style="color: blue">with</span>     <br />&#160; <span style="color: blue">|</span> Prime <span style="color: blue">-&gt;</span>&#160;<span style="color: maroon">&quot;prime&quot;</span>     <br />&#160; <span style="color: blue">|</span> Composite <span style="color: blue">-&gt;</span>&#160;<span style="color: maroon">&quot;composite&quot;</span>     <br />&#160; <span style="color: blue">|</span> Neither <span style="color: blue">-&gt;</span>&#160;<span style="color: maroon">&quot;neither composite nor prime&quot;</span>     </p>
<p>printfn <span style="color: maroon">&quot;%s&quot;</span>&#160;<span style="color: blue">(</span>prime_or_composite <span style="color: maroon">3</span><span style="color: blue">)</span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<p>As you can see from above, we can define the pattern using the (|pattern name|) syntax and then define the behavior from this.&#160; Then I can use them in the pattern matching exercise below to print out whether my given number fit any of the patterns.&#160; That&#8217;s how powerful pattern matching can be.&#160; But, can we have some of these features in C#?</p>
<p> <br />
<h2>Implementing in C# 3.0</h2>
<p>I&#8217;ve had the idea to express some basic pattern matching in C# instead of having to decide whether things are a switch statement, if, else, etc.&#160; Instead, I&#8217;d rather have the ability to specify these matches through the use of predicates for determining success and then a given action should that one be selected.&#160; Unfortunately, that&#8217;s a very limited subset of what pattern matching can achieve, but it&#8217;s actually quite simple to implement in C# 3.0 through the use of extension methods and fluent interfaces.</p>
<p>Let&#8217;s set up a simple scenario which takes in a nullable number and matches against whether it is even, odd or null.&#160; Below is a simple example of how that might look through the use of our extension methods and fluent interface.</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: blue">bool</span> IsEven(<span style="color: blue">int?</span> n)     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">return</span> n != <span style="color: blue">null</span> ? n % <span style="color: maroon">2</span> == <span style="color: maroon">0</span> : <span style="color: maroon">false</span>;     <br />}     </p>
<p><span style="color: blue">public</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: blue">bool</span> IsOdd(<span style="color: blue">int?</span> n)     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">return</span> n != <span style="color: blue">null</span> ? !IsEven(n) : <span style="color: maroon">true</span>;     <br />}     </p>
<p><span style="color: blue">int?</span> n = <span style="color: maroon">3</span>;     <br /><font color="#0000ff">var</font> evenOdd = n.Match()     <br />&#160;&#160;&#160; .With(IsEven, x =&gt; <span style="color: maroon">&quot;Even number&quot;</span>)     <br />&#160;&#160;&#160; .With(IsOdd, x =&gt; <span style="color: maroon">&quot;Odd number&quot;</span>)     <br />&#160;&#160;&#160; .Else(x =&gt; <span style="color: maroon">&quot;Null&quot;</span>)     <br />&#160;&#160;&#160; .Do();     <br />Console.WriteLine(evenOdd);</div>
<div style="font-family: courier new">&#160;</div>
<p>What this gives me is the ability to match against my current piece of data and determine the actions through my With methods and my default case with the Else method.&#160; Each takes a lambda function which passes in the value we&#8217;re matching against, and then returns a string.&#160; The problem arises with C# though if we want our lambda to do nothing (aka void), as C# doesn&#8217;t treat this as a proper return type, so you would have to switch between Func&lt;T, TResult&gt; and Func&lt;T&gt; which isn&#8217;t really realistic.&#160; So, already our design is hobbled.</p>
<p>But, let&#8217;s move on to what the implementation might look like.&#160; We need a way to capture all the cases and execute them in order to find the match, else throw a MatchNotFoundException should there be no match.&#160; Let&#8217;s define that class below.</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&#160;<span style="color: blue">class</span> MatchNotFoundException : Exception     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">public</span> MatchNotFoundException(<span style="color: blue">string</span> message) : <span style="color: blue">base</span>(message) { }     <br />}     </p>
<p><span style="color: blue">public</span>&#160;<span style="color: blue">class</span> PatternMatch&lt;T, TResult&gt;     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">private</span>&#160;<span style="color: blue">readonly</span> T value;     <br />&#160;&#160;&#160; <span style="color: blue">private</span>&#160;<span style="color: blue">readonly</span> List&lt;Tuple&lt;Predicate&lt;T&gt;, Func&lt;T, TResult&gt;&gt;&gt; cases&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; = <span style="color: blue">new</span> List&lt;Tuple&lt;Predicate&lt;T&gt;, Func&lt;T, TResult&gt;&gt;&gt;();     <br />&#160;&#160;&#160; <span style="color: blue">private</span> Func&lt;T, TResult&gt; elseFunc;     </p>
<p>&#160;&#160;&#160; <span style="color: blue">internal</span> PatternMatch(T value)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">this</span>.value = value;     <br />&#160;&#160;&#160; }     </p>
<p>&#160;&#160;&#160; <span style="color: blue">public</span> PatternMatch&lt;T, TResult&gt; With(Predicate&lt;T&gt; condition, Func&lt;T, TResult&gt; result)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; cases.Add(Tuple.New(condition, result));     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span>&#160;<span style="color: blue">this</span>;     <br />&#160;&#160;&#160; }     </p>
<p>&#160;&#160;&#160; <span style="color: blue">public</span> PatternMatch&lt;T, TResult&gt; Else(Func&lt;T, TResult&gt; result)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (elseFunc != <span style="color: blue">null</span>)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">throw</span>&#160;<span style="color: blue">new</span> InvalidOperationException(<span style="color: maroon">&quot;Cannot have multiple else cases&quot;</span>);     </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; elseFunc = result;     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span>&#160;<span style="color: blue">this</span>;     <br />&#160;&#160;&#160; }     </p>
<p>&#160;&#160;&#160; <span style="color: blue">public</span> TResult Do()     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (elseFunc != <span style="color: blue">null</span>)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; cases.Add(     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Tuple.New&lt;Predicate&lt;T&gt;, Func&lt;T, TResult&gt;&gt;(x =&gt; <span style="color: maroon">true</span>, elseFunc));     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">foreach</span> (var item <span style="color: blue">in</span> cases)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (item.Item1(value))     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> item.Item2(value);     </p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">throw</span>&#160;<span style="color: blue">new</span> MatchNotFoundException(<span style="color: maroon">&quot;Incomplete pattern match&quot;</span>);     <br />&#160;&#160;&#160; }     <br />}</div>
<div style="font-family: courier new">&#160;</div>
<p>What we have defined is a holder for our cases.&#160; I&#8217;m using a Tuple&lt;TArg1, TArg2&gt; to hold my pairs of predicates and expressions to execute.&#160; I&#8217;ve defined that as part of my <a href="http://code.msdn.microsoft.com/FunctionalCSharp">Functional C# library</a> available on CodeGallery, which should be up to date with example of functional programming using C# 3.0.&#160; When you define an else function (or default function), we want to be able to add that to our collection as the last one to be fired, if ever, so we will define that in the Do method.</p>
<p>In order to stay away from the angle bracket tax, I&#8217;ve created a context class which will allow me to set up my first With statement and then include the PatternMatch&lt;T, TResult&gt;.&#160; This code takes in the value and then will have a With method which will return us a new instance of the PatternMatch&lt;T, TResult&gt;.</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&#160;<span style="color: blue">class</span> PatternMatchContext&lt;T&gt;     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">private</span>&#160;<span style="color: blue">readonly</span> T value;     </p>
<p>&#160;&#160;&#160; <span style="color: blue">internal</span> PatternMatchContext(T value)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">this</span>.value = value;     <br />&#160;&#160;&#160; }     </p>
<p>&#160;&#160;&#160; <span style="color: blue">public</span> PatternMatch&lt;T, TResult&gt; With&lt;TResult&gt;(     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; Predicate&lt;T&gt; condition,&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; Func&lt;T, TResult&gt; result)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; var match = <span style="color: blue">new</span> PatternMatch&lt;T, TResult&gt;(value);     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> match.With(condition, result);     <br />&#160;&#160;&#160; }     <br />}</div>
<div style="font-family: courier new">&#160;</div>
<p>Lastly, I&#8217;ll define a simple extension method which will allow me to pattern match against any given data type.&#160; This will simply create a new instance of the PatternMatchContext&lt;T&gt; class and return it.</p>
<div style="font-family: courier new"><span style="color: blue">public</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: blue">class</span> PatternMatchExtensions     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">public</span>&#160;<span style="color: blue">static</span> PatternMatchContext&lt;T&gt; Match&lt;T&gt;(<span style="color: blue">this</span> T value)     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span>&#160;<span style="color: blue">new</span> PatternMatchContext&lt;T&gt;(value);     <br />&#160;&#160;&#160; }     <br />}</div>
<div style="font-family: courier new">&#160;</div>
<h2>Wrapping it Up</h2>
<p>As you can see, it&#8217;s clumsy and not the most ideal as it would be in an F# solution or any other more functional programming language.&#160; We quickly run into the limitations with the language such as dealing with Func&lt;T, TResult&gt; and Action&lt;T&gt; because C# does not treat System.Void as a type.&#160; <a href="http://blogs.msdn.com/wesdyer/">Wes Dyer</a> and the Microsoft Volta team have been working on some of those issues with library approaches as well.&#160; But, it&#8217;s still interesting to try to extend C# into brave new territory.&#160; </p>
<p>I would like to see C# 4.0 and beyond continue to make inroads towards a more functional style, although I will caution that C# should stay with the object and class first approach with functional aspects, whereas leaving F# to be the functional programming first mentality.&#160; In order to do that, there are a few big hurdles to overcome&#8230;</p>
<p>As always, the sample code is available on CodeGallery at the <a href="http://code.msdn.microsoft.com/FunctionalCSharp">Functional C# project</a>.</p>
<div class="shr-publisher-56"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/c/" title="View all posts in C#" rel="category tag">C#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/f/" title="View all posts in F#" rel="category tag">F#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/functional-programming/" title="View all posts in Functional Programming" rel="category tag">Functional Programming</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2008/09/16/functional-c-pattern-matching/" title="Permalink to Functional C# &#8211; Pattern Matching" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2008/09/16/functional-c-pattern-matching/feed/" title="Comments RSS to Functional C# &#8211; Pattern Matching" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-56 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2008/09/13/object-oriented-f-more-extension-everything/" rel="prev"><span class="meta-nav">&larr;</span> Object Oriented F# &#8211; More Extension Everything</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2008/09/19/herding-code-episode-18-functional-programming-and-f/" rel="next">Herding Code Episode 18 &#8211; Functional Programming and F# <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-137">
                    <div id="dsq-comment-header-137" class="dsq-comment-header">
                        <cite id="dsq-cite-137">
    http://www.myfavoritemovies.us/csharp                            <span id="dsq-author-user-137">Nair</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-137" class="dsq-comment-body">
                        <div id="dsq-comment-message-137" class="dsq-comment-message"><p>I recently started following your blog and this one was very good. But I have question, in the start you mentioned &#8220;How I lost the foreach and learned to love LINQ&#8221;, I couldn&#8217;t find the related blog on this subject. Could you please kind enough to send me the url for this link?<br />
Thanks.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-138">
                    <div id="dsq-comment-header-138" class="dsq-comment-header">
                        <cite id="dsq-cite-138">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-138">Matthew Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-138" class="dsq-comment-body">
                        <div id="dsq-comment-message-138" class="dsq-comment-message"><p>@Nair</p>
<p>It&#8217;s an upcoming talk that I&#8217;m going to be giving at the Richmond Code Camp on October 4th.  I&#8217;ll post the slides and any additional code after the presentation.</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-139">
                    <div id="dsq-comment-header-139" class="dsq-comment-header">
                        <cite id="dsq-cite-139">
    http://www.myfavoritemovies.us/csharp                            <span id="dsq-author-user-139">Nair</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-139" class="dsq-comment-body">
                        <div id="dsq-comment-message-139" class="dsq-comment-message"><p>Thank you very much, looking forward for the code..</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-140">
                    <div id="dsq-comment-header-140" class="dsq-comment-header">
                        <cite id="dsq-cite-140">
    http://kaveh.shahbazian@gmail.com                            <span id="dsq-author-user-140">Kaveh Shahbazian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-140" class="dsq-comment-body">
                        <div id="dsq-comment-message-140" class="dsq-comment-message"><p>I have implemented almost the same thing in <a href="http://www.codeplex.com/foop" rel="nofollow">http://www.codeplex.com/foop</a> (<a href="http://sf.net/projects/foop" rel="nofollow">http://sf.net/projects/foop</a>) and It was very interesting to me that I saw this on your blog!</p>
<p>I am sure now that my implementation was a logical one and in the right direction!</p>
<p>Thanks! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-141">
                    <div id="dsq-comment-header-141" class="dsq-comment-header">
                        <cite id="dsq-cite-141">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-141">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-141" class="dsq-comment-body">
                        <div id="dsq-comment-message-141" class="dsq-comment-message"><p>@Kaveh</p>
<p>It is a logical step in the right direction, but unfortunately, it doesn&#8217;t get nearly enough of the way there to have really powerful pattern matching.  To me, I should be able to give literal values instead of Predicate functions everywhere and match that way.  It&#8217;s a work in progress and definitely something I need to think more about.</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-142">
                    <div id="dsq-comment-header-142" class="dsq-comment-header">
                        <cite id="dsq-cite-142">
                                <span id="dsq-author-user-142">Kaveh Shahbazian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-142" class="dsq-comment-body">
                        <div id="dsq-comment-message-142" class="dsq-comment-message"><p>I have implemented something by using Implicit Conversion, Reflection (for reference types) plus some level of a Dynamic Proxy pattern, true and false operators and Anonymous Types. Yet the reflection part fuzz me a little.</p>
<p>I think by mainstream F# I will go F# and yet we have a lot of new opportunities by dynamics of C# 4.0!</p>
<p>I don&#8217;t know even this pattern matching thing would ever is possible to be incorporated in C# nicely and I prefer the built in look and feel than bolted on look and feel! (Will we have some levels of meta programming in C# 4.0?).</p>
<p>Thanks! </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-143">
                    <div id="dsq-comment-header-143" class="dsq-comment-header">
                        <cite id="dsq-cite-143">
    http://podwysocki.codebetter.com                            <span id="dsq-author-user-143">Matthew.Podwysocki</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-143" class="dsq-comment-body">
                        <div id="dsq-comment-message-143" class="dsq-comment-message"><p>@Kaveh</p>
<p>Interesting regarding some further implementations.  I scratched the surface on pattern matching and it just wasn&#8217;t worth my time to do a complete implementation, such as the language limits me.</p>
<p>I don&#8217;t think dynamic C# will really solve many problems more than COM interop and that&#8217;s about it, from what I can glance from Charlie Calvert&#8217;s blog and a few other places.  I&#8217;m hoping for instead more functional aspects in the future.  We&#8217;ll see though.</p>
<p>As for better metaprogramming, one would hope that it&#8217;s going to be a better story going forward, but I think maybe that&#8217;s for C# 5.0&#8230;</p>
<p>Matt</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-794">
                    <div id="dsq-comment-header-794" class="dsq-comment-header">
                        <cite id="dsq-cite-794">
    http://twitter.com/Thoriumi                            <span id="dsq-author-user-794">Tuomas Hietanen</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-794" class="dsq-comment-body">
                        <div id="dsq-comment-message-794" class="dsq-comment-message"><p>Old but good&#8230;</p>
<p>With .NET 4.0 you can use </p>
<p>Func&lt;T, bool&gt;</p>
<p> instead of<br />
Predicate&lt;T&gt;<br />
and .NET Tuple, so<br />
Tuple.Create(&#8230;)<br />
instead of Tuple.New(&#8230;)</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/matthewpodwysocki/2008/09/16/functional-c-pattern-matching/';
    var disqus_identifier = '56 /blogs/matthew.podwysocki/archive/2008/09/16/functional-c-pattern-matching.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'matthewpodwysocki';
    var disqus_title = "Functional C# &#8211; Pattern Matching";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData â€” fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=56');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2008\/09\/16\/functional-c-pattern-matching\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.721 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 21:32:11 -->
<!-- super cache -->