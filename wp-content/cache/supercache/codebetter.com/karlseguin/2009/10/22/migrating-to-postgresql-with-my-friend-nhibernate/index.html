<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Migrating to Postgresql with my friend NHibernate | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Time for a New Computer' href='http://codebetter.com/karlseguin/2009/10/18/time-for-a-new-computer/' />
<link rel='next' title='Postgresql &#8211; Day 2' href='http://codebetter.com/karlseguin/2009/10/25/postgresql-day-2/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=186' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,153] -->
<link rel="canonical" href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-186" class="post-186 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Migrating to Postgresql with my friend NHibernate</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/" title="1:23 pm" rel="bookmark"><span class="entry-date">October 22, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>Last night I decided to accelerate our plan to migrate from SQL Server to PostgreSQL and gave it a quick attempt to see what the work involved was. I was hoping that due to our usage of NHibernate, and by having meticulously written database agonistic code the migration would be cake.</p>
<p>Turns out I was right and although there were a couple bugs along the way, the process took less than 30 minutes. Today I want to talk about the small issues we faced in migrating our code, as well as provide an overview of what I&#8217;ve learned about PostgreSQL so far.</p>
<p>First though, why migrate? I want to avoid getting rantish [in this post], but the cost of ownership for SQL Server isn&#8217;t remotely close to being competitive. SQL Express is great, provided you can live with (or are willing to) its numerous constraints. Bizspark (I only bring it up because I feel someone will mention it in a comment) is a subprime mortgage &#8211; it lulls you into a sense of free only to nail you with licensing cost down the road. I&#8217;m sure someone can quote some obscure feature that might be needed by some system, but for the rest of us, the only reason to use SQL Server is familiarity. Familiarity is a pragmatic and reasonable reason to pick a technology, but only for so long. </p>
<p>Secondly, why PostgresQL? Well, I&#8217;ve used sqlite and MySQL extensively in the past (including submitting patches to their .NET drivers). However, MySQL is currently in a weird state (the sun/oracle thing) and I need ACID compliance and my experience with InnoDB has been average.</p>
<p>Thirdly, its worth pointing out that the system being migrated has a comprehensive set of unit tests, including a number tests which hit the DB. While I generally consider unit tests a design-tool, there&#8217;s no doubt that they provided a significant sanity check. </p>
<h4 style="margin-bottom:0px;padding-bottom:0px">So, what problems did I run into?</h4>
<p>Given the use of NHibernate, the application side of things was migrated quiet easily. However, I did have to modify a few things. This is possibly because of flaws in my code (vs limitations of NHibernate) &#8211; hopefully someone will point such flaws out.</p>
<h5 style="margin-bottom:0px;padding-bottom:0px">Unique Constraints</h5>
<p>I use unique indexes to ensure that things like user emails are unique throughout the system. However, I haven&#8217;t yet figured out a way to catch such exceptions in a db-agnostic manner. My code looked something like:</p>
<pre>try
{
    Session.SaveOrUpdate(user);
    transaction.Commit();
    return true;
}
catch (GenericADOException ex)
{
    transaction.Rollback();
    var sql = ex.InnerException as SqlException;
    if (sql != null &amp;&amp; sql.Number == 2601)
    {
        return false;
    }
    throw;
}
catch (Exception)
{
    transaction.Rollback();
    throw;
}</pre>
<p>Obviously this code isn&#8217;t going to work with the PostgreSQL driver. I keep thinking there *is* a way to handle this across multiple databases, but haven&#8217;t found the answer yet.</p>
<h5 style="margin-bottom:0px;padding-bottom:0px">Count &#8211; Long vs Int</h5>
<p>When I fetch the number of rows for a query &#8211; more often than not to do paging &#8211; i do a <code>select count(*) with a UniqueResult&lt;int&gt;()</code>. However, PostgreSQL&#8217;s <code>count(*) </code>returns a <code>long</code>, while SQL Server returns an <code>int</code> (I&#8217;ve run into this before, since sqlite also returns a <code>long</code>). This causes a cast exception. Again, I&#8217;m sure there&#8217;s a simple solution to this inconsistency.</p>
<h5 style="margin-bottom:0px;padding-bottom:0px">Bit and Booleans</h5>
<p>There was one specific query which tried to retrieve all active users. The IsActive field was declared as a bit in SQL Server (and a boolean in PostgreSQL). The following query didn&#8217;t work in PostgresQL &#8220;from User where IsActive = 1&#8243;. Why? because 1 isn&#8217;t a valid boolean, and you&#8217;ll get a database error that an integer can&#8217;t be converted to a boolean. I had to change the query to use &#8217;1&#8242; (in single quotes) or one of the other valid boolean values for true.</p>
<h5 style="margin-bottom:0px;padding-bottom:0px">Connection String</h5>
<p>Its also worth mentioning that the connection string example listed here, didn&#8217;t work for me using the latest <a href="http://pgfoundry.org/projects/npgsql/">Npgsql drivers</a>. Instead of <code>Initial Catalog</code>, I had to use the <code>Database</code> key.</p>
<p>Aside from those little issues, the code was up in running in about 10 minutes. Most of my time was actually spent getting to know PostgreSQL. Here&#8217;s what I&#8217;ve learned so far.</p>
<h4 style="margin-bottom:0px;padding-bottom:0px">Learning PostgreSQL</h4>
<ul>
<li>PostgreSQL doesn&#8217;t consider two null values to be the same, meaning you can put a unique constraint on a nullable column without any problems. In SQL Server you need a Nullbuster column to achieve this same result (its a neat trick, but its neater not having to use it).</li>
<li>PostgreSQL&#8217;s <code>uniqueidentifier</code> type is called <code>UUID</code>, a <code>bit</code> is a <code>boolean</code>, and a <code>datetime</code> is a <code>timestamp</code>.</li>
<li>All of PostgreSQL&#8217;s text types are unicode by default (so there is no <code>nvarchar</code> you simply use <code>varchar</code> and get the same benefits)</li>
<li>PostgreSQL&#8217;s handling of auto incrementing (identity) is pretty different. Instead of declaring a column as <code>int not null identity(1, 1) primary key</code>, you define it as s<code>erial not null primary key</code>. &#8220;serial&#8221; is just some syntactical sugar around what actually happens &#8211; PostgreSQL generates a sequence table for that column, and sets the columns default value to the sequence&#8217;s next value. Of course, identity(1, 1) is just some syntactical sugar around however SQL Server implements the feature &#8211; its just more transparent in PostgreSQL.</li>
</ul>
<p>Hopefully as the weeks go by, I&#8217;ll have more information to share about the migration, and what I&#8217;ve learned.</p>
<div class="shr-publisher-186"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/" title="Permalink to Migrating to Postgresql with my friend NHibernate" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/feed/" title="Comments RSS to Migrating to Postgresql with my friend NHibernate" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-186 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2009/10/18/time-for-a-new-computer/" rel="prev"><span class="meta-nav">&larr;</span> Time for a New Computer</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2009/10/25/postgresql-day-2/" rel="next">Postgresql &#8211; Day 2 <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">30 Responses to <em>Migrating to Postgresql with my friend NHibernate</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-2079">
		<div id="comment-2079">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2079">November 18, 2009 at 5:37 pm</a></div>

		<div class="comment-body"><p>@Dermot:<br />
Had to try, SQL Server doesn&#8217;t like that. it&#8217;s possible nhibernate would translate it properly though (but I doubt it). Good to know that&#8217;s the preferred way for postgresql though, thx!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2078">
		<div id="comment-2078">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Dermot</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2078">November 18, 2009 at 5:26 pm</a></div>

		<div class="comment-body"><p>On the true/false query syntax &#8211; will SQL Server (which I&#8217;ve never used) not accept syntax like &#8220;from User where IsActive&#8221;? That is, use your boolean as input to the conditions in the where clause? This is how PostgreSQL &#8220;expects&#8221; you to do it, and I&#8217;d have expected it to be the more portable approach. </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2077">
		<div id="comment-2077">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2077">October 26, 2009 at 9:42 pm</a></div>

		<div class="comment-body"><p>@Dave<br />
I&#8217;ve posted a follow up at <a href="http://codebetter.com/blogs/karlseguin/archive/2009/10/24/postgresql-day-2.aspx#398028" rel="nofollow">http://codebetter.com/blogs/karlseguin/archive/2009/10/24/postgresql-day-2.aspx#398028</a></p>
<p>Also, postgresql does have partial indexes. PostgreSQL (and MySQL) also have a hash type index, which is great when ur looking something up by equality &#8211; like a user by email.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2076">
		<div id="comment-2076">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Dave F.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2076">October 26, 2009 at 5:50 pm</a></div>

		<div class="comment-body"><p>@Karl, would like to hear more about your experiences. I want to try this out in a VM.</p>
<p>@Harry, MSSQL has indexed views also and I was surprised at the optimizer&#8217;s sophistication on when to use it versus using the underlying table&#8217;s indexes. MSSQL 2008 also has filtered indexes, that can help further tune the app.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2075">
		<div id="comment-2075">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.adverseconditionals.com' rel='external nofollow' class='url'>Harry M</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2075">October 25, 2009 at 12:42 pm</a></div>

		<div class="comment-body"><p>Its worth mentioning that MSSQL has indexed views which get auomatically substituted into queries by the query optimizer. </p>
<p>The reason this is important is that when you find a query is slow and the data would be faster to query denormalised, you can do this by writing a view. With other DBs you have to do something like change your code to point at a table holding a materialized  query result, or change your code to have denormalized values on other tables.</p>
<p>*and I think oracle too</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2074">
		<div id="comment-2074">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Andrew</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2074">October 23, 2009 at 4:21 pm</a></div>

		<div class="comment-body"><p>@Dmitriy</p>
<p>All I can say is try it then. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>After doing nothing but RoR for a while (for new website development), I started a new website in ASP.NET MVC for a friend and just kept thinking to myself &#8220;Why are they making me do all this work!&#8221;.  Once  you&#8217;ve gotten used to Convention of Configuration, going back takes a while to get used to.</p>
<p>That is why I think Microsoft completely misjudged MVC.  MVC is a tool to handle a specific problems, but they made it so generic in hopes to handle more problems, that the solution itself became inefficient.</p>
<p>You miss stuff like GUIs for all your tools, but you get over it rather quickly once you start getting into it.  </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2073">
		<div id="comment-2073">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dnagir.blogspot.com/' rel='external nofollow' class='url'>Dmitriy Nagirnyak</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2073">October 23, 2009 at 6:54 am</a></div>

		<div class="comment-body"><p>@Andrew,<br />
That is what I read everywhere on the net <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /><br />
Just can&#8217;t believe that Python+Django is so much better.</p>
<p>Obviously I have to give it a try. But really looking for good comparisons before that or maybe just to .NET minded and to tight to compile-time checking&#8230;</p>
<p>@Karl,<br />
Waiting for the blog post from you about that. Will read it with pleasure.<br />
Thans for the link. I read it.<br />
Still not blown away with that <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2072">
		<div id="comment-2072">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2072">October 23, 2009 at 12:50 am</a></div>

		<div class="comment-body"><p>@Dmitriy<br />
The topic is something that I hope to blog a lot about as I use the technologies  more and more for real production use (who knows, maybe I&#8217;ll change my mind). But its really a double whammy.</p>
<p>Fisrt, dynamic languages make coding far more natural. You aren&#8217;t fighting with the language or the compiler, things tend to be far less verbose, and you have the power to do things simply not doable in strongly-typed languages. Things like method-missing and duct typing are the tip of the iceberg.</p>
<p>Then you have the frameworks, which are far more complete, and far more focused. You might think that the .NET way, of having each technology in its own silo, is best. But the truth is that having a fully integrated stack, from data, to domain to presentation is far more productive.</p>
<p>I strongly urge you to go through the 4 part django tutorial, its a real gem and will really help you become a better programmer, even if you stick with .NET. It&#8217;ll open up the box.<br />
<a href="http://docs.djangoproject.com/en/dev/intro/tutorial01/#intro-tutorial01" rel="nofollow">http://docs.djangoproject.com/en/dev/intro/tutorial01/#intro-tutorial01</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2071">
		<div id="comment-2071">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2071">October 23, 2009 at 12:39 am</a></div>

		<div class="comment-body"><p>@betrand<br />
I know that on WinMo we need to be careful of concurrency with sqlite, but that might be more of a platform issue. I must say, proving that a product is TOO conservative, isn&#8217;t something I&#8217;ve spent too much time testing against&#8230;sorta refreshing.</p>
<p>@DannyT<br />
We aren&#8217;t live yet, so migration wasn&#8217;t a huge concern. We do have a &#8220;beta&#8221; db that we did migrate over. I generated INSERT statements using a free tool that I found called SQLDumper from Ruizata Project, and ran the output through a regex text editor (replace &#8220;dbo.&#8221; and stuff like that), and then simply imported in to the new db. Had we had to do a hot swipe, I would have had to give it a lot more thought.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2070">
		<div id="comment-2070">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Andrew</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2070">October 23, 2009 at 12:39 am</a></div>

		<div class="comment-body"><p>Dmitriy,</p>
<p>I can&#8217;t speak for Karl obviously, but I think once you&#8217;ve done you&#8217;ve tried RoR or Django it&#8217;s difficult to go back to ASP.NET MVC since it feels so incomplete compared to them. FWIW, I really think that Microsoft lost the plot when they put out MVC.</p>
<p>I use .NET for work, but for my personal projects (some of which are quite large) I&#8217;ve started distancing myself from it and I&#8217;m not sure I&#8217;ll ever go back.  </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2069">
		<div id="comment-2069">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Mark</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2069">October 22, 2009 at 11:50 pm</a></div>

		<div class="comment-body"><p>@Karl &#8211; Use Spring.Net and you can get rid of your exception handling. <a href="http://www.springframework.net/doc-latest/reference/html/orm.html#orm-hibernate-daos" rel="nofollow">http://www.springframework.net/doc-latest/reference/html/orm.html#orm-hibernate-daos</a></p>
<p>And as was said above, use True/False replacement</p>
<p>In the past, I have had to switch from Sybase to DB2.  We had to change column and table names too.  Time was measured in hours at most.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2068">
		<div id="comment-2068">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dnagir.blogspot.com/' rel='external nofollow' class='url'>Dmitriy Nagirnyak</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2068">October 22, 2009 at 11:43 pm</a></div>

		<div class="comment-body"><p>Karl,<br />
Just curious why are Python or Ruby are better/more productive languages for you?</p>
<p>I saw a lot of talks about them lately but haven&#8217;t got my hands to try them.</p>
<p>Do you have some comparisson for them and .NET langs?</p>
<p>Cheers.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2067">
		<div id="comment-2067">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/bleroy' rel='external nofollow' class='url'>Bertrand Le Roy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2067">October 22, 2009 at 10:28 pm</a></div>

		<div class="comment-body"><p>@Danny: well, what we did has no universal virtues whatsoever so I&#8217;d encourage anyone interested to do their own benchmarking with use cases that are relevant to them. We basically hammered a typical application with requests and measured how many per second it actually handled. We were very very surprised by the results, as we had similar preconceptions about it. But really, don&#8217;t take my word for it, do your own testing.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2066">
		<div id="comment-2066">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://danny-t.co.uk' rel='external nofollow' class='url'>DannyT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2066">October 22, 2009 at 10:14 pm</a></div>

		<div class="comment-body"><p>@Bertrand really? What sort of volumes are you talking about here? That&#8217;s quite fascinating as I&#8217;ve always been under the impression that SQLite would just fold under anything more than a handful of users.</p>
<p>@Karl, thanks for sharing, would also be interested in any benchmarks you get round to. Also, how did you go about data migration? Assuming that wasn&#8217;t too large a hurdle this exercise really does tout the ROI of using NH. </p>
<p>&#8220;Oh so you spend $x thousand on SQL licensing per year, give me a day and i&#8217;ll reduce that to $0, split the difference?&#8221;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2065">
		<div id="comment-2065">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/bleroy' rel='external nofollow' class='url'>Bertrand Le Roy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2065">October 22, 2009 at 9:50 pm</a></div>

		<div class="comment-body"><p>@karl: yes, we had noticed that too but have you tested their assertion? When we did our own performance tests, including with high traffic, and surprisingly even with high concurrency, we found it to behave remarkably well, actually lightyears ahead of PostgreSQL, despite the known locks that it has because of its design.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2064">
		<div id="comment-2064">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2064">October 22, 2009 at 9:42 pm</a></div>

		<div class="comment-body"><p>@Betrand<br />
Tthe sqlite website itself very strongly urges developers to look at alternatives when dealing with high concurrency or high volume websites &#8211; which is what this application is.</p>
<p>SQLite is a great database with a number of usage. But where I&#8217;d consider Mysql/PostgreSQL/SQLServer/Oracle/XXX generalized DBs, I&#8217;d consider SQLite specialized.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2063">
		<div id="comment-2063">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/bleroy' rel='external nofollow' class='url'>Bertrand Le Roy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2063">October 22, 2009 at 8:56 pm</a></div>

		<div class="comment-body"><p>So why not SQLite?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2062">
		<div id="comment-2062">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2062">October 22, 2009 at 7:51 pm</a></div>

		<div class="comment-body"><p>@Matthieu<br />
The move away from .NET isn&#8217;t only driven by costs. Its something I rather blog about in the future, when I&#8217;ve actually done something about it. In short though, I just find it a lot funner and productive to write in Python or Ruby. I think the languages and frameworks are much better.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2061">
		<div id="comment-2061">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.virtew.com' rel='external nofollow' class='url'>Matthieu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2061">October 22, 2009 at 7:38 pm</a></div>

		<div class="comment-body"><p>Thanks for the details.</p>
<p>So It&#8217;s not only the cost of the RDBMS which is too high ? Have you evaluated the Mono option ?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2060">
		<div id="comment-2060">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2060">October 22, 2009 at 7:25 pm</a></div>

		<div class="comment-body"><p>@Matthieu<br />
The web app will stay on a windows server, hitting a linux postgresql db.</p>
<p>The goal is to release a new major portion &#8220;phase 2&#8243; (which is conveniently stand-alonish) in Python (Django), and then look at going back to the existing &#8220;phase 1&#8243; and converting it from .NET to python. </p>
<p>The reconversion of phase 1 is a long term plan that may or may not happen. The development of phase 2 in django (and subsequent phases) is something we are very committed to.</p>
<p>In other words, the goal is to move everything to a LAPP stack.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2059">
		<div id="comment-2059">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.virtew.com' rel='external nofollow' class='url'>Matthieu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2059">October 22, 2009 at 7:17 pm</a></div>

		<div class="comment-body"><p>You develop under Windows with Visual Studio and deploy on Linux with Mono ? It&#8217;s an ASP.NET MVC / NHibernate application ?</p>
<p>What kind of web server do you use with ASP.NET on Mono ? It will be very interesting to get more details !</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2058">
		<div id="comment-2058">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">(Other) Rob</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2058">October 22, 2009 at 7:14 pm</a></div>

		<div class="comment-body"><p>I really wonder why it&#8217;s taken so long for people to who want a &#8220;free&#8221; option to turn to PostgreSQL. I&#8217;m not bashing MS SQL (I use it all the time, and I don&#8217;t have idealistic opositions to MS &#8211; i love MS SQL, actually), but if your project needs a cheaper option, PostgreSQL is the way to go. I have no idea why MySQL got so popular. PostgreSQL was far more mature and fully-featured than MySQL ever was, and unlike the &#8220;sort-of-free&#8221; nature of MySQL, PostgreSQL was always fully free (as in Free Beer, not just Free Speech).</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2057">
		<div id="comment-2057">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2057">October 22, 2009 at 5:21 pm</a></div>

		<div class="comment-body"><p>brad<br />
The argument is that nice things don&#8217;t cost money. PostgreSQL and MySQL aren&#8217;t compromises, they are full featured, equally capable and equally proven solutions.</p>
<p>The argument against SQL Server is why pay for something when you can get the same for free? Would you pay for SQL Server is Microsoft gave it to you for free? Of course you wouldn&#8217;t. The only reason to use SQL Server is familiarity, which is the only weak argument I&#8217;ve seen actually made.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2056">
		<div id="comment-2056">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">brad</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2056">October 22, 2009 at 5:07 pm</a></div>

		<div class="comment-body"><p>So your argument against SQL Server comes down to &#8220;nice things cost money&#8221;?  Very weak indeed.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2055">
		<div id="comment-2055">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2055">October 22, 2009 at 4:10 pm</a></div>

		<div class="comment-body"><p>@dave<br />
I didn&#8217;t even think of it. Looking into it now though, but likely to stick with Postgres</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2054">
		<div id="comment-2054">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">dave-ilsw</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2054">October 22, 2009 at 4:01 pm</a></div>

		<div class="comment-body"><p>Did you consider using Firebird?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2053">
		<div id="comment-2053">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Symon Rottem</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2053">October 22, 2009 at 3:02 pm</a></div>

		<div class="comment-body"><p>We normally use query.substitutions in config to remap the true/false values (eg. true=1, false=0).  This could probably be usedfor strings just as easily.   It also means you can use the keywords true and false in your queries so they&#8217;re a bit more meaningful.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2052">
		<div id="comment-2052">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2052">October 22, 2009 at 1:59 pm</a></div>

		<div class="comment-body"><p>@Dan:<br />
No performance numbers. I&#8217;m running linux/postgresql on a dual core atom with 4gb of ram, and should be getting a twin machine next week. I&#8217;ll put windows/sqlserver on it and likely run simplistic performance scripts against the two. Nothing noticable with the unit tests yet (1 integration tests used SqlBulkCopy, which I&#8217;ll have to replace, and am expecting it to run slower).</p>
<p>@Rob<br />
Right, same boat&#8230;going to a free solution that runs on a free OS, liberates your scaling and hosting options. I can now focus on a host that has cheap RAM/RAID upgrade versus worrying about finding a host that has cheap MS licences (i.e., I&#8217;m no longer limited to a bizspark vendor).</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2051">
		<div id="comment-2051">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.robertbeal.com' rel='external nofollow' class='url'>Rob</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2051">October 22, 2009 at 1:50 pm</a></div>

		<div class="comment-body"><p>Nice article. I&#8217;ve currently got 1 SQL Server db as part of my hosting, but as you mention it is costly. I don&#8217;t want the expense of buying a second db, so it restricts me to putting everything in the one db!</p>
<p>I&#8217;ll keep watch on how things go. I&#8217;d be tempted to switch to a cheaper alternative should my project ever change from a learning platform to something I actually deploy.</p>
<p>Nice to see NHibernate plays pretty well with it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2050">
		<div id="comment-2050">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Dan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/10/22/migrating-to-postgresql-with-my-friend-nhibernate/#comment-2050">October 22, 2009 at 1:49 pm</a></div>

		<div class="comment-body"><p>I&#8217;m curious if you&#8217;ve done any benchmarking of your application running on PostgreSQL vs SQL Server? You mentioned you had some unit tests that hit the database, have you seen any noticeable difference in execution times for them?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.458 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 20:04:43 -->
<!-- super cache -->