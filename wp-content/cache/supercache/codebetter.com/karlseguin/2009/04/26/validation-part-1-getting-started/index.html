<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Validation &#8211; Part 1 &#8211; Getting Started | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='www.asp.net costs millions to run?' href='http://codebetter.com/karlseguin/2009/04/25/www-asp-net-costs-millions-to-run/' />
<link rel='next' title='Validation &#8211; Part 2 &#8211; Client-Side' href='http://codebetter.com/karlseguin/2009/04/28/validation-part-2-client-side/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=166' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,153] -->
<link rel="canonical" href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-166" class="post-166 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Validation &#8211; Part 1 &#8211; Getting Started</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/" title="7:17 pm" rel="bookmark"><span class="entry-date">April 26, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>There are a lot of good and free frameworks to help you deal with validating user-submitted data. You can use attribute-based frameworks, such as Castle Validators or .NET 3.5 Data Annotations to decorate your objects with simple rules, and then leverage frameworks such as xVal or the MVC Validation Toolkit to enforce those attribute both on the client and server side.  (For those who dislike using attributes in this manner, you could also use something like FluentValidation).</p>
<p>Despite these frameworks, there may be situations where you need to roll your own, which is what we&#8217;re going to look at in this series. We won&#8217;t be doing anything fancy, but we will look at an end-to-end custom solution.</p>
<h3>Attributes</h3>
<p>The first thing we need to do is decide how we&#8217;ll define our rules. We&#8217;ll pick a mix of attributes for simple validation cases, and an interface for more advanced/custom validation.  Our goal is to end up with something like:</p>
<pre>public interface IValidate
{
    ValidationError[] Validate(IRepository repository);
}

public class User : IValidate
{        
	private string _email;
	private string _password;

	[Required, StringLength(50), Pattern(".+@.+\\..+"), Tip("Please enter a valid email, a confirmation email will be sent.")]
	public string Email
	{
	    get { return _email; }
	    set { _email = value; }
	}
	[Required, StringLength(4, 30), Tip("Please enter your password. 4-30 characters")]
	public string Password
	{
	    get { return _password; }
	    set { _password = value; }
	}

	public virtual ValidationError[] Validate(IRepository repository)
	{
	    if (repository.Exists&lt;User&gt;(u =&gt; u.Email == Email))
	    {
	        return new[] {new ValidationError("Email", "This email is already registered")};
	    }
	    return null;
	}
}</pre>
<p>
We could always externalize the &#8220;Tips&#8221; for localization (or cleanliness) purposes, but this keeps everything rather simple. (If you&#8217;re put off by the attributes, check out<a href="http://www.codeplex.com/FluentValidation">FluentValidation</a> for an idea on how else you migth define your rules).
</p>
<p>The foundation for our attributes is a simple base class:</p>
<pre>[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public abstract class BaseValidatorAttribute : Attribute
{
   public abstract IDictionary&lt;string, string&gt; ToJson();
   public abstract bool IsValid(object value);
}
</pre>
<p>And here&#8217;s the simplest implementation:</p>
<pre>public class RequiredAttribute : BaseValidatorAttribute
{
    public override IDictionary&lt;string, string&gt; ToJson()
    {
        return new Dictionary&lt;string, string&gt; {{"required", "true"}};
    }  

    public override bool IsValid(object value)
    {
        if (value == null)
        {
            return false;
        }
        return !(value is string) || ((string)value).Length != 0;
    }
}</pre>
<p>The <code>IsValid</code> method is used to validate the object server-side. The <code>ToJson</code> method is used to generate a javascript object for client-side use.</p>
<p>Let&#8217;s take a look at the <code>StringLengthAttribute</code> &#8211; which is slightly more complicated:</p>
<pre>public class StringLengthAttribute : BaseValidatorAttribute
{
   private readonly int _minimumLength;
   private readonly int _maximumLength;

   public int MinimumLength
   {
      get { return _minimumLength; }
   }
   public int MaximumLength
   {
      get { return _maximumLength; }
   }

   public StringLengthAttribute(int maximumLength) : this(0, maximumLength){}
   public StringLengthAttribute(int minimumLength, int maximumLength)
   {
      _minimumLength = minimumLength;
      _maximumLength = maximumLength;
   }

   public override IDictionary&lt;string, string&gt; ToJson()
   {            
      return new Dictionary&lt;string, string&gt;
         {
            { "min", _minimumLength.ToString() },
            { "max", _maximumLength.ToString() },
         };
   }

   public override bool IsValid(object value)
   {            
      if (!(value is string))
      {
         return false;
      }            
      var length = ((string)value).Length;
      return length &gt;= _minimumLength &amp;&amp; length &lt;= _maximumLength;
   }
}</pre>
<p>There really is no limit to what you&#8217;re able to do with these attributes. You can build groups of validation rules (each group might have its own tip), compare validators, or even validators that hit the DB, such as a <code>UniqueAttribute</code> (although we&#8217;ve opted to implement that via the <code>IValidate</code> interface). </p>
<h3>ValidatorConfiguration</h3>
<p>There are two problems we&#8217;ll run into by using attributes &#8211; they are somewhat cumbersome to program against, and they can impact performance. Since validation is static, we can parse and cache more useful structures which we can then use when doing our actual client-side and server-side validation. We&#8217;ll use two classes to represent our attributes:</p>
<pre>public class EntityValidationInfo
{
   public IEnumerable&lt;PropertyValidationInfo&gt; Properties { get; private set; }
   public EntityValidationInfo(IEnumerable&lt;PropertyValidationInfo&gt; properties)
   {        
      Properties = properties;
   }
}
public class PropertyValidationInfo
{
   public IEnumerable&lt;BaseValidatorAttribute&gt; Validators { get; private set; }
   public PropertyInfo Property { get; private set;}
   public PropertyValidationInfo(PropertyInfo property, IEnumerable&lt;BaseValidatorAttribute&gt; validators)
   {
      Property = property;
      Validators = validators;
   }
}</pre>
<p>The purpose behind these is that given an object type, we can lookup its <code>EntityValidationInfo</code> which contains a collection of properties and validators. Next we&#8217;ll create a <code>ValidatorConfiguration</code> class with a couple static members:</p>
<pre>public class ValidatorConfiguration
{
    private static IDictionary&lt;Type, EntityValidationInfo&gt; _rules;
    public static IDictionary&lt;Type, EntityValidationInfo&gt; Rules
    {
        get { return _rules; }
    }
    public static void Initialize(params string[] assemblyNames)
    {     
          //todo
    }
}</pre>
<p>Our goal is to initialize <code>ValidatorConfiguration</code> once, on startup, and then access its <code>Rules</code> property as needed. The <code>Initialize</code> method takes in assembly names to scan for classes using validation attributes (you might have these spread out across multiple assemblies). In an ASP.NET application, we&#8217;d use the Application_Start event and use something like:</p>
<pre>ValidatorConfiguration.Initialize("MyAssembly", "MyAssembly.Web");</pre>
<p>Finally, the implementation of Initialize looks like:</p>
<pre>public static void Initialize(params string[] assemblyNames)
{
   _rules = new Dictionary&lt;Type, EntityValidationInfo&gt;(10);
   foreach (var assemblyName in assemblyNames)
   {
       foreach (var kvp in LoadFromAssembly(Assembly.Load(assemblyName)))
       {
           _rules.Add(kvp.Key, kvp.Value);
       }                
   }
}
private static IDictionary&lt;Type, EntityValidationInfo&gt; LoadFromAssembly(Assembly assembly)
{
   var rules = new Dictionary&lt;Type, EntityValidationInfo&gt;(10);
   foreach (var type in assembly.GetExportedTypes())
   {
       var info = GetEntityValidationInfo(type);
       if (info != null) { rules.Add(type, info); }
   }
   return rules;
}
private static EntityValidationInfo GetEntityValidationInfo(Type type)
{
   var properties = new List&lt;PropertyValidationInfo&gt;();
   foreach (var property in type.GetProperties())
   {
       var attributes = (BaseValidatorAttribute[])property.GetCustomAttributes(typeof(BaseValidatorAttribute), true);
       if (attributes.Length == 0) { continue; }
       properties.Add(new PropertyValidationInfo(property, attributes));
   }
   return properties.Count == 0 ? null : new EntityValidationInfo(properties);
}</pre>
<p>There isn&#8217;t much magic going on here. We loop through each property, of each public type of each assembly, looking for validation attributes. If we don&#8217;t find any, we simply move on to the next. If we do find them, we create new instances of our <code>EntityValidationInfo</code> and <code>PropertyValidationInfo</code> and associate that to a Type within the static <code>_rules</code> field.</p>
<h3>Conclusion</h3>
<p>We&#8217;ve managed to lay the foundation for actually being able to validate stuff. In Part 2 we&#8217;ll look at client-side validation, and in Part 3 we&#8217;ll cover server-side validation. Stay tuned.</p>
<div class="shr-publisher-166"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/" title="Permalink to Validation &#8211; Part 1 &#8211; Getting Started" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/feed/" title="Comments RSS to Validation &#8211; Part 1 &#8211; Getting Started" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-166 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2009/04/25/www-asp-net-costs-millions-to-run/" rel="prev"><span class="meta-nav">&larr;</span> www.asp.net costs millions to run?</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2009/04/28/validation-part-2-client-side/" rel="next">Validation &#8211; Part 2 &#8211; Client-Side <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">8 Responses to <em>Validation &#8211; Part 1 &#8211; Getting Started</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-1797">
		<div id="comment-1797">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.fohjin.com' rel='external nofollow' class='url'>Mark Nijhof</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1797">April 26, 2009 at 10:59 pm</a></div>

		<div class="comment-body"><p>Karl,</p>
<p>Actually atm the objects don&#8217;t know anything about the validation, this is all taken care outside the objects them selfs. Only reason for the interface implementation on the view model is to transfer the results not for the actual validation. </p>
<p>The reason for including the rules in the objects is to be more DDD compliant. </p>
<p>-Mark</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1796">
		<div id="comment-1796">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1796">April 26, 2009 at 10:19 pm</a></div>

		<div class="comment-body"><p>@Tom:<br />
That&#8217;s the purporse of part 2 <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>@Mark:<br />
We have multiple systems using these entities (web services, web apps, mobile apps) so that&#8217;s why I didn&#8217;t consider tying this more closely to the view.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1795">
		<div id="comment-1795">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://mrpmorris.blogspot.com' rel='external nofollow' class='url'>Peter Morris</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1795">April 26, 2009 at 9:53 pm</a></div>

		<div class="comment-body"><p>Nice start, I look forward to seeing the others.  I certainly prefer technical posts.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1794">
		<div id="comment-1794">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.fohjin.com' rel='external nofollow' class='url'>Mark Nijhof</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1794">April 26, 2009 at 8:58 pm</a></div>

		<div class="comment-body"><p>Hi Karl,</p>
<p>Interesting post! I am currently also working on a validation framework to be used for FubuMVC I took a little different approach where the object to be validated doesn&#8217;t know about the rules (a view model it needs to implement an interface only to transfer the validation results to the controller and or view). I wrote about it here: <a href="http://blog.fohjin.com/blog/2009/3/21/FubuMVC_Validation_Convention_based_validation" rel="nofollow">http://blog.fohjin.com/blog/2009/3/21/FubuMVC_Validation_Convention_based_validation</a></p>
<p>But after talking to Jimmy Nilson I am working on a different approach where the actual objects will contain the validation rules, but I still want to  assign them using the convention based parts already created.</p>
<p>Anyway looking forward to reading the next parts.</p>
<p>-Mark</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1793">
		<div id="comment-1793">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tom de Koning</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1793">April 26, 2009 at 8:38 pm</a></div>

		<div class="comment-body"><p>Good one.</p>
<p>Karl, would you know wheter it is possible to hook up the validation in webforms (using jQuery perhaps?)?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1792">
		<div id="comment-1792">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1792">April 26, 2009 at 8:02 pm</a></div>

		<div class="comment-body"><p>Oded:<br />
I&#8217;m going to assume that the basic validation like UserName length, email pattern and so on is going to be the same regardless of where something is in a workflow.</p>
<p>Everything else you should be able to handle in the Validate method. I passed in an IRepository, but you might also pass in a IWorkflowManager.</p>
<p>Not sure if that helps.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1791">
		<div id="comment-1791">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/rashid' rel='external nofollow' class='url'>Kazi Manzur Rashid</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1791">April 26, 2009 at 7:53 pm</a></div>

		<div class="comment-body"><p>Please keep posting this kind of technical stuffs, avoid those negative posts.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1790">
		<div id="comment-1790">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Oded</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/04/26/validation-part-1-getting-started/#comment-1790">April 26, 2009 at 7:35 pm</a></div>

		<div class="comment-body"><p>Just wondering about how context sensitive validation can fit into this.</p>
<p>How would you handle situations where the same object requires different validation depending on (for example) where in the workflow we are validating?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.430 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 18:44:58 -->
<!-- super cache -->