<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Canvas gets a Spark | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Adding Syntactic Sugar to the Spark View Engine' href='http://codebetter.com/karlseguin/2009/08/20/adding-syntactic-sugar-to-the-spark-view-engine/' />
<link rel='next' title='Unit Testing &#8211; Do Repeat Yourself' href='http://codebetter.com/karlseguin/2009/09/12/unit-testing-do-repeat-yourself/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=183' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,123] -->
<link rel="canonical" href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-183" class="post-183 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Canvas gets a Spark</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/" title="10:49 pm" rel="bookmark"><span class="entry-date">September 1, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>Today I updated the CodeBetter.Canvas project to target the latest releases of NHibernate (2.1), FluentNhibernate (1.0 ) and Nhiberate Linq (1.0).</p>
<p>More importantly is the switch away from the MVC WebForms View Engine to the <a href="http://sparkviewengine.com/">Spark View Engine</a>. I&#8217;ve been learning and using Spark for the last month or so, and I&#8217;m a pretty big fan. I do think that you should strongly consider it for your next ASP.NET MVC project, it increases the readability and maintainability of your views, while being very easy to learn.</p>
<p>I think Spark is one of those love-it-or-hate-it kinda things, but I do think there are things anyone can learn from it. I would hate for ASP.NET developers to think that the default MVC view engine is the best (or even only) way to do things. Its good that Microsoft made the view engine pluggable, its great that developers might see new ways to mix layout and code.</p>
<p>I do worry that CodeBetter.Canvas is a little overwhelming from a learning point of view. If you&#8217;ve been doing .NET development the traditional way, then you&#8217;ll have a lot of new technologies and patterns to learn (MVC, Spark, DI, Unit Testing, Mocking, jQuery and O/R Mapping). I do worry about this, but I can&#8217;t imagine NOT adding a worthwhile feature like Spark for the benefit of those lacking the ambition and interest in improving their skill set. Some developers will suck it up and learn what they can, others will continue to fall behind &#8211; so be it.</p>
<p>As always, you can grab the source from <a href="http://code.google.com/p/codebettercanvas/">Google Code </a></p>
<p>I do suggest that you check out the <a href="http://sparkviewengine.com/">SparkViewEngine website</a> for a great guide on setting it up and using it. You may also want to grab the latest source and use it instead of the 1.0 release (which is what Canvas is using) for the added caching capabilities which are excellent. However, I would like to show some Spark samples from Canvas to give you a quick idea of what it offers.</p>
<p>The first thing to take note of is that <code>&lt;%=XXX %&gt;</code> are gone, replaced with <code>${XXX}</code>. I do find that this simple change does increase the readability a little, but the real advantage is that <code>${}</code> will automatically HTML encode values thanks to the <code>SetAutomaticEncoding</code> setting of Spark set in the <code>global.asax</code>. If you don&#8217;t want encoding, you use <code>!{XXX}</code> instead (you&#8217;ll notice that Canvas uses both as needed).</p>
<p>You can pretty much look at <code>Views/Shared/Application.spark</code> to get a good feeling for what Spark is all about. This is the default master page layout used by all spark views (which can be changed or overwritten at multiple levels). First, you&#8217;ll notice that we are declaring a variable, <code>errors</code> for use later on (more on this in a bit). You should also notice that we are defining a global variable, <code>Title</code> &#8211; which individual views can set to control the page&#8217;s title (look a bit further down and you&#8217;ll see that the Title variable is being outputted within our head&#8217;s title tags).</p>
<p>Things get a lot more interesting with the <code>&lt;use&gt;</code> tags, which are equivalent to <code>ContentPlaceHolders</code>. Not only are they much more concise, but anything outside of an explicit content tag is automatically placed in the <code>"view"</code> placeholder. This helps reduce our code&#8217;s nesting and the ASPX soup-tag. Given a simple master page of:</p>
<pre>&lt;body&gt;
   &lt;use content="menu" /&gt;
   &lt;use content="view" /&gt;
&lt;/body&gt;</pre>
<p>Our view can simply be:</p>
<pre>&lt;content name="menu"&gt;
  ....STUFF...
&lt;/content&gt;
&lt;p&gt;The main content doesn't have to be nested in a content element&lt;/p&gt;
&lt;p&gt;Yay! it's a small but useful feature&lt;/p&gt;</pre>
<p>Next you might notice the <code>&lt;LoginLogoutMenuItem&gt;</code> and <code>&lt;PageData&gt;</code> elements. This is Spark&#8217;s way to render a partial. Spark will look for a file named <code>_LoginLogoutMenuItem.spark</code> and <code>_PageData.spark</code> (in the shared folder, and in the controller&#8217;s view folder) and render it out. What I like most about these is the ease with which we can pass information to our partial: simply add attribtes to the tag, such as (this is how the errors variable defined at the top of the layout is being used):</p>
<pre>&lt;SomePartial heading="'This Is A String Value'" products="Model.Products" /&gt;</pre>
<p>Although there&#8217;s a lot more to Spark, the last, and possibly coolest, feature is Spark&#8217;s ability to embedded attributes within html elements and attributes. For example, one way to write an IF/ELSE is to use Spark&#8217;s If/Else elements.</p>
<pre>&lt;if condition="Model == null"&gt;
  &lt;h3&gt;No Results were Found&lt;/h3&gt;
&lt;/if&gt;
&lt;else&gt;
    &lt;table&gt;
      ...do stuff
    &lt;/table&gt;
&lt;/else&gt;
</pre>
<p>Another approach is to use the attributes on existing elements(which s much nicer with just an if):</p>
<pre>&lt;h3 if="Model == null"&gt;No Results were found&lt;/h3&gt;
&lt;table if="Model != null"&gt;...&lt;/table&gt;</pre>
<p>Even more impressive the embedding of the each attribute. Take a look at the old <code>PageError</code> partial versus the new one:</p>
<pre>&lt;%@ Control Language="C#" AutoEventWireup="False" Inherits="CodeBetter.Canvas.Web.ApplicationViewUserControl&lt;string[]&gt;" %&gt;
&lt;ul id="pageErrors"&gt;
    &lt;% Model.Each(e =&gt; { %&gt;
        &lt;li&gt;&lt;%=e %&gt;&lt;/li&gt;
    &lt;% }); %&gt;
&lt;/ul&gt;</pre>
<p>versus</p>
<pre>&lt;ul id="pageErrors"&gt;
    &lt;li each="var d in data"&gt;${d}&lt;/li&gt;
&lt;/ul&gt; </pre>
<p>The same can be done at the attribute level, from the Spark documentation, take a look at how cleanly styles (or any other attribute) can be controlled:</p>
<pre>&lt;li each="var product in Products" class="first?{productIsFirst} last?{productIsLast}"&gt;
    ${H(product.Name)}
&lt;/li&gt;</pre>
<p>(as a bonus, the xxxIsFirst and xxxIsLast are automagically created by Spark when it sees the each attribute).</p>
<p>So, I hope that gets you interested in Canvas and in the Spark View Engine. There&#8217;s a lot more to both free projects than what you see here. Canvas covers a broad range of technologies and patterns. Spark offers caching (and donut-caching), javascript integration, macros, batch compilation and more.</p>
<div class="shr-publisher-183"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/" title="Permalink to Canvas gets a Spark" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/feed/" title="Comments RSS to Canvas gets a Spark" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-183 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2009/08/20/adding-syntactic-sugar-to-the-spark-view-engine/" rel="prev"><span class="meta-nav">&larr;</span> Adding Syntactic Sugar to the Spark View Engine</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2009/09/12/unit-testing-do-repeat-yourself/" rel="next">Unit Testing &#8211; Do Repeat Yourself <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">17 Responses to <em>Canvas gets a Spark</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-2035">
		<div id="comment-2035">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/explorer2309/default.aspx' rel='external nofollow' class='url'>explorer2309</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2035">November 5, 2009 at 10:40 am</a></div>

		<div class="comment-body"><p>Disclaimer : This comment is not related to spark engine blog, but I could not find any other place to say this.</p>
<p>I came across CodeBetterCanvas project this morning. I am quite excited to find a piece of very well structured code which can be used for developing real application with built in good practices. This should be very useful for a learner like me who is trying to follow good developers and learn from them.</p>
<p>My request is &#8211; can the project add few other general capabilities like:<br />
1) Sorting the grid<br />
2) Searching user records<br />
Adding these capabilities can make the canvas more useful.</p>
<p>Thanks for your good work!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2034">
		<div id="comment-2034">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/rashid' rel='external nofollow' class='url'>Kazi Manzur Rashid</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2034">September 3, 2009 at 11:55 pm</a></div>

		<div class="comment-body"><p>Issues:</p>
<p>Controller:<br />
&#8212;&#8212;&#8212;&#8212;&#8211;<br />
1. You are creating unnecessary hierarchy of Controllers for some helper methods and security checking/redirecting. Instead, create extension methods of controller for those helper methods and use Authorize Attribute. It is obviously a design smell for a simple login/Registration there are three level deep inheritance hierarchy.<br />
2. Your controller is leaking all over the places, for example, in ModelBinder.cs you are using to add error messages, which can be also done with an extension method of ViewData. Moreover, the most offending one is your View is referring the Controller (_LoginLogoutMenuItem.spark) to get the Current User which breaks the MVC pattern very badly. On a side note, it seems your having an issue of maintain the Current User, I think a ViewModel base class with an ActionFilter can solve this issue pretty much.<br />
ModelBinder:<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />
3. I don’t see any value where there are one ModelBinder per ViewModel and with this it seems there should a binder for each ViewModel, also the model binder you have provided does not take any benefit from the ASP.NET MVC framework, I mean auto populating object from the expression, validation etc, instead you are doing it by manual way which makes it even more dumber.<br />
4. I think the whole purpose of it is having some automation in both client/server validation, I think xVal is currently serving the purpose pretty well. Also they way you are handling the server side validation is a bit unusual, instead of copying the errors in ModelState directly, you are first putting it ViewData with a magic string, then copying it in ModelState at some point, not sure why this extra steps is required.<br />
5. For building the Json object you are doing it manually which plain wrong way of doing it. If you do not want to use any Built-in MS provided Json Serializer, fair enough, use some well known open source library like Json.net. There is no special character handling which breaks the json objects very badly e.g.<br />
Tip(&#8220;Please enter your :\&#8221;\name. 2-30 character&#8221;)<br />
6. I am not sure what are the advantages of validation js file over the popular jquery.validate.js and it has lot more features comparing to yours, if you want to automate with server use this instead of writing your own.</p>
<p>There other issues as well, overall I do not find any value with the current state of Canvas. I will check again if you address the above issues.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2033">
		<div id="comment-2033">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://twitter.com/DavGarcia' rel='external nofollow' class='url'>David Thomas Garcia</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2033">September 3, 2009 at 9:17 am</a></div>

		<div class="comment-body"><p>The canvas project is incredibly helpful for someone like myself that is just starting out. I&#8217;ve been learning about integrating ASP.NET MVC (or in this case, Spark) with the Nstack. Best practices on how to tie all the technologies together seems really scattered, and I&#8217;m just picking up bits and pieces along the way, so this project should help to bring it all together. Are there other sample projects you would recommend that demonstrate best practices of using ALT.NET technologies?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2032">
		<div id="comment-2032">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://twitter/DavGarcia' rel='external nofollow' class='url'>David Thomas Garcia</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2032">September 3, 2009 at 9:17 am</a></div>

		<div class="comment-body"><p>The canvas project is incredibly helpful for someone like myself that is just starting out. I&#8217;ve been learning about integrating ASP.NET MVC (or in this case, Spark) with the Nstack. Best practices on how to tie all the technologies together seems really scattered, and I&#8217;m just picking up bits and pieces along the way, so this project should help to bring it all together. Are there other sample projects you would recommend that demonstrate best practices of using ALT.NET technologies?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2031">
		<div id="comment-2031">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://angelasancartier.net' rel='external nofollow' class='url'>Clothing and fashion</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2031">September 2, 2009 at 11:38 pm</a></div>

		<div class="comment-body"><p>very useful article! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2030">
		<div id="comment-2030">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://angelasancartier.net' rel='external nofollow' class='url'>fashion</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2030">September 2, 2009 at 11:37 pm</a></div>

		<div class="comment-body"><p>Congrats!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2029">
		<div id="comment-2029">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://eric@hotmail.com' rel='external nofollow' class='url'>Eric</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2029">September 2, 2009 at 3:59 pm</a></div>

		<div class="comment-body"><p>Great article.  I&#8217;m definitely going to give Spark a try based on your glowing recommendation.  I&#8217;ve been doing the < % %> tags now for about 10+ years and Spark just seems a LOT cleaner and easier to read.  I hadn&#8217;t seen any information on the partials before in Spark, so that is very cool to learn!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2028">
		<div id="comment-2028">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2028">September 2, 2009 at 3:02 pm</a></div>

		<div class="comment-body"><p>Intellisense support isn&#8217;t great and it isn&#8217;t horrible. Try it out, maybe it&#8217;ll give you what you need.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2027">
		<div id="comment-2027">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.coreycoogan.com' rel='external nofollow' class='url'>corey coogan</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2027">September 2, 2009 at 2:38 pm</a></div>

		<div class="comment-body"><p>I&#8217;ve been interested in Spark for a while as well, but something eluded to by the first post from Travis  was intellisense.   Although I love the cleanliness of of the Spark views, nesting everything in quotes means I have to type out everything exactly, like my old days developing ASP Classic in HomeSite.</p>
<p>Is there any way around this for someone like me who forgets all the properties and extension methods available from my ViewModel?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2026">
		<div id="comment-2026">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2026">September 2, 2009 at 1:24 pm</a></div>

		<div class="comment-body"><p>@Argos:<br />
Thanks, got it in now.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2025">
		<div id="comment-2025">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Argos</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2025">September 2, 2009 at 1:05 pm</a></div>

		<div class="comment-body"><p>Hi Karl, first of all thanks a lot for setting this up.</p>
<p>I noticed that the References folder is missing a dll: NHibernate.ByteCode.Castle.dll</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2024">
		<div id="comment-2024">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2024">September 2, 2009 at 12:30 pm</a></div>

		<div class="comment-body"><p>@Luke:<br />
That is pretty ironic. I&#8217;m glad the application is helpful to you.</p>
<p>Kenny:<br />
I used NVelocity back when I was working with MonoRail &#8211; not sure if its changed much, I prefer spark. I didn&#8217;t even know about NDjango, so I&#8217;ll check it out.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2023">
		<div id="comment-2023">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.hanselman.com' rel='external nofollow' class='url'>Scott Hanselman</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2023">September 2, 2009 at 9:23 am</a></div>

		<div class="comment-body"><p>Congrats!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2022">
		<div id="comment-2022">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Kenny</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2022">September 2, 2009 at 7:00 am</a></div>

		<div class="comment-body"><p>Did you consider any other view-engine? Like NVelocity or NDjango?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2021">
		<div id="comment-2021">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.spontaneouspublicity.com' rel='external nofollow' class='url'>Luke Foust</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2021">September 2, 2009 at 3:15 am</a></div>

		<div class="comment-body"><p>It is quite a coincidence that you published this today since I was just converting your canvas project to spark last night (partly as a way to learn spark and part to better understand the structure of your code). I also just swapped out the authentication with OpenID and I must say that working with your code has been quite a pleasure. This is my first real exposure to NHibernate and Ninject (I usually use Structure Map). Keep up the great work.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2020">
		<div id="comment-2020">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2020">September 2, 2009 at 1:28 am</a></div>

		<div class="comment-body"><p>@Travis:<br />
No. There&#8217;s info on getting intellisense working in VS.NET at:<br />
<a href="http://sparkviewengine.com/usage/intellisense" rel="nofollow">http://sparkviewengine.com/usage/intellisense</a></p>
<p>You basically disable R#&#8217;s intellisense in .spark files and let the native VS.NET take over (again only for those files). Even then though, I find the intellisense average at best. It isn&#8217;t a big feature I look for, but I can understand how it might be for some.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2019">
		<div id="comment-2019">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Travis </cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/09/01/canvas-gets-a-spark/#comment-2019">September 1, 2009 at 11:35 pm</a></div>

		<div class="comment-body"><p>Does R# work in the views when editing them in VS.NET? </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 1.627 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 21:56:12 -->
<!-- super cache -->