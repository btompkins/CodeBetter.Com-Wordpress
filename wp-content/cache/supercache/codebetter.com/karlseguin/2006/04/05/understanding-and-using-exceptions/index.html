<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Understanding and Using Exceptions | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/karlseguin/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/karlseguin/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Karl Seguin' href='http://codebetter.com/karlseguin/' />
<link rel='start' title='Expecting More From Development Companies' href='http://codebetter.com/karlseguin/2006/03/24/expecting-more-from-development-companies/' />
<link rel='prev' title='Language Proficiency &#8211; C# or VB.NET?' href='http://codebetter.com/karlseguin/2006/03/31/language-proficiency-c-or-vb-net/' />
<link rel='next' title='code better &#8211; use string.format' href='http://codebetter.com/karlseguin/2006/04/10/code-better-use-string-format/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/' />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=11' />
<link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-11" class="post-11 post type-post status-publish format-standard hentry category-grab-a-coffee-before-reading">
					<h1 class="entry-title">Understanding and Using Exceptions</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/" title="6:23 pm" rel="bookmark"><span class="entry-date">April 5, 2006</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/karlseguin/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>(this is a really long post&#8230;only read it if you (a) don&#8217;t know what try/catch is&nbsp; OR (b) actually write catch(Exception ex)&nbsp; or catch{ })</p>
<p>The first thing I look for when evaluating someone&#8217;s code is a try/catch block. While it isn&#8217;t a perfect indicator, exception handling is one of the few things that quickly speak about the quality of code. Within seconds you might discover that the code author doesn&#8217;t have a clue what he or she is doing. It may be fun to point and laugh at, but poor exception handling can have a serious impact on the maintainability of a system. Proper exception handling isn&#8217;t very difficult, technically there&#8217;s nothing to it. It all comes down to grasping the fundamentals.&nbsp; Too many developers consider exceptions dangerous to the health of a system. If you come from an exception-less language, you might be cursing Microsoft developers for ever having introduced them in the framework. </p>
<p>All exceptions in the .NET framework inherit from the base <font face="Courier New" size="2">System.Exception</font> class. This class exposes a handful of members you are likely familiar with, such as <font face="Courier New" size="2">StackTrace </font>and <font face="Courier New" size="2">Message</font>. Exceptions are raised by the framework, a library you are using or your own code when an exceptional situation occurs. While I don&#8217;t often run into over zealous use of exceptions, it is important to understand that they are meant to be used for truly exceptional scenarios. For example, if a user&#8217;s registration fails because the email is already in use, throwing an exception might not be appropriate. You&#8217;ll often hear people say &#8220;only use exceptions in exceptional cases&#8221;, as I just did. This is very sound advice when throwing your own exception, but what about catching and handling exceptions? Well the fundamental point to understand is the same, when an exception does get thrown, be aware that something truly exceptional happened.&nbsp; That might sound a little bit obvious, but a common example will show just how poorly understood the point is:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">try</font><br />&nbsp; connection.Open()<br />&nbsp; command.ExecuteNonQuery()<br /><font color="#0000ff">catch </font><br />&nbsp; <font color="#0000ff">return false</font><br /><font color="#0000ff">end try</font></font></p>
<p>You might have seen, or even written, similar code before. In <a href="/blogs/karlseguin/archive/2006/03/24/141760.aspx">a previous blog post</a>, I pointed out almost identical code in official Macromedia documentation. There&#8217;s actually more than 1 problem in the above code, but let&#8217;s focus on the catch block &#8211; the place the exception is supposed to get <b>handled</b>. Does anyone see the exception being handled? It isn&#8217;t. Instead, we&#8217;ve been warned that something truly bad has happened, and swept it under the rug. This is known as <b>exception swallowing, and it&#8217;s a sure sign of someone who&#8217;s afraid of and doesn&#8217;t understand exceptions</b>. If you truly understand that an exception is a sign of an exception situation, you&#8217;ll never dare sweep it under the rug!</p>
<p>If you aren&#8217;t supposed to swallow them, what&#8217;s the game plan going to be? The first thing to realize is that much more often than not, there&#8217;s nothing you&#8217;ll actually be able to do with exceptions. If I was to guess as to why developers get hung up on exceptions, I&#8217;d have to say this is it. For many developers, having an exception bubble up through code, where it&#8217;ll eventually cause the application to crash, seems unimaginable. For some reason, these same developers don&#8217;t seem to be too worried about not being able to connect to their database &#8211; we&#8217;ll just return false. <b>The simple truth is that if you can&#8217;t actually handle the exception, don&#8217;t.</b> We&#8217;ll implement logging and friendly error messages much higher up in the code, where it can be globally reused and easily maintained. If the above code makes it to a production server, no error message will be displayed, no meaningful data will be recorded and it might take hours (or days) before you even know something&#8217;s wrong. </p>
<p><font color="#808080" face="Times New Roman" size="5">Rethrownig exceptions</font><br />Does that mean that you should never catch exceptions? Not necessarily, but you need to be careful what you do in there. One of the few technical hangups developers have is how to rethrow a caught exception. Since it might not be obvious at first why you&#8217;d do that, let&#8217;s look at an example. Pretend we&#8217;ve build code that allows user&#8217;s to register. Our code will first enter the record into the database (assuming all business rules pass), and then send a confirmation email out that details how the account can be activated. If sending out the email fails, we&#8217;ll want to remove the record from the database so that the user can try again with the same username/email (else he or she will get an error saying the username or email is already in use). With proper use of exceptions, this is a simple matter to accomplish:</p>
<p><font color="#0000ff" face="Courier New" size="2">try</font><font face="Courier New" size="2"><br />{<br />&nbsp; Emailer.SendNewUserActivation(this)<br />}<br /></font><font color="#0000ff" face="Courier New" size="2">catch </font><font face="Courier New" size="2">(SmtpException ex)<br />{<br />&nbsp; this.Delete();<br />&nbsp; </font><font color="#0000ff" face="Courier New" size="2">throw</font><font face="Courier New" size="2">;<br />}</font></p>
<p>In the above code we haven&#8217;t handle the exception, but we&#8217;ve done some important cleaning up. The code can&#8217;t go in the finally clause because that&#8217;s called on failure AND success (and we don&#8217;t want to delete the record if everything was a success).&nbsp; The real gem in the code is the throw statement. This keeps the exception on the stack, where it&#8217;ll bubble upwards. The calling code won&#8217;t know that we ever caught the exception and did a bit of internal house-cleaning &#8211; which is just what we want because we did nothing to handle the exception.</p>
<p>(in the comments below, Mark Kamoski has some alternative solutions to the code above (along with some concerns) that I think are worthwhile, so scroll down and find his post!)</p>
<p>There are two variations to the code above. Instead of simply using throw; we could actually use <font face="Courier New" size="2">throw ex;</font>. The difference between the two, though subtle, it quite important to understand. When you use <font face="Courier New" size="2">throw ex;</font> you&#8217;ll modify the call stack and make it look like your code was the source of the exception. You are effectively throwing away useful debugging information. As I&#8217;ve said before, when you simply throw; it&#8217;s as though you didn&#8217;t do anything at all! We&#8217;ll talk more about throwing your own exceptions in a later post, but if you want to actually be involved in the exception bubbling chain, it&#8217;s generally better to throw a new exception and specified the caught exception as the inner exception, such as:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">throw new</font> SomeTypeOfException(&#8220;<font color="#a52a2a">User Activation send failed</font>&#8220;, ex);</font></p>
<p><font color="#808080" size="5">Cleaning up after yourself</font><br />If you follow my advice (and I&#8217;ll give you a much better source than just my own word soon), you&#8217;ll end up with very few Try/Catch statements. Instead what you should be using are Try/Finally statements, or the using statement.&nbsp; While you might not be able to handle an exception, you can certainly clean up after yourself. Most people know this, but finally happens whether an exception is raised or not, and is pretty much guaranteed to happen &#8211; so you can return in your try block and rest easy knowing your finally cleaned up your resources. Here&#8217;s an example:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">dim </font>connection <font color="#0000ff">as new</font> SqlConnection(GET_CONNECTION_STRING_FROM_CONFIG)<br /><font color="#0000ff">dim </font>command <font color="#0000ff">as new</font> SqlCommand(connection)<br /><font color="#008000">&#8216;&#8230;set stuff up</font><br /><font color="#0000ff">try</font><br />&nbsp; connection.Open()<br />&nbsp; <font color="#008000">&#8216;might wanna check for DbNull or something</font><br />&nbsp; <font color="#0000ff">return cint</font>(command.ExecuteScalar)<br /><font color="#0000ff">finally</font><br />&nbsp;connection.Dipose()<br />&nbsp;command.Dispose()<br /><font color="#0000ff">end try</font></font></p>
<p>If you instantiate your code inside the try, make sure to check for nothing before disposing:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">dim </font>connection <font color="#0000ff">as </font>SqlConnection<br /><font color="#0000ff">dim </font>command <font color="#0000ff">as </font>SqlCommand<br /><font color="#0000ff">try</font><br />&nbsp; connection = <font color="#0000ff">new </font>SqlConnection(GET_CONNECTION_STRING_FROM_CONFIG)<br />&nbsp; command = <font color="#0000ff">new </font>SqlCommand(conection)<br />&nbsp; <font color="#008000">&#8216;&#8230;set stuff up</font><br />&nbsp; connection.Open()<br />&nbsp; <font color="#008000">&#8216;might wanna check for DbNull or somethi</font>ng<br />&nbsp; return cint(command.ExecuteScalar)<br /><font color="#0000ff">finally</font><br />&nbsp;<font color="#0000ff">if </font>(not connection <font color="#0000ff">is nothing</font>) <font color="#0000ff">then</font><br />&nbsp;&nbsp;&nbsp; connection.Dipose()<br />&nbsp;<font color="#0000ff">end if<br />&nbsp;if</font> (not command <font color="#0000ff">is nothing</font>) <font color="#0000ff">then</font><br />&nbsp;&nbsp;&nbsp; command.Dispose()<br />&nbsp;<font color="#0000ff">end if<br />end try</font></font><br />&nbsp; <br />The above code is a little messy, which is exactly why C# and VB.NET (as of 2005) support the using keyword:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">using </font>(SqlConnection connection = <font color="#0000ff">new </font>SqlConnection(&#8230;))<br />{<br />&nbsp; <font color="#0000ff">using </font>(SqlCommand command = <font color="#0000ff">new </font>SqlCommand(&#8230;))<br />&nbsp; {<br />&nbsp;&nbsp;&nbsp; <font color="#008000">//..set stuff up</font><br />&nbsp;&nbsp;&nbsp; connection.Open();<br />&nbsp;&nbsp;&nbsp; <font color="#0000ff">return </font>Int32.Parse(command.ExecuteScalar);<br />&nbsp; }<br />}</font></p>
<p>I&#8217;ve heard some people say they dislike nested using statements, but if you compare the two examples, I think it&#8217;s much cleaner, readable and less error prone.</p>
<p><font color="#808080" size="5">More on actually catching exceptions</font><br />Now there are some times when you&#8217;ll be able to handle an exception. Everyone knows that you always catch specific exceptions first and work your way towards the base exceptions. You should also, never-ever catch <font face="Courier New" size="2">System.Exception</font>. Say we wrote code that took a query string value (or any string for that matter) and tried to turn it into an integer. If it fails, we want to default to a given value. You might write something like:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">public static int</font> ParseInt(<font color="#0000ff">string </font>value, <font color="#0000ff">int </font>defaultValue)<br />{<br />&nbsp;<font color="#0000ff">try</font><br />&nbsp;{<br />&nbsp; <font color="#0000ff">return </font>Int32.Parse(stringValue);<br />&nbsp;}<br />&nbsp;<font color="#0000ff">catch</font>(Exception ex)<br />&nbsp;{<br />&nbsp; <font color="#0000ff">return </font>defaultValue;<br />&nbsp;}<br />}</font></p>
<p>That&#8217;s wrong. What happens if Int32.Parse threw a <font face="Courier New" size="2">ThreadAbortException </font>or an <font face="Courier New" size="2">OutOfMemoryException</font>, does returning a defaultValue handle those exceptions? No. Instead, you need to catch only the specific exceptions you are handling:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">try</font><br />{<br />&nbsp; <font color="#0000ff">return </font>Int32.Parse(stringValue);<br />}<br /><font color="#0000ff">catch </font>(FormatException ex)<br />{<br />&nbsp;<font color="#0000ff">return </font>defaultValue;<br />}<br /><font color="#0000ff">catch </font>(InvalidCastException ex)<br />{<br />&nbsp;<font color="#0000ff">return </font>defaultValue;<br />}<br /><font color="#0000ff">catch </font>(OverflowException ex)<br />{<br />&nbsp;<font color="#0000ff">return </font>defaultValue;<br />}</font></p>
<p>Of course, that can be a serious pain to write and maintain. The solution is to apply what we learnt earlier about rethrowing caught exceptions:</p>
<p><font face="Courier New" size="2"><font color="#0000ff">try</font><br />{<br />&nbsp;<font color="#0000ff">return </font>Int32.Parse(stringValue);<br />}<br /><font color="#0000ff">catch </font>(Exception ex)<br />{<br />&nbsp; <font color="#0000ff">if</font> (!(ex <font color="#0000ff">is</font> FormatException) &amp;&amp; !(ex <font color="#0000ff">is</font> InvalidCastException) &amp;&amp; !(ex <font color="#0000ff">is</font> OverflowException))<br />&nbsp; {<br />&nbsp;&nbsp;&nbsp; <font color="#0000ff">throw</font>;<br />&nbsp; }<br />&nbsp; <font color="#0000ff">return </font>defaultValue;<br />}<br /></font><br />While it&#8217;s true I said that you should never catch Exception, notice that it&#8217;s being rethrown (using <font face="Courier New" size="2">throw;</font>) if it isn&#8217;t the expected type. This works just as well in VB.NET, or you can even use VB.NET&#8217;s when clause.</p>
<p><font color="#808080" size="5">Global Error Handling</font><br />If you&#8217;ve made it this far, you might be getting a little panicked. Since we aren&#8217;t catching exceptions left and right, they&#8217;ll bubble until they crash the system. Well that&#8217;s where global exception handling comes in. It lets us write, in a centralized (i.e., easy to change) way, any exception logging we want and how to display the error in a friendly manner. Now I&#8217;m getting a little tired of typing, but here&#8217;s the httpModule I use to get the job done (notice it relies on log4net to do any logging). If you aren&#8217;t familiar with httpModules, and you don&#8217;t want to bother learning, you can take the code from application_error and stick it in your global.asax&#8217;s application_error.</p>
<p><font face="Courier New" size="2"><font color="#0000ff">using </font>System;<br /><font color="#0000ff">using </font>System.Web;<br /><font color="#0000ff">using </font>log4net;</p>
<p><font color="#0000ff">namespace </font>Fuel.Web<br />{<br />&nbsp;&nbsp; <font color="#0000ff">public class</font> ErrorModule : IHttpModule<br />&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#800080">#region Fields and Properties</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">private static readonly</font> ILog logger = LogManager.GetLogger(<font color="#0000ff">typeof</font>(ErrorModule));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#800080">#endregion</font> </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#800080">#region IHttpModule Members&nbsp;&nbsp;</font>&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff"> public void</font> Init(HttpApplication application)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; application.Error += new EventHandler(application_Error); &nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public void</font> Dispose() { }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#800080">#endregion</font></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public void</font> application_Error(<font color="#0000ff">object </font>sender, EventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HttpContext ctx = HttpContext.Current;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#008000">//get the inner most exception</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Exception exception;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">for </font>(exception = ctx.Server.GetLastError(); exception.InnerException != <font color="#0000ff">null</font>; exception = exception.InnerException) { }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">if </font>(exception <font color="#0000ff">is</font> HttpException &amp;&amp; ((HttpException)exception).ErrorCode == 404)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.Warn(&#8220;A 404 occurred&#8221;, exception);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">else</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.Error(&#8220;ErrorModule caught an unhandled exception&#8221;, exception);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ctx.Server.ClearError();<br /><font color="#008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if you want, you&nbsp; can simply redirect to a generic &#8220;oops, an error occurred page&#8221; ala:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //this is what I recommend until you get into creating your own exceptions<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Response.Redirect(&#8220;error.asx&#8221;);</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp; }<br />}</font></p>
<p><font color="#808080" size="5">What if you disagree with me?</font><br />You might disagree with what I&#8217;ve said. You might even point to this MSDN reference that supposedly tells you how to handle exception: <a href="http://msdn2.microsoft.com/en-us/library/24395wz3.aspx">http://msdn2.microsoft.com/en-us/library/24395wz3.aspx</a>.&nbsp; In it you&#8217;ll find very different advice, namely:</p>
<blockquote><p><font color="#808080"><font color="#000000">&#8220;It is preferable to use Try/Catch blocks around any code that is subject to errors rather than rely on a global error handler</font>.&#8221;</font></p></blockquote>
<p>I&#8217;ll counter that crap (and i am trying to get it corrected, because it IS flat out wrong), with a quote from <a href="http://en.wikipedia.org/wiki/Anders_Hejlsberg">Anders Hejlberg</a> (you know, the lead architect for C#, one of few Microsoft distinguished engineers, the inventor of TurboPascal and a lot more): </p>
<blockquote><p>&#8220;No, because in a lot of cases, people don&#8217;t care. They&#8217;re not going to handle any of these exceptions. There&#8217;s a bottom level exception handler around their message loop. That handler is just going to bring up a dialog that says what went wrong and continue. The programmers protect their code by writing try finally&#8217;s everywhere, so they&#8217;ll back out correctly if an exception occurs, but they&#8217;re not actually interested in handling the exceptions.</p>
<p>The throws clause, at least the way it&#8217;s implemented in Java, doesn&#8217;t necessarily force you to handle the exceptions, but if you don&#8217;t handle them, it forces you to acknowledge precisely which exceptions might pass through. It requires you to either catch declared exceptions or put them in your own throws clause. To work around this requirement, people do ridiculous things. For example, they decorate every method with, &#8220;throws Exception.&#8221; That just completely defeats the feature, and you just made the programmer write more gobbledy gunk. That doesn&#8217;t help anybody.</p>
<p>It is funny how people think that the important thing about exceptions is handling them. That is not the important thing about exceptions. In a well-written application there&#8217;s a ratio of ten to one, in my opinion, of try finally to try catch. Or in C#, using statements, which are like try finally.</p>
<p>In the finally, you protect yourself against the exceptions, but you don&#8217;t actually handle them. Error handling you put somewhere else. Surely in any kind of event-driven application like any kind of modern UI, you typically put an exception handler around your main message pump, and you just handle exceptions as they fall out that way. But you make sure you protect yourself all the way out by deallocating any resources you&#8217;ve grabbed, and so forth. You clean up after yourself, so you&#8217;re always in a consistent state. You don&#8217;t want a program where in 100 different places you handle exceptions and pop up error dialogs. What if you want to change the way you put up that dialog box? That&#8217;s just terrible. The exception handling should be centralized, and you should just protect yourself as the exceptions propagate out to the handle.&#8221;</p>
</blockquote>
<p>(you can read the entire interview <a href="http://www.artima.com/intv/handcuffs.html">here</a>, very good read, especially if you come from a Java backgorund)</p>
<p>Make sure to read that and understand that well, because it&#8217;s all amazing advice and the real foundation of what you need to know with respect to exception handling.</p>
<p><font color="#808080" face="Times New Roman" size="5">In Closing:</font><br />Here are the key points:<br />- Don&#8217;t catch exceptions unless you can actually handle them<br />- Do know how to rethrow exceptions properly<br />- Do use using or try/finally often<br />- Don&#8217;t swallow exceptions<br />- Do use a global handler to help you log and display a friendly error message</p>
<p>I did want to talk about creating your own exceptions, but I think I&#8217;ll save that for another post.</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/grab-a-coffee-before-reading/" title="View all posts in Grab a coffee before reading" rel="category tag">Grab a coffee before reading</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/" title="Permalink to Understanding and Using Exceptions" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/feed/" title="Comments RSS to Understanding and Using Exceptions" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-11 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2006/03/31/language-proficiency-c-or-vb-net/" rel="prev"><span class="meta-nav">&larr;</span> Language Proficiency &#8211; C# or VB.NET?</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2006/04/10/code-better-use-string-format/" rel="next">code better &#8211; use string.format <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">45 Responses to <em>Understanding and Using Exceptions</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-117">
		<div id="comment-117">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Krispy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-117">February 27, 2009 at 4:41 pm</a></div>

		<div class="comment-body"><p>For info, console apps &#038; Windows Form apps camn use the follwoing snippets to capture any unhandled exceptions&#8230;</p>
<p>//GUI Apps<br />
Application.ThreadException += new ThreadExceptionEventHandler(UnhandledExceptionHandler);</p>
<p>//Console Apps<br />
Thread.GetDomain().UnhandledException += new UnhandledExceptionEventHandler(Program_UnhandledException);</p>
<p>This will give you a central location for capturing unhandled exceptions and an opportunity to display a user friendly message highlighting the error.  It will also remove the need to wrap every method/event with a try/catch block.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-116">
		<div id="comment-116">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Rainer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-116">September 15, 2008 at 2:51 pm</a></div>

		<div class="comment-body"><p>Use</p>
<p>if (ex is HttpException &#038;&#038; ((HttpException)ex).GetHttpCode() == 404)</p>
<p>instead of</p>
<p>if (exception is HttpException &#038;&#038; ((HttpException)exception).ErrorCode == 404)</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-115">
		<div id="comment-115">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.e-zest.net/dotnet_Web_Applications_Desktop.html' rel='external nofollow' class='url'>ASP Net Web Development</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-115">September 1, 2008 at 6:31 am</a></div>

		<div class="comment-body"><p>Nice post on using Exceptions&#8230; thank you</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-114">
		<div id="comment-114">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Luke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-114">July 16, 2008 at 9:45 am</a></div>

		<div class="comment-body"><p>Thanks, great esource (pingback <a href="http://en.wikipedia.org/wiki/Exception_handling)" rel="nofollow">http://en.wikipedia.org/wiki/Exception_handling)</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-113">
		<div id="comment-113">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tan Pho Han</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-113">June 22, 2008 at 6:36 pm</a></div>

		<div class="comment-body"><p>So what should I do when I&#8217;m validation user inputs or business rules?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-112">
		<div id="comment-112">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.prtracker.com' rel='external nofollow' class='url'>Randy Stimpson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-112">June 19, 2008 at 6:39 am</a></div>

		<div class="comment-body"><p>Hey Karl,</p>
<p>This is the first page I&#8217;ve read on exception handling that suggests that try/finally out to be used much more that try/catch.  I often get annoyed by all the try/catch nonsense I see in code. Even more annoying is when exceptions get converted into return values which have to be checked by the calling routine.</p>
<p>The purpose of structured exception handling is to eliminate the type of control coupling that occurs when error codes are passed up through calling methods by means of a return value or a parameter until a method is reached that can handle the error. When errors are handled in this way, each method in the call stack has to implement code to check the error code and decide what to do. The decision is generally to suspend whatever the routine is doing and pass an error code up to the next level until a level is reached that handles the error. Structured error handling eliminates the need for all this error handling code between the level where the error occurred and where it is handled.</p>
<p>Programmers that are unaware of the intent of structured error handling will often write code to catch exceptions within each routine, convert the exceptions into error codes, and then pass the error codes up to the calling routine through a return value or parameter. Handling exceptions like that is kind of like using goto statements when you could be using if-then-else or some other structured programming construct. Donâ€™t convert exceptions to error codes unless some interface requires it.</p>
<p>And in regard to Woodward question about what to do with an exception &#8212; why not also log it in a bug tracking system?</p>
<p>See <a = href="http://www.prtracker.com/support/OnlineHelp6/webframe.html?UsingPRTrackerToCollectExceptionData.html">Using PR-Tracker to Collect Exception Data</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-111">
		<div id="comment-111">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">E-Doctor</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-111">November 8, 2007 at 3:01 pm</a></div>

		<div class="comment-body"><p>Hi Karl, i am developing a win form application, and i have a try-cath code, and the &#8220;FIRST TIME&#8221; an error occurs in the try block, about &#8220;6-8 SECONDS&#8221; i have to wait until the code reach the catch block (I know it because i place in the catch block a &#8220;messagebox.show(ex.ToString());&#8221;  ). Then, subsequents errors in that try block, it&#8217;s really fast to get to the catch block (maybe milliseconds) . To repeat the scenario, i have to close the application, and reopen it.  I even catch NOT the general Exception class, but the specific exception, in my case, the System.FormatException.</p>
<p>&#8220;WHY the first time is too long time to reach to the catch block?&#8221;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-110">
		<div id="comment-110">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-110">May 9, 2007 at 11:10 pm</a></div>

		<div class="comment-body"><p>shaheen:<br />
If you throw an exception knowing that you&#8217;ll always catch it, it might be not be a good use for an exception. </p>
<p>If you&#8217;re describing a &#8220;marker&#8221; exception, where you just need a &#8220;custom&#8221; exception so that you can catch something explicitly without swallowing Exception, then I think you&#8217;re on the right direction. I realize it seems like pointless code, but it can be pretty handy.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-109">
		<div id="comment-109">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://rahima_shaheen@yahoo.com' rel='external nofollow' class='url'>shaheen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-109">May 9, 2007 at 11:38 am</a></div>

		<div class="comment-body"><p>I like this post . It is very essential. But still I&#8217;ve some confusion. suppose I build a custom exception derived from (Exception, not used ApplicationException) and want it to catch in try catch block. But it can&#8217;t catch the exception untill I throw it explicitly. the custom exception is not actually a custom exception, I just give a different name to a known exception. Am I in a right direction?<br />
&#8212;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-108">
		<div id="comment-108">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-108">April 23, 2007 at 2:36 pm</a></div>

		<div class="comment-body"><p>Excellent and very helpful article. I look forward to the follow up on creating own exceptions and seeing what you have to say about that.</p>
<p>I&#8217;d also recommend to anyone interested in this to <a href="http://research.microsoft.com/specsharp/papers/krml135.pdf" rel="nofollow">http://research.microsoft.com/specsharp/papers/krml135.pdf</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-107">
		<div id="comment-107">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-107">April 3, 2007 at 10:11 pm</a></div>

		<div class="comment-body"><p>Jason, I don&#8217;t think you went far enough&#8230;I think you should hook into the HttpModule&#8217;s OnError event&#8230;.why rewrite the same code for every single one of your pages? (alternatively, you could create a base class that all your pages inherit from).</p>
<p>This post has gotten a lot of comments, and while there&#8217;s some differing of opinion, I think most would agree that your lead is likely wrong.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-106">
		<div id="comment-106">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jason</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-106">April 3, 2007 at 12:28 pm</a></div>

		<div class="comment-body"><p>I&#8217;ve just been going round and round with my team lead about exception handling. I haven&#8217;t done a lot of it in my time as a developer, so I really didn&#8217;t understand it all that well. I wrote a single method on each of my pages that received a string to represent the method name, and an exception. It would log the error and then hide certain elements on the page and display an error label. My team lead didn&#8217;t like this approach because it allowed processing to continue even after an exception occurred. He asked me to rewrite the code. So I hopped online to see what I could learn about exception handling and I stumbled across Page.Error event and I implemented added the event handler to one of my pages, removed all try/catch code that I&#8217;d had in there. I added code to generate some exceptions in the business layer, in some web controls and on the page itself in various events. The error handler event caught every single one of these errors, so I went ahead and added the event handler to all of my pages, and I then logged the event and redirected the user to an error page. I added specific try/catch blocks in the areas where I wanted to actually do something with the exception, but other than that, I left no try/catch blocks at all. This seems to work very well, but my team lead doesn&#8217;t like it. He wants me to add the try/catch blocks because that&#8217;s what everyone else is doing. I&#8217;m going to do what he asks, because, well, you know, he IS the lead, but inside I think this is a step backwards. Am I wrong?</p>
<p>Thanks!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-105">
		<div id="comment-105">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-105">March 3, 2007 at 5:38 pm</a></div>

		<div class="comment-body"><p>HEALTH WARNING: Unfortunately this posting contains a serious error which perpetuates the confusion that 95% of developers have about what exceptions are.</p>
<p>< <<br />
it is important to understand that they are meant to be used for truly exceptional scenarios. For example, if a user's registration fails because the email is already in use, throwing an exception might not be appropriate. You'll often hear people say "only use exceptions in exceptional cases", as I just did. This is very sound advice when throwing your own exception<br />
>></p>
<p>This is utterly mistaken. Like many developers, the author has been misled by (1) the term &#8220;exception&#8221; and (2) the much-discussed performance considerations of throwing an exception.</p>
<p>The author thinks that an exception is something &#8220;exceptional&#8221;; something to do with the *frequency* with which a condition occurs.</p>
<p>Please don&#8217;t perpetuate this misunderstanding. Exceptions are used to represent *method failure*. Imagine a method designed to perform a task, let&#8217;s say XYZ, named </p>
<p>DoXyz()</p>
<p>If for *any* reason, the method couldn&#8217;t do what it says it will do, it will throw an exception. That&#8217;s what exceptions are &#8211; they represent a failure of a method to adhere to its contract; i.e. that it couldn&#8217;t do *what it says* in its name.</p>
<p>Look at every method in the .NET framework. It will either work, or it will throw an exception.</p>
<p>If this basic idea is not understood, it is impossible to write your own code that correctly throws exceptions, correctly catches exceptions, and much less write an article called &#8220;Understanding and Using Exceptions&#8221;.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-104">
		<div id="comment-104">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-104">January 25, 2007 at 10:38 pm</a></div>

		<div class="comment-body"><p>Paul:<br />
That really does sound like a nightmare. To be honest, I don&#8217;t have any good suggestions for tracking local variables and the like but&#8230;.</p>
<p>Why do you need local variables? If this is a web app, a stack trace and a dump of the request object (raw http, or querystring or form) should let you repro the bug easily.</p>
<p>Out of curiosity, how useful have you found all the extra hoops and jumps when a bug actually did arise?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-103">
		<div id="comment-103">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-103">January 23, 2007 at 5:33 pm</a></div>

		<div class="comment-body"><p>I&#8217;ve gotten into what&#8217;s probably a really bad habit, of try/catching rethrowing everywhere for the purpose of recording as much information about the errors as possible.  I started out trying to address the issue of being able to get the methods parameters and values for those paremters, along with the values of any other pertinent local variables in those methods, and log them to my error log.  So with that, we ended up try/catching/rethrowing in every routine, and to avoid logging the same error as it bubbles up, we&#8217;d create a new exception that once bubbled up, if caught, we knew not to log it since if it was of that type, we knew it had been logged.  Any suggestions on how to log all of the additional data that I mentioned, and use a cleaner method for exception handling?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-102">
		<div id="comment-102">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">floid</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-102">December 26, 2006 at 3:13 am</a></div>

		<div class="comment-body"><p>about the db conect example:<br />
in fact returning false is precisely the correct thing to do:<br />
you couldnt connect</p>
<p>(of course,there migh be some cleanup needed before returning false)</p>
<p>now the problem with the example code you show is not that it doesnt &#8216;handle&#8217; exceptions,<br />
but that the granualrity might be wrong; as shown there is no distinction between the connection attemp and the query</p>
<p>but the real point is that there is a pathological exception idiom baked into .net<br />
which needs to be corrected by judicious wrapper code</p>
<p>people are very confused about this</p>
<p>what is &#8216;handle&#8217; anyway?<br />
what is &#8216;excpetional&#8217;? what is &#8216;normal&#8217;?</p>
<p>if dpending on the subjective views of developers, these questions have no consistent answer</p>
<p>it helps to look at the roots of the mechanism: the current syntactical support of exception handling is a more orderly setjump/longjump which can unwind the stack,<br />
but the original problem scope was for seriously broken situations,<br />
such as out of memory, disk full, etc,<br />
situations which cannot be handled programmatically, because<br />
the programming model is broken</p>
<p>but now, due to the design mistakes in the clr and ms libraries, augmeented by design mistakes by 3rd party libarries,<br />
execption mis-use is widespread</p>
<p>so, while well intentioned, this blog, as well as msdn, are both wrong</p>
<p>the only correct way to handle exceptions is to wrap the pathological exceptions and return meaningful results; this of course depends on something else which is in short supply: sound design.</p>
<p>the very very few real and actual exception conditions can be propigated, because, as  if there&#8217;s nothing that can be done about it, there&#8217;s nothing to do</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-101">
		<div id="comment-101">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Narges</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-101">October 1, 2006 at 5:37 am</a></div>

		<div class="comment-body"><p>Hi Karl,<br />
thanks for your Great post. it helped me a lot <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />  </p>
<p>can you help me for a few exceptions that is better to be caught in data layer? for example connectionException.</p>
<p>and what about informative data that can be added to a custom exception that is defined as DALException, what can be them?</p>
<p>in a better word, what can be the properties which is defined for DALException which filled when we want wrap a concrete exception in data layer with DALException.</p>
<p>thanks in advance.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-100">
		<div id="comment-100">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Martin Smith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-100">August 24, 2006 at 2:30 pm</a></div>

		<div class="comment-body"><p>Some people might find this heretical and I see the points you&#8217;re making but I still find catch{} useful.</p>
<p>For example if in my App I would like to clean up a file if possible but am not particularly bothered if it stays there or not I will use a function like this.</p>
<p>        public static void TryAndDeleteFileMaskingAllErrors(string filePath)<br />
        {<br />
            try<br />
            {<br />
                File.Delete(filePath);<br />
            }<br />
            catch { }<br />
        }</p>
<p>That saves me the bother of having to write specific code to handle all 7 errors that the Delete function might return.</p>
<p>If indeed these other Out of Memory type exceptions etc. occur then they will likely occur again outside of this function and will be caught by the global error handler then</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-99">
		<div id="comment-99">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Senthilkumar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-99">June 8, 2006 at 6:17 am</a></div>

		<div class="comment-body"><p>This Article is good</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-98">
		<div id="comment-98">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">SenthilKumar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-98">June 8, 2006 at 6:17 am</a></div>

		<div class="comment-body"><p>Good</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-97">
		<div id="comment-97">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Senthil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-97">June 8, 2006 at 6:17 am</a></div>

		<div class="comment-body"><p>None</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-96">
		<div id="comment-96">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-96">April 11, 2006 at 1:00 pm</a></div>

		<div class="comment-body"><p>methusaleh, thanks for the more insightful opinion &#8211; the first one left a little to be desired (imho), but you more than made up for it <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>I haven&#8217;t spent any significant amount of time in Java, so I can&#8217;t contribute much to the high-profile discussion around checked exceptions or not. In my limited experience, I have seen the behavior Anders is talking about &#8211; too many exceptions to catch so simply swallowing them all. He is correct, when handled this way, it&#8217;s counter productive. I haven&#8217;t seen a medium or large Java project (in terms of complexity), properly implement exception handling (not because they don&#8217;t exist, simply because I&#8217;m not exposed to that type of Java codebase). It would be quite interesting to see and I&#8217;d probably learn a thing or two.</p>
<p>I can&#8217;t help but wonder out loud if Anders view isn&#8217;t more realistic (perhaps sadly so, and yes perhaps Microsoft should be doing more to set the bar higher).</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-95">
		<div id="comment-95">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Methusaleh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-95">April 11, 2006 at 6:20 am</a></div>

		<div class="comment-body"><p>Karl, in response to your question:</p>
<p>The article infers that checked-exceptions are an anti-pattern based on actual usage by developers, and by the issues it causes for versioning.  Yet without checked-exceptions how can a developer guarantee correct method behaviour as defined by its contract when it is unable to ask the same of any librarys or APIs it itself uses?</p>
<p>Thus programming is now dumber because of a decision that was made based on dumb developers.  He should have based his decision on the correct usage of checked-exceptions rather than on bad usage.  Maybe if Anders had read <a href="http://thedailywtf.com/" rel="nofollow">http://thedailywtf.com/</a> he might have just concluded that developers should be stopped from developing altogether.</p>
<p>Some comments on the article:</p>
<p>Anders Hejlsberg, &#8220;In version two of foo, I want to add a bunch of features, and now foo might throw exception D. It is a breaking change for me to add D to the throws clause of that method, because existing caller of that method will almost certainly not handle that exception.&#8221;</p>
<p>The same can be said of changes to method signatures.  Its called breaking the contract.<br />
The point is that thrown exceptions are part of an interface&#8217;s defined contract.  This should be obvious because exception throwing is application behaviour.</p>
<p>Bill Venners: &#8220;But aren&#8217;t you breaking their code in that case anyway, even in a language without checked exceptions? If the new version of foo is going to throw a new exception that clients should think about handling, isn&#8217;t their code broken just by the fact that they didn&#8217;t expect that exception when they wrote the code?</p>
<p>Anders Hejlsberg, &#8220;There&#8217;s a bottom level exception handler around their message loop. That handler is just going to bring up a dialog that says what went wrong and continue. The programmers protect their code by writing try finally&#8217;s everywhere, so they&#8217;ll back out correctly if an exception occurs.&#8221; etc.</p>
<p>He later goes on, &#8220;In the finally, you protect yourself against the exceptions&#8221;</p>
<p>I would certainly hope that the developers are checking what exceptions are thrown.  Is it safe for the application to continue?  Should the application terminate immediately?  Should the developer save a possibly corrupt document or not?!  How do you handle this in a finally clause.</p>
<p>How many subsytems are the exceptions propogating through?  How many exceptions are possibly going to be thrown?  I really like that I have read documentation to know what exceptions I have to handle and possibly recover from.  God I hope the documentation written by ACME-Corp is correct or the first time I see one of these exceptions might be in production.  You hope to God this application isn&#8217;t controlling an X-Ray machine.</p>
<p>Anders Hejlsberg, &#8220;And once you aggregate that with another subsystem you&#8217;ve got 80 exceptions in your throws clause. It just balloons out of control.&#8221;</p>
<p>Quoting from &#8220;Richard A. Demers &#8211; Subsystem Exception Handling in Smalltalk&#8221;<br />
<a href="http://www.whysmalltalk.com/articles/demers/subsystemexception.htm" rel="nofollow">http://www.whysmalltalk.com/articles/demers/subsystemexception.htm</a></p>
<p>	1. A public method of a subsystem should only raise only those exceptions that it explicitly defines in its interface.<br />
	2. Further, a subsystem should trap and handle all other exceptions raised by its own objects and by any subsystems it uses.</p>
<p>So under C# we have 80 exceptions bubbling out with no way of knowing which ones to expect.</p>
<p>He finishes with, &#8220;In the large, checked exceptions become such an irritation that people completely circumvent the feature. They either say, &#8220;throws Exception,&#8221; everywhere; orâ€”and I can&#8217;t tell you how many times I&#8217;ve seen thisâ€”they say, &#8220;try, da da da da da, catch curly curly.&#8221; They think, &#8220;Oh I&#8217;ll come back and deal with these empty catch clauses later,&#8221; and then of course they never do. In those situations, checked exceptions have actually degraded the quality of the system in the large.&#8221;</p>
<p>QED.</p>
<p>In your article you have covered areas of exception management, logging and instrumentation that we do agree on.  My comment is solely based on the Artima article.  While I agree with Anders concern, there is so much more that Microsoft could have done.  While checked-exceptions (and exceptions in general) are not perfect, C# is worse for not having them.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-94">
		<div id="comment-94">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-94">April 10, 2006 at 10:32 pm</a></div>

		<div class="comment-body"><p>Mark:<br />
Very good points and two alternative solutions certainly worthwhile. I&#8217;m not sure than any one solution is flat-out better than the others, now that you mention it though the conditional state is probably how I&#8217;d do it <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>I&#8217;ve updated the post and made a reference to your comment for my information. </p>
<p>As for the transaction option, the way I&#8217;m seeing it, it would require more interaction between my data layer and business layer than I feel comfortable with (in this particular case). Though it could certainly be a good solution in other cases or with a different architecture.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-93">
		<div id="comment-93">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.WebLogicArts.com' rel='external nofollow' class='url'>Mark Kamoski</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-93">April 10, 2006 at 4:15 pm</a></div>

		<div class="comment-body"><p>First, this is a good article and I thank you for it.</p>
<p>Second, I want to &#8220;take exception&#8221; with something that you said.</p>
<p>(Actually I should say &#8220;comment on&#8221; instead of &#8220;take exception&#8221;, but I simply could not resist the pun.)</p>
<p>Anyway&#8230;</p>
<p>You say &#8220;Pretend we&#8217;ve build code that allows user&#8217;s to register. Our code will first enter the record into the database (assuming all business rules pass), and then send a confirmation email out that details how the account can be activated. If sending out the email fails, we&#8217;ll want to remove the record from the database&#8230;&#8221;.</p>
<p>The code you gave is this&#8230;</p>
<p>try<br />
{<br />
  Emailer.SendNewUserActivation(this)<br />
}<br />
catch (SmtpException ex)<br />
{<br />
  this.Delete();<br />
  throw;<br />
}</p>
<p>try<br />
{<br />
  Emailer.SendNewUserActivation(this)<br />
}<br />
catch (SmtpException ex)<br />
{<br />
  this.Delete();<br />
  throw;<br />
}</p>
<p>&#8230;so I am wondering?</p>
<p>Why isn&#8217;t the insert transactional and simply rolled back if the email send fails?</p>
<p>Sure, this keeps the connection/transaction open for longer than ideal; but, the concern that I have is doing TOO much in the catch block. We don&#8217;t know what this.Delete() does; but, it shouldn&#8217;t do too much, I hope.</p>
<p>Another strategy is to insert the record in a conditional state. The row is tagged with &#8220;isConfirmed&#8221; or &#8220;isConfirmationEmailSent&#8221; or something like that. If that flag is not set, then the record is &#8220;dead&#8221; after some kind of time out. Sure, this adds overhead and bookkeeping; but, I still don&#8217;t like the alternative of putting this.Delete() in the catch block. </p>
<p>In general, my point would be that one ought to be cautious about type of code is in the catch block. It should be VERY stable and bullet-proof code (if possible). Otherwise, one ought to use a workflow manager that handles such interdependent workflows and the state of the data in general. </p>
<p>What would you respond to such comments and concerns?</p>
<p>Please advise.</p>
<p>Thank you.</p>
<p>&#8211;Mark Kamoski</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-92">
		<div id="comment-92">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-92">April 7, 2006 at 5:15 pm</a></div>

		<div class="comment-body"><p>Good article but you have a small typo in the section entitled &#8220;Rethrownig exceptions&#8221;    Guess the exception handlers cannot handle spelling <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-91">
		<div id="comment-91">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.stanscollectables.com' rel='external nofollow' class='url'>Stanley</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-91">April 7, 2006 at 1:41 pm</a></div>

		<div class="comment-body"><p>Nice article Karl. stej, it is my experience that you do not handle system.exception within your class. Handle the specific errors such as the ones you find in the docs. Leave the system.exception to the global handler because there is nothing you can really do about it at run time. Log it and fix it later. It may end up being something you can catch in your code, but until you can document it with the logs, there is not much you can do.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-90">
		<div id="comment-90">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">stej</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-90">April 7, 2006 at 5:33 am</a></div>

		<div class="comment-body"><p>>> &#8220;You should also, never-ever catch System.Exception.&#8221;</p>
<p>I agree, but I think it&#8217;s not that easy. It happened to me many times that I wanted to catch only some exceptions (access denied, io error etc.). So I had a look into documentation and listed the wanted ones. So far ok. Anyway, when running the code an unexpected exception was thrown, but I didn&#8217;t catch it because I didn&#8217;t expect it &#8211; it wasn&#8217;t in the documentation. </p>
<p>Then the only solution is to catch System.Exception. Or better exceptions that inherit from it and might be thrown?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-89">
		<div id="comment-89">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-89">April 6, 2006 at 11:18 pm</a></div>

		<div class="comment-body"><p>I&#8217;d like to know where, in that interview, you think that&#8217;s being said. What is it you don&#8217;t agree with? Do you think my (and his) advice on exception handling is wrong? Should such broad recommendations not be made without disclaimers? What&#8217;s the problem?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-88">
		<div id="comment-88">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">methusaleh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-88">April 6, 2006 at 11:08 pm</a></div>

		<div class="comment-body"><p>Anders Hejlberg is wrong.  The point he makes is &#8216;programmers are dumb; lets make everything else dumb to match&#8217;  &#8211; That&#8217;s just brilliant.  Good work MS.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-87">
		<div id="comment-87">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.todhilton.com' rel='external nofollow' class='url'>tod</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-87">April 6, 2006 at 3:35 pm</a></div>

		<div class="comment-body"><p>Very good post Karl! Having a little over a year of .NET experience, this is one area in particular that I&#8217;m working on right now. Your explanation was very helpful, in fact I&#8217;m del.icio.us&#8217;ing it right now for future reference.</p>
<p>The funny thing [to me at least] is that just yesterday my mentor was explaining the using statement to me&#8230;and then this morning your post showed up in my feed reader.  Great timing! <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-86">
		<div id="comment-86">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Peacedog</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-86">April 6, 2006 at 2:25 pm</a></div>

		<div class="comment-body"><p>Fair point on the swallowing (and no, it didn&#8217;t sound &#8220;purish/snobbish&#8221;) &#8211; I was perhaps being too conversational in what I was saying.  I had previously been swallowing all exceptions but I&#8217;m starting to change that.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-85">
		<div id="comment-85">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-85">April 6, 2006 at 11:49 am</a></div>

		<div class="comment-body"><p>John:<br />
Whether it&#8217;s a web app or a desktop one, it&#8217;s the same process. Remember, when an exception is thrown in asp.net and you redirect to the error page, you are effectively killing the thread. if the user browses back and tries again (or something else), it&#8217;s effectively like them restarting the application.</p>
<p>That said, for the cases we are talking about here, the exceptions are really unexpected. It&#8217;s generally good to display log the error and try to display a friendly error message (I say try because the stability of the system might not be very good (this is where exception swallowing&#8217;s actually allowed)). Unless the audience of your application is very technical, I don&#8217;t generally feel good about displaying a very detailed message &#8211; assuming you have good logging in place that goes beyond &#8220;can you tell me what error you saw&#8221; over the telephone.</p>
<p>When I cover throwing your own custom exceptions, it might become a little easier to write slightly more specific error messages that are just as friendly. Additionally, it might become easier to figure out how to actually handle an exception (if not when it happens, perhaps in the global handler). In this case, you might have good choices other than shutting down. For example, you might throw an MyApplicationConnectionFailed exception and decide to ask the user to pick their database again &#8211; just to make sure.</p>
<p>Karl</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-84">
		<div id="comment-84">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-84">April 6, 2006 at 11:43 am</a></div>

		<div class="comment-body"><p>Rodel:<br />
<br />Hopefully someone else might step up and give you a more definitive answer, but I&#8217;m almost certain that it&#8217;s the stacktrace that&#8217;s the slowdown. I was curious about this not too long ago, and stumbled accross <a href="http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/tree/browse_frm/thread/32920b08c47d9c5c/5ca27a26f8c7b6f4?rnum=1&amp;q=c%23+kernel+exception&amp;_done=%2Fgroup%2Fmicrosoft.public.dotnet.languages.csharp%2Fbrowse_frm%2Fthread%2F32920b08c47d9c5c%2F5ca27a26f8c7b6f4%3Ftvc%3D1%26q%3Dc%23+kernel+exception%26#doc_8fec4d1e3130cf76">this newsgroup post</a>, which is quite detailed.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-83">
		<div id="comment-83">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">John Woodard</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-83">April 6, 2006 at 11:27 am</a></div>

		<div class="comment-body"><p>Help me out here, because I&#8217;m trying to get my arms around this.</p>
<p>In the global exception handler, if we&#8217;re talking about an application and not an ASP.NET page, what should the handler do other than log the exception?  Should it:</p>
<p>1.  Report it to the user?<br />
2.  Close the application?<br />
3.  All of the above?<br />
4.  Some of each, and if so how do you know?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-82">
		<div id="comment-82">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://community.devpinoy.org/blogs/dehranph' rel='external nofollow' class='url'>Rodel E. Dagumampan</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-82">April 6, 2006 at 11:08 am</a></div>

		<div class="comment-body"><p>Great porst carl! Just want to have some clarifications.</p>
<p>We all know that throwing exceptions is slow but I want to know what makes it slow? Is it true that when an exception was encountered it spans another thread? Internally, what makes it slow really?</p>
<p>thanks!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-81">
		<div id="comment-81">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/john.papa' rel='external nofollow' class='url'>johnpapa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-81">April 6, 2006 at 5:37 am</a></div>

		<div class="comment-body"><p>Great post Karl! To may times I see exception handing logic swallowing up exceptions &#8230; and it later bites them.</p>
<p>I LOVE &#8220;using&#8221; statements. I have no problem nesting them either &#8230; I think it actually helps clarity.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-80">
		<div id="comment-80">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://none' rel='external nofollow' class='url'>WhoDaPimp</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-80">April 6, 2006 at 4:17 am</a></div>

		<div class="comment-body"><p>All I gotta say is AMEN!! Great post.<br />
Like they say, If you dont get it, you dont get it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-79">
		<div id="comment-79">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://philiprieck.com/blog' rel='external nofollow' class='url'>Philip Rieck</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-79">April 6, 2006 at 4:02 am</a></div>

		<div class="comment-body"><p>No disagreement here. A quick personal note, though..</p>
<p>1)  In c#, I really like breaking with my own guidelines on blocks, and &#8220;nesting&#8221; using statements this way:</p>
<p>using( SqlConnection conn = &#8230;)<br />
using( SqlCommand cmd = &#8230;)<br />
{<br />
  //Code goes here<br />
}</p>
<p>While I (personally) hate blocks without {}, (like naked ifs), this is one place I like the usage.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-78">
		<div id="comment-78">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/eric.wise' rel='external nofollow' class='url'>ewise</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-78">April 6, 2006 at 1:24 am</a></div>

		<div class="comment-body"><p>The common thing I see from .NET newbies and try-catch other than overzealous wrapping without handling is the throwing of exceptions for user input validations.</p>
<p>Lucky for us TryParse came along and hopefully with proper community support will beat a lot of those exceptions out.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-77">
		<div id="comment-77">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://musingmarc.blogspot.com/2005/09/exception-handling-in-net-some-general.html' rel='external nofollow' class='url'>Marc Brooks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-77">April 5, 2006 at 11:49 pm</a></div>

		<div class="comment-body"><p>I&#8217;ve got your back on this one!  Check out my guidelines:</p>
<p><a href="http://musingmarc.blogspot.com/2005/09/exception-handling-in-net-some-general.html" rel="nofollow">http://musingmarc.blogspot.com/2005/09/exception-handling-in-net-some-general.html</a></p>
<p>More interesting thoughts about when to throw exceptions here:</p>
<p><a href="http://musingmarc.blogspot.com/2005/10/validation-and-exceptions.html" rel="nofollow">http://musingmarc.blogspot.com/2005/10/validation-and-exceptions.html</a></p>
<p>And last but not least, a pattern I stumbled on for handling initialization failures in singletons:</p>
<p><a href="http://musingmarc.blogspot.com/2005/11/pattern-for-rethrowing-exceptions.html" rel="nofollow">http://musingmarc.blogspot.com/2005/11/pattern-for-rethrowing-exceptions.html</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-76">
		<div id="comment-76">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://davidhayden.com/blog/dave/' rel='external nofollow' class='url'>David Hayden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-76">April 5, 2006 at 9:47 pm</a></div>

		<div class="comment-body"><p>Peacedog &#8211; Throwing exceptions is extremely important whenever the client of your class, method, library, or whatever violates the interface contract ( e.g. uses it incorrectly, doesn&#8217;t supply correct or enough information, etc.). The key is to throw these exceptions when necessary and immediately upon violation so that bad / unpredictable code never makes it into production.</p>
<p>Having exceptions being thrown in your application is expensive in terms of performance, which is why by the time your code makes it into a production environment, expected exceptions shouldn&#8217;t be occuring. By production time, an exception should be indeed an exceptional event and just logged in a global error handler to be reviewed and fixed.</p>
<p>Karl&#8217;s point is that since the exceptions in a production environment are indeed exceptional and unexpected, you probably will have no clue how to handle them. Most of the time you will just have a try/finally block with the absence of a catch block. Let the exceptions happen and get logged. Don&#8217;t swallow them, because you will never know they exist and your application will perhaps run unpredictably and cause more problems than if you were to let the exception occur.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-75">
		<div id="comment-75">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/sahil.malik' rel='external nofollow' class='url'>sahilmalik</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-75">April 5, 2006 at 9:21 pm</a></div>

		<div class="comment-body"><p>I like this post +1.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-74">
		<div id="comment-74">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-74">April 5, 2006 at 9:05 pm</a></div>

		<div class="comment-body"><p>I believe the peformance hit everyone always talks about is in the creation of the exception, not the throwing of it.</p>
<p>I didn&#8217;t cover when/how to create your own exception class and when you should raise your own exceptions.  Most of the time I raise an exception when something really bad happened. For example &#8220;Hey moron, I need a connection string in the web.config to work properly&#8221;. The site won&#8217;t work without this key configuration, so spending a couple milliseconds here and there to throw the exception is well worth it (not like the cpu will be doing anything else).</p>
<p>As I said, over zealous use of exception throwing isn&#8217;t something I&#8217;ve seen often, so anyone worried about the performance of exceptions probably just doesn&#8217;t get it.</p>
<p>I know this sounds a little purist/snobish, but you can&#8217;t really &#8220;swallow too much&#8221;. You either do or you don&#8217;t. I say that because there&#8217;s really never a good reason to do it. The two exception are (a) if you rethrow it (which isn&#8217;t really swallowing at all), or (b) you are in a global exception handler and want to protect against an endless loop. </p>
<p>I&#8217;m afraid people will read this post and say it isn&#8217;t pratical. But it&#8217;s really how you should be building real-world applications. What isn&#8217;t practical is the mess you&#8217;ll end up with if you don&#8217;t follow Hejlsberg&#8217;s advice <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-73">
		<div id="comment-73">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Peacedog</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/#comment-73">April 5, 2006 at 8:49 pm</a></div>

		<div class="comment-body"><p>Just the other day I was reading somewhere (forgive me but I can&#8217;t find the exact link right now ) about the evils of throwing exceptions, since it generates overhead.  Care to comment on that?</p>
<p>I&#8217;m something of a neophyte still (a year and a half out of school; my education was primarily a mix of VB and VB.net, I didn&#8217;t start with C# until I came to my current employer).  I have been aware for some time that I&#8217;m likely doing myself a disservice with too much swalloing.  I&#8217;ve decided more recently that most of my use of try/catch is unwieldy in general (I amost always use try/catch/finally though).  </p>
<p>And I only recently discovered that using was for more than just importing namespaces.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.684 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-25 15:22:22 -->
<!-- super cache -->