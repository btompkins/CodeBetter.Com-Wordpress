<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Get SOLID: Single Responsibility Principle | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Back to Basics: Delegates, Anonymous Methods and Lambda Expressions' href='http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/' />
<link rel='next' title='Code Coverage : Use It Wisely' href='http://codebetter.com/karlseguin/2008/12/09/code-coverage-use-it-wisely/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=151' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,146] -->
<link rel="canonical" href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-151" class="post-151 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Get SOLID: Single Responsibility Principle</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/" title="1:40 pm" rel="bookmark"><span class="entry-date">December 5, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><P>SOLID is a popular acronym that refers to a set of 5 important class design principles. I know developers get overloaded with the endless jargon that keep popping up, especially when it seems to do little more than complicate what seems pretty straightforward. Do know that we use jargon not only to make ourselves feel smart, but also as the basis for a common vocabulary which can have real benefits when trying to communicate complex systems.</P><br />
<P>Today I want to talk about the first part of SOLID: Single Responsibility Principle (SRP). This is a pattern that is simple to understand on paper, but not so clear-cut in practice. SRP states that a class should have one and only one responsibility. There are a number of benefits to following this principle:</P><br />
<UL><br />
<LI>Code complexity is reduced by being more explicit and straightforward,</LI><br />
<LI>Readability is greatly improved,</LI><br />
<LI>Coupling is generally reduced,</LI><br />
<LI>Your code has a better chance of cleanly evolving</LI></UL><br />
<P>It&#8217;s quite logical – if a class focuses on one specific responsibility, it&#8217;s bound to be cleaner and more receptive to change. </P><br />
<P>Great, super-clear on paper, but what does it all actually mean?</P><br />
<P>The first problem we need to address is: what is a responsibility. I think of it as a fancy word for purpose. That purpose can be whatever you need from your class. Many of your classes will form the basis of your domain model, and the single responsibility of such classes is to be to represent their respective real-world counterparts. The responsibility of our Car class is to represent a real-world Car. Not to worry about data access, presentation, or the purchasing aspect of our domain. Similarly, we might have a utility class for data access – such a class must avoid doing anything not directly related to data access.</P><br />
<P>Here&#8217;s an example. Given a DataAccess class that looks something like:</P><PRE>public class DataAccess<br />
{<br />
   public class GetUser(string userName, string password)<br />
   {<br />
      using (var connection = new SqlConnection(&#8230;))<br />
      using (var command = new SqlCommand())<br />
      {<br />
         command.CommandTex = &#8220;SELECT Id, Name, UserName, Password, DateOfBirth FROM Users where UserName = @UserName and Password = @Password&#8221;;<br />
         command.Parameters.Add(&#8220;@UserName&#8221;, SqlDbType.VarChar).Value = userName;<br />
         command.Parameters.Add(&#8220;@Password&#8221;, SqlDbType.VarChar).Value = password;<br />
         command.Connection = connection;<br />
         connection.Open();<br />
         using (var reader = command.ExecuteReader())<br />
         {<br />
            return dr.Read() ? MapUser(dr) : null;<br />
         }<br />
      }<br />
   }</p>
<p>   private User MapUser(IDataReader dr)<br />
   {<br />
      return new User<br />
      {<br />
         Id = Convert.ToInt32(dr["Id"]),<br />
         Name = dr["Name"].ToString(),<br />
         UserName = dr["UserName"].ToString(),<br />
         Password = dr["Password"].ToString(),<br />
         DateOfBirth = Convert.ToDateTime(dr["DateOfBirth"]),<br />
      };<br />
   }<br />
}</PRE><br />
<P>We have a violation of our single responsibility principle – DataAccess has two clear and distinct purposes: data access and data mapping. Now, it&#8217;s true that data access and data mapping go hand-in-hand, but the unnecessary coupling of logic within a single class makes both functions (access and mapping) unnecessary brittle. By being in the same class, GetUser is tightly coupled to the mapping logic (which makes it more likely to be negatively effected by any changes).</P><br />
<P>Another way to look at SRP is from the perspective of reason to change. Wikipedia gives a good illustration from this perspective:</P><br />
<BLOCKQUOTE><br />
<P>As an example, consider a module that compiles and prints a report. Such a module can be changed for two reasons. First, the content of the report can change. Second, the format of the report can change. These two things change for very different causes; one substantive, and one cosmetic. The SRP says that these two aspects of the problem are really two separate responsibilities, and should therefore be in separate classes or modules. It would be a bad design to couple two things that change for different reasons at different times.</P><br />
<P>The reason it is important to keep a class focused on a single concern is that it makes the class more robust. Continuing with the foregoing example, if there is a change to the report compilation process, there is greater danger that the printing code will break if it is part of the same class.</P></BLOCKQUOTE><br />
<P>The other problem I see people having when it comes to applying SRP is an irrational dislike for having multiple classes and a fear of object instantiation. At the very least, the solution to our above design problem is to create a new class, named DataMapper, and create an instance of it from within our DataAccess class. This would provide logical separation (which is what SRP is concerned about). However, we&#8217;d still have tight coupling and would likely consider introducing an IDataMapper interface and leverage dependency injection (other parts of SOLID focus on those aspects, so we&#8217;ll skip the details for now). The point is that we&#8217;d introduce a new type (possibly two), and an extra object instantiation:</P><PRE>using (var reader = command.ExecuteReader())<br />
{<br />
  return dr.Read() ? new DataMapper().MapUser(dr) : null;<br />
}</p>
<p>//or</p>
<p>using (var reader = command.ExecuteReader())<br />
{<br />
  return dr.Read() ? Factory.Create&lt;IDataMapper&gt;().MapUser(dr) : null;<br />
}</PRE><br />
<P>I consider both side effects extremely insignificant (non-existent really) in comparison to what is gained (readability, maintainability and testability). </P><br />
<P>In the end, the lesson here is that you should put thought into each and every one of your classes. That starts by first defining a very specific purpose for each class – regardless or how many .cs files you end up with. But don&#8217;t think that SRP is something you can apply at the start and naturally maintain. As your system grows so too will your classes. At some point you&#8217;ll notice that a class that once had a defined purpose seems to be a little murky. Do not hesitate to immediately refactor your code.</P></p>
<div class="shr-publisher-151"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/" title="Permalink to Get SOLID: Single Responsibility Principle" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/feed/" title="Comments RSS to Get SOLID: Single Responsibility Principle" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-151 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/" rel="prev"><span class="meta-nav">&larr;</span> Back to Basics: Delegates, Anonymous Methods and Lambda Expressions</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2008/12/09/code-coverage-use-it-wisely/" rel="next">Code Coverage : Use It Wisely <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">17 Responses to <em>Get SOLID: Single Responsibility Principle</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-1426">
		<div id="comment-1426">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">dfgd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1426">June 18, 2009 at 10:43 am</a></div>

		<div class="comment-body"><p>dfg</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1425">
		<div id="comment-1425">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">ffghfgh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1425">June 18, 2009 at 10:33 am</a></div>

		<div class="comment-body"><p>gfhfgh</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1424">
		<div id="comment-1424">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codechunk.blogspot.com/' rel='external nofollow' class='url'>Yngve Nilsen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1424">March 10, 2009 at 2:18 pm</a></div>

		<div class="comment-body"><p>I&#8217;m having some issues connecting this to the repository pattern, really and I&#8217;d be very happy if someone could shed some light for me.</p>
<p>The SRP states that each class should have a &#8220;Single Responsibility&#8221;, but if I have a repository &#8211; UserRepository &#8211; I would like to have the methods GetUsers, Save and Delete.</p>
<p>Would you say this is a violation of the SRP? In all fairness the name UserRepository is a pretty vague description, so basically I should be able to put whatever user-related I want in that class and still fulfill SRP.. </p>
<p>any comments?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1423">
		<div id="comment-1423">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://colinjack.lostechies.com' rel='external nofollow' class='url'>Colin Jack</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1423">January 5, 2009 at 12:42 pm</a></div>

		<div class="comment-body"><p>&#8220;SRP states that a class should have one and only one responsibility.&#8221;</p>
<p>I think the better definition, and the one I&#8217;ve read, is reason for change. Responsibility is way too vague for my liking.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1422">
		<div id="comment-1422">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Dave Schinkel</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1422">January 5, 2009 at 4:43 am</a></div>

		<div class="comment-body"><p>>>>Well, I have a further problem with the semantics of this&#8230; what is a purpose?  I can easily state a class&#8217; &#8216;purpose&#8217; as been anything at any level of detail or abstract.  </p>
<p>start with commenting your class to give it a purpose.  When a developer looks at a class, it&#8217;s purpose should be commented on at the top as a FIRST step for one thing</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1421">
		<div id="comment-1421">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1421">December 22, 2008 at 7:59 pm</a></div>

		<div class="comment-body"><p>Jay,<br />
There&#8217;s a wiki page on 4 of the 5 principles. As good a place as any to get started:</p>
<p><a href="http://en.wikipedia.org/wiki/Single_responsibility_principle" rel="nofollow">http://en.wikipedia.org/wiki/Single_responsibility_principle</a></p>
<p><a href="http://en.wikipedia.org/wiki/Open/closed_principle" rel="nofollow">http://en.wikipedia.org/wiki/Open/closed_principle</a></p>
<p><a href="http://en.wikipedia.org/wiki/Liskov_substitution_principle" rel="nofollow">http://en.wikipedia.org/wiki/Liskov_substitution_principle</a></p>
<p><a href="http://en.wikipedia.org/wiki/Dependency_inversion_principle" rel="nofollow">http://en.wikipedia.org/wiki/Dependency_inversion_principle</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1420">
		<div id="comment-1420">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://jaysmith.us' rel='external nofollow' class='url'>Jay Smith</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1420">December 22, 2008 at 7:24 pm</a></div>

		<div class="comment-body"><p>Where can I find out more information about SOLID?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1419">
		<div id="comment-1419">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.Marisic.Net' rel='external nofollow' class='url'>Chris Marisic</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1419">December 10, 2008 at 4:20 pm</a></div>

		<div class="comment-body"><p>While I always agree that decoupled code and that generally most things should have a single responsibility I disagree with your example, I think this has already been voiced but I feel your sample entirely fits into the single responsibility of a data context.</p>
<p>Especially in DDD. There&#8217;s no reason to pollute any layer of your domain with mapping code other than tightly coupled to the DAL. This is perfectly acceptable design because data mapping is 95% of the time coupled to the specific database. There really isn&#8217;t any easy way to decouple it other than moving towards a solution such as NHibernate/Fluent-Nhibernate which would be why I highly support these projects even for my only introductory usage of them.</p>
<p>But this example brings up another clear reason I absolutely hate databases because you are tightly coupled to them for your data layer. Even with your suggestion of splitting the tightly coupled mapping out into its own layer with a factory is just as coupled as you were before because the mapping is coupled to the database irregardless. And now, in my opion you&#8217;re actually WORSE off, because now you have alot more code noise AND you&#8217;re passing around a datareader which is still connected to the database. IMO it&#8217;s best practice to never pass out a live data reader outside of the context of the class so there&#8217;s never a concern of what domains it crosses.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1418">
		<div id="comment-1418">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.rowanbeach.com' rel='external nofollow' class='url'>Steve Willcock</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1418">December 10, 2008 at 3:34 pm</a></div>

		<div class="comment-body"><p>Karl,</p>
<p>nice post. I assume the GetUser method signature in your example should be written as:</p>
<p>public User GetUser(string userName, string password)  </p>
<p>not</p>
<p>public class GetUser(string userName, string password) </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1417">
		<div id="comment-1417">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.eknacks.com/SingleListView.aspx?li=129' rel='external nofollow' class='url'>eKnacks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1417">December 10, 2008 at 5:40 am</a></div>

		<div class="comment-body"><p>You&#8217;ve been knacked. Keep up the good work.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1416">
		<div id="comment-1416">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">DaRage</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1416">December 6, 2008 at 3:12 pm</a></div>

		<div class="comment-body"><p>I have one comment regarding the use of interface in the example code. I think the wide spread use of DI is encouraging the misuse of interfaces. In the example above the use of DI to inject an implementation of IDataMapper is wrong and because the DataMapper expects a specific implementation that now how to map to a user class and the code above leaves a room to inject a wrong implementation which will fail on runtime. And this is very likely to happen since in practice the configuration of the DI happens somewhere far from the context of use of the class. I think a better implementation of the code above was if the DataAccess class takes a UserMapper in the constructor.</p>
<p>for me i have this rule when using interfaces: You should only create interfaces if it will have more than one implementation; otherwise it&#8217;s YAGNI and leads to DRY. </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1415">
		<div id="comment-1415">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.lybecker.com/blog/' rel='external nofollow' class='url'>Anders Lybecker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1415">December 5, 2008 at 8:35 pm</a></div>

		<div class="comment-body"><p>Great post!</p>
<p>You could make your point more clear, by naming you classes UserDataAccess and UserDataMapper. </p>
<p>You would violate the Single Responsibility Principle by having a single DataAccess class for retrieving Users, Order, Products etc.</p>
<p>BTW there is an error in your code &#8211; the method GetUser cannot return class &#8211; line 3:<br />
public class GetUser(string userName, string password)</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1414">
		<div id="comment-1414">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dotnetmike.blogspot.com/' rel='external nofollow' class='url'>Michael Sevestre</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1414">December 5, 2008 at 7:11 pm</a></div>

		<div class="comment-body"><p>Even after your refactoring, the class DataAccess is responsible for way to many things and is violating the SRP big time: It creates a new DataConnection of type SqlConnection and also a new Command of type SqlCommand.<br />
In my opinion, this is not any of its business whatsoever.<br />
The class should rely on some other dependencies (see Gateway Pattern) that would be responsible for executing for example an sql query and return a DataTable.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1413">
		<div id="comment-1413">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Owen Pellegrin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1413">December 5, 2008 at 6:18 pm</a></div>

		<div class="comment-body"><p>I think the problem I have with SRP is when it comes to designing higher-level components.</p>
<p>Suppose I&#8217;m making a game and I need to save/load data files.  I could start by saying, &#8220;This class is responsible for game data management&#8221; and implement everything in that class.  Technically, if saving data changes I&#8217;m going to have to modify loading data as well, so it makes sense to me that I&#8217;d tightly couple these actions.  In fact, I usually just implement a Save and Load method on the GameData class itself.  If the GameData changes, wouldn&#8217;t it follow that both saving and loading the data might change as well?</p>
<p>Alternatively, I could state the responsibility as, &#8220;This class is responsible for saving and loading data.&#8221;  Oops, that&#8217;s two responsibilities!  Now instead of one class, I have GameSaver, GameLoader, and GameData.  I might implement Save and Load on GameData still, but use dependency injection to have them delegate to a GameSaver and GameLoader.  Did this really bring me any advantages?</p>
<p>Would it be better instead to say that SRP applies mostly to situations where you anticipate constant change or for lower-level components?  It seems like applying SRP completely would lead me to create FileOpener and FileDataWriter since GameSaver would have both of these responsibilities.  So it seems like there&#8217;s a point at which you can say that the components of a responsibility aren&#8217;t worth separating.  Likewise, the interface provided by GameData.Save is more usable than using a factory to create a class that will be used for one line.  Is it right to say that for high-level components the interface can trump the design?</p>
<p>This is stuff that&#8217;s bugged me since I first read about SRP.  I practice it as much as I can, but no one&#8217;s ever really written about the cases where you might not use it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1412">
		<div id="comment-1412">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Richard Nagle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1412">December 5, 2008 at 3:57 pm</a></div>

		<div class="comment-body"><p>Someone (Martin Fowler I think) said something along the lines of &#8220;Describe what the class does if you need to use the word &#8216;and&#8217; then the class has more responsibility&#8221;.</p>
<p>Not 100% of the time, but a good starting point.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1411">
		<div id="comment-1411">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1411">December 5, 2008 at 3:19 pm</a></div>

		<div class="comment-body"><p>Richard:<br />
That&#8217;s a fair enough criticism. A lot of it is gut feeling. A lot of it becomes evident when you try to test your class, or change its functionality.</p>
<p>I do think the &#8220;reason to change&#8221; perspective cuts down on the ambiguity behind &#8220;responsibility&#8221; or &#8220;purpose&#8221;.</p>
<p>I don&#8217; t think it&#8217;s necessary to get it right when you first design the class. I don&#8217;t think SRP is something you can necessarily enforce proactively all the time. But, when you do feel things are getting overly complicated, don&#8217;t hesitate to quickly and aggressively react.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1410">
		<div id="comment-1410">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Richard Lowe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/#comment-1410">December 5, 2008 at 3:09 pm</a></div>

		<div class="comment-body"><p>Well, I have a further problem with the semantics of this&#8230; what is a purpose?  I can easily state a class&#8217; &#8216;purpose&#8217; as been anything at any level of detail or abstract.  </p>
<p>&#8220;To deliver data&#8221; is a statement of a single purpose that might encapsulate querying and mapping.  &#8216;To retrieve query results&#8217; is a statement of single purpose that might mean it ONLY gets results, it doesn&#8217;t submit the queries.</p>
<p>I think you should find a way to define responsibility and purpose that does not leave so much room for interpretation.  </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.685 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 18:52:47 -->
<!-- super cache -->