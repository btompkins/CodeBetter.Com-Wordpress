<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Back to Basics: Delegates, Anonymous Methods and Lambda Expressions | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='The Market, Job Security and You' href='http://codebetter.com/karlseguin/2008/11/26/the-market-job-security-and-you/' />
<link rel='next' title='Get SOLID: Single Responsibility Principle' href='http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=150' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,171] -->
<link rel="canonical" href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-150" class="post-150 post type-post status-publish format-standard hentry category-foundations">
					<h1 class="entry-title">Back to Basics: Delegates, Anonymous Methods and Lambda Expressions</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/" title="3:15 pm" rel="bookmark"><span class="entry-date">November 27, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p> code{color:#833;background:#fcfcfc;} h4{margin:30px 0px 0px 0px;font-color:#fff;font-weight:bold;border-bottom:1px dashed #ccc;font-variant: small-caps} </p>
<p><H4>Introduction</H4><br />
<P>Like <A href="http://codebetter.com/blogs/karlseguin/archive/2008/11/21/back-to-basics-generics.aspx">generics</A>, delegates are one of those features that developers use without really understanding. Initially this wasn&#8217;t really a problem since delegates were reserved for fairly specific purposes: implementing callbacks and as the building-block for events (amongst a few other edge cases). However, each version of .NET has seen delegates evolve, first with the introduction of anonymous methods in 2.0 and now with lambda expressions in C# 3.0. With each evolution, delegates have become less of an specific pattern and more of a general purpose tool. In fact, most libraries written specifically for .NET 3.5 are likely to make heavy use of lambda expressions. As always, our concern isn&#8217;t just about understanding the code that we use, but also about enriching our own toolset. Seven years ago it wouldn&#8217;t have been abnormal to see even a complex system make little (or no) us of delegates (except for using the events of built-in controls). Today, however, even the simplest systems heavily relies on them.</P><br />
<H4>Delegates</H4><br />
<P>The best way to learn about all three framework/language feature is to start from the original and build our way up, seeing what each evolution adds. Delegates have always been pretty simple to understand, but without any good reason to use them, people never really latched on to the concept. It&#8217;s always easier to understand something when you can see what problem it solves and how it&#8217;s used &#8211; and examples of delegates always seem contrived.</P><br />
<P>Delegates are .NETs version of function pointers &#8211; with added type safety. If you aren&#8217;t familiar with C or C++ (or another lower level languages) that might not be very helpful. Essentially they let you pass a method into another method as an argument. Although many developers understand the concept in languages such as JavaScript, the strictness of C#/VB.NET makes it a little more confusion. For example, the following JavaScript code is completely valid (and even common):</P><PRE>function executor(functionToExecute)<br />
{<br />
   functionToExecute(9000);<br />
}<br />
var doSomething = function(count){alert(&#8220;It&#8217;s Over &#8221; + count);}<br />
executor(doSomething);</PRE><br />
<P>Although simplistic, the above code shows how a function can be assigned to a variable (not the return value mind you, the actual function body) and then passed around as a parameter into a function. This parameter can then be executed as you would any other function.</P><br />
<P>The only difference in .NET is that you can&#8217;t just assign any function to any variable and pass it into any method. Instead everything has to be properly typed. That&#8217;s where delegates come in, they let you define the signature for a method – its parameters and return type. So, to build the above code in C#, we use the following:</P><PRE>public delegate void NotifyDelegate(int count);<br />
public class Executor<br />
{<br />
   public static void Execute(NotifyDelegate notifier)<br />
   {<br />
       notifier(9000);<br />
   }<br />
}</p>
<p>public class Program<br />
{<br />
     public static void Main(string[] args)<br />
     {<br />
         NotifyDelegate notifier = Alert;<br />
         Executor.Execute(notifier);<br />
     }<br />
     public static void Alert(int count)<br />
     {<br />
        Console.WriteLine(&#8220;It&#8217;s over {0}&#8221;, count);<br />
     }<br />
}</PRE><br />
<P>It seems like a lot more code, but a good chunk of it is simply the requirement for everything in .NET to be in a class. The first, and most important, line is the definition for the delegate itself. Delegates are much like classes, interfaces, structures or enums – they define a type. Here we&#8217;ve defined a type named <CODE>NotifyDelegate</CODE>. Any method can be assigned to a variable of type <CODE>NotifyDelegate</CODE> provided that method has the same signature: it must return <CODE>void</CODE> and take a single parameter of type <CODE>int</CODE>. In the above code I explicitly assigned the <CODE>Alert</CODE> method to a variable named <CODE>notifier</CODE> for demonstration purposes only, the following would have been just as acceptable:</P><PRE>Executor.Execute(Alert);</PRE><br />
<P>The point is that a delegate can be used like any other type, the difference is simply that its assigned to a method. The other point to keep in mind is that my example used a static method (<CODE>Alert</CODE>). You can use either a static or an instance method – again, the only requirement is that it meets the defined method signature. Within an instance method you have access to all instance members just like any normal method (because it is a normal method).</P><br />
<H4>Let&#8217;s Get More Practical</H4><br />
<P>So we have an idea of what delegates are, but when would we use them? As I mentioned earlier, in their normal form, their usage is fairly reserved for specific cases, most notably callbacks (if you&#8217;ve ever used an asynchronous method you likely had to supply a delegate to be called when the async call completed). However, lets look at a real example in which you might use a delegate. Initially this is going to be a little contrived, but as we move the example to anonymous methods and then lambda expressions, the example will feel more natural. This is a real example I use in my code.</P><br />
<P>Within our data layer we have a method that expects an array of objects and saves them all within a transaction. The method looks something like this (we use NHibernate, but the implementation details don&#8217;t matter):</P><PRE>public class GenericStore&lt;T&gt;<br />
{<br />
    public void Save(params T[] entities)<br />
    {<br />
       using (var transaction = BeginTransaction())<br />
       {<br />
          try<br />
          {<br />
             foreach(T entity in entities)<br />
             {<br />
                Save(entity);<br />
             }<br />
             transaction.Commit();<br />
          }<br />
          catch(Exception)<br />
          {<br />
             transaction.Rollback();<br />
          }<br />
       }<br />
    }<br />
}</PRE><br />
<P>We use this method, for example, when we want to switch the default group, something like:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(oldDefault, newDefault);<br />
}</PRE><br />
<P>Of course, if our <CODE>Save</CODE> method throws an exception, we need to undo our code (rolling back the transaction undoes the database commit, but not the actual in-memory change we made). Here&#8217;s one way to do that:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   try<br />
   {<br />
      DataFactory.For&lt;Group&gt;().Save(oldDefault, newDefault);<br />
   }<br />
   catch<br />
   {<br />
      oldDefault.Default = true;<br />
      newDefault.Default = false;<br />
   }<br />
}</PRE><br />
<P>This works fine, except we end up with a lot of try/catches all over the place. Instead we use a delegate (again, this is actually more code, but it&#8217;s just a foundation to progress to anonymous methods). Here&#8217;s our improved <CODE>Save</CODE> method:</P><PRE>public class GenericStore&lt;T&gt;<br />
{<br />
   public delegate void RollbackDelegate(T entities);</p>
<p>   public void Save(params T[] entities)<br />
   {<br />
      Save(null, entities);<br />
   }<br />
   public void Save(RollbackDelegate rollback, params T[] entities)<br />
   {<br />
      using (var transaction = BeginTransaction())<br />
      {<br />
         try<br />
         {<br />
            foreach(T entity in entities)<br />
            {<br />
               Save(entity);<br />
            }<br />
            transaction.Commit();<br />
         }<br />
         catch(Exception)<br />
         {<br />
            transaction.Rollback();<br />
            if (rollback != null)<br />
            {<br />
               rollback(entities);<br />
            }<br />
         }<br />
      }<br />
   }<br />
}</PRE><br />
<P>The overloaded <CODE>Save</CODE> method is provided so that calling code can provide a delegate or not. We can use this code simply by doing:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(SwitchDefaultRollback, oldDefault, newDefault);<br />
}</p>
<p>public void SwitchDefaultRollback(Group[] groups)<br />
{<br />
    groups[0].Default = false;<br />
    groups[1].Default = true;<br />
}</PRE><br />
<P>Whether or not you consider this an improvement over the try/catch solution is largely a matter of taste. I find neither particularly elegant. The problem with the delegate solution is the need for the extra method, and the awkward use of array indexes (we&#8217;re relying on the <CODE>Save</CODE> method to pass the items back in the same order they were passed in).</P><br />
<H4>Anonymous Methods</H4><br />
<P>.NET 2.0 added a fairly significant improvement to delegates: anonymous methods. Delegates still exist and are still the ideal solution for a number of cases. However, for situations such as the one we&#8217;re developing, they are far from perfect. What we want is a more concise way to create our callback as well as something that&#8217;ll help us avoid the weird array indexing. Anonymous methods solve both those problem. We&#8217;ll address each point separately. </P><br />
<P>Probably the most intimidating aspect of anonymous method is the way they are declared. Unlike normal methods, anonymous methods are declared within another method, using the <CODE>delegate</CODE> keyword:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   GenericStore&lt;Group&gt;.RollbackDelegate rollback = delegate(Group[] entities)<br />
   {<br />
      groups[0].Default = false;<br />
      groups[1].Default = true;<br />
   };<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(rollback, oldDefault, newDefault);<br />
}</PRE><br />
<P>Like any nested-type, we access our delegate via its full name (<CODE>GenericStore&lt;Group&gt;.RollbackDelegate</CODE>). The <CODE>delegate</CODE> keyword creates an anonymous method – which behaves like any other method, except it isn&#8217;t named and exists within a limited scope. Again, I assigned the anonymous method to a variable for demonstrative purposes, in real life you&#8217;re more likely do to:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(delegate(Group[] entities)<br />
     {<br />
        groups[0].Default = false;<br />
        groups[1].Default = true;<br />
     }, oldDefault, newDefault);<br />
}</PRE><br />
<P>The syntax is more confusing. If you look at it, you&#8217;ll notice that we&#8217;re really just passing 3 parameters to our <CODE>Save</CODE> method – our anonymous method, <CODE>oldDefault</CODE> and <CODE>newDefault</CODE>. The syntax will improve considerably when we look at the next evolution. For now, it&#8217;s important that you understand the concept behind creating an anonymous method.</P><br />
<P>While the syntax might be the most confusing, the most important aspect of anonymous methods is their scope. Anonymous methods behave like any other code-block. In our above code that means that our anonymous method has access to <CODE>oldDefault</CODE>, <CODE>newDefault</CODE> and all the other instance members which might be defined (like the <CODE>GetDefaultGroup</CODE> method we&#8217;re calling). That means that we can really simplify our code. First, we&#8217;ll change our delegate so that it no longer passes back our array of entities:</P><PRE>public delegate void RollbackDelegate();</PRE><br />
<P>Along with the corresponding part of our <CODE>Save</CODE> method:</P><PRE>transaction.Rollback();<br />
if (rollback != null)<br />
{<br />
   rollback();<br />
}</PRE><br />
<P>Our calling code now looks like:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(delegate()<br />
     {<br />
        newDefault.Default = false;<br />
        oldDefault.Default = true;<br />
     }, oldDefault, newDefault);<br />
}</PRE><br />
<P>I consider this much cleaner, not only because there&#8217;s less chance of bugs, but also because the code is far more readable. All ambiguity around what <CODE>groups[0]</CODE> and <CODE>groups[1]</CODE> referred to has been removed.</P><br />
<P>Our solution still isn&#8217;t perfect (the syntax around anonymous delegates is a little messy), but to me it&#8217;s definitely a step in the right direction. We no longer have to create a full-blown method for each delegate, and having our scoped within the method gives us direct access to variables we&#8217;ll likley need.</P><br />
<H4>Lambda Expressions</H4><br />
<P>While anonymous methods provide a new feature, lambda expressions merely provide an improved syntax. The improvement is rather significant though, which has made anonymous methods even more popular. At one point our delegate was passing along an array as a parameter:</P><PRE>public delegate void RollbackDelegate(T entities);</PRE><br />
<P>And, to be valid, our anonymous method had to be defined with the same signature:</P><PRE>delegate(Group[] entities){ &#8230; }</PRE><br />
<P>Although we&#8217;ve moved beyond the need to pass-back the array, I want to look at lambdas from this point on, as it&#8217;ll help make things clearer (and often times you&#8217;ll have delegates with parameters). The lambda version of our above code is:</P><PRE>entities =&gt; {&#8230;.}</PRE><br />
<P>Essentially, the <CODE>=&gt;</CODE> operator (some people call it the wang operator) replaces the need for both the delegate keyword as well as the parameter types. Additionally, if your delegate is a single statement, you can drop the brackets { }. If you have multiple parameters, you wrap them in parenthesis:</P><PRE>(entities, transaction) =&gt; {&#8230;}</PRE><br />
<P>If you don&#8217;t have any parameters, like in our example, you use empty paranthesis:</P><PRE>() =&gt; {&#8230;}</PRE><br />
<P>It&#8217;s easy to get mixed up with the syntax, but if you walk backwards through the code, hopefully everything makes sense. Here&#8217;s what our implementation now looks like:</P><PRE>public void SwitchDefault(Group newDefault)<br />
{<br />
   var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   oldDefault.Default = false;<br />
   newDefault.Default = true;<br />
   DataFactory.For&lt;Group&gt;().Save(() =&gt;{newDefault.Default = false; oldDefault.Default = true;}, oldDefault, newDefault);<br />
}</PRE><br />
<H4>Some More Examples</H4><br />
<P>To get a good feel for the syntax, let&#8217;s look at some other, common, examples. We&#8217;ll stick to the <CODE>List&lt;T&gt;</CODE> class, which exposes a number of methods which expect delegates.</P><br />
<P>To get the sum of all integers within a list using an anonymous method:</P><PRE>var ids = new List&lt;int&gt;{1,2,3,4,5};<br />
var sum = 0;<br />
ids.ForEach(delegate(int i){ sum += i;});</PRE><br />
<P>Using a lambda expression:</P><PRE>var ids = new List&lt;int&gt;{1,2,3,4,5};<br />
var sum = 0;<br />
ids.ForEach(i =&gt; sum += i);</PRE><br />
<P>To find a specific group by its id:</P><PRE>public Group FindGroup(int id)<br />
{<br />
   var groups = GetAllGroups(); //there might be a more efficient way!<br />
   return groups.Find(delegate(Group g){return g.Id == id;});<br />
}</PRE><br />
<P>Using a lambda expression:</P><PRE>public Group FindGroup(int id)<br />
{<br />
   var groups = GetAllGroups(); //there might be a more efficient way!<br />
   return = groups.Find(g =&gt; g.Id == id);<br />
}</PRE><br />
<P>Notice that using a lambda we don&#8217;t even have to return true or false if a match is found. Lambdas explicitly returns the value.</P><br />
<H4>Delegates and Generics</H4><br />
<P>The last thing we&#8217;ll cover is the synergy between delegates and generics. This is something I&#8217;ve covered <A href="http://codebetter.com/blogs/karlseguin/archive/2008/07/03/get-your-func-on.aspx">in depth before</A>, so we&#8217;ll only briefly discuss it here. The .NET framework comes with a number of built-in delegates (for example, we might not need to define our own <CODE>RollbackDelegate</CODE> type as the .NET framework might already have one for the same method signature). It turns out that if you sprinkle some generic goodness of top of delegates, you can easily create a delegate for almost any situation. There are three core generic delegates within the .NET framework: <CODE>Predicate</CODE>, <CODE>Func</CODE> and <CODE>Action</CODE>. Each comes with a number of overloads to cover the most common cases:</P><PRE>delegate bool Predicate();<br />
delegate bool Predicate&lt;T1&gt;(T1 parameter1);<br />
delegate bool Predicate&lt;T1, T2&gt;(T1 parameter1, T2 paremter2);<br />
delegate bool Predicate&lt;T1, T2, T3&gt;(T2 parameter1, T2 paremter2, T3 parameter3);</p>
<p>delegate T Func&lt;T&gt;(T returnType);<br />
delegate T Func&lt;T, T1&gt;(T returnType, T1 parameter1);<br />
delegate T Func&lt;T, T1, T2&gt;(T returnType, T1 parameter1, T2 paremter2);<br />
delegate T Func&lt;T T1, T2, T3&gt;(T returnType, T1 parameter1, T2 paremter2, T3 parameter3);</p>
<p>delegate void Action();<br />
delegate void Action&lt;T1&gt;(T1 parameter1);<br />
delegate void Action&lt;T1, T2&gt;(T1 parameter1, T2 paremter2);<br />
delegate void Action&lt;T1, T2, T3&gt;(T1 parameter1, T2 paremter2, T3 parameter3);</PRE><br />
<P>The difference between the three is the type of the return (<CODE>Predicate</CODE> always returns <CODE>bool</CODE>, <CODE>Func</CODE> returns T and <CODE>Action</CODE> returns <CODE>void</CODE>). The overloads just let us support multiple parameters. </P><br />
<P>Instead of using this delegate:</P><PRE>public delegate void RollbackDelegate(T entities);<br />
&#8230;<br />
public void Save(RollbackDelegate rollback, params T[] entities){&#8230;}</PRE><br />
<P>We could have simply used:</P><PRE>public void Save(Action&lt;T[]&gt; rollback, params T[] entities){&#8230;}</PRE><br />
<P>And instead of:</P><PRE>public delegate void RollbackDelegate();<br />
&#8230;<br />
public void Save(RollbackDelegate rollback, params T[] entities){&#8230;}</PRE><br />
<P>We could have simply used:</P><PRE>public void Save(Action rollback, params T[] entities){&#8230;}</PRE><br />
<H4>Conclusion</H4><br />
<P>Hopefully this helped clarify delegates, anonymous methods and lambdas, both in terms of their crazy syntax as well as how you can use them within your own code. When you combine this with a solid understanding of generics you end up with some powerful and concise code. You also end up with new ways to solve existing problems, which could otherwise be problematic and ugly. Don&#8217;t be afraid to try using some of these solutions within your code. The best way to learn how pieces fit together and to actually try to make something work</P></p>
<div class="shr-publisher-150"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/foundations/" title="View all posts in Foundations" rel="category tag">Foundations</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/" title="Permalink to Back to Basics: Delegates, Anonymous Methods and Lambda Expressions" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/feed/" title="Comments RSS to Back to Basics: Delegates, Anonymous Methods and Lambda Expressions" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-150 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2008/11/26/the-market-job-security-and-you/" rel="prev"><span class="meta-nav">&larr;</span> The Market, Job Security and You</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2008/12/05/get-solid-single-responsibility-principle/" rel="next">Get SOLID: Single Responsibility Principle <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">28 Responses to <em>Back to Basics: Delegates, Anonymous Methods and Lambda Expressions</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-1409">
		<div id="comment-1409">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/members/karl/default.aspx' rel='external nofollow' class='url'>karl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1409">May 3, 2009 at 4:57 pm</a></div>

		<div class="comment-body"><p>@handi:<br />
A few comments up, joshka pointed out the same thing. I have them reversed. My bad.  It does highlight the problem with using delegates (things are harder to follow) vs using anonymous methods.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1408">
		<div id="comment-1408">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://haditeo.wordpress.com' rel='external nofollow' class='url'>hadi teo</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1408">May 3, 2009 at 2:21 pm</a></div>

		<div class="comment-body"><p>Hi,</p>
<p>According to the below code snippet, when exception occured, you will set the oldDefault.Default = true and newDefault.Default = false</p>
<p>   1. public void SwitchDefault(Group newDefault)<br />
   2. {<br />
   3.    var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   4.    oldDefault.Default = false;<br />
   5.    newDefault.Default = true;<br />
   6.    try<br />
   7.    {<br />
   8.       DataFactory.For<group>().Save(oldDefault, newDefault);<br />
   9.    }<br />
  10.    catch<br />
  11.    {<br />
  12.       oldDefault.Default = true;<br />
  13.       newDefault.Default = false;<br />
  14.    }<br />
  15. }  </p>
<p>but based on this code snippet . groups[0].Default property is set to false and groups[1].Default property is set to true;</p>
<p>should it be :<br />
groups[0].Default = true;<br />
groups[1].Default = false;</p>
<p>   1. public void SwitchDefault(Group newDefault)<br />
   2. {<br />
   3.    var oldDefault = GetDefaultGroup(); //implementation isn&#8217;t important<br />
   4.    oldDefault.Default = false;<br />
   5.    newDefault.Default = true;<br />
   6.    DataFactory.For</group><group>().Save(SwitchDefaultRollback, oldDefault, newDefault);<br />
   7. }<br />
   8.<br />
   9. public void SwitchDefaultRollback(Group[] groups)<br />
  10. {<br />
  11.     groups[0].Default = false;<br />
  12.     groups[1].Default = true;<br />
  13. }  </p>
<p>Thanks for your clarification. I maybe wrong, please correct me</group></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1407">
		<div id="comment-1407">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">SoloTraveler</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1407">March 18, 2009 at 1:35 am</a></div>

		<div class="comment-body"><p>Nice article, but the code could be confusing<br />
The Save method is recursively calling itself, with the first parameter inside the foreach and would result in stackoverflow</p>
<p>Cheers &#038; Thanks</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1406">
		<div id="comment-1406">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Brian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1406">February 19, 2009 at 7:12 pm</a></div>

		<div class="comment-body"><p>With vague understanding of new C# 2.0 and 3.0 features, I came here searching for explanation of action delegate multiple parameters.  Left with a solid understanding of everything you presented.  That was a huge help!  </p>
<p>Especially liked the way you progressed from the familiar delegates to new territory.  Thanks!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1405">
		<div id="comment-1405">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1405">February 5, 2009 at 2:49 am</a></div>

		<div class="comment-body"><p>I totally don&#8217;t understand your code.<br />
You lost me at the delegates example.<br />
I know what delegate are and how to use them, but I never do use them.<br />
But I would like to use them one day.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1404">
		<div id="comment-1404">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Marcel Popescu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1404">December 20, 2008 at 10:44 pm</a></div>

		<div class="comment-body"><p>The Func<> delegates actually have T as the last argument (as in Func<t1 , T2, T>) and also do not have it in the list of parameters, of course (so it&#8217;s delegate T Func</t1><t1 , T2, T>(T1 parameter1, T2 parameter2);</t1></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1403">
		<div id="comment-1403">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://bitfed.com' rel='external nofollow' class='url'>joshka</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1403">December 18, 2008 at 8:06 am</a></div>

		<div class="comment-body"><p>The false and true are backwards for the code blocks where you&#8217;ve used an array instead of the objects. Appropriate perhaps given &#8220;I consider this much cleaner, not only because there&#8217;s less chance of bugs, but also because the code is far more readable. All ambiguity around what groups[0] and groups[1] referred to has been removed.&#8221; <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_biggrin.gif' alt=':D' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1402">
		<div id="comment-1402">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1402">December 11, 2008 at 5:40 pm</a></div>

		<div class="comment-body"><p>Great article!  Thanks.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1401">
		<div id="comment-1401">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ramanujam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1401">December 9, 2008 at 2:58 pm</a></div>

		<div class="comment-body"><p>Thanks for this, Nice article</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1400">
		<div id="comment-1400">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.spoiledtechie.com' rel='external nofollow' class='url'>Scott</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1400">December 8, 2008 at 7:18 pm</a></div>

		<div class="comment-body"><p>Thanks for this.  I now have a good grasp on lambdas&#8230;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1399">
		<div id="comment-1399">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Zayo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1399">December 8, 2008 at 9:44 am</a></div>

		<div class="comment-body"><p>I&#8217;m a noob and this helped me a bit,<br />
but still I don&#8217;t get it wholly</p>
<p>But thx anyway, nice try <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1398">
		<div id="comment-1398">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">iherdyouliekmudkipz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1398">December 4, 2008 at 8:27 pm</a></div>

		<div class="comment-body"><p>TL;DR</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1397">
		<div id="comment-1397">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.alexandershapovalov.com' rel='external nofollow' class='url'>Alexander Shapovalov</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1397">December 2, 2008 at 3:31 pm</a></div>

		<div class="comment-body"><p>Good article, but for people who don&#8217;t know about NHibernate (like me) it&#8217;s a little difficult to understand.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1396">
		<div id="comment-1396">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">brittlee</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1396">December 1, 2008 at 10:08 am</a></div>

		<div class="comment-body"><p>Its avery good article .Please Let such articles come up for better use in better way.<br />
=====================================<br />
Brettlee<br />
<a href="http://www.widecircles.com "></a><a href="http://www.widecircles.com" rel="nofollow">http://www.widecircles.com</a> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1395">
		<div id="comment-1395">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Gerald</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1395">November 30, 2008 at 10:01 pm</a></div>

		<div class="comment-body"><p>Hahahaha, it&#8217;s over 9000!</p>
<p>I get it. Very funny.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1394">
		<div id="comment-1394">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.silverlighthack.com' rel='external nofollow' class='url'>Bart Czernicki</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1394">November 30, 2008 at 6:07 pm</a></div>

		<div class="comment-body"><p>Check out my article that goes over delegates from .net 1.x to 3.5 with code examples for download: <a href="http://silverlighthack.com/post/2008/07/14/Evolution-of-delegate-syntax-from-NET-10-to-NET-35.aspx" rel="nofollow">http://silverlighthack.com/post/2008/07/14/Evolution-of-delegate-syntax-from-NET-10-to-NET-35.aspx</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1393">
		<div id="comment-1393">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1393">November 28, 2008 at 8:54 pm</a></div>

		<div class="comment-body"><p>@Richard:<br />
CodeBetter uses<br />
<a href="http://code.google.com/p/syntaxhighlighter/" rel="nofollow">http://code.google.com/p/syntaxhighlighter/</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1392">
		<div id="comment-1392">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://richardhallgren.com' rel='external nofollow' class='url'>Richard</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1392">November 28, 2008 at 7:18 pm</a></div>

		<div class="comment-body"><p>Super article! Give me more! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
<p>What are you using to get that nice formating? </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1391">
		<div id="comment-1391">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.sb2.fr' rel='external nofollow' class='url'>Yoann. B</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1391">November 28, 2008 at 5:06 pm</a></div>

		<div class="comment-body"><p>Great article</p>
<p>Very useful, thanks !</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1390">
		<div id="comment-1390">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1390">November 28, 2008 at 2:38 pm</a></div>

		<div class="comment-body"><p>Good catch Leyu</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1389">
		<div id="comment-1389">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Leyu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1389">November 28, 2008 at 6:25 am</a></div>

		<div class="comment-body"><p>Nice Article, one correction though</p>
<p>On the GenericStore<t> class which uses delegates<br />
Delegate definition should be changed to<br />
public delegate void RollbackDelegate(params T[] entities);<br />
It was defined as<br />
public delegate void RollbackDelegate(T entities);</t></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1388">
		<div id="comment-1388">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1388">November 27, 2008 at 11:43 pm</a></div>

		<div class="comment-body"><p>@Nate:<br />
Ya. It&#8217;s actually good. A benefit of doing talks is you realize what all types of things about what people know or get and what they don&#8217;t. Ends up giving talks is a great way to get material for blog posts <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1387">
		<div id="comment-1387">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Nate</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1387">November 27, 2008 at 9:59 pm</a></div>

		<div class="comment-body"><p>Great article!</p>
<p>Was this in a response to the blank stares when you started talking about lamda expression during your Unit Test talk in Ottawa <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1386">
		<div id="comment-1386">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1386">November 27, 2008 at 8:54 pm</a></div>

		<div class="comment-body"><p>Chris, not any time soon. But you did make me realize that I should provide an &#8220;Further Readings&#8221; section in my conclusion for people who want to read up more advanced details.</p>
<p>So, here are two links for anyone interested:</p>
<p>How anonymous methods are actually implemented:<br />
<a href="http://blogs.msdn.com/oldnewthing/archive/2006/08/02/686456.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2006/08/02/686456.aspx</a></p>
<p>Understanding variable capture:<br />
<a href="http://blogs.msdn.com/matt/archive/2008/03/01/understanding-variable-capturing-in-c.aspx" rel="nofollow">http://blogs.msdn.com/matt/archive/2008/03/01/understanding-variable-capturing-in-c.aspx</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1385">
		<div id="comment-1385">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.tavaresstudios.com' rel='external nofollow' class='url'>Chris Tavares</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1385">November 27, 2008 at 6:39 pm</a></div>

		<div class="comment-body"><p>Nice article. Are you planning to have another one that talks about closures and variable capture? That is a more advanced feature, granted, but it&#8217;s incredibly powerful and you see it a lot in production code.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1384">
		<div id="comment-1384">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://bloodsweatand.net' rel='external nofollow' class='url'>Joel Abrahamsson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1384">November 27, 2008 at 5:07 pm</a></div>

		<div class="comment-body"><p>Another great article! Please keep&#8217;em coming <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1383">
		<div id="comment-1383">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">spacattac</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1383">November 27, 2008 at 4:45 pm</a></div>

		<div class="comment-body"><p>Agreed!  I fall into the camp that&#8217;s been using/inheriting these language features without necessarily a good grip on it and these BASICS have been great.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1382">
		<div id="comment-1382">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.mattcorr.com' rel='external nofollow' class='url'>Matt Corr</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2008/11/27/back-to-basics-delegates-anonymous-methods-and-lambda-expressions/#comment-1382">November 27, 2008 at 3:23 pm</a></div>

		<div class="comment-body"><p>Love your Back to Basics articles. Very easy to read and understand format.<br />
Keep them coming <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.561 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 18:40:30 -->
<!-- super cache -->