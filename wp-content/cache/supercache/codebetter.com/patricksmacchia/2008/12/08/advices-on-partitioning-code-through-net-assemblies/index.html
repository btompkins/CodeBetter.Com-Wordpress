<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Advices on partitioning code through .NET assemblies | Patrick Smacchia</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/patricksmacchia/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/patricksmacchia/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Solid State Drive: Enhance developers&#8217; productivity' href='http://codebetter.com/patricksmacchia/2008/12/04/solid-state-drive-enhance-developers-productivity/' />
<link rel='next' title='Increase Build Process added-value with Static Analysis' href='http://codebetter.com/patricksmacchia/2008/12/14/increase-build-process-added-value-with-static-analysis/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/patricksmacchia/?p=88' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,161] -->
<link rel="canonical" href="http://codebetter.com/patricksmacchia/2008/12/08/advices-on-partitioning-code-through-net-assemblies/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<meta property='og:image' content='http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/AssembliesCreationReason/NDependAssemblies.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992098&amp;Signature=x%2baiaXLvE6LHI9KqOVvOV1UhrCg%3d' />

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-88" class="post-88 post type-post status-publish format-standard hentry category-net-assemblies category-acyclic-componentization category-dependencies category-deployment category-visual-studio category-vs category-vstudio">
					<h1 class="entry-title">Advices on partitioning code through .NET assemblies</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/patricksmacchia/author/patricksmacchia/" title="View all posts by Patrick Smacchia">Patrick Smacchia</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/patricksmacchia/2008/12/08/advices-on-partitioning-code-through-net-assemblies/" title="9:18 am" rel="bookmark"><span class="entry-date">December 8, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/patricksmacchia/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/patricksmacchia/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p style="margin: 1pt 0cm"><span lang="EN-US">The tenet is: <strong>reduce the number of your .NET assemblies to the strict minimum</strong>. Having a single assembly is the ideal number. This is for example the case for <a href="http://www.red-gate.com/products/reflector/" target="_blank">Reflector </a></span><span lang="EN-US">or <a href="http://www.hibernate.org/343.html" target="_blank">NHibernate </a>that both come as a single assembly.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">A lot have been said on this topic. I dig in this <a href="http://www.theserverside.net/tt/articles/showarticle.tss?id=ControllingDependencies" target="_blank">article</a></span><span lang="EN-US">why using more namespaces and less assemblies for componentization is a good thing. <em>Jeremy Miller</em> does it so in <a href="/blogs/jeremy.miller/archive/2008/10/10/183438.aspx" target="_blank">this blog post</a></span><span lang="EN-US">. The point is that assemblies are <em>physical</em> while namespaces are <em>logical</em>. As a consequence, having N assemblies multiplies by N the burden of dealing with physical things. This burden consists of referencing N assemblies from a Visual Studio project, slowing down significantly compilation of N Visual Studio projects, managing the deployment for N files, need for the CLR to do N CAS security checks at startup time, etc… Personally I have seen applications with up to 750 assemblies! Quote from <em>Jeremy Miller</em>: </span><em>I took 56 projects one time and consolidated them down to 10-12 and cut the compile time from 4 minutes to 20 seconds with the same LOC</em></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">I would like to discuss here the motivations behind creating an assembly. I will then illustrate these reasons through the choices we did for assemblies of the <a href="http://www.NDepend.com" target="_blank">NDepend </a></span><span lang="EN-US">code base. In an effort to reduce the number of assemblies in your shop, it is a good thing to find a <em>valid</em> reason for the existence of each assembly of your code base. If no solid reasons can be found you’ll find room for merging assemblies.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><strong><span style="font-size: 16pt" lang="EN-US">Valid and Invalid reasons to create an assembly</span></strong></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">Valid reasons to create an assembly:</span></p>
<ul>
<li><span lang="EN-US">Tier separation: Need to run some different pieces of code in different AppDomain or process. The idea is to avoid overwhelming the precious <em>Window </em>process memory with large pieces of code not needed.</span></li>
</ul>
<ul>
<li><span lang="EN-US">Potential for loading large pieces of code <em>on-demand</em>. This is an optimization made by the CLR: assemblies are loaded on-demand. In other words, the CLR loads an assembly only when a type or a resource contained in it is needed for the first time. Here also you don’t want to overwhelm your <em>Window</em> process memory with large pieces of code not needed <em>most of the time</em>.</span></li>
</ul>
<ul>
<li><span lang="EN-US">Framework features separation. In case of very large framework, users shouldn’t be forced to embed every features into their deployment package. For example, most of the time an ASP.NET process doesn’t do some Window Forms and vice-versa, hence the need for 2 assemblies <em>System.Web.dll</em> and <em>System.Window.Forms.dll</em>. This is valid only for large framework with assemblies sized in MB. For example the NUnit <a href="http://www.nunit.com/">http://www.NUnit.com</a> framework certainly does not need 25 assemblies for 15.000 Lines of Code! Quote from <em>Jeremy Miller</em>: </span><em>Nothing is more irritating to me than using 3rd party toolkits that force you to reference a dozen different assemblies just to do one simple thing.</em></li>
</ul>
<ul>
<li><span lang="EN-US">AddIn/PlugIn model, need for interface/factory/implementation physical separation.</span></li>
</ul>
<ul>
<li>Test/application code separation. If you are not releasing source code but only assemblies, you likely don&#8217;t want to release tests. Not releasing test assemblies make this easy.</li>
</ul>
<ul>
<li><span lang="EN-US">When several assemblies have been created for the reasons above, they likely need to share some common code. Such shared code must be placed in a dedicated shared assembly.</span></li>
</ul>
<p><span lang="EN-US">We could add assembly as a unit of versioning but IMHO, the need for versioning is a subset of all these reasons enumerated above.</span></p>
<p><span lang="EN-US"> </span></p>
<p><span lang="EN-US">Invalid reasons to create an assembly:</span></p>
<ul>
<li><span lang="EN-US">Assembly as unit of development, or as a unit of test. Modern Source Control Systems make it easy for several developers to work simultaneously on the same assembly (i.e the same Visual Studio project). The unit should be here the source file.</span></li>
</ul>
<ul>
<li><span lang="EN-US">Automatic detection of dependency cycles between assemblies by MSBuild and Visual Studio. There are tools such as </span><span lang="EN-US">NDepend </span><span lang="EN-US">that can detect dependency cycles between namespaces or types of an assembly.</span></li>
</ul>
<ul>
<li><span lang="EN-US">Usage of internal visibility to hide implementations details. This public/internal visibility level is useful when developing a framework where you want to hide implementation details to the rest of the world. Your team is not the rest of the world, so you don’t need to create some assemblies especially to hide some implementations details.</span></li>
</ul>
<ul>
<li><span lang="EN-US">Usage of internal visibility to prevent usage from the rest of the application. If you want to prevent usage and thus control the structure/dependencies of your code base, you should better use some dedicated tools such as </span><span lang="EN-US">NDepend </span><span lang="EN-US">.</span></li>
</ul>
<p style="margin: 1pt 0cm"><span lang="EN-US">If you are interested in reducing the number of your Visual Studio projects/assemblies, I would suggest reading this blog post <a href="/blogs/patricksmacchia/archive/2007/12/16/hints-on-how-to-componentize-existing-code.aspx" target="_blank">Hints on how to componentized existing code</a>. It shows how to use some NDepend dependencies features to get some hints about which sets of assemblies should be merged.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><strong><span style="font-size: 16pt" lang="EN-US">A case study</span></strong></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">NDepend code base is split across 11 assemblies and here is the dependency diagram of NDepend assemblies (made by NDepend itself):</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"> <img src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/AssembliesCreationReason/NDependAssemblies.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992098&amp;Signature=x%2baiaXLvE6LHI9KqOVvOV1UhrCg%3d" alt="" /></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">Something you might notice is the XDepend term. We are currently building the XDepend product (aka NDepend for Java), that will be released in 2009. More information are available on the official website </span><a href="http://www.XDepend.com" target="_blank"><span lang="EN-US">http://www.XDepend.com</span></a><span lang="EN-US"> and I will talk more about this in the future. This XDepend/NDepend duality leads to 2 different deployment packages for the 2 products and this is why there are <em>NDepend.Console.exe</em>, <em>VisualNDepend.exe</em>, <em>NDepend.Platform.DotNet.dll</em> on one hand and <em>XDepend.Console.exe</em>, <em>VisualXDepend.exe</em>, <em>XDepend.Platform.Java.dll</em> on the other hand. </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">The need for 4 exe instead of 2 was needed mostly for terminology. <em>XDepend.Console.exe </em>certainly makes more sense for an XDepend user than <em>NDepend.Console.exe</em>. All these 4 executables are almost empty in terms of code. The console ones initialize the platform (Java or .NET) and start the analysis implemented in <em>NDepend.Analysis.dll</em> while the Visual ones initialize the platform and start the UI, implemented in <em>NDepend.UI</em><em>.dll</em>. </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">The need to initialize the platform (.NET or Java) is a motivation for isolating the code specific to each platform. Hence the need for the 2 assemblies <em>NDepend.Platform.DotNet.dll</em> and <em>XDepend.Platform.Java.dll</em>. This separation will also make easy potential future platform support (C++, Delphi…).</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">The tool comes with 2 primary usages, analyze code and digging into analysis results through the UI. This is the motivation for having 2 different executable assemblies: <em>NDepend.Console.e</em>xe and <em>VisualNDepend.exe</em> on one hand, and 2 different libraries, <em>NDepend.Analysis.dll </em>and <em>NDepend.UI.dll </em>on the other hand. The idea is to avoid having both these assemblies loaded inside the same process.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><em><span lang="EN-US">NDepend.Analysis.dll</span></em><span lang="EN-US"> and <em>NDepend.UI.dll</em> both rely on a lot of common code, core domain objects + many helper/util code, hence the need for creating the <em>NDepend.Framework</em><em>.dll</em><br />
assembly.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><em><span lang="EN-US">NDepend.CQL.dll</span></em><span lang="EN-US"> is a lightweight assembly (less than 10KB) that contains the plumbing for <a href="http://www.ndepend.com/ConstraintsExtractedFromCode.aspx" target="_blank">declaring CQL rules</a></span><span lang="EN-US"><a href="http://www.ndepend.com/ConstraintsExtractedFromCode.aspx" target="_blank"> directly inside the source code</a>. Not only this assembly <em>NDepend.CQL.dll </em>is used by NDepend users who harness this possibility, but also we use it extensively to declare our own constraints in our code. For users who which to declare CQL constraints inside their source code, it is more convenient to link with a single and lightweight assembly, hence the need for <em>NDepend.CQL.dll.</em></span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US">Finally, the <em>NDepend.AddIn.dll</em> assembly contains the plumbing needed to register the <a href="http://s3.amazonaws.com/NDependOnlineDemos/NDependVisualStudioReflector_viewlet_swf.html" target="_blank">NDepend VisualStudio and Reflector addin</a></span><span lang="EN-US">. This assembly references big assemblies such as the <em>Reflector.exe</em> assembly. In order to prevent loading by mistake <em>Reflector.exe</em> in one of the NDepend process, it was a good thing to create a dedicated <em>NDepend.AddIn.dll </em>assembly. Also, addin assemblies are registered in <em>VisualStudio</em> and <em>Reflector </em>through their names and the name <em>NDepend.AddIn</em> is well-suited.</span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<p style="margin: 1pt 0cm"><span lang="EN-US"> </span></p>
<div class="shr-publisher-88"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/patricksmacchia/category/net-assemblies/" title="View all posts in .NET assemblies" rel="category tag">.NET assemblies</a>, <a href="http://codebetter.com/patricksmacchia/category/acyclic-componentization/" title="View all posts in Acyclic componentization" rel="category tag">Acyclic componentization</a>, <a href="http://codebetter.com/patricksmacchia/category/dependencies/" title="View all posts in Dependencies" rel="category tag">Dependencies</a>, <a href="http://codebetter.com/patricksmacchia/category/deployment/" title="View all posts in Deployment" rel="category tag">Deployment</a>, <a href="http://codebetter.com/patricksmacchia/category/visual-studio/" title="View all posts in Visual Studio" rel="category tag">Visual Studio</a>, <a href="http://codebetter.com/patricksmacchia/category/vs/" title="View all posts in VS" rel="category tag">VS</a>, <a href="http://codebetter.com/patricksmacchia/category/vstudio/" title="View all posts in VStudio" rel="category tag">VStudio</a>. Bookmark the <a href="http://codebetter.com/patricksmacchia/2008/12/08/advices-on-partitioning-code-through-net-assemblies/" title="Permalink to Advices on partitioning code through .NET assemblies" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/patricksmacchia/2008/12/08/advices-on-partitioning-code-through-net-assemblies/feed/" title="Comments RSS to Advices on partitioning code through .NET assemblies" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-88 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/patricksmacchia/2008/12/04/solid-state-drive-enhance-developers-productivity/" rel="prev"><span class="meta-nav">&larr;</span> Solid State Drive: Enhance developers&#8217; productivity</a></div>
					<div class="nav-next"><a href="http://codebetter.com/patricksmacchia/2008/12/14/increase-build-process-added-value-with-static-analysis/" rel="next">Increase Build Process added-value with Static Analysis <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-514">
                    <div id="dsq-comment-header-514" class="dsq-comment-header">
                        <cite id="dsq-cite-514">
    http://www.UdiDahan.com                            <span id="dsq-author-user-514">Udi Dahan: The Software Simplist</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-514" class="dsq-comment-body">
                        <div id="dsq-comment-message-514" class="dsq-comment-message"><p>Patrick,</p>
<p>I&#8217;d suggest that we separate from the development artifact (VS project) and the deployment artifact (assembly).</p>
<p>The fact that Visual Studio automatically compiles projects to assemblies is good for RAD but less so for larger-scale development.</p>
<p>Personally, I use ILMerge to merge the results of multiple project comilations into a single physical assembly.</p>
<p>This makes it easy to see references between different development artifacts without going into a different tool &#8211; something that makes code reviews that much quicker and easier.</p>
<p>That being said, I still think NDepend is an invaluable tool.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-515">
                    <div id="dsq-comment-header-515" class="dsq-comment-header">
                        <cite id="dsq-cite-515">
                                <span id="dsq-author-user-515">Kyle Baley</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-515" class="dsq-comment-body">
                        <div id="dsq-comment-message-515" class="dsq-comment-message"><p>This is good advice. The VS solution should be considered a logical organization of your project to help during development. </p>
<p>This can also be achieved with an automated build process. With NAnt, you can compile all relevant files into a single assembly using the <csc> task rather than compiling the solution with msbuild. </p>
<p><a href="http://www.igloocoder.com/archive/2008/02/21/how-do-you-build-your-application-details.aspx" rel="nofollow">http://www.igloocoder.com/archive/2008/02/21/how-do-you-build-your-application-details.aspx</a></csc></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-516">
                    <div id="dsq-comment-header-516" class="dsq-comment-header">
                        <cite id="dsq-cite-516">
    http://blog.fohjin.com                            <span id="dsq-author-user-516">Mark Nijhof</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-516" class="dsq-comment-body">
                        <div id="dsq-comment-message-516" class="dsq-comment-message"><p>Even now that the source control systems are getting better I still have the occasional conflict in the project files when multiple developers are working on it at the same time. Because of this we decided to create some extra projects that share the base namespace (abc.xyz and abc.qwe) while in active development and then later merge the code into one project again. Which is easy with R#. </p>
<p>Another thing is the separation between interfaces and implementations. When using an IoC I like to have my interfaces in a different dll as my implementations at the very least they will be in a different namespace so they can easily be moved at a later stage. I like this because it gives the ability to change the implementation and the configuration (dll) and leave the rest alone.</p>
<p>What are your thoughts on this?</p>
<p>-Mark</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-517">
                    <div id="dsq-comment-header-517" class="dsq-comment-header">
                        <cite id="dsq-cite-517">
                                <span id="dsq-author-user-517">Patrick Smacchia</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-517" class="dsq-comment-body">
                        <div id="dsq-comment-message-517" class="dsq-comment-message"><p>Mark concerning the interface (plugin pattern) I indeed deem that creating assemblies is a good practice as I said in the post.</p>
<p>Concerning crating temporary projects, it is a dangerouis practices such as any temporary flawed state. there is still the risk to forgot or not have the time to go bak to a clean state later.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-518">
                    <div id="dsq-comment-header-518" class="dsq-comment-header">
                        <cite id="dsq-cite-518">
                                <span id="dsq-author-user-518">Brian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-518" class="dsq-comment-body">
                        <div id="dsq-comment-message-518" class="dsq-comment-message"><p>It&#8217;s funny how 4 years ago when I was screaming about how many people were adding unnecessary complexity to their systems by adding so many assemblies under the ruse of &#8216;loose coupling&#8217; and &#8216;greater flexibility&#8217; are now coming back to their senses and realizing that there is a bell curve to it.</p>
<p>However, be careful with this one:<br />
Framework features separation. In case of very large framework</p>
<p>Take a look at Microsoft Patterns and Practices 4.1 &#8211; it has reached the point that if you aren&#8217;t already indoctrinated with EL, that the ramp up time and understanding of it is HUGE because there are so many 10&#8242;s of assemblies that come with this thing.</p>
<p>The premise behind it being &#8211; you should be able to just add the assemblies you need to your deployment, and that you won&#8217;t have to have extra features you don&#8217;t need &#8211; but it&#8217;s so darn fine grained you have a monstrosity of a bin folder (unless you GAC&#8217;d it which means you have 2 pages in your GAC just dedicated to EL assemblies).   EL, if it was collapsed into 1 assembly wouldn&#8217;t be that big (take make a couple seconds longer to download over dial-up on a one-click deployed application) or take any noticeably longer time to load, plus you wouldn&#8217;t have to ensure other assemblies are loaded also just to use it.   They created there own monster and I don&#8217;t even want to use the thing anymore.</p>
<p>Now look at CSLA &#8211; one of the easiest, most flexible and scalable architectures I&#8217;ve used in the past 9 years &#8211; 2 assemblies.  BTW&#8230;it&#8217;s extremely performant (if you&#8217;ve never used it) I got load tests that just fly when I use it (may because it doesn&#8217;t require a billion pointer to run).</p>
<p>The lesson here is that flexibility and scalability is a factor of design, not implementation!</p>
<p>My rule of thumb has always been, if I haven&#8217;t had or have had some have a VALID reason to use the assembly as a separate item in the past 6 months, I never will, and I collapse it into something else and remove the complexity.</p>
<p>Thanks for the validation.  As always&#8230;an awesome post.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-519">
                    <div id="dsq-comment-header-519" class="dsq-comment-header">
                        <cite id="dsq-cite-519">
                                <span id="dsq-author-user-519">Patrick Smacchia</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-519" class="dsq-comment-body">
                        <div id="dsq-comment-message-519" class="dsq-comment-message"><p>>They created there own monster and I don&#8217;t even want to use the thing anymore.</p>
<p>And notice the irony, they are the ones who provide architecture guidance <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_surprised.gif' alt=':o' class='wp-smiley' /> )</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-520">
                    <div id="dsq-comment-header-520" class="dsq-comment-header">
                        <cite id="dsq-cite-520">
                                <span id="dsq-author-user-520">Brian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-520" class="dsq-comment-body">
                        <div id="dsq-comment-message-520" class="dsq-comment-message"><p>NO KIDDING!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-521">
                    <div id="dsq-comment-header-521" class="dsq-comment-header">
                        <cite id="dsq-cite-521">
    http://castalia.wordpress.com                            <span id="dsq-author-user-521">Ira</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-521" class="dsq-comment-body">
                        <div id="dsq-comment-message-521" class="dsq-comment-message"><p>Do you know what a pain posts like this are?</p>
<p>I am now sat merging several libraries into the one library where the previously split dll&#8217;s are separated by namespace instead.</p>
<p>Do you know how much fun it is repairing 100&#8242;s of errors where a ribbon control referenced loads of images in the previous .dll.</p>
<p>God it is boring.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-522">
                    <div id="dsq-comment-header-522" class="dsq-comment-header">
                        <cite id="dsq-cite-522">
    http://www.robertbeal.com                            <span id="dsq-author-user-522">Robert Beal</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-522" class="dsq-comment-body">
                        <div id="dsq-comment-message-522" class="dsq-comment-message"><p>Awesome article, just what I was looking for. Am effectively the build master at Huddle now. I&#8217;ve been trying to reduce build time, and have done many things, but now am at the point where I need to reduce some of the 60 projects we have. </p>
<p>It was a good read. I&#8217;ve yet to use NDepend fully, but that&#8217;s next on my list.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-523">
                    <div id="dsq-comment-header-523" class="dsq-comment-header">
                        <cite id="dsq-cite-523">
    http://www.4444444444444444409hcvw0wvhm9p8hemc.com                            <span id="dsq-author-user-523">Preved</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-523" class="dsq-comment-body">
                        <div id="dsq-comment-message-523" class="dsq-comment-message"><p>Nice conversation here. <a href="http://111111111tv0m0vttqay-7vt-vt0-mqva.com" rel="nofollow">http://111111111tv0m0vttqay-7vt-vt0-mqva.com</a> iemctg <a href="http://22222222qvttv3y9tv9qv9qv38cvm9u.com/">222222</a> [url=http://33333333333333333sfgwet.com]333333[/url]:)</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-524">
                    <div id="dsq-comment-header-524" class="dsq-comment-header">
                        <cite id="dsq-cite-524">
    http://ondevelopment.blogspot.com                            <span id="dsq-author-user-524">Patrik H&#228;gne</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-524" class="dsq-comment-body">
                        <div id="dsq-comment-message-524" class="dsq-comment-message"><p>I would add one valid reason to create an assembly. The cases when you want to use a different language to implement some features, such as VB.Net or F#.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1045">
                    <div id="dsq-comment-header-1045" class="dsq-comment-header">
                        <cite id="dsq-cite-1045">
                                <span id="dsq-author-user-1045">Marcel Sorger</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1045" class="dsq-comment-body">
                        <div id="dsq-comment-message-1045" class="dsq-comment-message"><p>@Mark Nijhof<br />
Lots of times interfaces will be used in multiple applications like Test and production  or in WCF on the client and server.<br />
Besides that I always thought compiling interfaces was quite fast should make little difference.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1450">
                    <div id="dsq-comment-header-1450" class="dsq-comment-header">
                        <cite id="dsq-cite-1450">
                                <span id="dsq-author-user-1450">Ade</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1450" class="dsq-comment-body">
                        <div id="dsq-comment-message-1450" class="dsq-comment-message"><p>I think you&#8217;ll find the latest release of EL actually has less assemblies. </p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/patricksmacchia/2008/12/08/advices-on-partitioning-code-through-net-assemblies/';
    var disqus_identifier = '88 /blogs/patricksmacchia/archive/2008/12/08/advices-on-partitioning-code-through-net-assemblies.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'codebetter';
    var disqus_title = "Advices on partitioning code through .NET assemblies";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=88');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/patricksmacchia\/2008\/12\/08\/advices-on-partitioning-code-through-net-assemblies\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.499 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 19:28:23 -->
<!-- super cache -->