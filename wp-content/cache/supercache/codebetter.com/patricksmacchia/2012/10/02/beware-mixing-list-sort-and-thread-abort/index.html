<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Beware mixing List.Sort() and Thread.Abort() | Patrick Smacchia</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/patricksmacchia/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/patricksmacchia/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='The consequence of a.NET Framework API design flaw' href='http://codebetter.com/patricksmacchia/2012/08/06/the-consequence-of-a-net-framework-api-design-flaw/' />
<link rel='next' title='Screencast: Inspecting Code Quality and Code Complexity' href='http://codebetter.com/patricksmacchia/2012/10/15/screencast-inspecting-code-quality-and-code-complexity/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/patricksmacchia/?p=702' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,153] -->
<link rel="canonical" href="http://codebetter.com/patricksmacchia/2012/10/02/beware-mixing-list-sort-and-thread-abort/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<meta property='og:image' content='http://codebetter.com/patricksmacchia/files/2012/10/Match.png' />

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-702" class="post-702 post type-post status-publish format-standard hentry category-net-framework category-net-fx category-c category-code-query category-code-rule category-cqlinq">
					<h1 class="entry-title">Beware mixing List.Sort() and Thread.Abort()</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/patricksmacchia/author/patricksmacchia/" title="View all posts by Patrick Smacchia">Patrick Smacchia</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/patricksmacchia/2012/10/02/beware-mixing-list-sort-and-thread-abort/" title="2:24 pm" rel="bookmark"><span class="entry-date">October 2, 2012</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/patricksmacchia/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/patricksmacchia/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>After more than a decade of full-time development with .NET, I still discover surprising unfixed bugs in the heart of the framework. Today, while I was smoke-testing new stuff in the NDepend UI, I stumbled on an <a href="http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx" target="_blank">InvalidOperationException</a> thrown by a call to <a href="http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx" target="_blank">List&lt;T&gt;.Sort()</a> ?!</p>
<p>After 15 minutes of searching the cause of the bug, I found this unfixed bug on Microsoft Connect: <a href="http://connect.microsoft.com/VisualStudio/feedback/details/605536/list-sort-throws-invalidoperationexception-instead-of-re-throw-threadabortexception-while-thread-is-being-aborted" target="_blank">List.Sort() throws InvalidOperationException (instead of re-throw ThreadAbortException) while thread is being aborted</a></p>
<p>In other words, if your application is using <a href="http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx" target="_blank">Thread.Abort()</a> somehow, and that the abortable code is calling <em>List&lt;T&gt;.Sort()</em>, you are exposed to the risk of getting an <em>InvalidOperationException</em> instead of a <em>ThreadAbortException</em>.</p>
<p>I already hear that it is a good practice to avoid calling <em>Thread.Abort()</em>, but the fact is that if one wants a responsive UI, one needs some sort of abortable/timed-out background work, and at a point <em>Thread.Abort()</em> will have to be called for that. As long as calling <em>Thread.Abort() </em>is done in a safe way (see this <a href="http://www.bluebytesoftware.com/blog/2009/03/13/ManagedCodeAndAsynchronousExceptionHardening.aspx" target="_blank">Joe Duffy detailled post</a>) we didn&#8217;t meet any problems so far. On millions of production runs logged, we cannot see any problem except &#8230; that <em>List&lt;T&gt;.Sort()</em> throws an <em>InvalidOperationException</em> with the frequency of around one on every 50K production runs. And today, this bug just popped to me in a <em>reproductible</em> way thanks to some refactoring I was doing.</p>
<p>To workaround this problem once for all, I enclosed all calls to any override of <em>List&lt;T&gt;.Sort()</em> in some extension methods in a dedicated class. These <em>BugFreeSort() methods </em>catch the <em>InvalidOperationException. </em>This is fine because anyway the thread is in a <a href="http://msdn.microsoft.com/en-us/library/system.threading.threadstate.aspx" target="_blank">ThreadState.AbortRequested</a> and the CLR will throw the <em>ThreadAbortException </em>at the end of the catch block. Also, attached to this class through an attribute, I declare a <a href="http://www.ndepend.com/ConstraintsExtractedFromCode.aspx" target="_blank">CQLinq code rule in the source code</a> to make sure that all calls to <em>List&lt;T&gt;.Sort()</em> are made through one of these <em>BugFreeSort()</em> methods. Here is the code:</p>
<script src="http://gist.github.com/3819116.js"></script><noscript><link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css"><div id="gist-3819116" class="gist">
    

        <div class="gist-file">
          <div class="gist-data gist-syntax">
              <div class="highlight"><pre><div class='line' id='LC1'><span class="k">using</span> <span class="nn">System</span><span class="p">;</span></div><div class='line' id='LC2'><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span></div><div class='line' id='LC3'><span class="k">using</span> <span class="nn">System.Diagnostics</span><span class="p">;</span></div><div class='line' id='LC4'><span class="k">using</span> <span class="nn">System.Threading</span><span class="p">;</span></div><div class='line' id='LC5'><span class="k">using</span> <span class="nn">NDepend.Attributes</span><span class="p">;</span></div><div class='line' id='LC6'><span class="k">using</span> <span class="nn">ThreadState</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">ThreadState</span><span class="p">;</span></div><div class='line' id='LC7'><br/></div><div class='line' id='LC8'><span class="k">namespace</span> <span class="nn">NDepend.Helpers.Collections</span> <span class="p">{</span></div><div class='line' id='LC9'>&nbsp;&nbsp;&nbsp;<span class="c1">//</span></div><div class='line' id='LC10'>&nbsp;&nbsp;&nbsp;<span class="c1">// These extension methods are paliative to a bug of the .NET Fx described here:</span></div><div class='line' id='LC11'>&nbsp;&nbsp;&nbsp;<span class="c1">// http://connect.microsoft.com/VisualStudio/feedback/details/605536/list-sort-throws-invalidoperationexception-instead-of-re-throw-threadabortexception-while-thread-is-being-aborted</span></div><div class='line' id='LC12'>&nbsp;&nbsp;&nbsp;<span class="c1">// List.Sort() throws InvalidOperationException (instead of re-throw ThreadAbortException) while thread is being aborted</span></div><div class='line' id='LC13'>&nbsp;&nbsp;&nbsp;<span class="c1">//</span></div><div class='line' id='LC14'><span class="cp">#if DEBUG</span></div><div class='line' id='LC15'><span class="na">   [CodeRule(@&quot;// &lt;Name&gt;Use List&lt;T&gt;.BugFreeSort() instead of List&lt;T&gt;.Sort()&lt;/Name&gt;</span></div><div class='line' id='LC16'><span class="na">warnif count &gt; 0</span></div><div class='line' id='LC17'><span class="na">let listSortMethods = ThirdParty.Methods</span></div><div class='line' id='LC18'><span class="na">  .WithFullNameWildcardMatch(@&quot;&quot;System.Collections.Generic.List&lt;T&gt;.Sort*&quot;&quot;)</span></div><div class='line' id='LC19'><span class="na">from m in Application.Methods.UsingAny(listSortMethods)  </span></div><div class='line' id='LC20'><span class="na">where m.ParentType.FullName != &quot;&quot;NDepend.Helpers.Collections.ListSortExtensionMethods&quot;&quot;</span></div><div class='line' id='LC21'><span class="na">select new { m, sortMethodCalled = m.MethodsCalled.Intersect(listSortMethods) }&quot;,</span></div><div class='line' id='LC22'><span class="na">      Active = true,</span></div><div class='line' id='LC23'><span class="na">      DisplayStatInReport = true,</span></div><div class='line' id='LC24'><span class="na">      DisplayListInReport = true,</span></div><div class='line' id='LC25'><span class="na">      DisplaySelectionViewInReport = true,</span></div><div class='line' id='LC26'><span class="na">      IsCriticalRule = false)]</span></div><div class='line' id='LC27'><span class="cp">#endif</span></div><div class='line' id='LC28'>&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ListSortExtensionMethods</span> <span class="p">{</span></div><div class='line' id='LC29'><br/></div><div class='line' id='LC30'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">BugFreeSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC31'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">list</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC32'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="p">{</span></div><div class='line' id='LC33'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">list</span><span class="p">.</span><span class="n">Sort</span><span class="p">();</span></div><div class='line' id='LC34'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">InvalidOperationException</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC35'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">((</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">ThreadState</span> <span class="p">&amp;</span> <span class="n">ThreadState</span><span class="p">.</span><span class="n">AbortRequested</span><span class="p">)</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span></div><div class='line' id='LC36'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// The exception ThreadAbortException is propagated when closing this catch blok</span></div><div class='line' id='LC37'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC38'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC39'><br/></div><div class='line' id='LC40'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">BugFreeSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">list</span><span class="p">,</span> <span class="n">Comparison</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">comparison</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC41'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">list</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC42'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">comparison</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC43'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="p">{</span></div><div class='line' id='LC44'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">list</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">comparison</span><span class="p">);</span></div><div class='line' id='LC45'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InvalidOperationException</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC46'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">((</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">ThreadState</span> <span class="p">&amp;</span> <span class="n">ThreadState</span><span class="p">.</span><span class="n">AbortRequested</span><span class="p">)</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span></div><div class='line' id='LC47'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// The exception ThreadAbortException is propagated when closing this catch blok</span></div><div class='line' id='LC48'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC49'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC50'><br/></div><div class='line' id='LC51'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">BugFreeSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">list</span><span class="p">,</span> <span class="n">IComparer</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">comparer</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC52'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">list</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC53'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">comparer</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC54'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="p">{</span></div><div class='line' id='LC55'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">list</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">comparer</span><span class="p">);</span></div><div class='line' id='LC56'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InvalidOperationException</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC57'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">((</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">ThreadState</span> <span class="p">&amp;</span> <span class="n">ThreadState</span><span class="p">.</span><span class="n">AbortRequested</span><span class="p">)</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span></div><div class='line' id='LC58'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// The exception ThreadAbortException is propagated when closing this catch blok</span></div><div class='line' id='LC59'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC60'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC61'><br/></div><div class='line' id='LC62'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">BugFreeSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">list</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">IComparer</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">comparer</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC63'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">list</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC64'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">);</span></div><div class='line' id='LC65'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">count</span> <span class="p">&gt;=</span><span class="m">0</span><span class="p">);</span></div><div class='line' id='LC66'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">list</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span> <span class="p">||</span> <span class="n">index</span><span class="p">+</span><span class="n">count</span> <span class="p">&lt;</span> <span class="n">list</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span></div><div class='line' id='LC67'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">comparer</span> <span class="p">!=</span> <span class="k">null</span><span class="p">);</span></div><div class='line' id='LC68'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="p">{</span></div><div class='line' id='LC69'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">list</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">comparer</span><span class="p">);</span></div><div class='line' id='LC70'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InvalidOperationException</span><span class="p">)</span> <span class="p">{</span></div><div class='line' id='LC71'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Debug</span><span class="p">.</span><span class="n">Assert</span><span class="p">((</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">ThreadState</span> <span class="p">&amp;</span> <span class="n">ThreadState</span><span class="p">.</span><span class="n">AbortRequested</span><span class="p">)</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span></div><div class='line' id='LC72'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// The exception ThreadAbortException is propagated when closing this catch blok</span></div><div class='line' id='LC73'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC74'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC75'>&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class='line' id='LC76'><span class="p">}</span></div><div class='line' id='LC77'><br/></div></pre></div>
          </div>

          <div class="gist-meta">
            <a href="https://gist.github.com/raw/3819116/19fc0ebb683253b9c2e3d78876a8348e3b97d69e/gistfile1.cs" style="float:right;">view raw</a>
            <a href="https://gist.github.com/3819116#file_gistfile1.cs" style="float:right;margin-right:10px;color:#666">gistfile1.cs</a>
            <a href="https://gist.github.com/3819116">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
          </div>
        </div>
</div>
</noscript>
<p>Here is the code rule declared in the code. Hopefully any .NET developer acquainted with the LINQ syntax, should be able to read this piece to code:</p>
<script src="http://gist.github.com/3819157.js"></script><noscript><link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css"><div id="gist-3819157" class="gist">
    

        <div class="gist-file">
          <div class="gist-data gist-syntax">
              <div class="highlight"><pre><div class='line' id='LC1'><span class="c1">// &lt;Name&gt;Use List&lt;T&gt;.BugFreeSort() instead of List&lt;T&gt;.Sort()&lt;/Name&gt;</span></div><div class='line' id='LC2'><span class="n">warnif</span> <span class="n">count</span> <span class="p">&gt;</span> <span class="m">0</span></div><div class='line' id='LC3'><span class="n">let</span> <span class="n">listSortMethods</span> <span class="p">=</span> <span class="n">ThirdParty</span><span class="p">.</span><span class="n">Methods</span></div><div class='line' id='LC4'>&nbsp;&nbsp;<span class="p">.</span><span class="n">WithFullNameWildcardMatch</span><span class="p">(</span><span class="s">@&quot;System.Collections.Generic.List&lt;T&gt;.Sort*&quot;</span><span class="p">)</span></div><div class='line' id='LC5'><br/></div><div class='line' id='LC6'><span class="k">from</span> <span class="n">m</span> <span class="k">in</span> <span class="n">Application</span><span class="p">.</span><span class="n">Methods</span><span class="p">.</span><span class="n">UsingAny</span><span class="p">(</span><span class="n">listSortMethods</span><span class="p">)</span>  </div><div class='line' id='LC7'><span class="k">where</span> <span class="n">m</span><span class="p">.</span><span class="n">ParentType</span><span class="p">.</span><span class="n">FullName</span> <span class="p">!=</span> <span class="s">&quot;NDepend.Helpers.Collections.ListSortExtensionMethods&quot;</span></div><div class='line' id='LC8'><span class="k">select</span> <span class="k">new</span> <span class="p">{</span> <span class="n">m</span><span class="p">,</span> <span class="n">sortMethodCalled</span> <span class="p">=</span> <span class="n">m</span><span class="p">.</span><span class="n">MethodsCalled</span><span class="p">.</span><span class="n">Intersect</span><span class="p">(</span><span class="n">listSortMethods</span><span class="p">)</span> <span class="p">}</span></div></pre></div>
          </div>

          <div class="gist-meta">
            <a href="https://gist.github.com/raw/3819157/22e3d5c2198bce7b68ce067977fe44da20a88c7b/gistfile1.cs" style="float:right;">view raw</a>
            <a href="https://gist.github.com/3819157#file_gistfile1.cs" style="float:right;margin-right:10px;color:#666">gistfile1.cs</a>
            <a href="https://gist.github.com/3819157">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
          </div>
        </div>
</div>
</noscript>
<p>And here is a screenshot of the NDepend methods violating the code rule <em>before</em> refactoring:</p>
<p><a href="http://codebetter.com/patricksmacchia/files/2012/10/Match.png"><img class="alignnone size-full wp-image-705" src="http://codebetter.com/patricksmacchia/files/2012/10/Match.png" alt="" width="580" height="783" /></a></p>
<p>We have almost 200 code rules declared in source code like this newly added one. They protect us from stumbling <em>again and again</em> in tricky identified scenarios. In other words with these rules we abide by the tenet: <strong>Fool me once, don&#8217;t fool me twice</strong>.</p>
<p>In a team context, doing so is especially useful since such rule is warning a developer when he&#8217;s doing something wrong. Such warning is actually a <strong>just-in-time</strong> <strong>automatic piece of education</strong> for <em>newcomers</em> developers, about how things must be done. Communication in the team is enhanced, the overall friction is decreased, and I found this pretty cool <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<div class="shr-publisher-702"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/patricksmacchia/category/net-framework/" title="View all posts in .NET Framework" rel="category tag">.NET Framework</a>, <a href="http://codebetter.com/patricksmacchia/category/net-fx/" title="View all posts in .NET Fx" rel="category tag">.NET Fx</a>, <a href="http://codebetter.com/patricksmacchia/category/c/" title="View all posts in C#" rel="category tag">C#</a>, <a href="http://codebetter.com/patricksmacchia/category/code-query/" title="View all posts in Code Query" rel="category tag">Code Query</a>, <a href="http://codebetter.com/patricksmacchia/category/code-rule/" title="View all posts in Code Rule" rel="category tag">Code Rule</a>, <a href="http://codebetter.com/patricksmacchia/category/cqlinq/" title="View all posts in CQLinq" rel="category tag">CQLinq</a>. Bookmark the <a href="http://codebetter.com/patricksmacchia/2012/10/02/beware-mixing-list-sort-and-thread-abort/" title="Permalink to Beware mixing List.Sort() and Thread.Abort()" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/patricksmacchia/2012/10/02/beware-mixing-list-sort-and-thread-abort/feed/" title="Comments RSS to Beware mixing List.Sort() and Thread.Abort()" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-702 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/patricksmacchia/2012/08/06/the-consequence-of-a-net-framework-api-design-flaw/" rel="prev"><span class="meta-nav">&larr;</span> The consequence of a.NET Framework API design flaw</a></div>
					<div class="nav-next"><a href="http://codebetter.com/patricksmacchia/2012/10/15/screencast-inspecting-code-quality-and-code-complexity/" rel="next">Screencast: Inspecting Code Quality and Code Complexity <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-1721">
                    <div id="dsq-comment-header-1721" class="dsq-comment-header">
                        <cite id="dsq-cite-1721">
                                <span id="dsq-author-user-1721">airhed13</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1721" class="dsq-comment-body">
                        <div id="dsq-comment-message-1721" class="dsq-comment-message"><p>I reject the premise: &#8220;but the fact is that if one wants a responsive UI, one needs some sort of abortable/timed-out background work, and at a point Thread.Abort() will have to be called for that.&#8221;<br />
Cooperative cancellation is tried and true and doesn&#8217;t result in undefined behavior throughout your program. Thread.Abort() is a bug if reliability is a requirement.<br />
Joe Duffy&#8217;s article seems to say precisely the opposite of what you imply:<br />
&#8220;&#8230; the .NET Framework cannot be trusted when any of the aforementioned exceptions are thrown.&#8221; where one of the aforementioned exceptions is ThreadAbort. Joe Duffy is essentially stating that rudely aborting a thread destroys trust in the underlying framework. Just don&#8217;t do it.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1722">
                    <div id="dsq-comment-header-1722" class="dsq-comment-header">
                        <cite id="dsq-cite-1722">
    http://barrkel.blogspot.com/                            <span id="dsq-author-user-1722">barrkel</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1722" class="dsq-comment-body">
                        <div id="dsq-comment-message-1722" class="dsq-comment-message"><p>That&#8217;s not a good enough excuse for using Thread.Abort.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1723">
                    <div id="dsq-comment-header-1723" class="dsq-comment-header">
                        <cite id="dsq-cite-1723">
                                <span id="dsq-author-user-1723">Patrick Smacchia</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1723" class="dsq-comment-body">
                        <div id="dsq-comment-message-1723" class="dsq-comment-message"><p>So I didn&#8217;t express myself properly. We are not aborting threads, in the sense we don&#8217;t kill them. But we are calling Thread.Abort() and then catch ThreadAbortException and use the method ResetAbort(). For example we got inspiration from this WaitFor code:  <a href="https://github.com/Lokad/lokad-shared-libraries/blob/master/Source/Lokad.Shared/Threading/WaitFor.cs" rel="nofollow">https://github.com/Lokad/lokad-shared-libraries/blob/master/Source/Lokad.Shared/Threading/WaitFor.cs</a>     As said, we have millions of production runs logged, that worked on top of such code, and except this List.Sort() bug, we&#8217;ve never observed another issue.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1730">
                    <div id="dsq-comment-header-1730" class="dsq-comment-header">
                        <cite id="dsq-cite-1730">
                                <span id="dsq-author-user-1730">Jarle</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1730" class="dsq-comment-body">
                        <div id="dsq-comment-message-1730" class="dsq-comment-message"><p>Stupid question:</p>
<p>Why are you making your own implementation of Task.Wait()?</p>
<p>Task task = Task.Factory.StartNew(() =&gt; DoSomething());<br />
task.Wait(100);<br />
 if (task.IsCompleted) {        &#8230; }</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1731">
                    <div id="dsq-comment-header-1731" class="dsq-comment-header">
                        <cite id="dsq-cite-1731">
                                <span id="dsq-author-user-1731">PatrickSmacchia</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1731" class="dsq-comment-body">
                        <div id="dsq-comment-message-1731" class="dsq-comment-message"><p>Because we are still running on .NET 3.5, and will still do at least until .NET Fx 5 (and VS post VS2012) will be released! There are tricks to get the TaskParallelLibrary working on .NET v3.5, but it is unsupported, so we still prefer to support our own TPL by now.   <a href="http://stackoverflow.com/questions/2987439/can-i-use-the-task-parallel-library-in-a-net-3-5-project" rel="nofollow">http://stackoverflow.com/questions/2987439/can-i-use-the-task-parallel-library-in-a-net-3-5-project</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1733">
                    <div id="dsq-comment-header-1733" class="dsq-comment-header">
                        <cite id="dsq-cite-1733">
                                <span id="dsq-author-user-1733">Chris S</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1733" class="dsq-comment-body">
                        <div id="dsq-comment-message-1733" class="dsq-comment-message"><p>A more accurate title might be &#8220;Beware Thread.Abort()&#8221;</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/patricksmacchia/2012/10/02/beware-mixing-list-sort-and-thread-abort/';
    var disqus_identifier = '702 http://codebetter.com/patricksmacchia/?p=702';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'codebetter';
    var disqus_title = "Beware mixing List.Sort() and Thread.Abort()";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=702');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/patricksmacchia\/2012\/10\/02\/beware-mixing-list-sort-and-thread-abort\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 2.046 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 21:28:49 -->
<!-- super cache -->