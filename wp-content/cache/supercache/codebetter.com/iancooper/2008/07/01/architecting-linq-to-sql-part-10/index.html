<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Architecting Linq to SQL, part 10 | Ian Cooper</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/iancooper/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://cdn1.codebetter.com/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/iancooper/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Ian Cooper' href='http://codebetter.com/iancooper/' />
<link rel='start' title='Hello World' href='http://codebetter.com/iancooper/2007/11/17/hello-world-2/' />
<link rel='prev' title='Alt.Net events in London' href='http://codebetter.com/iancooper/2008/07/01/alt-net-events-in-london/' />
<link rel='next' title='Showing some support for LINQ to SQL' href='http://codebetter.com/iancooper/2008/07/02/showing-some-support-for-linq-to-sql/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/iancooper/2008/07/01/architecting-linq-to-sql-part-10/' />
<link rel='shortlink' href='http://codebetter.com/iancooper/?p=34' />
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/codebetteriancooper/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-34" class="post-34 post type-post status-publish format-standard hentry category-architecture category-linq category-object-orientation category-orm">
					<h1 class="entry-title">Architecting Linq to SQL, part 10</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/iancooper/author/iancooper/" title="View all posts by Ian Cooper">Ian Cooper</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/iancooper/2008/07/01/architecting-linq-to-sql-part-10/" title="12:40 pm" rel="bookmark"><span class="entry-date">July 1, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/iancooper/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/iancooper/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>&nbsp;Previously: <a href="/blogs/ian_cooper/archive/2008/06/28/architecting-linq-to-sql-part-9.aspx">Architecting Linq to SQL, part 9</a></p>
<p><b>End of the line</b> </p>
<p>This is intended to be the last part in this series and I wanted to take the opportunity to talk about a number of related if diverse topics. I would like to look at what I would like to see in the next version, and talk about when and where I intend to use Linq to SQL and other ORMs such as NHibernate.</p>
<p>I will try to get some of the code that goes with this series up onto google code over the coming months, schedules permitting. <a href="http://oakleafblog.blogspot.com/2008/06/linq-and-entity-framework-posts-for_26.html">Roger Jennings</a> requested that I give more than a trivial example of how to do messaging for n-tier scenarios. I&#8217;m flattered by Roger&#8217;s confidence, though I feel that <a href="/blogs/gregyoung/">Greg </a>or <a href="http://udidahan.weblogs.us/">Udi</a> would be better placed to do a introductory piece on messaging. But if there is demand I will give it a try.</p>
<p><b>What would I like to see in the next version?</b> </p>
<p>The following are, I think, the priorities: </p>
<blockquote><p><b>Support for Value Types</b>. In a fine grained object model we may have classes that are not entities (have a distinct identity independent of their state). A common example would be Money, which has a value and currency. We do not want to map these to rows in a table, but to columns. Right now with Linq to SQL we have to represent money as two fields, amount and currency in an entity. We would like to represent them as one type, which can be mapped independently. As an aside a lot of systems overuse primitive types directly. Often we have something that is not a string or an int even if we can represent it as such. Our systems become clearer if we can wrap these primitives in a name appropriate to the domain such as ShippingReference. This only works if we can map value types easily. This is fairly straightforward if we assume that the column names used by these value types remain the same on any entity that stores them.</p>
</blockquote>
<blockquote><p><b>Support for changing loading options.</b> As of today we can only alter the default loading behavior of a DataContext before we use it. This assumes that we can determine what we want to eager load once for a context. The reality is that we may want to set this before we run any query. So it must be possible for us to set eager loading options each time we run a query. An alternative would be to do something more akin to Hibernate&#8217;s <a href="http://www.hibernate.org/hib_docs/reference/en/html/queryhql.html">HQL language&#8217;s ability to add a </a><i><a href="http://www.hibernate.org/hib_docs/reference/en/html/queryhql.html">fetch</a> </i>to the query expression so that we can tell the query to load the relationship eagerly.We also want support for eager loading multiple child associations, not just the one we have now.</p>
<p><b>Support for ordered relationship types</b>. Right now an association is treated as a set &#8211; an unordered collection. However often are children are ordered, particularly being in a map where we have both a key and a value. The key should be both a primitive type and another entity or value type. While this type of mapping is less common in the relational world, within our domain we often want to use ordered mappings, and support for mapping these to relational tables gives us increased flexibility when mapping domain to Db. <a href="http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html_single/#collections"></a></p>
<p><b>Support for table per sub-class mapping</b>.&nbsp; Sometimes we do not want to allow fields on sub-classes to be nullable. Unfortunately this is a requirement of table-per-class-hierarchy mapping strategies. Allowing table per sub-class, using a shared key strategy would allow us to avoid this issue. Table per-subclass with shared key avoids some of the performance issues from moving away from a single table, which might be incurred if we took a union approach to combining data from multiple tables to support subclassing.</p>
</blockquote>
<p>There are also some things I would like to see, though I am less optimistic that they will happen</p>
<blockquote><p><b>Expose the provider model</b>. Allow LINQ to SQL to target multiple Dbs. It exists but was never exposed at RTM. I suspect the resources were not allocated because the Entity Framework became the way to work if you had a non-SQL Server back end. Given EF not being positioned as an ORM let&#8217;s open it up so we can take LINQ to SQL forward.</p>
<p><b>Include an explicit in-memory provider</b>. This will make TDD a breeze.&nbsp; Once we have an in-memory provider it would be easy to swap out the Db for unit testing purposes.</p>
<p><span style="font-weight: bold">Support for second-level caching</span>. MS now has a second level caching technology in Velocity. It would be nice to see support for working with a second level cache within LINQ to SQL (the first level cache is the identity map). </p>
</blockquote>
<p><b>What I would be cautious about in the next version</b>&nbsp; </p>
<p>There are also some things that I would be disappointed about a disproportionate amount of much effort being expended on:</p>
<blockquote><p><b>Support for serialized entities</b>. I hope I have managed to explain why serializing an entity across tiers is a bad architectural style. Instead of corrupting LINQ to SQL with support for this practice, I would like to see an emphasis from the patterns on practices team on dissuading people from approaching n-tier design in this style. We do not want to pollute entities with change tracking or serialize a DataContext.</p>
<p><b>More advanced designer options</b>. I appreciate that some folks like designers, but I think that they may be a red herring here. If you work domain-first then you might as well use attributes to mark up your domain model, or hand code your xml mappingfile. If you are going to work in a data first approach, I would push extending SQLMetal with those capabilities instead of a designer. </p>
<p>In the data first case the design is done in the RDBMS, not in the domain model, so by the time we get to LINQ to SQL we are just generating our entity model from our Db. All the designer gives us is the ability to select a sub-set of tables to generate. A fairly simplistic UI, such as a dropdown list to add tables, could configure the options for a SQLMetal call. Flashy drag and drop layout seems a little bit wasteful. Even better if the property based approach is just a wrapper around a SQLMetal call that makes that command you have configured available. That allows folks to use the command they have created throough the designer in their build scripts to call SQLMetal. This would give more resources for the new functionality people want from their data-first designer such as file per entity, update an existing set of files for changes etc. </p>
<p>I understand this may not be popular, but command line tools are cheaper to author and can deliver a lot more bang for your buck if your team has limited resources. In addition a designer can blind you to an over-complex approach to mapping. If you cannot easily map by hand, if you require that designer, then I believe that you may have lost your way.</p>
</blockquote>
<p>I understand that these suggestions will be unpopular with some people, but both of them represent dead ends to me, that do not provide us with the ability to write better software. Of course your mileage may vary.</p>
<p><b>Linq to SQL over Entity Framework for your ORM<br /></b></p>
<p>For my part, and that is of course based of my <a href="http://www.martinfowler.com/bliki/SchoolsOfSoftwareDevelopment.html">school of software development</a>, LINQ to SQL is a better ORM than the Entity Framework. That may come as no shock to the EF team who have a bigger vision for their product than ORM. For me, LINQ to SQL get a lot right: support for persistence ignorance, single mapping file that is by-hand authorable, lazy loading as a default strategy. If MS intends to provide an offering in the ORM space, as opposed to whatever space the EF is defining, and thus fulfill the vision that Anders gave us of simplifying the development experience by having data access as part of the language. To me LINQ to SQL is the best MS contender for the crown. Given the resources, LINQ to SQL could become a great tool. I hope that MS continue to allocate a fair share of resources to it.</p>
<p><b>LINQ to SQL vs. NHibernate</b></p>
<p>To be honest, I have to say that my next project will use NHibernate for its persistence technology instead of LINQ to SQL. Why? It is a large project, with a significant number of entities, and we want to support fine-grained object models and table per sub-class mapping strategies. We also wanted the insurance of being able eager fetch on a query-by-query basis and have a 2nd level cache. It is an old adage but &#8216;there is no silver bullet&#8217;. I&#8217;m picking one tool out of the kit, it does not mean the others are not valuable.</p>
<p>At the same time LINQ to SQL still forms part of our strategy, because we believe it to be simpler to approach for many projects.So we also have and will be using LINQ to SQL. If anything LINQ to SQL replaces <a href="http://code.google.com/p/wilsonormapper/">WORM </a>for us which we used for a number of projects where we had good table to entity affinity. Ironically perhaps WORM was an implementation of the proposed interface for ObjectSpaces. <a href="http://www.martinfowler.com/bliki/SchoolsOfSoftwareDevelopment.html">ObjectSpaces </a>was the MS ORM for .NET 2.0, that never saw the light of day. <a href="http://blogs.msdn.com/dinesh.kulkarni/archive/2005/09/13/465089.aspx">ObjectSpaces became LINQ to SQL</a>, and <a href="http://blogs.msdn.com/mattwar/archive/2007/05/31/the-origin-of-linq-to-sql.aspx">Matt has full the story here</a>, so it seems a natural inheritor. Let us hope it does not meet the ObjectSpaces fate of being sidelined for a more grandiose vision of data access.</p>
<p>A valid question might be to ask why I want improve LINQ to SQL, why I do not just tell everyone to use NHibernate. Some of this is a recognition of the market, many people will not use a non-MS ORM and LINQ to SQL is is a solid ORM. Pragmatically we are likely to get more .NET developers who know LINQ to SQL available in the market place than NHibernate developers. But I also believe that with the expressiveness of LINQ MS have a real chance to move the ORM market forward in the .NET space. LINQ to SQL is like ASP.NET MVC, it is a welcome acknowledgement from MS of what developers want, and we should commend them when they do get it right.</p>
<p>I will be posting a series on NHibernate going forward, so that you can make your own judgements on which to use and when.</p>
<p>&nbsp;</p>
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/b033a6c1af4ee8d7a734f3684225ea8a?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=R' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Ian Cooper</h2>
							Ian Cooper has over 18 years of experience delivering Microsoft platform solutions in government, healthcare, and finance. During that time he has worked for the DTi, Reuters, Sungard, Misys and Beazley delivering everything from bespoke enterpise solutions to 'shrink-wrapped' products to thousands of customers. Ian is a passionate exponent of the benefits of OO and Agile. He is test-infected and contagious. When he is not writing C# code he is also the and founder of the London .NET user group. http://www.dnug.org.uk							<div id="author-link">
								<a href="http://codebetter.com/iancooper/author/iancooper/" title="View all posts by Ian Cooper">View all posts by Ian Cooper &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/iancooper/category/architecture/" title="View all posts in Architecture" rel="category tag">Architecture</a>, <a href="http://codebetter.com/iancooper/category/linq/" title="View all posts in LINQ" rel="category tag">LINQ</a>, <a href="http://codebetter.com/iancooper/category/object-orientation/" title="View all posts in Object-Orientation" rel="category tag">Object-Orientation</a>, <a href="http://codebetter.com/iancooper/category/orm/" title="View all posts in ORM" rel="category tag">ORM</a>. Bookmark the <a href="http://codebetter.com/iancooper/2008/07/01/architecting-linq-to-sql-part-10/" title="Permalink to Architecting Linq to SQL, part 10" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/iancooper/2008/07/01/architecting-linq-to-sql-part-10/feed/" title="Comments RSS to Architecting Linq to SQL, part 10" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-34 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/iancooper/2008/07/01/alt-net-events-in-london/" rel="prev"><span class="meta-nav">&larr;</span> Alt.Net events in London</a></div>
					<div class="nav-next"><a href="http://codebetter.com/iancooper/2008/07/02/showing-some-support-for-linq-to-sql/" rel="next">Showing some support for LINQ to SQL <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-323">
					<div id="dsq-comment-header-323" class="dsq-comment-header">
						<cite id="dsq-cite-323">
	http://weblogs.asp.net/PWilson							<span id="dsq-author-user-323">Paul Wilson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-323" class="dsq-comment-body">
						<div id="dsq-comment-message-323" class="dsq-comment-message"><p>Thanks for the whole series, and I very much agree with everything in this post.  I&#8217;m very much finding that I too really like Linq to Sql (and I hate Linq to Entities), but I too want those same couple of extras &#8212; not much to ask, just those few.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-324">
					<div id="dsq-comment-header-324" class="dsq-comment-header">
						<cite id="dsq-cite-324">
	http://www.blogcoward.com							<span id="dsq-author-user-324">jdn</span>
							</cite>
					</div>
					<div id="dsq-comment-body-324" class="dsq-comment-body">
						<div id="dsq-comment-message-324" class="dsq-comment-message"><p>&#8220;Support for changing loading options&#8221;</p>
<p>Here&#8217;s a hack solution for this:</p>
<p><a href="http://nickandgrace.com/code/archive/2007/12/11/hack-solution-to-the-loadoptions-problem.aspx" rel="nofollow">http://nickandgrace.com/code/archive/2007/12/11/hack-solution-to-the-loadoptions-problem.aspx</a></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-325">
					<div id="dsq-comment-header-325" class="dsq-comment-header">
						<cite id="dsq-cite-325">
								<span id="dsq-author-user-325">Ian Cooper</span>
							</cite>
					</div>
					<div id="dsq-comment-body-325" class="dsq-comment-body">
						<div id="dsq-comment-message-325" class="dsq-comment-message"><p>@jdn</p>
<p>Thanks for linking that here. It&#8217;s cool that it seems to work, but I worry there is a reason why it was not enabled, so I would like to see somebody put the time on this one for the next release.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-326">
					<div id="dsq-comment-header-326" class="dsq-comment-header">
						<cite id="dsq-cite-326">
								<span id="dsq-author-user-326">Ian Cooper</span>
							</cite>
					</div>
					<div id="dsq-comment-body-326" class="dsq-comment-body">
						<div id="dsq-comment-message-326" class="dsq-comment-message"><p>@Paul</p>
<p>Hey Paul. Thanks for that. Coming from the guy behind WORM that compliment means a lot to me. Thanks.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-327">
					<div id="dsq-comment-header-327" class="dsq-comment-header">
						<cite id="dsq-cite-327">
								<span id="dsq-author-user-327">Jonathan Wetzel</span>
							</cite>
					</div>
					<div id="dsq-comment-body-327" class="dsq-comment-body">
						<div id="dsq-comment-message-327" class="dsq-comment-message"><p>Great series!  If people start using LINQ to SQL in the ways you outlined I think they will be pleasantly surprised, I was.  I agree with your recommendations for the future versions of LINQ.  It would be a shame if MS lets this die in favor of putting all of their effort into the EF.  LINQ to SQL was transferred out of the C# team&#8217;s hands and into the data programmability group who will obviously want to give all of their attention to their own baby, the EF.  Bad idea.  Also, LINQ to SQL has a good provider model for other databases that they chose not to expose according to Matt Warren&#8217;s blog.  This does not bode well for the future of LINQ to SQL in my opinion.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-328">
					<div id="dsq-comment-header-328" class="dsq-comment-header">
						<cite id="dsq-cite-328">
								<span id="dsq-author-user-328">Ian Cooper</span>
							</cite>
					</div>
					<div id="dsq-comment-body-328" class="dsq-comment-body">
						<div id="dsq-comment-message-328" class="dsq-comment-message"><p>@Jonathan</p>
<p>It&#8217;s definitely a concern that the data programmability group will have a NIH attitude toward LINQ to SQL or not want to take it as far as it could go so that it does not outshine their own baby EF.  </p>
<p>I&#8217;d like to hope that is not true.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-329">
					<div id="dsq-comment-header-329" class="dsq-comment-header">
						<cite id="dsq-cite-329">
								<span id="dsq-author-user-329">Ian Cooper</span>
							</cite>
					</div>
					<div id="dsq-comment-body-329" class="dsq-comment-body">
						<div id="dsq-comment-message-329" class="dsq-comment-message"><p>@Jonathan</p>
<p>One thing that will help, I think, is if people are vocal that they like LINQ to SQL, use it, and want MS to take it forward. </p>
<p>In this sense the criticism of the EF has the danger that it will drown out any positive reaction toward LINQ to SQL. </p>
<p>The two are really parts of a whole. MS could deal with its critics by pitching and supporting LINQ to SQL as their ORM for OO approaches and the EF as their tool for data first approaches. Provided both were fully featured it might be easier than trying to opt for &#8216;one size fits all&#8217;. </p>
<p>Sadly I think this possibility has been overlooked in a drive to &#8216;fix&#8217; the EF to be everything to everyone. Perhaps it is time to step back from that goal and choose a different approach. Different tools for different schools of software development.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-330">
					<div id="dsq-comment-header-330" class="dsq-comment-header">
						<cite id="dsq-cite-330">
								<span id="dsq-author-user-330">David Carrillo</span>
							</cite>
					</div>
					<div id="dsq-comment-body-330" class="dsq-comment-body">
						<div id="dsq-comment-message-330" class="dsq-comment-message"><p>Excellent Work Ian, it would be a good idea post a page with an Index for all the parts of the serie</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-331">
					<div id="dsq-comment-header-331" class="dsq-comment-header">
						<cite id="dsq-cite-331">
	http://Bryan.ReynoldsLive.com							<span id="dsq-author-user-331">Bryan Reynolds</span>
							</cite>
					</div>
					<div id="dsq-comment-body-331" class="dsq-comment-body">
						<div id="dsq-comment-message-331" class="dsq-comment-message"><p>Greate Series!</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-332">
					<div id="dsq-comment-header-332" class="dsq-comment-header">
						<cite id="dsq-cite-332">
	http://colinjack.blogspot.com							<span id="dsq-author-user-332">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-332" class="dsq-comment-body">
						<div id="dsq-comment-message-332" class="dsq-comment-message"><p>Never used Linq To SQL for anything heavyweight but I can think of the things I&#8217;d like from an ORM to support DDD painlessly. Probably not going to get all of them but&#8230;</p>
<p>1) Value objects &#8211; Some way of removing the issues when your value object has its own table (and ID).<br />
2) No enforced associatins &#8211; I never want to create an association in the model just to support persistence.<br />
3) Aggregate Concurrency &#8211; Currently its difficult to enforce invariants for an entire aggregate, it would be really cool if you could (for a start) give each aggregate a share version (corase-grained locking approach).<br />
4) Unit of work &#8211; Hooks to automatically and cleanly validate an entire aggregate before persistence.<br />
5) Validation &#8211; Constructors taking arguments should never be an issue.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-333">
					<div id="dsq-comment-header-333" class="dsq-comment-header">
						<cite id="dsq-cite-333">
								<span id="dsq-author-user-333">Eric</span>
							</cite>
					</div>
					<div id="dsq-comment-body-333" class="dsq-comment-body">
						<div id="dsq-comment-message-333" class="dsq-comment-message"><p>Great series, good suggestions for further improvements.</p>
<p>Where do we voice our opinion on Linq2Sql in hopes that development is continued?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-334">
					<div id="dsq-comment-header-334" class="dsq-comment-header">
						<cite id="dsq-cite-334">
	http://stephenedwards.virtualituk.com/							<span id="dsq-author-user-334">Stephen Edwards</span>
							</cite>
					</div>
					<div id="dsq-comment-body-334" class="dsq-comment-body">
						<div id="dsq-comment-message-334" class="dsq-comment-message"><p>Please check out my article on dynamic LINQ to SQL queries:</p>
<p>stephenedwards.virtualituk.com/&#8230;/dynamic-linq-to-sql</p>
<p>and Composable LINQ to SQL queries:</p>
<p>stephenedwards.virtualituk.com/&#8230;/composable-linq-to-sql</p>
<p>I think you will find these resolve the problem of dynamic queries without resorting to using SQL.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-335">
					<div id="dsq-comment-header-335" class="dsq-comment-header">
						<cite id="dsq-cite-335">
	http://www.noesispedia.com							<span id="dsq-author-user-335">Pradeep Kumar Mishra</span>
							</cite>
					</div>
					<div id="dsq-comment-body-335" class="dsq-comment-body">
						<div id="dsq-comment-message-335" class="dsq-comment-message"><p>Would you allow me to convert your series in a pdf file and publish it freely to all readers.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-336">
					<div id="dsq-comment-header-336" class="dsq-comment-header">
						<cite id="dsq-cite-336">
								<span id="dsq-author-user-336">Wade D</span>
							</cite>
					</div>
					<div id="dsq-comment-body-336" class="dsq-comment-body">
						<div id="dsq-comment-message-336" class="dsq-comment-message"><p>Ian, </p>
<p>Why would it not be possible in a bigger application to make separate mapping files for Linq to Sql and then reference them by context? Is this not possible? </p>
<p>How many entities would there need to be for you to use NHibernate rather than Linq?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-337">
					<div id="dsq-comment-header-337" class="dsq-comment-header">
						<cite id="dsq-cite-337">
	http://www.trabalho.al.gov.br/Members/plone/							<span id="dsq-author-user-337">Orman</span>
							</cite>
					</div>
					<div id="dsq-comment-body-337" class="dsq-comment-body">
						<div id="dsq-comment-message-337" class="dsq-comment-message"><p>Hello. The crowd gives the leader new strength.<br />
I am from Saudi and learning to read in English, give true I wrote the following sentence: &#8220;Affordable airline tickets to maui, starting from.&#8221;</p>
<p> <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_cool.gif' alt='8)' class='wp-smiley' /> Thanks in advance. Orman.</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/iancooper/2008/07/01/architecting-linq-to-sql-part-10/ ';
	var disqus_identifier = '34 /blogs/ian_cooper/archive/2008/07/01/architecting-linq-to-sql-part-10.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'codebetteriancooper';
	var disqus_title = "Architecting Linq to SQL, part 10";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData â€” fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=34');
		});
					};
	var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/iancooper\/2008\/07\/01\/architecting-linq-to-sql-part-10\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.242 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-31 13:39:14 -->
<!-- super cache -->