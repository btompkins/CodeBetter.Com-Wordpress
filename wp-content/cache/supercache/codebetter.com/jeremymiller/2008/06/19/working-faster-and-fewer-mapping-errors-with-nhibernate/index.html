<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Working faster and fewer mapping errors with NHibernate | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/jeremymiller/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/jeremymiller/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Jeremy D. Miller' href='http://codebetter.com/jeremymiller/' />
<link rel='start' title='Bypass VSTS and get yourself a &quot;Poor Man&#8217;s IntelliJ&quot;' href='http://codebetter.com/jeremymiller/2005/04/12/bypass-vsts-and-get-yourself-a-poor-mans-intellij/' />
<link rel='prev' title='A bad argument' href='http://codebetter.com/jeremymiller/2008/06/16/a-bad-argument/' />
<link rel='next' title='It&#8217;s either puke worthy or elegant' href='http://codebetter.com/jeremymiller/2008/06/19/it-s-either-puke-worthy-or-elegant/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/jeremymiller/2008/06/19/working-faster-and-fewer-mapping-errors-with-nhibernate/' />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=548' />
<link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/theshadetreedeveloper/disqus.css?v=2.0" type="text/css" media="screen" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-548" class="post-548 post type-post status-publish format-standard hentry category-database-and-persistence category-structuremap">
					<h1 class="entry-title">Working faster and fewer mapping errors with NHibernate</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2008/06/19/working-faster-and-fewer-mapping-errors-with-nhibernate/" title="2:41 am" rel="bookmark"><span class="entry-date">June 19, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/jeremymiller/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>EDIT:&nbsp; To access the codebase below, the user name is &#8220;guest&#8221; and the password is blank.&nbsp; <a href="/blogs/jeremy.miller/archive/2008/02/01/access-to-the-storyteller-source-code.aspx">http://codebetter.com/blogs/jeremy.miller/archive/2008/02/01/access-to-the-storyteller-source-code.aspx</a>    </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Yesterday,<br />
            <a href="http://codebetter.com/blogs/david_laribee/archive/2008/06/17/test-your-nhibernate-mappings.aspx">David Laribee related some problems</a> he experienced with refactorings in his<br />
            domain model leading to some breaking problems with NHibernate mappings.&nbsp;<br />
            Specifically, the issues are:</p>
<ol>
<li>Changing the property names of a domain model can break the NHibernate mapping</li>
<li>Changing the database fields can break the NHibernate mappings</li>
</ol>
<p>
        David went on to bemoan the absence of a quick way to validate NHibernate<br />
        mappings.&nbsp; Ayende popped in with the suggestion that the presence of<br />
        integrated tests around the NHibernate usage would spot mapping problems.&nbsp;<br />
        Other folks mentioned that there&#8217;s a new ReSharper plugin to validate and<br />
        refactor NHibernate mappings.&nbsp; I&#8217;ll circle back to the refactoring plugin<br />
        in a while.&nbsp; </p>
<p>First I want to talk about quick ways to validate NHibernate<br />
        mappings.&nbsp; Ayende is right of course about the integrated tests against the<br />
        individual queries, but I&#8217;m going to suggest that that isn&#8217;t the most efficient<br />
        answer to the question of validating the mappings.&nbsp; The bigger integration tests will tell you that something is<br />
        wrong, but from experience they&#8217;ll be harder to diagnose because there is so<br />
        much more going on than simple property checking, and they provide a slow<br />
        feedback cycle because of how much stuff is going on.&nbsp; What would be nice<br />
        is a way to walk right up to a mapping and specify which properties on a class<br />
        are supposed to be persisted and how.</p>
<p>
        I thought I would come out of my blogging retirement and show an example of the<br />
        <a href="http://www.lostechies.com/blogs/chad_myers/archive/2008/06/02/a-new-start.aspx">Chad and Jeremy</a><br />
        approach to testing NHibernate mappings:</p>
<pre>

        [SetUp]
        public void SetUp()
        {
            // Ensure that the StructureMap configuration is bootstrapped
            // In our case, this includes everything we need setup to
            // execute NHibernate (mappings + ISessionFactory configuration)
            // This will be pretty application specific here
            Bootstrapper.RestartStructureMap();
        }

        [Test]
        public void SaveAndLoadCustomerContact()
        {
            new PersistenceSpecification&lt;CustomerContact&gt;()
                .CheckProperty(x =&gt; x.Name, "Frank")
                .CheckProperty(x =&gt; x.Email, "Email")
                .CheckProperty(x =&gt; x.Extension, 123)
                .CheckProperty(x =&gt; x.FaxNumber, "111-111-1111")
                .CheckProperty(x =&gt; x.TelephoneNumber, "222-222-2222")
                .CheckProperty(x =&gt; x.Title, "Mr.")
                .VerifyTheMappings();
        }
        </pre>
<p>
            All this test does is ensure that the 6 properties of the CustomerContact class<br />
            (Name, Email, Extension, FaxNumber, TelephoneNumber, Title) are mapped in<br />
            NHibernate.&nbsp; We have some other methods for checking to many and many to<br />
            one type relationships.&nbsp; </p>
<p>
            Behind the scenes the PersistenceSpecification&lt;T&gt; class:</p>
<ol>
<li>&nbsp;Creates a new instance of T</li>
<li>Uses the lambda expressions and suggested values in the calls to CheckProperty<br />
            to load values into the new instance of T</li>
<li>Grabs our IRepository out of StructureMap (of course), and saves the object</li>
<li>Grabs a second IRepository out of StructureMap</li>
<li>Fetches a second copy of the same T out of the second IRepository</li>
<li>Verifies that all of the specified properties in the specification were saved<br />
            and loaded.&nbsp; If any single property does not match between the first T and<br />
            the second T, the test will fail.</li>
</ol>
<p>Here&#8217;s the implementation of the PersistenceSpecification.VerifyTheMappings() method:</p>
<pre>        public void VerifyTheMappings()
        {
            // Create the initial copy
            var first = new T();

            // Set the "suggested" properties, including references
            // to other entities and possibly collections
            _allProperties.ForEach(p =&gt; p.SetValue(first));

            // Save the first copy
            _repository.Save(first);

            // Get a completely different IRepository
            var secondRepository = createRepository();

            // "Find" the same entity from the second IRepository
            var second = secondRepository.Find&lt;T&gt;(first.Id);

            // Validate that each specified property and value
            // made the round trip
            // It's a bit naive right now because it fails on the first failure
            _allProperties.ForEach(p =&gt; p.CheckValue(second));
        }
    </pre>
<p>The advantage of this testing is that it gives a (relatively) fast feedback cycle<br />
        focused specifically on the mappings.&nbsp; Tools that check the hbm.xml<br />
        mappings can only verify that what&#8217;s there is correctly formed.&nbsp; The<br />
        mapping tests above will catch missing mappings and desired behavior.&nbsp; At a<br />
        bare minimum, you really should have at least one smoke test in your CI build<br />
        that simply tries to create an NHibernate ISession object from your<br />
        configuration.&nbsp; Let that test run and possibly fail the build before wasting any time on integrated<br />
        tests that can&#8217;t succeed.</p>
<p>Now, the ReSharper plugin for NHibernate sounds pretty cool.&nbsp; I definitely<br />
        want little or no friction in renaming or adding properties in my Domain Model<br />
        classes (why I absolutely despise codegen your business object solutions).&nbsp;<br />
        We beat the refactoring problem by eliminating HBM.XML.&nbsp; As part of my New<br />
        Year&#8217;s resolution to eliminate my exposure to angle bracket hell, we&#8217;ve created<br />
        the beginning of a Fluent Interface API to express NHibernate mappings.&nbsp;<br />
        Using copious amounts of Generics (I guess .Net code just &#8220;wants&#8221; to have lots<br />
        of angle brackets) and lambda expressions, we&#8217;re able to express NHibernate<br />
        mappings in a completely compiler-checked, ReSharper-able way.&nbsp; Since we<br />
        switched to the FI, we&#8217;ve experienced far less trouble with mapping problems.&nbsp;<br />
        Here&#8217;s a couple of examples:</p>
<pre>    // Simple class with properties and a single "to-many" relationship
    public class CustomerContactMap : ClassMap&lt;CustomerContact&gt;
    {
        public CustomerContactMap()
        {
            Map(x =&gt; x.Name);
            Map(x =&gt; x.Email);
            Map(x =&gt; x.Extension);
            Map(x =&gt; x.FaxNumber);
            Map(x =&gt; x.TelephoneNumber);
            Map(x =&gt; x.Title);
            References(x =&gt; x.Customer);
        }
    }

    // Class with a "Component"
    public class CustomerDeliveryAddressMap : ClassMap&lt;CustomerDeliveryAddress&gt;
    {
        public CustomerDeliveryAddressMap()
        {
            Map(x =&gt; x.Name);
            References(x =&gt; x.Customer);
            Component&lt;Address&gt;(x =&gt; x.Address, m =&gt;
               {
                   m.Map(x =&gt; x.AddressLine1);
                   m.Map(x =&gt; x.AddressLine2);
                   m.Map(x =&gt; x.AddressLine3);
                   m.Map(x =&gt; x.CityName);
                   m.Map(x =&gt; x.CountryName);
                   m.References(x =&gt; x.State);
                   m.References(x =&gt; x.PostalCode);
               });
        }
    }

    // Class with some "has many" relationships
    public class CustomerMap : ClassMap&lt;Customer&gt;
    {
        public CustomerMap()
        {
            HasMany&lt;CustomerContact&gt;(x =&gt; x.Contacts).CascadeAll();
            HasMany&lt;CustomerJob&gt;(x =&gt; x.Jobs).CascadeAll();
            HasMany&lt;CustomerDeliveryAddress&gt;(x =&gt; x.DeliveryAddresses).CascadeAll();

            Map(x =&gt; x.Name);
            Map(x =&gt; x.LookupName);
            Map(x =&gt; x.IsGeneric);
            Map(x =&gt; x.RequiresPurchaseOrder);
            Map(x =&gt; x.Retired);
        }
    }
</pre>
<p>With this approach, and backed up with the little PersistenceSpecification tests,<br />
        we can happily change class names and property names with relative confidence.&nbsp;<br />
        Besides, the simple usage of Intellisense plus compiler safe code cuts down on<br />
        the number of mapping errors.&nbsp; We&#8217;re more or less greenfield at the moment, so we can get away with generating<br />
        the database from our NHibernate mappings on demand, but you can specify<br />
        specific table and column names in the language above for brownfield scenarios.&nbsp;<br />
        I&#8217;d very confidently say that we&#8217;re faster with this approach than we would be<br />
        with HBM.XML.</p>
<p>If you&#8217;re interested, the complete code for everything I talked about is in the ShadeTree.DomainModel project in the StoryTeller codebase (and effectively released under the Apache 2.0 license).  The code is at<br />
        <a href="http://storyteller.tigris.org/svn/storyteller/trunk">http://storyteller.tigris.org/svn/storyteller/trunk/</a>.  Use the src\ShadeTree.sln for this stuff.  I don&#8217;t know that we&#8217;ll ever get around to a fully supported release of this stuff, but I wanted to throw out the idea anyway.  At this point I&#8217;m only extending this code when we need something new for our current project.&nbsp;<br />
        A lot of the advantages of this approach are tied to application specific<br />
        conventions and also by tieing the forward generation of the database structure<br />
        to validation rules.</p>
<p>&nbsp;</p>
<h4>As for IoC container testing&#8230; </h4>
<p>I&#8217;ll overlook the fact that my friend David also implicitly implied that an<br />
        IoC container not named StructureMap was the de facto standard.<br />
        <a href="http://weblogs.asp.net/bsimser/archive/2008/06/04/the-first-spec-you-should-write-when-using-castle.aspx">Bil Simser posted a little snippet of code to smoke test the configuration</a> of one of those other IoC containers.&nbsp; StructureMap has had quite a bit<br />
        of diagnostic support since version 0.85 (StructureMapDoctor.exe), but StructureMap 2.5 will add the<br />
        ability to do this:</p>
<pre>        [SetUp]
        public void SmokeTestStructureMapConfiguration()
        {
            ObjectFactory.AssertConfigurationIsValid();
        }
        </pre>
<p>This will attempt to build every possible configured instance in StructureMap, perform any designated<br />
            <a href="http://codebetter.com/blogs/jeremy.miller/archive/2006/04/06/142431.aspx">environment tests</a> (like trying to connect to a database), and generate a <b>complete</b> report of all errors encountered by StructureMap.&nbsp;<br />
            If you&#8217;re aggressive about managing all external services and configuration into your IoC container, this diagnostic<br />
            test can go a long way towards detecting environmental and configuration errors of a code installation.</p>
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/database-and-persistence/" title="View all posts in Database and Persistence" rel="category tag">Database and Persistence</a>, <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2008/06/19/working-faster-and-fewer-mapping-errors-with-nhibernate/" title="Permalink to Working faster and fewer mapping errors with NHibernate" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2008/06/19/working-faster-and-fewer-mapping-errors-with-nhibernate/feed/" title="Comments RSS to Working faster and fewer mapping errors with NHibernate" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-548 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2008/06/16/a-bad-argument/" rel="prev"><span class="meta-nav">&larr;</span> A bad argument</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2008/06/19/it-s-either-puke-worthy-or-elegant/" rel="next">It&#8217;s either puke worthy or elegant <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-4085">
					<div id="dsq-comment-header-4085" class="dsq-comment-header">
						<cite id="dsq-cite-4085">
	http://www.bluespire.com/blogs							<span id="dsq-author-user-4085">Rob</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4085" class="dsq-comment-body">
						<div id="dsq-comment-message-4085" class="dsq-comment-message"><p>Awesome!  I just started working on a fluent interface for NHibernate as well.  The result looks almost identical to what you&#8217;ve got, which is cool.  Here&#8217;s a sample of my DSL:</p>
<p>public class TodoMapping : ClassMapping<todo><br />
    {<br />
        public override void Map()<br />
        {<br />
            id(c => c.ID).Generator.Assigned();</p>
<p>            property(c => c.Description);<br />
            property(c => c.CreatedOn);<br />
            property(c => c.CompletedOn);</p>
<p>            many_to_one(c => c.Owner);<br />
        }<br />
    }</todo></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4086">
					<div id="dsq-comment-header-4086" class="dsq-comment-header">
						<cite id="dsq-cite-4086">
	http://kohari.org/							<span id="dsq-author-user-4086">Nate Kohari</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4086" class="dsq-comment-body">
						<div id="dsq-comment-message-4086" class="dsq-comment-message"><p>I love it! The primary reason I use Castle&#8217;s ActiveRecord is for the attribute-based mapping, because I can&#8217;t stand XML. I&#8217;ve tinkered with the idea of a fluent NHibernate mapping interface, but haven&#8217;t actually implemented one.</p>
<p>You should really consider making that into a full-fledged open-source project. If you&#8217;re sure you&#8217;re not interested, let me know, and I might take what you&#8217;ve done so far and run with it&#8230; <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4087">
					<div id="dsq-comment-header-4087" class="dsq-comment-header">
						<cite id="dsq-cite-4087">
								<span id="dsq-author-user-4087">Mike</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4087" class="dsq-comment-body">
						<div id="dsq-comment-message-4087" class="dsq-comment-message"><p>Jeremy,</p>
<p>Good work, very seet&#8230;</p>
<p>What do you think about being able to generate the database by extending the Map to support the DbType such as nvarchar(50) NOT NULL?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4088">
					<div id="dsq-comment-header-4088" class="dsq-comment-header">
						<cite id="dsq-cite-4088">
	http://musingmarc.blogspot.com							<span id="dsq-author-user-4088">Marc Brooks</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4088" class="dsq-comment-body">
						<div id="dsq-comment-message-4088" class="dsq-comment-message"><p>That SVN repository is asking for credentials. Got any guest ones?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4089">
					<div id="dsq-comment-header-4089" class="dsq-comment-header">
						<cite id="dsq-cite-4089">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4089">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4089" class="dsq-comment-body">
						<div id="dsq-comment-message-4089" class="dsq-comment-message"><p>@Marc,</p>
<p>UID=guest<br />
PWD is blank</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4090">
					<div id="dsq-comment-header-4090" class="dsq-comment-header">
						<cite id="dsq-cite-4090">
	http://colinjack.blogspot.com							<span id="dsq-author-user-4090">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4090" class="dsq-comment-body">
						<div id="dsq-comment-message-4090" class="dsq-comment-message"><p>First off, dunno why but although they initially showed up fine the code snippets now won&#8217;t display properly in Firefox or IE. In FF each code snippet acts like it is just one line and it has <br /> tags in it, not sure why.</p>
<p>* Mapping Verification *<br />
On the mappings verification stuff, nice. </p>
<p>Our approach is a little different. You inherit from an abstract AggregateRootPersistenceTestBase and have to override a few methods such as CreateAggregateRoot, ModifyAggregateRoot and CreateRepository. The base class does everything else so for free you get create/update and concurrency tests which works nicely and isn&#8217;t that different. </p>
<p>One thing I think that I don&#8217;t get is the way you use the builder. Surely the specific values don&#8217;t matter, for example it doesn&#8217;t matter you used 123 as the extension rather than 456 (though a separate test that used null might be required). If I&#8217;m right and the values usually don&#8217;t matter then I actually think seeing them in the tests is something I&#8217;d usually avoid and I&#8217;d use an object mother. We do this anyway because the object mothers can be useful in other tests, so for example we might want to automatically tests cascading or cross-aggregate mappings.</p>
<p>On the VerifyTheMappings, we do something similar as we just have an ObjectHierarchyComparer that trundles down the entire hierarchy below an object and verifies ALL of the properties match the originals (other than ones you specifically said to ignore). </p>
<p>In your case what does CheckValue do though and are the two repositories just working with different units of work?</p>
<p>* Fluent Interface *<br />
Looking forward to giving it a shot but for me the XML approach with NHibernate is pretty good.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4091">
					<div id="dsq-comment-header-4091" class="dsq-comment-header">
						<cite id="dsq-cite-4091">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4091">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4091" class="dsq-comment-body">
						<div id="dsq-comment-message-4091" class="dsq-comment-message"><p>@Colin,</p>
<p>I fixed the formatting.  CS decided to &#8220;help&#8221; me format the code.  I just had some nasty flashbacks to coding ASP Classic with Frontpage 98.</p>
<p>&#8220;One thing I think that I don&#8217;t get is the way you use the builder. Surely the specific values don&#8217;t matter, for example it doesn&#8217;t matter you used 123 as the extension rather than 456&#8243;</p>
<p>I just need some sort of unique value to set the properties.  I tried once upon a time to create a data binding tester that would just use made up values behind the scenes to set and check.  That was such a PITA that I just made the &#8220;suggested&#8221; values explicit.  Yes, the ObjectMother approach would largely eliminate the need for this, but is that really a big deal?</p>
<p>Using two repositories was just a way to make sure we were pulling the persisted data back out of the database.</p>
<p>There&#8217;s more to the FI than a one to one replacement to the HBM.XML.  We&#8217;re also sinking in some conventions to create &#8220;auto-mapping.&#8221;  At a start, you&#8217;ll notice that there isn&#8217;t any mention of identity columns in the sample above because that&#8217;s done behind the scenes by the mapping language.</p>
<p>You go ahead and do all that copy and pasting of type names and property names to the xml.  I&#8217;ll happily use Intellisense;)</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4092">
					<div id="dsq-comment-header-4092" class="dsq-comment-header">
						<cite id="dsq-cite-4092">
	http://colinjack.blogspot.com							<span id="dsq-author-user-4092">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4092" class="dsq-comment-body">
						<div id="dsq-comment-message-4092" class="dsq-comment-message"><p>&#8220;Using two repositories was just a way to make sure we were pulling the persisted data back out of the database.&#8221;</p>
<p>Sure, I just presumed you&#8217;re two repositories must be using different ISessions (unless your clearing the session somewhere). Just wondered, thought something interesting might be happening.</p>
<p>&#8220;Yes, the ObjectMother approach would largely eliminate the need for this, but is that really a big deal?&#8221;</p>
<p>I think for us it would be, but I guess it depends. Seeing the code to populate an entire aggregate (for the tests that do that) inside the method that performs the test is going to get kinda long. Plus that code isn&#8217;t reusable. Shouldn&#8217;t have brought it up though, not a big thing.</p>
<p>&#8220;You go ahead and do all that copy and pasting of type names and property names to the xml.  I&#8217;ll happily use Intellisense;)&#8221;</p>
<p>Maybe you&#8217;re right, will definitely give it a shot anyway.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4093">
					<div id="dsq-comment-header-4093" class="dsq-comment-header">
						<cite id="dsq-cite-4093">
	http://colinjack.blogspot.com							<span id="dsq-author-user-4093">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4093" class="dsq-comment-body">
						<div id="dsq-comment-message-4093" class="dsq-comment-message"><p>Actually one other thing I noticed, you new up the aggregate using &#8220;new T()&#8221;. Does this mean your prefer all your aggregate roots to have default constructors or is it just for that example?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4094">
					<div id="dsq-comment-header-4094" class="dsq-comment-header">
						<cite id="dsq-cite-4094">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4094">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4094" class="dsq-comment-body">
						<div id="dsq-comment-message-4094" class="dsq-comment-message"><p>@Colin,</p>
<p>Someday you and I are going to have a long talk about fitting a mouthful of DDD jargon into every sentence;-)</p>
<p>Yes, I&#8217;m assuming a default constructor on each and every domain model object.  It makes a lot of testing automation scenarios easier.  Easier testing == productivity.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4095">
					<div id="dsq-comment-header-4095" class="dsq-comment-header">
						<cite id="dsq-cite-4095">
	http://colinjack.blogspot.com							<span id="dsq-author-user-4095">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4095" class="dsq-comment-body">
						<div id="dsq-comment-message-4095" class="dsq-comment-message"><p>@Jeremy<br />
The only other pattern I mentioned was aggregate though and if I didn&#8217;t bring it up my DDD badge would be taken off me.</p>
<p>Interesting on the default constructors, my first focus is on getting the correct model and I often find default constructors don&#8217;t cut it. One of the guys I worked with&#8230;oh hold on I thought ahead to what I was going to say and I realized it was definitely gonna go into DDD jargon land so I&#8217;ll stop there <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4096">
					<div id="dsq-comment-header-4096" class="dsq-comment-header">
						<cite id="dsq-cite-4096">
								<span id="dsq-author-user-4096">Sheraz</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4096" class="dsq-comment-body">
						<div id="dsq-comment-message-4096" class="dsq-comment-message"><p>@Colin,<br />
&#8220;Interesting on the default constructors, my first focus is on getting the correct model and I often find default constructors don&#8217;t cut it.&#8221;<br />
 Why so????? Why not use Factories if you want to inject values in your model??? If I recall Jimmy Nilson also discuss this approach in his DDD book.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4097">
					<div id="dsq-comment-header-4097" class="dsq-comment-header">
						<cite id="dsq-cite-4097">
								<span id="dsq-author-user-4097">Brian Chiasson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4097" class="dsq-comment-body">
						<div id="dsq-comment-message-4097" class="dsq-comment-message"><p>Aside:</p>
<p>I checked out the ShadeTree solution from the above repository, but the code does not compile (no check out and go). It is missing some NHibernate references that are not in the StoryTeller repository. I downloaded the latest builds and the latest releases from NHibernate, but they do not contain the NHibernate.Linq library &#8211; did Ayende write this?</p>
<p>Just wanted to let you know.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4098">
					<div id="dsq-comment-header-4098" class="dsq-comment-header">
						<cite id="dsq-cite-4098">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4098">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4098" class="dsq-comment-body">
						<div id="dsq-comment-message-4098" class="dsq-comment-message"><p>@Brian,</p>
<p>Fixed, and thanks for letting me know.</p>
<p>And of course Ayende wrote Linq for NHibernate.  He&#8217;s a machine.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4099">
					<div id="dsq-comment-header-4099" class="dsq-comment-header">
						<cite id="dsq-cite-4099">
								<span id="dsq-author-user-4099">Brian Chiasson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4099" class="dsq-comment-body">
						<div id="dsq-comment-message-4099" class="dsq-comment-message"><p>@Jeremy,</p>
<p>The dependency on NHibernate is fixed, but now it is complaining about the ShadeTree.WinFormsTesting reference. It looks like the reference in the ShadeTree.Testing library is relying on StoryTeller being compiled ahead of time. It&#8217;s probably worth adding the ShadeTree.WinFormsTesting project to the ShadeTree solution.</p>
<p>(FYI &#8211; I am using the VS 2008 solutions.)</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4100">
					<div id="dsq-comment-header-4100" class="dsq-comment-header">
						<cite id="dsq-cite-4100">
	http://colinjack.blogspot.com							<span id="dsq-author-user-4100">Colin Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4100" class="dsq-comment-body">
						<div id="dsq-comment-message-4100" class="dsq-comment-message"><p>@Sheraz<br />
We do that too, sometimes they are also overkill (also coveed in the book). Even if you do use a factory its quite nice to see absolutely required (and unchanging) dependencies on the constructor.</p>
<p>For example an Account may need to be told what kind of Account it is by being passed an AccountKind (assuming thats the design we have). We could use a factory, but we may choose to pass that value to the constructor as its not ever valid for it to be null or for it to change.</p>
<p>Also one question mark does the job <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>@Jeremy<br />
Tried using ObjectFactory.AssertConfigurationIsValid() when I knew I had invalid mappings. It did indeed cause an exception to be thrown:</p>
<p>&#8220;No Default Instance defined for PluginFamily&#8230;&#8221;</p>
<p>Unfortunatley after travelling through 3 other catch blocks it got to a catch blow ValidationBuildSession which appeared to swallow the exception, the code carried on and in the next iteration of a foreach in PipelineGraph.Visits you get an InvalidOperationException because &#8220;Collection was modified; enumeration operation may not execute.&#8221;</p>
<p>We&#8217;re using 2.5 (downloaded from SVN this morning) and although this doesn&#8217;t really matter I thought I should report it.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4101">
					<div id="dsq-comment-header-4101" class="dsq-comment-header">
						<cite id="dsq-cite-4101">
	http://fgheysels.blogspot.com							<span id="dsq-author-user-4101">Frederik Gheysels</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4101" class="dsq-comment-body">
						<div id="dsq-comment-message-4101" class="dsq-comment-message"><p>Hi,</p>
<p>This might be a comment that is a bit late, but anyway &#8230;</p>
<p>This fluent interface to NHibernate seems really cool and I wonder whether it would be possible to inherit &#8216;Classmapping&#8217; types ?</p>
<p>For instance, I have an EntityBase class which has some properties that all my Entities have.  </p>
<p>So, my entities inherit from EntityBase.<br />
Right now, I&#8217;m using XML files to describe my mappings, and it is a bit tedious if I have to map the properties that have been declared in my EntityBase class every time again in each hbm.xml file.<br />
So, it would maybe be cool if I could create a ClassMapping type for my EntityBase class, which would then contain mapping information for these base-properties.<br />
Then, I could have a ClassMapping which inherits the EntityBaseClassMapping, so that I do not have to define mapping information for those common properties.</p>
<p>Offcourse, this would mean that, in the EntityBaseClassMapping one cannot define a &#8216;table&#8217; to where the class must be mapped onto, and, this also means that my common properties (declared in EntityBase) should always have to be mapped to certain columns.  I mean: by defining this mapping in the Base-mapping, it requires that all those columns in the DB have the same name accross all tables.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4102">
					<div id="dsq-comment-header-4102" class="dsq-comment-header">
						<cite id="dsq-cite-4102">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4102">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4102" class="dsq-comment-body">
						<div id="dsq-comment-message-4102" class="dsq-comment-message"><p>@Frederik,</p>
<p>The short answer is yes.  We do exactly what you describe in our project with the progenitor of Fluent NHibernate</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4103">
					<div id="dsq-comment-header-4103" class="dsq-comment-header">
						<cite id="dsq-cite-4103">
	http://bensdeveloperblog.blogspot.com							<span id="dsq-author-user-4103">Ben</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4103" class="dsq-comment-body">
						<div id="dsq-comment-message-4103" class="dsq-comment-message"><p>This is great! Old article, but very useful.</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/jeremymiller/2008/06/19/working-faster-and-fewer-mapping-errors-with-nhibernate/ ';
	var disqus_identifier = '548 /blogs/jeremy.miller/archive/2008/06/18/working-faster-and-fewer-mapping-errors-with-nhibernate.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'theshadetreedeveloper';
	var disqus_title = "Working faster and fewer mapping errors with NHibernate";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData â€” fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=548');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/jeremymiller/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2008\/06\/19\/working-faster-and-fewer-mapping-errors-with-nhibernate\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://weblogs.asp.net/thangchung' rel='external nofollow' class='url'>thangchung</a> on <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/#comment-6764">&quot;BuildUp&quot; Existing Objects with StructureMap</a></li><li class="recentcomments">Steven Gentile on <a href="http://codebetter.com/jeremymiller/2011/01/23/if-you-are-using-structuremap-with-mvc3-please-read-this/#comment-6763">If you are using StructureMap with MVC3, please read this:</a></li><li class="recentcomments">jabits on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6761">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">Michael Meadows on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6754">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">InspiringCode on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6753">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.288 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 03:07:27 -->
<!-- super cache -->