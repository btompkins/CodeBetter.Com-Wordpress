<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>A Gentle Quickstart for StructureMap 2.5 | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Agile .Net Developer Opportunity in Atlanta' href='http://codebetter.com/jeremymiller/2008/11/30/agile-net-developer-opportunity-in-atlanta/' />
<link rel='next' title='Question of the Day &#8212; What&#8217;s Worse?' href='http://codebetter.com/jeremymiller/2008/12/03/question-of-the-day-what-s-worse/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=624' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,149] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2008/12/01/a-gentle-quickstart-for-structuremap-2-5/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-624" class="post-624 post type-post status-publish format-standard hentry category-structuremap">
					<h1 class="entry-title">A Gentle Quickstart for StructureMap 2.5</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2008/12/01/a-gentle-quickstart-for-structuremap-2-5/" title="3:52 am" rel="bookmark"><span class="entry-date">December 1, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>The most general question I get with StructureMap is “how do I get started?”&nbsp; Personally, I’d recommend that you first get comfortable <a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/06/29/some-concepts-to-know-first.aspx">with some concepts</a> and the basic patterns of <a href="http://codebetter.com/blogs/jeremy.miller/archive/2005/10/06/132825.aspx">Dependency Injection</a> and <a href="http://codebetter.com/blogs/jeremy.miller/archive/2005/09/20/132290.aspx">Inversion of Control first</a>.&nbsp; Assuming that you’re already familiar with those concepts, or you’d really rather skip the pedantry and jump right into concrete code, the first thing to do is go download StructureMap and jump into usage (then come back to the patterns and pedantry).&nbsp; </p>
<h4><strong>Some Salient Facts:</strong></h4>
<ul>
<li>The latest release is 2.5.0.0, available for download on SourceForge at <a href="http://sourceforge.net/projects/structuremap" title="http://sourceforge.net/projects/structuremap">http://sourceforge.net/projects/structuremap</a>
<ul>
<li>The only DLL that you need for doing basic Service Locator and/or Dependency Injection is the StructureMap.DLL file. </li>
</ul>
</li>
<li>There is a google group for StructureMap support at <a href="http://groups.google.com/group/structuremap-users?hl=en" title="http://groups.google.com/group/structuremap-users?hl=en">http://groups.google.com/group/structuremap-users?hl=en</a> </li>
<li>StructureMap is released under the Apache 2.0 license, meaning that you can use it in any application or even modify the source in any way you see fit without restriction. </li>
<li>StructureMap is actually the oldest, original IoC tool for .Net with the first production release coming in June of 2004 </li>
<li>I’m no longer the only person maintaining StructureMap </li>
<li>The source code is accessible <a href="https://structuremap.svn.sourceforge.net/svnroot/structuremap/trunk">here via Subversion</a> in case you’re curious.&nbsp; No credentials are required to access the source code. </li>
<li>Right now, StructureMap 2.5 will run on .Net 3.5 only.&nbsp; I will most likely NOT be backporting the new version to 2.0 because of extensive usage of 3.5 features like Expressions </li>
<li>I swear that StructureMap 2.5 will run in medium trust on .Net 3.5 – but please post any problems that you do find with medium trust. </li>
<li>A 2.5.1 release is planned for the first week of December with bug fixes, a few new little features, Mono support, and a Silverlight-ready version (it’ll be a subset of the main library). </li>
</ul>
<p>&nbsp;</p>
<h4><strong>The Simplest Possible Usage of StructureMap</strong></h4>
<p>Your interaction with StructureMap is going to mostly consist of two activities:</p>
<ol>
<li>Asking StructureMap for an instance of a service or dependency (the easy part) </li>
<li>Registering “what” and “how” StructureMap should build or find those requested services (the tedious part, but it’s gotten much better over the years) </li>
</ol>
<p>In our system we use a service called “IValidator” to exercise validation rules on our domain model objects (I talked about the approach <a href="http://codebetter.com/blogs/jeremy.miller/archive/2007/06/13/build-your-own-cab-part-9-domain-centric-validation-with-the-notification-pattern.aspx">here</a>).&nbsp; By default, we want any consumer of the IValidator interface to use the concrete class named Validator.&nbsp; Since we use StructureMap for resolving dependencies and services, we need to first tell StructureMap to use Validator anytime somebody asks for an IValidator.&nbsp; You configure StructureMap by <a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/25/initializing-and-configuring-a-structuremap-container.aspx">initializing the container</a> with this code below:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: blue">class</span> <span>ContainerBootstrapper</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: blue">void</span> BootstrapStructureMap()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// Initialize the static ObjectFactory container</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>ObjectFactory</span>.Initialize(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IValidator</span>&gt;().TheDefaultIsConcreteType&lt;<span>Validator</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>Now that that code is called somewhere in the application initialization, we can get an IValidator object from StructureMap like in this sample code by calling ObjectFactory.GetInstance&lt;IValidator&gt;():</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span>ClassThatGetsAnIValidator</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> SaveObject(<span style="color: blue">object</span> objectToSave)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// Go get the proper IValidator from StructureMap</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><span>IValidator</span> validator = <span>ObjectFactory</span>.GetInstance&lt;<span>IValidator</span>&gt;();</strong></p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> notification = validator.Validate(objectToSave);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">if</span> (notification.IsValid())</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// save the object</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>That’s it, your first usage of StructureMap.&nbsp; No messy Xml configuration, no attributes scattered through your code, just a couple lines of bootstrapping code.&nbsp;&nbsp; Of course, if that’s all StructureMap did, it wouldn’t be worth your time to download it.&nbsp; Let’s look at a bit more advanced example.</p>
<p>&nbsp;</p>
<h4><strong></strong></h4>
<h4><strong>Primitive Arguments</strong></h4>
<p>I actually like to <a href="http://structuremap.sourceforge.net/ConfigurationManagement.htm">use StructureMap as a generic configuration tool</a> (which was actually its original purpose).&nbsp; Let’s say you’re moving to the data access code.&nbsp; You come up with some sort of <a href="http://martinfowler.com/eaaCatalog/repository.html">Repository</a> pattern class like this:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span> <span>IRepository</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> Save(<span style="color: blue">object</span> target);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span>Repository</span> : <span>IRepository</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> Repository(<span style="color: blue">string</span> connectionString)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// set up the persistence infrastructure using the connectionString</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// from the constructor argument</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> Save(<span style="color: blue">object</span> target)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// save the object</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p><strong></strong></p>
<p>The Repository class needs to be supplied with the “connectionString” in its constructor.&nbsp; No problem, just set up the value of the constructor argument in the bootstrapping:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>ObjectFactory</span>.Initialize(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .WithCtorArg(<span>&#8220;connectionString&#8221;</span>).EqualTo(<span>&#8220;a connection string&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// Or, since it&#8217;s smelly to embed a connection string directly into code,</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// we could pull the connection string from the AppSettings</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .WithCtorArg(<span>&#8220;connectionString&#8221;</span>).EqualToAppSetting(<span>&#8220;CONNECTION-STRING&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
</div>
<p>With the bootstrapping out of the way, when we ask StructureMap for an IRepository in this code:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> repository = <span>ObjectFactory</span>.GetInstance&lt;<span>IRepository</span>&gt;();</p>
</div>
<p>StructureMap will look up the “CONNECTION-STRING” value in the AppSettings portion of the App.config file, and use that string value to invoke the constructor function of the Repository class, then hand back that new Repository object.&nbsp; Woo hoo.&nbsp; We can build an object that doesn’t depend on anything, and we can build an object that needs some strings in its constructor function.&nbsp; How about objects that need other non-primitive objects?</p>
<p>&nbsp;</p>
<h4><strong>Auto wiring</strong></h4>
<p>In the code samples above, I used StructureMap as a Service Locator in the ClassThatGetsAnIValidator.SaveObject() method.&nbsp; Typically, you’ll try to minimize the number of service locator usages in your system to a bare minimum (I found 8 in my current system, but I think I’ll find a way to prune half of those later).&nbsp; Most of the value of an IoC tool is in automatically doing Dependency Injection.&nbsp; I’m working with the new MVC framework at the moment, so it’s a handy sample.&nbsp; Let’s say that we have a Controller class for a typical CRUD screen.&nbsp; That Controller class will generally need to interact with both validation services and the data access functionality of the Repository.&nbsp; Here’s a representative Controller class:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span>SomeScreenController</span> : <span>IController</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">readonly</span> <span>IRepository</span> _repository;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">readonly</span> <span>IValidator</span> _validator;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// SomeScreenController depends on both IRepository and IValidator</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> SomeScreenController(<span>IRepository</span> repository, <span>IValidator</span> validator)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _repository = repository;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _validator = validator;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>So let’s get StructureMap set up for this SomeScreenController class:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>ObjectFactory</span>.Initialize(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// Set up the IValidator</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IValidator</span>&gt;().TheDefaultIsConcreteType&lt;<span>Validator</span>&gt;();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// Set up the IRepository</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .WithCtorArg(<span>&#8220;connectionString&#8221;</span>).EqualToAppSetting(<span>&#8220;CONNECTION-STRING&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
</div>
<p>You’ll notice that we didn’t make any explicit configuration for the SomeScreenController class, but yet we could now call:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> controller = <span>ObjectFactory</span>.GetInstance&lt;<span>SomeScreenController</span>&gt;();</p>
</div>
<p>and StructureMap will happily create a new instance of the SomeScreenController class by invoking its constructor and passing in a new Validator object and a new Repository object created with the connection string from the App.config file.&nbsp; We didn’t need to tell StructureMap how to construct SomeScreenController because: </p>
<ul>
<li>StructureMap can look at the constructor function of SomeScreenController and see that it depends on IValidator and IRepository </li>
<li>StructureMap “knows” about the default way to create and return an IValidator and an IRepository </li>
</ul>
<p>This feature is known as “auto wiring,” and all the mainstream IoC containers support this to some extent or another.&nbsp; </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4><strong></strong></h4>
<h4><strong>What to do when things go wrong?</strong></h4>
<p>StructureMap, and any other IoC tool for that matter, is configuration intensive – which means that their will be problems in that configuration.&nbsp; We’re all moving to more convention based type registration – which means that more stuff is happening off stage and out of your sight, making debugging the configuration even trickier.&nbsp; Not to worry (too much), StructureMap has some diagnostic abilities to help you solve configuration problems.&nbsp; The quickest tool is to ask a Container object or ObjectFactory (which is just a static wrapper around a Container) “what do you have?” with the Container.WhatDoIHave() method like this below:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> container = <span style="color: blue">new</span> <span>Container</span>(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IValidator</span>&gt;().TheDefaultIsConcreteType&lt;<span>Validator</span>&gt;();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .WithCtorArg(<span>&#8220;connectionString&#8221;</span>).EqualToAppSetting(<span>&#8220;CONNECTION-STRING&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>Debug</span>.WriteLine(container.WhatDoIHave());</p>
</div>
<p>Which would spit out this text into your output window:</p>
<pre>===========================================================================================================
Configuration Sources:

0)   Registry:  StructureMap.ConfigurationExpression,StructureMap


===============================================================================================================================================================================================================================================================================================================================
PluginType                                                                                                                Name                                                                                                 Description                                                                                     
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ShadeTree.Validation.IValidator, ShadeTree, Version=0.8.0.0, Culture=neutral, PublicKeyToken=null                         ShadeTree.Validation.Validator, ShadeTree, Version=0.8.0.0, Culture=neutral, PublicKeyToken=null     ShadeTree.Validation.Validator, ShadeTree, Version=0.8.0.0, Culture=neutral, PublicKeyToken=null
Built by:  StructureMap.Pipeline.BuildPolicy

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
StructureMapSample.IRepository, DovetailCRM.IntegrationTesting, Version=0.9.0.0, Culture=neutral, PublicKeyToken=null     27fdf13e-8adc-4f8f-9f53-cf7b35ada80c                                                                 Smart Instance for StructureMapSample.Repository                                                
Built by:  StructureMap.Pipeline.BuildPolicy

===============================================================================================================================================================================================================================================================================================================================</pre>
<p>which is admittedly, not the prettiest looking thing in the world.</p>
<p>You can also “assert” that the configuration for a Container or ObjectFactory is complete by calling the Container.AssertConfigurationIsValid() method like this sample below:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> container = <span style="color: blue">new</span> <span>Container</span>(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IValidator</span>&gt;().TheDefaultIsConcreteType&lt;<span>Validator</span>&gt;();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .WithCtorArg(<span>&#8220;connectionString&#8221;</span>).EqualToAppSetting(<span>&#8220;CONNECTION-STRING&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container.AssertConfigurationIsValid();</p>
</div>
<p>This method will analyze every thing in the Container configuration and:</p>
<ol>
<li>Look for any missing constructor or mandatory setter arguments </li>
<li>Look for any unknown dependency types </li>
<li>Look for any errors in the Xml configuration (if you’re using Xml configuration) </li>
<li>Try to build each and every type and named instance in the configuration – i.e. this is a complete, but relatively expensive operation </li>
<li>Run any environment tests configured with the [ValidationMethod] attribute (<a href="http://codebetter.com/blogs/jeremy.miller/archive/2006/04/06/142431.aspx">a feature that is unique to StructureMap as far as I know</a>) </li>
</ol>
<p>The previous sample is a valid configuration, but let’s look at an invalid configuration.&nbsp; Let’s omit the configuration of the “connectionString” constructor argument for the Repository class and try AssertConfigurationIsValid():</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;overflow: scroll;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span>Test</span>]</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> lets_see_if_the_container_is_valid()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> container = <span style="color: blue">new</span> <span>Container</span>(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.ForRequestedType&lt;<span>IRepository</span>&gt;().TheDefault.Is.OfConcreteType&lt;<span>Repository</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">//.WithCtorArg(&#8220;connectionString&#8221;).EqualToAppSetting(&#8220;CONNECTION-STRING&#8221;);</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container.AssertConfigurationIsValid();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>When I run the unit test above, this is part of the output:</p>
<p>&nbsp;</p>
<pre>Build Error on Instance '73b7f21b-bbfd-462c-854d-5b2a2f98ba50' (Smart Instance for StructureMapSample.Repository)
    for PluginType StructureMapSample.IRepository, DovetailCRM.IntegrationTesting, Version=0.9.0.0, Culture=neutral, PublicKeyToken=null

StructureMap.StructureMapException: StructureMap Exception Code:  205
Missing requested Instance property "connectionString" for InstanceKey "73b7f21b-bbfd-462c-854d-5b2a2f98ba50"</pre>
<p>&nbsp;</p>
<p>which again, isn’t the prettiest thing in the world, but it does tell me that the “connectionString” argument is missing for the Repository class.&nbsp; After seeing this output, I think that this output and error wording will get improved in an upcoming release.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4><strong>Why are you still rolling your own IoC tool?</strong></h4>
<p>Something that bothers me pretty is when I see bloggers frequently say that “StructureMap/Windsor/Ninject/Unity/Spring.Net/Autofac” is way too heavy for my project, so I just rolled my own.&nbsp; Why?&nbsp; Why would you do that?&nbsp; Bootstrapping StructureMap for the very simplest cases, i.e. the only cases you can handle with the “roll your own IoC container in 30 lines of code solution,” takes 1 line of code for the call to ObjectFactory.Initialize() plus another line of code for each individual type.&nbsp;&nbsp; </p>
<p>&nbsp;</p>
<h4><strong>Related Links:</strong></h4>
<p>By no possible means was this a complete guide to using StructureMap or IoC tools in general.&nbsp; Try these other links for more on StructureMap:</p>
<ul>
<li><a href="http://flimflan.com/blog/HelloStructureMap.aspx">Hello StructureMap</a> </li>
<li><a href="http://frickinsweet.com/ryanlanciaux.com/post/Very-Quick-and-Simple-Dependency-Injection-with-StructureMap.aspx">Very Quick and Simple Dependency Injection with StructureMap</a> </li>
<li><a href="http://dimecasts.net/Casts/ByTag/StructureMap">StructureMap on DimeCasts</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/25/initializing-and-configuring-a-structuremap-container.aspx">Initializing and Configuring a StructureMap Container</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/25/embedding-structuremap-configuration-into-the-app-config-file.aspx">Embedding StructureMap configuration into the App.config file</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/25/the-structuremap-config-file.aspx">The StructureMap.Config File</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/18/using-the-structuremap-container-independent-of-objectfactory.aspx">Using the StructureMap Container independent of ObjectFactory</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/18/profile-s-in-structuremap.aspx">Profile’s in StructureMap</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/18/using-structuremap-2-5-to-scan-all-assemblies-in-a-folder.aspx">Using StructureMap 2.5 to scan all assemblies in a folder</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/10/08/setter-injection-in-structuremap-2-5.aspx">Setter Injection in StructureMap 2.5</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services.aspx">Using StructureMap 2.5 to inject your Entity objects into Services</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/09/10/using-the-structuremap-container-independently-of-objectfactory.aspx">Using the StructureMap Container independently of ObjectFactory</a> </li>
<li><a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/08/20/smartinstance-in-structuremap-2-5.aspx">“SmartInstance” in StructureMap 2.5</a> </li>
<li><a href="http://devlicio.us/blogs/derik_whittaker/archive/2008/08/13/contextual-binding-with-structuremap-2-5.aspx">Contextual Binding with StructureMap 2.5</a> </li>
<li><a href="http://www.lostechies.com/blogs/chad_myers/archive/2008/06/11/neat-tricks-with-structuremap.aspx">Neat Tricks with StructureMap</a> </li>
<li><a href="http://www.lostechies.com/blogs/jimmy_bogard/archive/2008/07/29/integrating-structuremap-with-wcf.aspx">Integrating StructureMap with WCF</a> </li>
</ul>
<div class="shr-publisher-624"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2008/12/01/a-gentle-quickstart-for-structuremap-2-5/" title="Permalink to A Gentle Quickstart for StructureMap 2.5" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2008/12/01/a-gentle-quickstart-for-structuremap-2-5/feed/" title="Comments RSS to A Gentle Quickstart for StructureMap 2.5" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-624 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2008/11/30/agile-net-developer-opportunity-in-atlanta/" rel="prev"><span class="meta-nav">&larr;</span> Agile .Net Developer Opportunity in Atlanta</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2008/12/03/question-of-the-day-what-s-worse/" rel="next">Question of the Day &#8212; What&#8217;s Worse? <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-4937">
                    <div id="dsq-comment-header-4937" class="dsq-comment-header">
                        <cite id="dsq-cite-4937">
    http://weblogs.asp.net/astopford                            <span id="dsq-author-user-4937">Andy Stopford</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4937" class="dsq-comment-body">
                        <div id="dsq-comment-message-4937" class="dsq-comment-message"><p>>>Why are you still rolling your own IoC tool?</p>
<p>Lots of reasons why you might.</p>
<p>You need a IOC but your work place won&#8217;t allow code that uses an OSS license (crazy yes but it happens).</p>
<p>You only need a basic IOC and RYO will meet your requirements (you could always refactor it out to another IOC if the design is right). </p>
<p>Andy</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4938">
                    <div id="dsq-comment-header-4938" class="dsq-comment-header">
                        <cite id="dsq-cite-4938">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4938">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4938" class="dsq-comment-body">
                        <div id="dsq-comment-message-4938" class="dsq-comment-message"><p>@Andy,</p>
<p>&#8220;You need a IOC but your work place won&#8217;t allow code that uses an OSS license (crazy yes but it happens).&#8221;</p>
<p>Unity.  I don&#8217;t think it measures up to the others, but it does the simple cases just fine and it&#8217;s from MS.</p>
<p>&#8220;You only need a basic IOC and RYO will meet your requirements (you could always refactor it out to another IOC if the design is right).&#8221;</p>
<p>Again, how is that possibly more efficient than simply downloading an existing tool?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4939">
                    <div id="dsq-comment-header-4939" class="dsq-comment-header">
                        <cite id="dsq-cite-4939">
                                <span id="dsq-author-user-4939">Stephen</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4939" class="dsq-comment-body">
                        <div id="dsq-comment-message-4939" class="dsq-comment-message"><p>As great as structure map is, I feel the code is ironically harder to read because of all the lambda and fluent infaces going on.. the irony being that fluent interfaces especially are there to make things more &#8216;ingrish&#8217;..</p>
<p>I just think theres a lot of hype about fluent interfaces, but many of them actually are so different looking to &#8216;code&#8217; I feel like I have to transition myself to read them.. probably even more so than I have to transition myself between say.. vb and c#.</p>
<p>2c</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4940">
                    <div id="dsq-comment-header-4940" class="dsq-comment-header">
                        <cite id="dsq-cite-4940">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4940">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4940" class="dsq-comment-body">
                        <div id="dsq-comment-message-4940" class="dsq-comment-message"><p>@Stephen,</p>
<p>Fine enough, but remember that coding aesthetic does vary from person to person.  Plenty of people do like the SM API.  I&#8217;ve actually backed off of the method chaining in SM 2.5 quite a bit in favor of nested closures with lambdas.  I think the Lambda issue is mostly the &#8220;newness&#8221; rather than an overarching problem.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4941">
                    <div id="dsq-comment-header-4941" class="dsq-comment-header">
                        <cite id="dsq-cite-4941">
    http://blog.phatboyg.com/                            <span id="dsq-author-user-4941">Chris Patterson</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4941" class="dsq-comment-body">
                        <div id="dsq-comment-message-4941" class="dsq-comment-message"><p>Excellent introduction Jeremy, glad to have read it.</p>
<p>@Andy,</p>
<p>The problem with rolling your own is that eventually somebody other than you is going to have to maintain that code. Or somebody on the team is going to need that &#8220;one more feature&#8221; and implement it in a way that confuses the RYO solution. Eventually you have a big-ball-of-mud and that could have been avoided by using an off-the-shelf tool with documentation.</p>
<p>And shouldn&#8217;t you developers be doing what is valuable: completing features for the customer. As Ayende said several times, if you are building infrastructure code for something that has already been done many times, you&#8217;re stealing from them.</p>
<p>let your developers focus on the core domain of your application and leave the infrastructure to geeks like Jeremy that enjoy it. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4942">
                    <div id="dsq-comment-header-4942" class="dsq-comment-header">
                        <cite id="dsq-cite-4942">
                                <span id="dsq-author-user-4942">Dan Lash</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4942" class="dsq-comment-body">
                        <div id="dsq-comment-message-4942" class="dsq-comment-message"><p>&#8220;In the code samples above, I used StructureMap as a Service Locator in the ClassThatGetsAnIValidator.SaveObject() method.  Typically, you’ll try to minimize the number of service locator usages in your system to a bare minimum (I found 8 in my current system, but I think I’ll find a way to prune half of those later). &#8221;</p>
<p>I am wondering if you have any blog posts or resources on why you choose to shy away from the service locator pattern. We&#8217;re migrating our projects to use IoC moving forward, so I want to understand the pros and cons. As of now I&#8217;ve only heard that constructor injection helps some developers understand their dependencies better.</p>
<p>Going beyond that, I have an example in a test project I&#8217;m working on that has a class that essentially sends messages to another &#8212; without a service locator, how would you use IoC to get instances of the message classes?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4943">
                    <div id="dsq-comment-header-4943" class="dsq-comment-header">
                        <cite id="dsq-cite-4943">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4943">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4943" class="dsq-comment-body">
                        <div id="dsq-comment-message-4943" class="dsq-comment-message"><p>Dan,</p>
<p>Using service location creates direct coupling to the container and the container configuration.  Dependency Injection does not.  I&#8217;m personally not all that worked up about needing to swap out IoC containers, but having code dependent upon IoC configuration is a major pain in the ass in testing, and it will cut down on possible reuse.</p>
<p>&#8220;As of now I&#8217;ve only heard that constructor injection helps some developers understand their dependencies better.&#8221;</p>
<p>Ditto from me on that one.</p>
<p>Can&#8217;t you just inject the dependencies in?  Or do you need to find the other object by name? </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4944">
                    <div id="dsq-comment-header-4944" class="dsq-comment-header">
                        <cite id="dsq-cite-4944">
                                <span id="dsq-author-user-4944">Oliver Klemencic</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4944" class="dsq-comment-body">
                        <div id="dsq-comment-message-4944" class="dsq-comment-message"><p>As far as I know no IoC tool out there works without Reflection.Emit or similar technology. As we doing heavily development on .NET Compact Framework performance we build our our &#8220;IoC container&#8221;. </p>
<p>At the beginning It only supported constructor injection but as we needed more features we just implemented them in 2-3 hours.</p>
<p>Why do use anythings else?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4945">
                    <div id="dsq-comment-header-4945" class="dsq-comment-header">
                        <cite id="dsq-cite-4945">
                                <span id="dsq-author-user-4945">Brian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4945" class="dsq-comment-body">
                        <div id="dsq-comment-message-4945" class="dsq-comment-message"><p>How does SM handle clean up?   In other words, one of my big disappoints with Castle Windsor was that for static objects, it was great, for items that were disposable, or even instance, it leaked memory all over the place because of maintaining references.   Are you familiar with the problem I&#8217;m talking about?  Has SM conquered this problem?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4946">
                    <div id="dsq-comment-header-4946" class="dsq-comment-header">
                        <cite id="dsq-cite-4946">
                                <span id="dsq-author-user-4946">Brian Johnston</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4946" class="dsq-comment-body">
                        <div id="dsq-comment-message-4946" class="dsq-comment-message"><p>[Sorry if double post - site timed out]</p>
<p>@Jeremy:</p>
<p>In a previous comment to Dan you wrote: &#8216;Using service location creates direct coupling to the container and the container configuration.  Dependency Injection does not.  I&#8217;m personally not all that worked up about needing to swap out IoC containers, but having code dependent upon IoC configuration is a major pain in the ass in testing, and it will cut down on possible reuse.&#8217;</p>
<p>Can you expand on that whole paragraph?  A &#8216;bootstrapper&#8217; class as you have in the Channel 9 demo is &#8216;coupling&#8217; &#8211; and l think maybe that&#8217;s what you meant by &#8216;fine with&#8217; &#8211; but I&#8217;m also finding testing with DI to be a PIA in general &#8211; though I&#8217;ve alleviated a lot of this by using property injectors and lazy initialization and in my tests use private accessors to set the backing field to my stub so DI doesn&#8217;t get used and that&#8217;s worked wonderfully.  I get 100% coverage use stubs/mocks and still get DI in production (and then I have a small # of integration tests to ensure DI is being used for sanity purposes).</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4947">
                    <div id="dsq-comment-header-4947" class="dsq-comment-header">
                        <cite id="dsq-cite-4947">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4947">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4947" class="dsq-comment-body">
                        <div id="dsq-comment-message-4947" class="dsq-comment-message"><p>@Brian (not Johnston),</p>
<p>I don&#8217;t deal with object cleanup at all, truth be told.  SM by default, treats services as transients and does not hold on to anything.  The only thing that is a concern are singleton &#8220;lifecycle&#8221; objects, but it&#8217;s assumed that you hang on to those long term.  That is something I&#8217;m addressing in my next little release over the weekend.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4948">
                    <div id="dsq-comment-header-4948" class="dsq-comment-header">
                        <cite id="dsq-cite-4948">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4948">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4948" class="dsq-comment-body">
                        <div id="dsq-comment-message-4948" class="dsq-comment-message"><p>@Brian Johnston,</p>
<p>&#8220;I&#8217;m also finding testing with DI to be a PIA in general&#8221; </p>
<p>One word:  AutoMocker<br />
Ok, more words:  AutoMocker + your own &#8220;InteractionContext&#8221; that acts as a base class for interaction style unit tests.</p>
<p>&#8220;by using property injectors and lazy initialization &#8221;</p>
<p>To each his own, but I absolutely detest that idiom.  I found it to be extremely problematic in the past.  I still think Constructor Injection is much cleaner and more intention revealing.</p>
<p>To expand:</p>
<p>This code is useless without StructureMap configuration.  Even worse, it&#8217;s not obvious from the outside of MyClass that it is dependent on SM configuration:</p>
<p>public class MyClass<br />
{<br />
   public void DoSomething()<br />
   {<br />
       var service = ObjectFactory.GetInstance<iservice>();<br />
       // use IService to do something</p>
<p>   }<br />
}</p>
<p>This class can be used, reused, and tested, independently of the SM container:</p>
<p>public class MyClass<br />
{<br />
    public MyClass(IService service)<br />
    {<br />
        _service = service;</p>
<p>    }</p>
<p>    public void DoSomething()<br />
    {<br />
        // do stuff with _service field<br />
    }</p>
<p>}</p>
<p>Remember, the container can do &#8211;> ObjectFactory.GetInstance<myclass>() and set up the IService, then poke it into MyClass&#8217;s constructor with auto wiring, and it goes N-Deep.</p>
<p></myclass></iservice></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4949">
                    <div id="dsq-comment-header-4949" class="dsq-comment-header">
                        <cite id="dsq-cite-4949">
    http://teamcianci.com/                            <span id="dsq-author-user-4949">Ed C.</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4949" class="dsq-comment-body">
                        <div id="dsq-comment-message-4949" class="dsq-comment-message"><p>I know XML has gone out of fashion lately, but would it be possible to get updated documentation for XML-based configuration in StructureMap 2.5?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4950">
                    <div id="dsq-comment-header-4950" class="dsq-comment-header">
                        <cite id="dsq-cite-4950">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-4950">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4950" class="dsq-comment-body">
                        <div id="dsq-comment-message-4950" class="dsq-comment-message"><p>@defeated,</p>
<p>I will immediately start feeling guilty about not updating the Xml documentation and get back to writing soon.</p>
<p>Yes, I will.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4951">
                    <div id="dsq-comment-header-4951" class="dsq-comment-header">
                        <cite id="dsq-cite-4951">
    http://www.eknacks.com/SingleListView.aspx?li=121                            <span id="dsq-author-user-4951">eKnacks</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4951" class="dsq-comment-body">
                        <div id="dsq-comment-message-4951" class="dsq-comment-message"><p>You&#8217;ve been knacked. Keep up the good work.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4952">
                    <div id="dsq-comment-header-4952" class="dsq-comment-header">
                        <cite id="dsq-cite-4952">
    http://www.bytecyclist.com                            <span id="dsq-author-user-4952">Kyle LeNeau</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4952" class="dsq-comment-body">
                        <div id="dsq-comment-message-4952" class="dsq-comment-message"><p>&#8220;I swear that StructureMap 2.5 will run in medium trust on .Net 3.5 – but please post any problems that you do find with medium trust.&#8221;</p>
<p>I am attempting just this.  I have tried setting the trust level in my web.config to medium in order to simulate my hosting provider.  When the application starts up I receive a policy exception.  (System.Security.SecurityException: That assembly does not allow partially trusted callers.)  Any help will be greatly appreciated, I have searched the web and haven&#8217;t found much.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4953">
                    <div id="dsq-comment-header-4953" class="dsq-comment-header">
                        <cite id="dsq-cite-4953">
    http://www.talgiladi.net                            <span id="dsq-author-user-4953">Tal</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4953" class="dsq-comment-body">
                        <div id="dsq-comment-message-4953" class="dsq-comment-message"><p>It seems there is a problem running StructureMap on some shared hosting, I get a security exception &#8220;[SecurityException: That assembly does not allow partially trusted callers.]<br />
&#8221;<br />
Any suggestions&#8230;?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4954">
                    <div id="dsq-comment-header-4954" class="dsq-comment-header">
                        <cite id="dsq-cite-4954">
    http://jonerickson.me/                            <span id="dsq-author-user-4954">Jon Erickson</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4954" class="dsq-comment-body">
                        <div id="dsq-comment-message-4954" class="dsq-comment-message"><p>I am getting the same error that @Tal is getting while running StructureMap under a medium trust hosting provider (GoDaddy). Still can&#8217;t find a fix or workaround.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4955">
                    <div id="dsq-comment-header-4955" class="dsq-comment-header">
                        <cite id="dsq-cite-4955">
                                <span id="dsq-author-user-4955">Jesper</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4955" class="dsq-comment-body">
                        <div id="dsq-comment-message-4955" class="dsq-comment-message"><p>I am also getting  Security Exception on medium trust. Hope there will be a solution soon.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-4956">
                    <div id="dsq-comment-header-4956" class="dsq-comment-header">
                        <cite id="dsq-cite-4956">
                                <span id="dsq-author-user-4956">David Kemp</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-4956" class="dsq-comment-body">
                        <div id="dsq-comment-message-4956" class="dsq-comment-message"><p>Thank you for WhatDoIHave().<br />
Instantly knowing I typed the wrong thing is is brilliant.</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2008/12/01/a-gentle-quickstart-for-structuremap-2-5/';
    var disqus_identifier = '624 /blogs/jeremy.miller/archive/2008/11/30/a-gentle-quickstart-for-structuremap-2-5.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "A Gentle Quickstart for StructureMap 2.5";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=624');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2008\/12\/01\/a-gentle-quickstart-for-structuremap-2-5\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profile’s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.559 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 15:23:57 -->
<!-- super cache -->