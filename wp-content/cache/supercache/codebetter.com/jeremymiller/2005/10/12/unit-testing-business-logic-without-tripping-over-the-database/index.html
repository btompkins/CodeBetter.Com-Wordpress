<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Unit Testing Business Logic without Tripping Over the Database | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Best usage of YAGNI ever.' href='http://codebetter.com/jeremymiller/2005/10/10/best-usage-of-yagni-ever/' />
<link rel='next' title='I can&#8217;t believe I had to log a bug for this' href='http://codebetter.com/jeremymiller/2005/10/12/i-cant-believe-i-had-to-log-a-bug-for-this/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=88' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,171] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2005/10/12/unit-testing-business-logic-without-tripping-over-the-database/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-88" class="post-88 post type-post status-publish format-standard hentry category-database-and-persistence category-design-patterns category-ranting category-test-driven-development">
					<h1 class="entry-title">Unit Testing Business Logic without Tripping Over the Database</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2005/10/12/unit-testing-business-logic-without-tripping-over-the-database/" title="6:57 pm" rel="bookmark"><span class="entry-date">October 12, 2005</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><P class="MsoNormal">A fairly common topic with TDD practitioners, both newbie and experienced, is how the heck to unit test business logic with a database hanging around.<SPAN>&nbsp; </SPAN>I’ve had several conversations lately about this so I thought I’d get a post about it.<SPAN>&nbsp; </SPAN>Before I try to talk about some strategies for this, here are a couple good reasons to avoid data access calls inside unit tests for the business logic:</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<UL type="disc"><br />
<LI class="MsoNormal">Tests with database calls will execute significantly slower than tests that stay within an AppDomain.<SPAN>&nbsp; </SPAN>Fast feedback cycles are an absolute necessity for effective TDD.<SPAN>&nbsp; </SPAN>Slow tests directly impact the velocity of a development team in a negative manner.<SPAN>&nbsp; </SPAN>When I was first out of college I was doing large engineering calculations on an old 486.<SPAN>&nbsp; </SPAN>Each calculation run could take 5 minutes plus.<SPAN>&nbsp; </SPAN>When we moved up to P5-100’s our productivity jumped significantly.<SPAN>&nbsp; </SPAN>Slow unit tests are like working with 486’s.<SPAN>&nbsp; </SPAN>I do miss napping in my cube though.</LI><br />
<LI class="MsoNormal">Tests with database calls are more labor intensive to write.<SPAN>&nbsp; </SPAN>You have to create SQL statements to create a known database state before you run your tests.<SPAN>&nbsp; </SPAN>Checking the test results probably involves scraping data back out of the database and coercing into .Net types just to do the assertions.<SPAN>&nbsp; </SPAN>If you can stay inside the world of strongly typed .Net or Java code then “Intellisense” and code completion can speed you along. </LI><br />
<LI class="MsoNormal">Damned if you do, damned if you don’t.<SPAN>&nbsp; </SPAN></LI><br />
<UL type="circle"><br />
<LI class="MsoNormal">Embedding a bunch of SQL statements into the test fixture classes can make the tests harder to read and understand (trust me on this one)</LI><br />
<LI class="MsoNormal">Putting the database setup in another location can make the unit tests harder to understand and troubleshoot because the test data is external to the test fixture class.<SPAN>&nbsp; </SPAN>“ALT-TAB Hell.”</LI></UL><br />
<LI class="MsoNormal">The intent of the unit tests can be unclear.<SPAN>&nbsp; </SPAN>Verifying a successful unit test by checking a status column in the database isn’t always the height of clarity.</LI></UL><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">You might not agree with the above, but if you do, the rest of the post is about the various ways I’ve used or observed to isolate the testing of the business logic from persistence infrastructure.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><B>Mock the Database, but Where?</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">One of the best ways to get the database out of your way is to hide data access behind abstracted interfaces that can be mocked in business logic testing.<SPAN>&nbsp; </SPAN>All you’re doing here is treating data access as yet another service that is invoked from your application.<SPAN>&nbsp; </SPAN>Simply take all of your data access and put them into some sort of <A href="http://www.martinfowler.com/eaaCatalog/gateway.html">Gateway</A> pattern class.<SPAN>&nbsp; </SPAN>Use some sort of <A HREF="/blogs/jeremy.miller/archive/2005/10/06/132825.aspx">Dependency Injection</A> with the business class to substitute the data access implementation with a mock.<SPAN>&nbsp; </SPAN>In the case below, you would create a mock object for <SPAN>IDataAccessGateway</SPAN>. </P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>class</SPAN> BusinessClass</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>private</SPAN> IDataAccessGateway _gateway;</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> BusinessClass(IDataAccessGateway gateway)</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>_gateway = gateway;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> PerformSomeSortOfAction(DataSet dataSet)</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>// Manipulate the DataSet in some way</SPAN></SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>_gateway.SaveSomething(dataSet);</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>interface</SPAN> IDataAccessGateway</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>void</SPAN> SaveSomething(DataSet dataSet);</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal"><B>Do not mock happy, fun ADO.Net</B>.<SPAN>&nbsp; </SPAN>By necessity ADO.Net is a low-level API.<SPAN>&nbsp; </SPAN>As a general rule I would advise anyone to avoid mocking a low-level API under almost any circumstances.<SPAN>&nbsp; </SPAN>Mocking even a simple ADO.Net call would involve several steps and objects for getting a connection, creating a command object, attaching said command to connection, creating a bunch of parameters, etc.<SPAN>&nbsp; </SPAN>Just don’t go there.<SPAN>&nbsp; </SPAN>I noticed a junior-junior pair having some trouble with a coding task last year.<SPAN>&nbsp; </SPAN>When I finally looked over their shoulder I discovered that they were trying to write a unit test by using NMock to create dynamic mocks for the IDb* interfaces.<SPAN>&nbsp; </SPAN>The unit test code was about 9 parts <SPAN>NMock.Expect()</SPAN> calls and 1 part performing the actual test.<SPAN>&nbsp; </SPAN>They changed testing strategies and their work started to move again.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">This same stricture applies to any version of Microsoft’s Data Access Application Block (it’s all static methods anyway) or Enterprise Library.<SPAN>&nbsp; </SPAN>These tools are still just thin veneers over ADO.Net and suffer from the same sort of mocking overhead that raw ADO.Net does.<SPAN>&nbsp; </SPAN>Our internal analogue to EntLib has a dedicated static mock mechanism for unit testing low level data access code.<SPAN>&nbsp; </SPAN>We’ve barely used it because it’s still not that convenient.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">To put this bluntly in a rule of thumb, a business or even service layer class should never have any reference to any of the <SPAN>System.Data.*</SPAN> namespaces. <SPAN>&nbsp;</SPAN>I would allow an obvious exception for DataSet’s with the caveat that DataSet’s aren’t the best choice for business entities and not particularly suitable for <A href="http://www.martinfowler.com/eaaCatalog/dataTransferObject.html">Data Transfer Object’s</A> either<SPAN>&nbsp; </SPAN>(go ahead and argue, I’ll just sick <A HREF="/blogs/scott.bellware">Bellware</A> on you).<SPAN>&nbsp; </SPAN>I’d be really uncomfortable about referencing an <SPAN>IDataReader</SPAN> in business or service code too.<SPAN>&nbsp; </SPAN>That smells awfully wrong to me.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><B>Invert the Control</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">The section above talks about mocking data access if your business logic follows a <A href="http://www.martinfowler.com/eaaCatalog/transactionScript.html">Transaction Script</A> pattern for organizing business logic.<SPAN>&nbsp; </SPAN>If you’re starting from scratch on a system that is business logic intensive you’re probably better off to organize your business logic as a <A href="http://www.martinfowler.com/eaaCatalog/domainModel.html">Domain Model</A> anyway.<SPAN>&nbsp; </SPAN>In this case your domain classes (business logic layer) are completely independent of any kind of persistence mechanism.<SPAN>&nbsp; </SPAN>For persistence I like to use the <A href="http://www.martinfowler.com/eaaCatalog/dataMapper.html">Data Mapper</A> pattern to load and persist the business objects (this is what tools like NHibernate do behind the covers).<SPAN>&nbsp; </SPAN>The mapper classes are aware of the business domain classes instead of the business classes calling the data access classes (<A HREF="/blogs/jeremy.miller/archive/2005/09/20/132290.aspx">Inversion of Control</A>).<SPAN>&nbsp; </SPAN>A Service Layer class of some sort would be responsible for calling.<SPAN>&nbsp; </SPAN>Here’s a sample of what I mean:</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>class</SPAN> OrderServiceClass</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> SendPendingOrder(SendOrderMessage sendOrderMessage)</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>OrderMapper mapper = <SPAN>new</SPAN> OrderMapper();</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>// Find the correct Order object and call Send(Destination)</SPAN></SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>Order order = mapper.FindOrder(sendOrderMessage.OrderId);</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>order.Send(sendOrderMessage.Destination);</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>// Persist the new Order state</SPAN></SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>mapper.Save(order);</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">The reason why this advantageous for unit testing is that you can test the business logic behind sending an order without any database interaction.<SPAN>&nbsp; </SPAN>The business logic can be verified by checking the state of the Order object and it’s children before and after the call to the <SPAN>Send(Destination)</SPAN> method.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><B>I Do Not Like the Active Record Approach</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">Another way to handle persistence of business domain classes is the <A href="http://www.martinfowler.com/eaaCatalog/activeRecord.html">Active Record</A> pattern.<SPAN>&nbsp; </SPAN>In this case each domain class is responsible for its own persistence.<SPAN>&nbsp; </SPAN>Each domain class will have a signature like this:</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>class</SPAN> Order</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>{</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> Save(){}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> Delete(){}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> Insert(){}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>public</SPAN> <SPAN>void</SPAN> Load(<SPAN>long</SPAN> id){}</SPAN></P><br />
<P class="MsoNormal"><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>}</SPAN></P><br />
<P class="MsoNormal"><SPAN>&nbsp;</SPAN></P><br />
<P class="MsoNormal">This came up recently at the Austin Agile lunches because one of our members was evaluating Rocky Lhotka’s CSLA.Net framework for one of his projects.<SPAN>&nbsp; </SPAN>I’ll admit that I’m very biased against CSLA because the single worst codebase I’ve ever seen was a VB6 monster that used CSLA.<SPAN>&nbsp; </SPAN>I could be wrong, but I still would not recommend something like CSLA.Net for TDD projects because I think the Active Record style of domain objects binds the business logic too tightly to the database.<SPAN>&nbsp; </SPAN>I think that this style of data access makes unit testing without the database harder.<SPAN>&nbsp; </SPAN></P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">Several of the O/R tools for .Net are really Active Record patterns (usually with code generation).<SPAN>&nbsp; </SPAN>Testability has to be a major concern when you choose a persistence strategy.<SPAN>&nbsp; </SPAN>I definitely prefer a Domain Model approach with external mapping, but I’ve spoken with people who swear by Active Record classes with internal mapping.</P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal"><B>Point of View – the Database is the Application vs. the Database is Merely the Persistence Mechanism</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">How you personally answer this question largely determines how you layout software systems.<SPAN>&nbsp; </SPAN>At one extreme, database-centric folks obsess over relational models and treat the middle tier code as merely a conduit to get data in and out of the database.<SPAN>&nbsp; </SPAN>This point of view seems to be much more prevalent in the Microsoft world and definitely among older developers and requirement analysts (flame away but you know its true).<SPAN>&nbsp; </SPAN>I’ve often seen requirement specifications from business analysts that amounted to “get data from this table and go insert it over here in a different way.”<SPAN>&nbsp; </SPAN>This kind of thing leads to some nasty design and architecture smells like gross duplication of code, zero encapsulation, scalability issues, and nightly batch jobs that run for 30 hours at a time locking transactional tables left and right (true story).<SPAN>&nbsp; </SPAN>In one instance it also led to a PM making a waterfall schedule that had 75% of the development man-hours to logical and physical data modeling on a system that probably had only 4-5 database entities but a complex user interface and a bunch of integrations to legacy systems (thar be dragons).</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">The other issue with a database-centric development philosophy is that automated unit tests are less effective.<SPAN>&nbsp; </SPAN>Toss in largish stored procedures and you’ve got a mess.<SPAN>&nbsp; </SPAN>Procedural code can be more difficult to unit test than well-factored Object Oriented code&nbsp;because it’s more difficult to isolate pieces of functionality.<SPAN>&nbsp; </SPAN>Embedding this procedural logic within a database just compounds the problem.<SPAN>&nbsp; </SPAN>Yes, there are xUnit toolsets for database access now but they’ll never be as easy to use as NUnit or JUnit.</P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal"><B>No Business Logic in Stored Procedures!</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">I make exceptions for cases where set-based logic can be done easier with declarative SQL code than with procedural middle tier code.<SPAN>&nbsp; </SPAN>Otherwise I think <A HREF="/blogs/jeremy.miller/archive/2005/07/05/130093.aspx">business logic in stored procedures is evil</A>.</P></p>
<div class="shr-publisher-88"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/database-and-persistence/" title="View all posts in Database and Persistence" rel="category tag">Database and Persistence</a>, <a href="http://codebetter.com/jeremymiller/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag">Design Patterns</a>, <a href="http://codebetter.com/jeremymiller/category/ranting/" title="View all posts in Ranting" rel="category tag">Ranting</a>, <a href="http://codebetter.com/jeremymiller/category/test-driven-development/" title="View all posts in Test Driven Development" rel="category tag">Test Driven Development</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2005/10/12/unit-testing-business-logic-without-tripping-over-the-database/" title="Permalink to Unit Testing Business Logic without Tripping Over the Database" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2005/10/12/unit-testing-business-logic-without-tripping-over-the-database/feed/" title="Comments RSS to Unit Testing Business Logic without Tripping Over the Database" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-88 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2005/10/10/best-usage-of-yagni-ever/" rel="prev"><span class="meta-nav">&larr;</span> Best usage of YAGNI ever.</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2005/10/12/i-cant-believe-i-had-to-log-a-bug-for-this/" rel="next">I can&#8217;t believe I had to log a bug for this <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-280">
                    <div id="dsq-comment-header-280" class="dsq-comment-header">
                        <cite id="dsq-cite-280">
                                <span id="dsq-author-user-280">John Huang</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-280" class="dsq-comment-body">
                        <div id="dsq-comment-message-280" class="dsq-comment-message"><p>Great article. I have saved most of your articles. Somehow this one is too wide on IE with 1024&#215;678 screen resolution, hard to read. Please correct this if possible.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-281">
                    <div id="dsq-comment-header-281" class="dsq-comment-header">
                        <cite id="dsq-cite-281">
    http://www.bloggingabout.net/blogs/dennis/                            <span id="dsq-author-user-281">Dennis van der Stelt</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-281" class="dsq-comment-body">
                        <div id="dsq-comment-message-281" class="dsq-comment-message"><p>Great, great article! Thanks so much!</p>
<p>I&#8217;m preparing a presentation I&#8217;m doing in a few weeks. I was just looking for this exact info, to show my collegues that they should not acces the database from within their tests.</p>
<p>Thanks again</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-282">
                    <div id="dsq-comment-header-282" class="dsq-comment-header">
                        <cite id="dsq-cite-282">
                                <span id="dsq-author-user-282">BlackTigerX</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-282" class="dsq-comment-body">
                        <div id="dsq-comment-message-282" class="dsq-comment-message"><p>in your article &#8220;Good and Evil in the Garden of Stored Procedures&#8221;, you state:</p>
<p>&#8220;Business logic. It’s easier to write and test in C#, period.&#8221;</p>
<p>so is that all why you think Business Logic in stored procedures is evil? because is easier to write and test in C#?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-283">
                    <div id="dsq-comment-header-283" class="dsq-comment-header">
                        <cite id="dsq-cite-283">
                                <span id="dsq-author-user-283">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-283" class="dsq-comment-body">
                        <div id="dsq-comment-message-283" class="dsq-comment-message"><p>BlackTigerX (great screen name btw),</p>
<p>&#8220;Business logic. It’s easier to write and test in C#, period.&#8221;  &#8212; That&#8217;s not enough by itself?  Ease of testing == ease of modification == longer application life.</p>
<p>Business logic in sproc&#8217;s can also lead to way too much logic duplication and that&#8217;s not good either.  There&#8217;s also the scalability issue and for us the database engine portability thing.</p>
<p>I know you can make an argument for sproc&#8217;s being faster in some cases, but I wouldn&#8217;t buy that in very many cases.</p>
<p>If you&#8217;d seen the T-SQL code that I was reading that day you&#8217;d understand my antipathy toward sproc&#8217;s.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-284">
                    <div id="dsq-comment-header-284" class="dsq-comment-header">
                        <cite id="dsq-cite-284">
                                <span id="dsq-author-user-284">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-284" class="dsq-comment-body">
                        <div id="dsq-comment-message-284" class="dsq-comment-message"><p>Denis &#8211; </p>
<p>Glad to help.  You do still have to run some tests against the database though.  I meant to say something about testing the actual database manipulation code against the database instead of trying to mock ADO.Net itself.  That&#8217;s the way of pain.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-285">
                    <div id="dsq-comment-header-285" class="dsq-comment-header">
                        <cite id="dsq-cite-285">
    http://www.bloggingabout.net/blogs/dennis/                            <span id="dsq-author-user-285">Dennis van der Stelt</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-285" class="dsq-comment-body">
                        <div id="dsq-comment-message-285" class="dsq-comment-message"><p>&#8220;You do still have to run some tests against the database though.&#8221;</p>
<p>How much is &#8220;some tests&#8221;?<br />
And when do I execute these tests? In a daily build? How do I go about excluding these tests on my own machine and still be able to write them and deploy them soley on the daily-build-machine? Or am I thinking in the wrong direction?</p>
<p>Because when I implement some new functionality and also have to do some database testing every time&#8230;</p>
<p>Or do you mean that you just write some tests to see if your database connection works and you can get a few rows from your database?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-286">
                    <div id="dsq-comment-header-286" class="dsq-comment-header">
                        <cite id="dsq-cite-286">
    http://danbunea.blogspot.com                            <span id="dsq-author-user-286">Dan Bunea</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-286" class="dsq-comment-body">
                        <div id="dsq-comment-message-286" class="dsq-comment-message"><p>Hi,</p>
<p>I have been reading your blog for a while and I am very happy with what you write. I have managed to achieve the same conclusions as you did. My approach on sprocs is that they are just too hard to maintain. If your customer changes his mind often, the stored procedures and the business logic there will start taking more and more to update, and in time your velocity will decrease much more then with a code business logic approach.</p>
<p>Unit test have a few very important properties that must be implemented into them:</p>
<p>- small &#8211; this mean they will be clear, easy to understand and modify/maintain, and can serve as documentation for the code<br />
- isolated &#8211; achieving this is the hardest but it is well worth and there are methods to do it<br />
- fast &#8211; as you say you need feedback from your code. The faster you get it the best. I call my tests my &#8216;break detectors&#8217;.</p>
<p>When we speak about the 3 properties above and unit testing the code that may depend on the database, I have come to the conclusion that ORMs and business objects/c# usually are the best. Combined with mocking you can test the business logic of an application easily and it is very recommended to do it like that.</p>
<p>However there might be cases when you really need to test the database access, and for those cases you need to use a database. In some cases like reports, the balance might go to the database dependant tests because setting up data can be easier. If you do a timesheet report, and you need a few hundred rows in the database to test it, it might be easier to avoid writing thecode for a few hundred objects and just make a reset database stored procedure. We use a great tool for this: Thycotic Database Scripter (<a href="http://www.thycotic.com/dotnet_dbscripter.html" rel="nofollow">http://www.thycotic.com/dotnet_dbscripter.html</a>). It exports the data in a database as a stored procedure. Needs change, you regenerate it. And it is very fast. However the temptatin to do this is big although this brings the big stored procedure maintenance risk if not used right. I have found it usefull in areas very hard to test but I try to keep away from it as much as possible, until I see th real implications of it.</p>
<p>I don&#8217;t like the ActiveRecord as well. The business object seem expert classes, too smart. Plus you can&#8217;t separate the layers very well and it is hard to work with transactions. We use NHibernate. I like a very separated approach on tiers like:</p>
<p>-BusinessLayer<br />
   -BusinessEntities<br />
      Order<br />
      OrderLine<br />
      Product<br />
   -BusinessServices<br />
      OrderBusinessService<br />
-DataLayer<br />
   -DAO<br />
      OrderDAO<br />
      OrderLineDAO<br />
      ProductDAO </p>
<p>Thanks,<br />
Dan Bunea<br />
<a href="http://danbunea.blogspot.com" rel="nofollow">http://danbunea.blogspot.com</a></p>
<p>-  </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-287">
                    <div id="dsq-comment-header-287" class="dsq-comment-header">
                        <cite id="dsq-cite-287">
    http://codebetter.com/blogs/darrell.norton/                            <span id="dsq-author-user-287">Darrell Norton</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-287" class="dsq-comment-body">
                        <div id="dsq-comment-message-287" class="dsq-comment-message"><p>If you want to use the Active Record pattern, just use a DataSet.  <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />   Creating a framework around it is kind of pointless, since the DataSet was built for that type of work.</p>
<p>And the Ruby on Rails crowd talks about how great the pattern is.  Ummm&#8230; .NET already HAS the Active Record pattern, and has for 3 years now.  With a whole lot more tooling around it.  <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-288">
                    <div id="dsq-comment-header-288" class="dsq-comment-header">
                        <cite id="dsq-cite-288">
                                <span id="dsq-author-user-288">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-288" class="dsq-comment-body">
                        <div id="dsq-comment-message-288" class="dsq-comment-message"><p>Darrell,</p>
<p>Just to be pedantic, DataSet == &#8220;Table Module,&#8221; not Active Record.  The point being as I&#8217;m sure you well know is that DataSets don&#8217;t equate to a domain model approach.  I got my fill of that back in the days when VB6 apps used the old ADODB.Recordset as a Golden Hammer.  It&#8217;s awfully nice to actually write strongly-typed OO code where the logic lives with the data.  </p>
<p>For that matter, DataSet&#8217;s are a pain in the ass in unit test code anyway.</p>
<p>DataSet&#8217;s are nice for reporting apps with no business logic, but DataSet&#8217;s &#038; lots of business logic == ugly.  You could even argue that the &#8220;tooling&#8221; around DataSet&#8217;s is nothing buy rope for Mort to hang himself with &#8220;write-only&#8221; code.</p>
<p>If you haven&#8217;t already, check out <a href="http://neo.codehaus.org" rel="nofollow">http://neo.codehaus.org</a> for a weird/clever mingling of Dataset and Domain Model.  It took them a hell of a lot of code to be able to write a domain model and still take advantage of the DataSet persistence.</p>
<p>RoR can only help us anyway by putting heat on the ASP.Net team.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-289">
                    <div id="dsq-comment-header-289" class="dsq-comment-header">
                        <cite id="dsq-cite-289">
                                <span id="dsq-author-user-289">Wash (back from the dead)</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-289" class="dsq-comment-body">
                        <div id="dsq-comment-message-289" class="dsq-comment-message"><p>I agree, but I also disagree.</p>
<p>Here is why(stick with me &#8211; I will get back to the point):</p>
<p>Our application (Jeremy has heard of it) has two ways to do a simple action: decrease the total dollar amount a given business object and persist it back to the data layer.  At the same time, make sure that all the parent objects take in account the adjusted total.</p>
<p>Currently the app has two methods to accomplish this.  One is direct access to a business object which implements an Active Record pattern, except it pushes all the business logic to a sproc(yes, not good).  The other is an API, which actually uses the same business object, but was an attempt for separating the ugly implementation stuff so that integration developers did not have to deal with it.</p>
<p>So, I don’t like this.   We want to move the adjustment logic to a single interface using a Service Layer pattern.  One of my colleagues referred to a similar layer that he used on a previous project that they called the Crap Layer.  So, I renamed ours to the S.L.  (You figure out what the S means.)</p>
<p>The idea of the S.L. is to keep all the ugly code underneath it.  Yes, the ugly stored procedures will stay, for now.</p>
<p>Now, I will get back on the point.   We are going to do this under TDD.  I want tests written for the new actions that are going to be added to the S.L.  I also want the underlying implementation to begin using the legacy objects described above.</p>
<p>I want to do it this way for a few reasons.  One, I know the current logic works (bad or good implementation aside).  Two, I don’t have time to change the underlying logic. Three, this falls under a similar pattern of Michael Feather’s characterization tests.  Four, It just fells right (never underestimate your gut).</p>
<p>So, here is my problem.  How can I write tests under this scenario without touching the database?  I can’t.   It does not ensure that I did not break anything.   (One could argue that these are not units tests, but integration tests. I just wanted to get some good dialogue on your blog since we never get a chance to do it face to face – that often.)</p>
<p>Here is where I agree:</p>
<p>Once I get the S.L. under test.  We are going to go back and convert the business objects to use a Domain Model using an OR Mapper.   We will right unit tests at this level which will not use the DB layer, but now I have characterization tests to guarantee that I am still under the original behavior of the app.  </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-290">
                    <div id="dsq-comment-header-290" class="dsq-comment-header">
                        <cite id="dsq-cite-290">
    http://geekswithblogs.net/wojan                            <span id="dsq-author-user-290">Scott Wojan</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-290" class="dsq-comment-body">
                        <div id="dsq-comment-message-290" class="dsq-comment-message"><p>First off, great article!<br />
I love TDD with DDD and I love databases as well so I don&#8217;t understand why it’s constantly presented as if you should be on one side or the other?<br />
&#8220;At one extreme, database-centric folks obsess over relational models and treat the middle tier code as merely a conduit to get data in and out of the database.&#8221;<br />
You&#8217;re designing an end-to-end solution so it&#8217;s important that you are involved from end-to-end and the database is quite often at one end.  You HAVE to be concerned with the relational model!  If the schema is a mess, it can render a tool like NHibernate almost useless, it can cause poor performance and will probably contain bad data from lack of referential integrity.  Sure the database can merely be used for persistence storage but that still should be treated as a huge concern and not an after thought.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-291">
                    <div id="dsq-comment-header-291" class="dsq-comment-header">
                        <cite id="dsq-cite-291">
                                <span id="dsq-author-user-291">Morri</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-291" class="dsq-comment-body">
                        <div id="dsq-comment-message-291" class="dsq-comment-message"><p>Shouldn&#8217;t your example come to resemble something like this in the UI code</p>
<p>public ButtonSaveData(&#8230;)<br />
{<br />
  MyDAG gateway = new MyDAG();<br />
  BusinessClass BC;<br />
  BC = new BusinessClass(gateway);</p>
<p>  BC.SaveData( UIControl.GetValue() );<br />
}</p>
<p>How do I prevent the UI programmer from doing this:</p>
<p>public ButtonSaveData(&#8230;)<br />
{<br />
  MyDAG gateway = new MyDAG();</p>
<p>  gateway.SaveData( UIControl.GetValue() );<br />
}</p>
<p>If he has to use DataAccess-class anyways(so that it can be passed to BusinessLogic), and he sees it has a method for saving data (and that&#8217;s what he want&#8217;s to do), at some point or another, he&#8217;s going to do it.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-292">
                    <div id="dsq-comment-header-292" class="dsq-comment-header">
                        <cite id="dsq-cite-292">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-292">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-292" class="dsq-comment-body">
                        <div id="dsq-comment-message-292" class="dsq-comment-message"><p>Morri,</p>
<p>&#8220;How do I prevent the UI programmer from doing this:&#8221;</p>
<p>Um, make sure the UI developer understands why that might not be what the team wants to do?  Not just a dictate from above, but a genuine understanding and agreement about why the team wants to code this way.  It&#8217;s all about socializing your design.</p>
<p>There&#8217;s just about zero chance of getting good software out of sloppy or low skill developers.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-293">
                    <div id="dsq-comment-header-293" class="dsq-comment-header">
                        <cite id="dsq-cite-293">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-293">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-293" class="dsq-comment-body">
                        <div id="dsq-comment-message-293" class="dsq-comment-message"><p>Morri,</p>
<p>&#8220;How do I prevent the UI programmer from doing this:&#8221;</p>
<p>Um, make sure the UI developer understands why that might not be what the team wants to do?  Not just a dictate from above, but a genuine understanding and agreement about why the team wants to code this way.  It&#8217;s all about socializing your design.</p>
<p>There&#8217;s just about zero chance of getting good software out of sloppy or low skill developers.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-294">
                    <div id="dsq-comment-header-294" class="dsq-comment-header">
                        <cite id="dsq-cite-294">
    http://dudesdoingdotnet.blogspot.com                            <span id="dsq-author-user-294">thedotnetdude</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-294" class="dsq-comment-body">
                        <div id="dsq-comment-message-294" class="dsq-comment-message"><p>Hmm.. still searching for an awesome VSTS unit testing complete success stories.. Do you have any? Mind to share it here..</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-295">
                    <div id="dsq-comment-header-295" class="dsq-comment-header">
                        <cite id="dsq-cite-295">
                                <span id="dsq-author-user-295">ejames</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-295" class="dsq-comment-body">
                        <div id="dsq-comment-message-295" class="dsq-comment-message"><p>Using TDD for CSLA objects is no different from TDD using using plain ordinary C# objects.  Just because CSLA uses the Active Record pattern doesn&#8217;t mean you cannot use dependency injection to inject the data access code.</p>
<p>CSLA defines four (give or take some) Methods to be overridden for data access:  Create, Fetch, Update and Delete.  The implementation of such methods is left for the business object developer, leaving the door wide open for use of data-access interfaces, dependency injection, and database isolation.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-296">
                    <div id="dsq-comment-header-296" class="dsq-comment-header">
                        <cite id="dsq-cite-296">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-296">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-296" class="dsq-comment-body">
                        <div id="dsq-comment-message-296" class="dsq-comment-message"><p>@ejames,</p>
<p>&#8220;you can unit test business logic&#8221; is different from &#8220;it&#8217;s easy to unit test the business logic.&#8221;  I shouldn&#8217;t have to mock out data access methods and all that data portal jazz just to unit test business logic at all.  It&#8217;s work that I wouldn&#8217;t have to do with other architectures.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-297">
                    <div id="dsq-comment-header-297" class="dsq-comment-header">
                        <cite id="dsq-cite-297">
                                <span id="dsq-author-user-297">Chris McGinn</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-297" class="dsq-comment-body">
                        <div id="dsq-comment-message-297" class="dsq-comment-message"><p>I used to feel this way too, If you are dealing with a really big domain it may still apply but enter the &#8220;Local Database&#8221;. I think developers often ignore the the obvious. The ADO.Net dataset and associated designer to me has been the easiest way to quickly design a domain layer for testing, or designing business logic. The code behind of the Dataset (that takes 5 minutes to set up) is a wonderful place to place to perfrom validation when rows change (rows meaning data, business data that has rules). The dataset also maintains versions of the data which make it a breeze to compare old data before business logic and new data after business logic. I started down the path of using mocks, NHibernate, Spring.NET framework, etc.. all to make dataaccess code and testing easier, then I went back to my .NET 1.0 days and started playing with the Datasets again. I quickly realized it was time to start taking them serious.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-298">
                    <div id="dsq-comment-header-298" class="dsq-comment-header">
                        <cite id="dsq-cite-298">
    http://focuswindows.blogspot.com                            <span id="dsq-author-user-298">WADE</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-298" class="dsq-comment-body">
                        <div id="dsq-comment-message-298" class="dsq-comment-message"><p>Hi, </p>
<p>In my opinion, DB Unit Testing is DB developer&#8217;s business, not Application developer&#8217;s. At least it is true in my organization, we believe the common developers are not good at database design, especially in the modern OO era. </p>
<p>We employed a powerful DB unit testing tool, it named as AnyDbTest. (<a href="http://www.anydbtest.com">http://www.anydbtest.com</a>). By using this tool, we need NOT write java/.net DB unit testing code any more.  We can configure one xml file to tell what we want to test and what is our assertion.  Then AnyDbTest can do the rest things. </p>
<p>Additionally, we can versioned control the xml-style test case just like the code files. It is very handy. </p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2005/10/12/unit-testing-business-logic-without-tripping-over-the-database/';
    var disqus_identifier = '88 /blogs/jeremy.miller/archive/2005/10/12/133017.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "Unit Testing Business Logic without Tripping Over the Database";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=88');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2005\/10\/12\/unit-testing-business-logic-without-tripping-over-the-database\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profile’s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.812 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 13:16:21 -->
<!-- super cache -->