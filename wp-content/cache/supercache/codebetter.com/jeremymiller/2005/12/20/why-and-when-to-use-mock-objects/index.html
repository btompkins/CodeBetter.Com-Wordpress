<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Why and When to Use Mock Objects | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Mock Objects and Stubs:  The Bottle Brush of TDD' href='http://codebetter.com/jeremymiller/2005/12/19/mock-objects-and-stubs-the-bottle-brush-of-tdd/' />
<link rel='next' title='Best and Worst Practices for Mock Objects' href='http://codebetter.com/jeremymiller/2006/01/10/best-and-worst-practices-for-mock-objects/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=116' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,141] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-116" class="post-116 post type-post status-publish format-standard hentry category-test-driven-development">
					<h1 class="entry-title">Why and When to Use Mock Objects</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/" title="10:22 pm" rel="bookmark"><span class="entry-date">December 20, 2005</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><P class="MsoNormal">In the <A href="/blogs/jeremy.miller/archive/2005/12/19/135757.aspx">last post</A> I introduced mock objects and talked about some of the various flavors of fake objects.<SPAN>&nbsp; </SPAN>In this post I want to talk about when and why you would use a mock object.<SPAN>&nbsp; </SPAN>The main benefit of using mock objects is increased testability throughout a system.<SPAN>&nbsp; </SPAN>A secondary benefit of mock objects is an improved ability to do continuous design within your code.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><B>Improved Unit Testing</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">Let’s look at the usage of mock objects applied to the desired <A href="/blogs/jeremy.miller/archive/2005/07/20/129552.aspx">qualities of a good unit test</A>. </P><br />
<P class="MsoNormal">&nbsp;</P><br />
<UL type="disc"><br />
<LI class="MsoNormal"><B>Unit tests should be atomic.</B><SPAN>&nbsp; </SPAN>TDD style unit tests should be small tests that cover a specific, granular area of the code.<SPAN>&nbsp; </SPAN>The code under test might interact with other classes or external systems, but at the moment you only want to worry about the proper functioning of the class under test.<SPAN>&nbsp; </SPAN>You can preserve the atomicity of the unit test by replacing the external resources and coding dependencies by using a mock object to establish an expected behavior.<SPAN>&nbsp; </SPAN>You specify exactly how the mock object is going to behave, so any unit test failures are now traced to the class under test.<SPAN>&nbsp; </SPAN>When I was an engineer one of the hardest tasks in any engineering calculation was modeling boundary conditions.<SPAN>&nbsp; </SPAN>A boundary condition is a point in the system with known behavior.<SPAN>&nbsp; </SPAN>Inside your calculation you could ignore anything outside the boundary conditions.<SPAN>&nbsp; </SPAN>The way to make your life easier was to establish boundary conditions so as to minimize the number of variables within any engineering calculation.<SPAN>&nbsp; </SPAN>Mock objects are conceptually the same thing as boundary conditions.<SPAN>&nbsp; </SPAN>One of the primary claims for the efficiency of TDD is the radically reduced time spent debugging code.<SPAN>&nbsp; </SPAN>My experience that claim is true, but <B>only</B> when you write fine-grained tests.<SPAN>&nbsp; </SPAN>My ratio of debugging time to coding time dropped precipitously when I started to become proficient with mock objects.<SPAN>&nbsp; </SPAN>Please be aware that excessive mocking calls in a unit test can lead to unit tests that are too tightly coupled to the internal implementation of the very dependency you’re trying to mock.<SPAN>&nbsp; </SPAN>This can make your code very difficult to refactor because the unit tests are brittle.<br />
<LI class="MsoNormal"><STRONG>Order Independent and Isolated.<SPAN>&nbsp; </SPAN></STRONG><STRONG><SPAN>You should never assume that the tests are run in any certain order.<SPAN>&nbsp; </SPAN>Each test should start from a completely known state and clean up after itself if necessary.<SPAN>&nbsp; </SPAN>One of the biggest mistakes in writing unit tests is allowing state or the results of one unit test effect a different unit test.<SPAN>&nbsp; </SPAN>It’s hard enough to troubleshoot testing failures.<SPAN>&nbsp; </SPAN>Having to look through </SPAN>other</STRONG><STRONG><SPAN> unit tests to find the problem is time intensive and counterintuitive.<SPAN>&nbsp; </SPAN>Static properties, singletons, and repositories are a common culprit, but the worst culprit might be testing against the database.<SPAN>&nbsp; </SPAN>The entire purpose of a database is to maintain state, and that’s not a particularly good trait inside a unit test.<SPAN>&nbsp; </SPAN>Using a mock object in place of any kind of stateful dependency will isolate your unit test from external state and make your unit tests order independent and isolated.</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG><br />
<LI class="MsoNormal"><STRONG>Intention Revealing.<SPAN>&nbsp; </SPAN></STRONG><STRONG><SPAN>This quality goes back to interaction based testing.<SPAN>&nbsp; </SPAN>If the responsibility of the class being tested is to direct or coordinate other classes, then using a mock object inside the test may make the test easier to understand.<SPAN>&nbsp; </SPAN>On the other hand, excessive mock object setup may make the unit test a lot more difficult to understand.<SPAN>&nbsp; </SPAN>My advice is to simply pay attention to what you’re coding.<SPAN>&nbsp; </SPAN>If it feels like using a mock object is making the test harder, back up and </SPAN>find a different way to write the test or change the class structure</STRONG><STRONG><SPAN>.<SPAN>&nbsp;&nbsp;&nbsp; </SPAN>I’m going to come back to this topic quite a bit more in a later post.<SPAN>&nbsp; </SPAN>I got pretty irritated at a junior/junior pair last year when I found out they had spent the better part of a day trying to write a unit test by mocking ADO.Net with no real success.<SPAN>&nbsp; </SPAN>When I saw what they were doing I <I>convinced</I> them to change direction and create a new coarse-grained interface that would encapsulate the ADO.Net calls and would be easy to mock.</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG><br />
<LI class="MsoNormal"><STRONG>Easy to Setup.<SPAN>&nbsp; </SPAN></STRONG><STRONG><SPAN>This quality might be a bit in the eye of the beholder.<SPAN>&nbsp; </SPAN>I’ll talk about this in much more detail in the next post or two, but a lot of mock scaffolding in a unit test is a code smell.<SPAN>&nbsp; </SPAN>One very significant reason to use mock objects is to avoid the need to setup external resources into a known state for each test.<SPAN>&nbsp; </SPAN>Think of a database.<SPAN>&nbsp; </SPAN>You might only need a particular row in the database for the test, but due to the (necessary) evil of referential integrity that one row might require a whole bunch of other data first.<SPAN>&nbsp; </SPAN>Even worse is something like a web service, a messaging queue, or the all time worst IMO – Active Directory.<SPAN>&nbsp; </SPAN>More specifically, here’s a list of reasons to forgo trying to setup an external resource to behave in an expected way:</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG><br />
<UL type="circle"><br />
<LI class="MsoNormal"><STRONG><SPAN>It’s often more work to write the SQL scripts than it is to setup the mock expectations or stub returns.<SPAN>&nbsp; </SPAN>Less work is always good</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG><br />
<LI class="MsoNormal"><STRONG><SPAN>Setting up the external state often obfuscates the test and can make the test harder to understand</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG><br />
<LI class="MsoNormal"><STRONG><SPAN>Having external resource setup inside an automated test often tightly couples that test to the inner workings of the external dependency.<SPAN>&nbsp; </SPAN>Loose coupling in automated tests is every bit as important for success as loosely coupled code.</SPAN></STRONG><STRONG><SPAN></SPAN></STRONG></LI></UL><br />
<LI class="MsoNormal"><STRONG>Runs Fast.<SPAN>&nbsp; </SPAN></STRONG><STRONG><SPAN>Making your automated tests run quickly isn’t a luxury, it’s a necessity.<SPAN>&nbsp; </SPAN>Except for the very beginning of a project you should expect automated testing to be the performance bottleneck in your automated build process.<SPAN>&nbsp; </SPAN>It’s not a good thing when you start frequently hearing the phrase “we’re in CC.Net time.” <SPAN>&nbsp;&nbsp;</SPAN>I had a post on this a while back <A href="/blogs/jeremy.miller/archive/2005/08/17/130864.aspx"><SPAN>here</SPAN></A>.</SPAN></STRONG></LI></UL><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal"><B>Designing for and with Mock Objects</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">I love the “mock as spy” analogy, but here’s an additional way to think about the role of a mock object.<SPAN>&nbsp; </SPAN>In the movie and TV industries child actors are expressly limited in the number of hours they’re allowed to work in a day or week.<SPAN>&nbsp; </SPAN>The director will use adults of roughly the same size to be “stand-ins” for the child actors so they can accurately storyboard the scene with the set, the lights, and the camera angles (I know all about this because of a classic Seinfeld episode years ago).<SPAN>&nbsp; </SPAN>The director and the camera crew can get the scene completely setup without cutting into the child actors’ limited quota of hours.<SPAN>&nbsp; </SPAN>Mock objects can be used in much the same way.<SPAN>&nbsp; </SPAN>It’s what I like to think of as “Client First Development.”<SPAN>&nbsp; </SPAN>Falling back on the Model View Presenter pattern as an example yet one more time, you might build a screen in a couple pieces:</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<OL type="1"><br />
<LI class="MsoNormal">Presenter – handles the user information flow logic and intermediates communication between the actual screen and the backend services<br />
<LI class="MsoNormal">IService/Service – the gateway to the backend business or service layer<br />
<LI class="MsoNormal">IView/View – The actual screen</LI></OL><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">In this case I would define <SPAN>Presenter</SPAN> as the client of the services provided by the <SPAN>IService</SPAN> and <SPAN>IView</SPAN> interfaces.<SPAN>&nbsp; </SPAN>I’ve consistently found it to be more efficient to make the development of the <SPAN>Presenter</SPAN> (the client) drive the signature of the <SPAN>IService</SPAN> and <SPAN>IView</SPAN> interfaces.<SPAN>&nbsp; </SPAN>The <SPAN>Presenter</SPAN> is largely coded first with the dependencies mocked.<SPAN>&nbsp; </SPAN>I’ve found this approach to be consistently more efficient than trying to drive the development from backend to front.<SPAN>&nbsp; </SPAN>The requirements of “service provider” classes or modules are completely determined by the needs of their clients.<SPAN>&nbsp; </SPAN>Building a service provider before the client will very frequently result in rework to the service provider when you discover that the client has different needs than you previously expected.<SPAN>&nbsp; </SPAN>By using mocks or stubs I can narrowly focus on the design of the client and then turn and implement the resulting interfaces for the service provider.<SPAN>&nbsp; </SPAN>Yeah you can give me the tired old line of “if you just did more research upfront…” but no design can ever accurately said to be “done” until it’s fully implemented and tested.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">Another way to think about mock objects is that they’re like doing a UML sequence diagram, but in code.<SPAN>&nbsp; </SPAN></P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">I’ve sarcastically described TDD in the past as Mock-Driven Design, but it does work.<SPAN>&nbsp; </SPAN>You need to very consciously consider testability in almost every design decision.<SPAN>&nbsp; </SPAN>Very purposely consider how to <A href="/blogs/jeremy.miller/articles/131726.aspx">spread responsibilities between classes to maximize testability</A>.<SPAN>&nbsp; </SPAN>I am very much cognizant of utilizing mock objects when I do class and namespace level design.</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">Here’s a quote from Jeffrey Palermo this very afternoon – “do you know how nice it is to get a piece of code into NUnit or the debugger without having to install every single other service?”<SPAN>&nbsp; </SPAN>Yes Jeffrey, I know exactly how you feel.</P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal"><B>What to Mock?</B></P><br />
<P class="MsoNormal"><B>&nbsp;</B></P><br />
<P class="MsoNormal">So we come to the question of what to mock?<SPAN>&nbsp; </SPAN>My rule of thumb is to mock anything that is involves any kind of call or access to things outside of the AppDomain.<SPAN>&nbsp; </SPAN>Mocking the data access layer when you’re testing business or service layer logic is an obvious example.<SPAN>&nbsp; </SPAN>Here are some other examples that I can remember using:</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<UL type="disc"><br />
<LI class="MsoNormal">WinForms code<br />
<LI class="MsoNormal">ASP.Net objects – user controls, HttpContext objects (but I’d advise against doing this directly)<br />
<LI class="MsoNormal">Web service proxy classes.<SPAN>&nbsp; </SPAN>Absolute no-brainer.<SPAN>&nbsp; </SPAN><br />
<LI class="MsoNormal">Database access code, persistence<br />
<LI class="MsoNormal">Active Directory access<br />
<LI class="MsoNormal">Gateways to weird legacy code or systems – and almost all legacy code IS weird<br />
<LI class="MsoNormal">Facades to other subsystems<br />
<LI class="MsoNormal">Remoted classes</LI></UL><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">&nbsp;</P><br />
<P class="MsoNormal">Next up is a discussion on the <A HREF="/blogs/jeremy.miller/archive/2006/01/10/136407.aspx">best practices for mock objects</A>, including a section on when NOT to use mock objects.</P></p>
<div class="shr-publisher-116"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/test-driven-development/" title="View all posts in Test Driven Development" rel="category tag">Test Driven Development</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/" title="Permalink to Why and When to Use Mock Objects" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/feed/" title="Comments RSS to Why and When to Use Mock Objects" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-116 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2005/12/19/mock-objects-and-stubs-the-bottle-brush-of-tdd/" rel="prev"><span class="meta-nav">&larr;</span> Mock Objects and Stubs:  The Bottle Brush of TDD</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2006/01/10/best-and-worst-practices-for-mock-objects/" rel="next">Best and Worst Practices for Mock Objects <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-422">
                    <div id="dsq-comment-header-422" class="dsq-comment-header">
                        <cite id="dsq-cite-422">
    http://www.ayende.com/Blog/                            <span id="dsq-author-user-422">Ayende Rahien</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-422" class="dsq-comment-body">
                        <div id="dsq-comment-message-422" class="dsq-comment-message"><p>You may also want to talk about the exepctations granuality.<br />
It&#8217;s easy to overly specify the expectation, making the test very brittle to changes in the code.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-423">
                    <div id="dsq-comment-header-423" class="dsq-comment-header">
                        <cite id="dsq-cite-423">
                                <span id="dsq-author-user-423">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-423" class="dsq-comment-body">
                        <div id="dsq-comment-message-423" class="dsq-comment-message"><p>Ayende,</p>
<p>I hear you perfectly.  I&#8217;ve burned myself a couple times with granular expectations.  I&#8217;m going to try to demo just that when I talk about constraints and best practices.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-424">
                    <div id="dsq-comment-header-424" class="dsq-comment-header">
                        <cite id="dsq-cite-424">
                                <span id="dsq-author-user-424">Daren Desjardins</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-424" class="dsq-comment-body">
                        <div id="dsq-comment-message-424" class="dsq-comment-message"><p>You have been making some great points.</p>
<p>For a thorough and excellent discussion of these topics, also check out</p>
<p>Working Effectively with Legacy Code<br />
Michael Feathers<br />
<a href="http://www.amazon.com/gp/product/0131177052/qid=1135278121/sr=8-1/ref=pd_bbs_1/002-6398087-0807246?n=507846&#038;s=books&#038;v=glance" rel="nofollow">http://www.amazon.com/gp/product/0131177052/qid=1135278121/sr=8-1/ref=pd_bbs_1/002-6398087-0807246?n=507846&#038;s=books&#038;v=glance</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-425">
                    <div id="dsq-comment-header-425" class="dsq-comment-header">
                        <cite id="dsq-cite-425">
                                <span id="dsq-author-user-425">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-425" class="dsq-comment-body">
                        <div id="dsq-comment-message-425" class="dsq-comment-message"><p>Daren,</p>
<p>Thanks for the comment.  Our little dev organization has all read the Feathers book.  I&#8217;d second the recommendation.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-426">
                    <div id="dsq-comment-header-426" class="dsq-comment-header">
                        <cite id="dsq-cite-426">
                                <span id="dsq-author-user-426">Ben Hale</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-426" class="dsq-comment-body">
                        <div id="dsq-comment-message-426" class="dsq-comment-message"><p>I know you&#8217;re not a Spring.NET guy and to be honest, as a Java guy I&#8217;m not entirely sure this is even in Spring.NET yet, but it&#8217;s definiately one of the coolest things I&#8217;ve seen in testing in a while.  There is a class called AstractTransactionSpringContextTest in the spring-mock area.  Basically this class uses the setup and teardown methods to open a jdbc transaction and roll it back after the test.  There are a couple of major benefits to this behavior.  The first and most obvious is that if every single transaction is rolled back, and data that is ever written to the database, is never visible by anyone else.  This means that even when using a shared database for testsing, there is no way that the data ever changes beyond the initial state; as long as the initial state can handle all tests, you never have to touch the database.  The second and just as nice benefit is speed.  In pretty much any RDMS these days, a rollback is pretty much instant therefore at the end of the test, not only do you not have the time penalty for the commit to the database, but you also don&#8217;t have to pay any penalties to actually cleanup the database at the end.  We&#8217;ve ended up using this with great success in code that uses hibernate.  Basically we see that we pay a minor penalty bringing the BeanFactory to life at the beginning of a test suite, but after that each tests runs just as fast as if it was a unit tests (minus network overhead of course).</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-427">
                    <div id="dsq-comment-header-427" class="dsq-comment-header">
                        <cite id="dsq-cite-427">
                                <span id="dsq-author-user-427">Mike Bria</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-427" class="dsq-comment-body">
                        <div id="dsq-comment-message-427" class="dsq-comment-message"><p>I just came across this thread today.  I work on a very large distributed html/java/sql-based application that, in a nutshell, supports the business of hospitals.  The project is close to eight years old, as is the many millions of lines of code and many hundreds of database tables.  The point &#8212; it&#8217;s BIG. Just recently, my organization has gone Agile [or, at least, is in the process <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> ]. I&#8217;ve got a great handle at this point on the fundamentals of unit testing / design (small, isolated tests leveraging mocks [we use JMock], Dependency Injection, Single Responsibility Principl, etc, etc, etc) and that&#8217;s spreading well.  On the other hand, I&#8217;ve been having a harder time trying to get my head around how to implement good developer acceptance tests (using FitNesse) in my environment because of the massive model/service dependencies across the application.  These dependencies make ideal setup of a FitNesse test (one which is relatively simple, explanatory, clear, etc) a real daunting task, a near impossibility.  So, my thought (and question) is this:  is it okay for me to apply &#8220;faking&#8221; principles at a service level?  In other words &#8212; I&#8217;m testing service 1, which, among a bunch of other little details, queries service 2 and posts a command to service 3.  Can my test fake Service 2 &#038; 3 and still be a valid Acceptance (or, what I prefer to call &#8220;Service&#8221;) test?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-428">
                    <div id="dsq-comment-header-428" class="dsq-comment-header">
                        <cite id="dsq-cite-428">
    http://blog.james-carr.org                            <span id="dsq-author-user-428">James Carr</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-428" class="dsq-comment-body">
                        <div id="dsq-comment-message-428" class="dsq-comment-message"><p>Great post. I use mocks religously &#8230; I believe that if an object is not directly tied to the unit you are testing, it should be mocked out. Of course this is an area of disagreement with some, as I think that unit tests for DAOs, for example, should use mock connection and mock resultsets using recorded data, while others think testing the ability to hit the database is part of the test.</p>
<p>My question is, when is it acceptable to use mocks in acceptance tests?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-429">
                    <div id="dsq-comment-header-429" class="dsq-comment-header">
                        <cite id="dsq-cite-429">
                                <span id="dsq-author-user-429">Mike Bria</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-429" class="dsq-comment-body">
                        <div id="dsq-comment-message-429" class="dsq-comment-message"><p>Jeremy &#8211;<br />
  Hoping you would have posted an opinion on my question &#8211; it appears you may have (?) started, but then nothing follows.  Do you have one?  I&#8217;d love to hear it.  Thanks bud&#8230;</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-430">
                    <div id="dsq-comment-header-430" class="dsq-comment-header">
                        <cite id="dsq-cite-430">
                                <span id="dsq-author-user-430">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-430" class="dsq-comment-body">
                        <div id="dsq-comment-message-430" class="dsq-comment-message"><p>Sorry about that Mike.  I made a separate post for that &#8211;> <a href="http://codebetter.com/blogs/jeremy.miller/archive/2006/06/08/146233.aspx" rel="nofollow">http://codebetter.com/blogs/jeremy.miller/archive/2006/06/08/146233.aspx</a></p>
<p>The comment up above should link to the new post as well.</p>
<p>The short answer is that I think you&#8217;re approach is perfectly justified, and I would hope so because we do the same thing to test our messaging broker component workflow against 3rd party web services.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-431">
                    <div id="dsq-comment-header-431" class="dsq-comment-header">
                        <cite id="dsq-cite-431">
                                <span id="dsq-author-user-431">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-431" class="dsq-comment-body">
                        <div id="dsq-comment-message-431" class="dsq-comment-message"><p>James,</p>
<p>Sorry I missed your comment.  I&#8217;m going to come down very hard on the subject of mocking connections/resultsets/data readers.  The effort to reward ration is all wrong.  It&#8217;s too much work and leads to ugly looking tests that aren&#8217;t readable.</p>
<p>My money is on mocking an interface to the DAO itself, and testing the DAO against the database itself.</p>
<p>Jeremy</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-6969">
                    <div id="dsq-comment-header-6969" class="dsq-comment-header">
                        <cite id="dsq-cite-6969">
    http://www.backlinkschecker.ws/backlinks/resources.html                            <span id="dsq-author-user-6969">Backlink Watch</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-6969" class="dsq-comment-body">
                        <div id="dsq-comment-message-6969" class="dsq-comment-message"><p>Thanks for nice<br />
  and informative article!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-7315">
                    <div id="dsq-comment-header-7315" class="dsq-comment-header">
                        <cite id="dsq-cite-7315">
                                <span id="dsq-author-user-7315">Wil Wiseman</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-7315" class="dsq-comment-body">
                        <div id="dsq-comment-message-7315" class="dsq-comment-message"><p>I hate to sound like one of those guys that argue for the sake of arguement, but I have a different take on Mock and test driven development. When let the requirements and design patterns drive code design, you end up with all the initial benefits of data hiding, componentization, and an object oriented design.  When you apply Mock best practicies, you end up with highly procedural code, that no longer hides implementation details, but is forced to expose most of what where private methods and interfaces so it can be test-driven. In the end, the code deviates from the function it was intended and becomes something else entirely. Now when you need to make changes, it becomes brital in the sense that each nUnit and mock starts breaking. Not due to bugs in the code, but the change in flow. Most developers hate documentation due to this keeping up with the Jones&#8217;.  In the end, the developer would be better served focusing on functional testing using Mock or nUnit. Or &#8216;stringing&#8217; togther the nUnits to create the functional test. But to purest, this is a vialoation of the nUnit atomicity, so would never go there and rely on QA to do functional testing. When that doesn&#8217;t happen (for whatever reason), you are back at square one shipping bugs in code.</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2005/12/20/why-and-when-to-use-mock-objects/';
    var disqus_identifier = '116 /blogs/jeremy.miller/archive/2005/12/20/135800.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "Why and When to Use Mock Objects";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=116');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2005\/12\/20\/why-and-when-to-use-mock-objects\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profile’s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.526 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 12:11:50 -->
<!-- super cache -->