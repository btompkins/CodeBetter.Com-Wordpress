<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Interception capabilities of StructureMap 2.5 | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://cdn1.codebetter.com/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Jeremy D. Miller' href='http://codebetter.com/jeremymiller/' />
<link rel='start' title='Bypass VSTS and get yourself a &quot;Poor Man&#8217;s IntelliJ&quot;' href='http://codebetter.com/jeremymiller/2005/04/12/bypass-vsts-and-get-yourself-a-poor-mans-intellij/' />
<link rel='prev' title='Create your own Auto Registration Convention with StructureMap' href='http://codebetter.com/jeremymiller/2009/01/20/create-your-own-auto-registration-convention-with-structuremap/' />
<link rel='next' title='Convention over Configuration in MSDN Magazine' href='http://codebetter.com/jeremymiller/2009/01/24/convention-over-configuration-in-msdn-magazine/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/jeremymiller/2009/01/21/interception-capabilities-of-structuremap-2-5/' />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=659' />
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/theshadetreedeveloper/disqus.css?v=2.0" type="text/css" media="screen" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-659" class="post-659 post type-post status-publish format-standard hentry category-structuremap">
					<h1 class="entry-title">Interception capabilities of StructureMap 2.5</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2009/01/21/interception-capabilities-of-structuremap-2-5/" title="12:12 pm" rel="bookmark"><span class="entry-date">January 21, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>Reposted from <a href="http://structuremap.sourceforge.net/Interception.htm">http://structuremap.sourceforge.net/Interception.htm</a>.&nbsp; I think this will be the last StructureMap post of the day for a while.&nbsp; </p>
<p>&nbsp;</p>
<p>StructureMap 2.5+ added the ability to postprocess or even intercept and replace<br />
            the objects being created.&nbsp; While StructureMap will never include its own<br />
            Aspect Oriented Programming model (the world does not need a new one), the<br />
            interception techniques shown below could be used to apply runtime AOP from<br />
            existing AOP tools like the Policy Injection Application Block from Microsoft or the AOP library from Spring.Net.</p>
<p>In general, interception is specified in three ways:</p>
<ol>
<li>OnCreation() &#8212; Registers an Action to run against the new object after creation</li>
<li>EnrichWith() &#8212; Registers a Func that runs against the new object after creation<br />
                and gives you the option of returning a different object than the original<br />
                object</li>
<li>A custom class that implements the TypeInterceptor interface (the runtime model<br />
                behind all the interception techniques)</li>
</ol>
<p>
            &nbsp;</p>
<h2>Intercept a Single Instance</h2>
<p>You can specify interception for a single Instance.&nbsp; This interception could<br />
            be combined with other Interception policies, but users should be cautious about<br />
            this.&nbsp; </p>
<h4>Run an Action Against an Object</h4>
<p>Some classes may require some extra bootstrapping work before they are ready to<br />
            be used.&nbsp; While I recommend building classes in such a way that the new<br />
            objects are ready to function after calling the constructor function, not every<br />
            class you will encounter will follow this rule.&nbsp; For that reason,<br />
            StructureMap has the ability to register an Action&lt;T&gt; to run against a newly<br />
            created object before it is returned to the requesting code.&nbsp; You can<br />
            register that Action on an individual Instance:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>InterceptionRegistry</span> :<br />
                <span>Registry</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                InterceptionRegistry()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // Perform an Action&lt;T&gt; upon the object of type T </span>
            </p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // just created before it is returned to the caller</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;().TheDefault.Is</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OfConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OnCreation(x =&gt; x.Start());</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // or&#8230;</span></p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // You can also register an Action&lt;IContext, T&gt; to get access</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // to all the services and capabilities of the BuildSession</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;().TheDefault.Is</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OfConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OnCreation((context, x) =&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: blue">var</span> connection = context.GetInstance&lt;<span>IConnectionPoint</span>&gt;();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                x.Connect(connection);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<hr />
<h4>Wrap or Substitute the Returned Object</h4>
<p>Sometimes you may want to wrap the constructed object in some sort of Decorator<br />
            or apply runtime AOP to the new object.&nbsp; In this case, StructureMap will<br />
            allow you to substitute the constructed object for the new wrapped object &#8212;<br />
            with the restriction that the object returned must be assignable to the<br />
            requested PluginType.&nbsp; Let&#8217;s consider the case of using a<br />
            <a href="http://resharper.codebetter.com/blogs/jeremy.miller/archive/2005/09/02/131613.aspx"><br />
            Decorator</a> pattern to add logging to an existing service:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>LoggingDecorator</span> :<br />
                <span>IConnectionListener</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span><br />
                <span style="color: blue">readonly</span> <span><br />
                IConnectionListener</span> _inner;</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                LoggingDecorator(<span>IConnectionListener</span> inner)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _inner = inner;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>When you register an instance of IConnectionListener, you can specify that the<br />
    constructed object get wrapped with a decorator using the EnrichWith() syntax<br />
    like this:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                InterceptionRegistry()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>IConnectionListener</span>&gt;().TheDefault.Is</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OfConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .EnrichWith(x =&gt; <span style="color: blue">new</span><br />
                <span>LoggingDecorator</span>(x));</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>In the sample registration above, a call to<br />
    Container.GetInstance&lt;IConnectionListener&gt;() will result in a new<br />
    ClassThatNeedsSomeBootstrapping wrapped in a LoggingDecorator object:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span>Test</span>]</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">void</span><br />
                see_the_enrichment_with_a_decorator_in_action()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> container = <span style="color: blue">new</span><br />
                <span>Container</span>(<span style="color: blue">new</span><br />
                <span>InterceptionRegistry</span>());</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container.GetInstance&lt;<span>IConnectionListener</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .ShouldBeOfType&lt;<span>LoggingDecorator</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .Inner.ShouldBeOfType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>There is also an overload of EnrichWith() that takes in the IContext object:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>IConnectionListener</span>&gt;().TheDefault.Is</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OfConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .EnrichWith((context, x) =&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: blue">var</span> connection = context.GetInstance&lt;<span>IConnectionPoint</span>&gt;();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                x.Connect(connection);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: blue">return</span> <span style="color: blue">new</span><br />
                <span>LoggingDecorator</span>(x);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
</p></div>
<p><!--EndFragment--></p>
<p>See <a href="http://codebetter.com/controlpanel/blogs/UsingSessionContext.htm">Using the Session Context</a> for more<br />
            information on using the IContext.</p>
<hr />
<h4>With a Custom Interceptor</h4>
<p>To write a custom Interceptor for a single Instance, create a new class that<br />
            implements the InstaneInterceptor interface:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span><br />
                <span>InstanceInterceptor</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">object</span> Process(<span style="color: blue">object</span> target, <span><br />
                IContext</span> context);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>&nbsp;with a class like this:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>CustomInterceptor</span> :<br />
                <span>InstanceInterceptor</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">object</span> Process(<span style="color: blue">object</span><br />
                target, <span>IContext</span> context)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // manipulate the target object and return a wrapped version</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                return</span> wrapTarget(target);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">private</span><br />
                <span style="color: blue">object</span> wrapTarget(<span style="color: blue">object</span><br />
                target)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                throw</span> <span style="color: blue">new</span> <span><br />
                NotImplementedException</span>();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>Then, register the a new object instance of the CustomerInterceptor:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>IConnectionListener</span>&gt;().TheDefault.Is</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OfConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .InterceptWith(<span style="color: blue">new</span><br />
                <span>CustomInterceptor</span>());</p>
</p></div>
<hr />
<h2>Apply Interception to all Instances of a PluginType</h2>
<p>The same OnCreation(), EnrichWith(), and InterceptWith() methods can be applied<br />
            to all Instances of a given PluginType off of the ForRequestedType() or<br />
            BuildInstancesOf() methods of the <a href="http://codebetter.com/controlpanel/blogs/RegistryDSL.htm">Registry DSL</a>:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // Place the Interception at the PluginType level</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ForRequestedType&lt;<span>IConnectionListener</span>&gt;()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .OnCreation(x =&gt; x.StartConnection())&nbsp;&nbsp;&nbsp;<br />
                <span style="color: green">// OnCreation</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .EnrichWith(x =&gt; <span style="color: blue">new</span><br />
                <span>LoggingDecorator</span>(x))<br />
                <span style="color: green">// Enrich</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .InterceptWith(<span style="color: blue">new</span><br />
                <span>CustomInterceptor</span>())&nbsp;&nbsp;<br />
                <span style="color: green">// Custom Interceptor</span></p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .TheDefaultIsConcreteType&lt;<span>ClassThatNeedsSomeBootstrapping</span>&gt;();</p>
</p></div>
<p><!--EndFragment--></p>
<p>Note that these methods can be used in combination with each other and even<br />
    multiple times for the same type.&nbsp; All additional calls are additive.&nbsp;<br />
    Use with caution!</p>
<hr />
<h2>Apply Interception to all Types Matching a Criteria</h2>
<p>If an interception policy is simple, you can just register the interception<br />
            policy with the IfTypeMatches( Predicate&lt;Type&gt; ).InterceptWith(&nbsp;&nbsp;<br />
            Lambda&nbsp; ) syntax:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; registry.IfTypeMatches(type<br />
                =&gt; type.Equals(<span style="color: blue">typeof</span> (<span>BlueSomething</span>)))</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .InterceptWith(rawInstance =&gt; <span style="color: blue">new</span><br />
                <span>WrappedSomething</span>((<span>IAnInterfaceOfSomeSort</span>) rawInstance));</p>
</p></div>
<p><!--EndFragment--></p>
<p>Please note that when StructureMap encounters a new concrete type for the first<br />
    time, it searches for all TypeInterceptors that match that the concrete type,<br />
    and caches these TypeInterceptors against the concrete type for future usage.&nbsp;<br />
    The long and short of this is that any filter on the type is only going to be<br />
    evaluated once.</p>
<hr />
<h2>Creating a Custom Type Interceptor</h2>
<p>Sooner or later the Fluent Interface registration of TypeInterceptors will not be<br />
            adequate.&nbsp; In that case, you can create a custom class that implements the<br />
            TypeInterceptor interface:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><br />
                <span style="color: gray">&lt;summary&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> A<br />
                TypeInterceptor that is only applied if the MatchesType()</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> method is<br />
                true for a given Type</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><br />
                <span style="color: gray">&lt;/summary&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span><br />
                <span>TypeInterceptor</span> :<br />
                <span>InstanceInterceptor</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;summary&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> Does this TypeInterceptor apply to the given type?</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;/summary&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;param<br />
                name=&#8221;type&#8221;&gt;&lt;/param&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;returns&gt;&lt;/returns&gt;</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">bool</span> MatchesType(<span>Type</span> type);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>Registered TypeInterceptor objects are applied against any object created by<br />
    StructureMap if the type of the new object meets the MatchesType() method of<br />
    TypeInterceptor.&nbsp; You can happily use multiple TypeInterceptors.</p>
<p>Here&#8217;s a fairly advanced example.&nbsp; Let&#8217;s say that you&#8217;re using an<br />
            <a href="http://codebetter.com/blogs/jeremy.miller/archive/2008/01/11/build-your-own-cab-extensible-pub-sub-event-aggregator-with-generics.aspx"><br />
            Event Aggregator</a> pattern.&nbsp; You&#8217;ll typically have some sort of Event<br />
            Aggregator, and a listener interface to register with the Event Aggregator.</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span><br />
                <span>IEventListener</span>&lt;T&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> ProcessEvent(T<br />
                @event);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span><br />
                <span>IEventAggregator</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">void</span><br />
                RegisterListener&lt;T&gt;(<span>IEventListener</span>&lt;T&gt;<br />
                listener);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">void</span><br />
                PublishEvent&lt;T&gt;(T @event);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>Let&#8217;s say that anytime an object of any sort (Presenter, Controller, View, who<br />
    knows what) is created by StructureMap, we want to see if that object implements<br />
    any sort of IEventListener&lt;T&gt; interface, and if it does, register that object as<br />
    a listener with the IEventAggregator.&nbsp; Here&#8217;s the custom TypeInterceptor<br />
    that does just this (most of the code is actually just massaging the generic<br />
    types, but I wanted a nontrivial example):</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>ListenerInterceptor</span> :<br />
                <span>TypeInterceptor</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">object</span> Process(<span style="color: blue">object</span><br />
                target, <span>IContext</span> context)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // Assuming that &#8220;target&#8221; is an implementation of IEventListener&lt;T&gt;,</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // we&#8217;ll do a little bit of generics sleight of hand</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // to register &#8220;target&#8221; with IEventAggregator</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> eventType = target.GetType().FindInterfaceThatCloses(<span style="color: blue">typeof</span> (<span>IEventListener</span>&lt;&gt;)).GetGenericArguments()[0];</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> type = <span style="color: blue">typeof</span> (<span>Registration</span>&lt;&gt;).MakeGenericType(eventType);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span><br />
                Registration</span> registration = (<span>Registration</span>)<br />
                <span>Activator</span>.CreateInstance(type);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                registration.RegisterListener(context, target);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // we didn&#8217;t change the target object, so just return it</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                return</span> target;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">bool</span> MatchesType(<span>Type</span> type)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // ImplementsInterfaceTemplate is an Extension method in the</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // StructureMap namespace that basically says:</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // does this type implement any closed type of the open template type?</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                return</span> type.ImplementsInterfaceTemplate(<span style="color: blue">typeof</span><br />
                (<span>IEventListener</span>&lt;&gt;));</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// The inner type and<br />
                interface is just a little trick to</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green">// grease the generic<br />
                wheels</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">interface</span> <span><br />
                Registration</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                void</span> RegisterListener(<span>IContext</span><br />
                context, <span style="color: blue">object</span> listener);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">class</span> <span><br />
                Registration</span>&lt;T&gt; : <span>Registration</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                public</span> <span style="color: blue">void</span> RegisterListener(<span>IContext</span> context, <span style="color: blue"><br />
                object</span> listener)</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: blue">var</span> aggregator = context.GetInstance&lt;<span>IEventAggregator</span>&gt;();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                aggregator.RegisterListener&lt;T&gt;((<span>IEventListener</span>&lt;T&gt;)<br />
                listener);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>Finally, you can register the new ListenerInterceptor like this:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>ListeningRegistry</span> :<br />
                <span>Registry</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                ListeningRegistry()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RegisterInterceptor(<span style="color: blue">new</span> <span><br />
                ListenerInterceptor</span>());</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>By the way, this is cooked up sample code.&nbsp; Don&#8217;t dream for a second that<br />
    it&#8217;ll work without some testing.</p>
<hr />
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2009/01/21/interception-capabilities-of-structuremap-2-5/" title="Permalink to Interception capabilities of StructureMap 2.5" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2009/01/21/interception-capabilities-of-structuremap-2-5/feed/" title="Comments RSS to Interception capabilities of StructureMap 2.5" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-659 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2009/01/20/create-your-own-auto-registration-convention-with-structuremap/" rel="prev"><span class="meta-nav">&larr;</span> Create your own Auto Registration Convention with StructureMap</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2009/01/24/convention-over-configuration-in-msdn-magazine/" rel="next">Convention over Configuration in MSDN Magazine <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-5189">
					<div id="dsq-comment-header-5189" class="dsq-comment-header">
						<cite id="dsq-cite-5189">
								<span id="dsq-author-user-5189">Randall Shimkus</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5189" class="dsq-comment-body">
						<div id="dsq-comment-message-5189" class="dsq-comment-message"><p>Jeremy,</p>
<p>Great post &#8211; I&#8217;m looking for a little more explanation on the subject.  What I&#8217;m trying to do is write a custom interceptor for WCF proxy classes so that I can determine if the communication state is faulted before returning the instance.  The following post &#8211; <a href="http://javicrespotech.blogspot.com/2008/09/singleton-wcf-proxy.html" rel="nofollow">http://javicrespotech.blogspot.com/2008/09/singleton-wcf-proxy.html</a> &#8211; explains the theory using Castle.  I&#8217;m using and have only ever used StructureMap as a DI tool.  If possible, how would I register the custom interceptor in a config file?  Any advice?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5190">
					<div id="dsq-comment-header-5190" class="dsq-comment-header">
						<cite id="dsq-cite-5190">
								<span id="dsq-author-user-5190">Arthur</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5190" class="dsq-comment-body">
						<div id="dsq-comment-message-5190" class="dsq-comment-message"><p>Have you considered implementing support for IDisposable in structuremap? It would be useful in certain cases to intercept disposal as well.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5191">
					<div id="dsq-comment-header-5191" class="dsq-comment-header">
						<cite id="dsq-cite-5191">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-5191">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5191" class="dsq-comment-body">
						<div id="dsq-comment-message-5191" class="dsq-comment-message"><p>@Arthur,</p>
<p>Sorry for the slow response.  I&#8217;m nearly dead set against the type of IDisposable support that Windsor does.  All I ever hear are complaints of people who have massive memory leaks because Windsor inexplicably keeps refererences.</p>
<p>Something like AutoFac&#8217;s &#8220;scoped container&#8221; maybe.  How about something like this:</p>
<p>using (IContainer container = ObjectFactory.NewSession())<br />
{<br />
   // do stuff<br />
} // at the closing of the using statement, all transient objects fetched from container are disposed.</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/jeremymiller/2009/01/21/interception-capabilities-of-structuremap-2-5/ ';
	var disqus_identifier = '659 /blogs/jeremy.miller/archive/2009/01/21/interception-capabilities-of-structuremap-2-5.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'theshadetreedeveloper';
	var disqus_title = "Interception capabilities of StructureMap 2.5";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData â€” fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=659');
		});
					};
	var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2009\/01\/21\/interception-capabilities-of-structuremap-2-5\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://topsy.com/codebetter.com/jeremymiller/2011/01/28/announcing-the-new-atx-code-lunch/?utm_source=pingback&amp;utm_campaign=L2' rel='external nofollow' class='url'>Tweets that mention Announcing the new ATX Code Lunch | Jeremy D. Miller -- Topsy.com</a> on <a href="http://codebetter.com/jeremymiller/2011/01/28/announcing-the-new-atx-code-lunch/#comment-6765">Announcing the new ATX Code Lunch</a></li><li class="recentcomments"><a href='http://weblogs.asp.net/thangchung' rel='external nofollow' class='url'>thangchung</a> on <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/#comment-6764">&quot;BuildUp&quot; Existing Objects with StructureMap</a></li><li class="recentcomments">Steven Gentile on <a href="http://codebetter.com/jeremymiller/2011/01/23/if-you-are-using-structuremap-with-mvc3-please-read-this/#comment-6763">If you are using StructureMap with MVC3, please read this:</a></li><li class="recentcomments">jabits on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6761">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">Michael Meadows on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6754">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.297 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-31 07:38:10 -->
<!-- super cache -->