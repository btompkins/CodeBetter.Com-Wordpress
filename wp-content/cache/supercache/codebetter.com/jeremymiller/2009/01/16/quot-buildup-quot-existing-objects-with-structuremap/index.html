<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>&quot;BuildUp&quot; Existing Objects with StructureMap | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/jeremymiller/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/jeremymiller/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Jeremy D. Miller' href='http://codebetter.com/jeremymiller/' />
<link rel='start' title='Bypass VSTS and get yourself a &quot;Poor Man&#8217;s IntelliJ&quot;' href='http://codebetter.com/jeremymiller/2005/04/12/bypass-vsts-and-get-yourself-a-poor-mans-intellij/' />
<link rel='prev' title='Creating Policies for Setter Injection in StructureMap' href='http://codebetter.com/jeremymiller/2009/01/16/creating-policies-for-setter-injection-in-structuremap/' />
<link rel='next' title='The recordings of the Virtual ALT.NET Meetings are online' href='http://codebetter.com/jeremymiller/2009/01/17/the-recordings-of-the-virtual-alt-net-meetings-are-online/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/' />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=654' />
<link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/theshadetreedeveloper/disqus.css?v=2.0" type="text/css" media="screen" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-654" class="post-654 post type-post status-publish format-standard hentry category-structuremap">
					<h1 class="entry-title">&quot;BuildUp&quot; Existing Objects with StructureMap</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/" title="2:41 pm" rel="bookmark"><span class="entry-date">January 16, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/jeremymiller/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>I know, you&#8217;re plrobably sick of me clogging the CodeBetter feed with this stuff, but I needed to post this just to answer a question on the StructureMap list.&nbsp; A longstanding feature request is to be able to apply setter injection of dependencies into an object that&#8217;s already constructed.&nbsp; The main culprit is WebForms and other *ahem* frameworks that don&#8217;t allow you to control the construction of objects.&nbsp; I resisted it for quite some time because a.) I don&#8217;t do WebForms and b.) I thought it was going to be hard. Well, enought people asked for it, I found a very good reason to use it on our app, and it turned out that it only took an hour or so to implement*, so here it is (excerpted from the <a href="http://structuremap.sourceforge.net/ConstructorAndSetterInjection.htm#section8">StructureMap docs</a>):</p>
<p>Many times you simply cannot control when an object is going to be created<br />
            (ASP.Net WebForms), but you may still want to inject dependencies and even<br />
            primitive values into an already constructed object.&nbsp; To fill this gap,<br />
            StructureMap 2.5.2+ introduces the &#8220;BuildUp()&#8221; method on Container and<br />
            ObjectFactory.&nbsp; BuildUp() works by finding the default Instance for the<br />
            concrete type passed into the BuildUp() method (or create a new Instance if one<br />
            does not already exist), then applying any setters from that Instance<br />
            configuration.&nbsp; At this time, StructureMap does not apply interception<br />
            inside of BuildUp().</p>
<p>Let&#8217;s say that we have a class called &#8220;BuildTarget1&#8243; like<br />
            this:</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>BuildUpTarget1</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span>IGateway</span> Gateway {<br />
                <span style="color: blue">get</span>; <span style="color: blue">set</span>; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>In usage, we&#8217;d like to have the Gateway dependency injected into a new instance of the BuildTarget1 class when we call BuildUp():</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span>Test</span>]</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">void</span><br />
                create_a_setter_rule_and_see_it_applied_in_BuildUp_through_ObjectFactory()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> theGateway = <span style="color: blue">new</span><br />
                <span>DefaultGateway</span>();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span><br />
                ObjectFactory</span>.Initialize(x =&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                x.ForRequestedType&lt;<span>IGateway</span>&gt;().TheDefault.IsThis(theGateway);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: green">// First we create a new Setter Injection Policy<br />
                that</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: green">// forces StructureMap to inject all public<br />
                properties</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                <span style="color: green">// where the PropertyType is IGateway</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                x.SetAllProperties(y =&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                y.OfType&lt;<span>IGateway</span>&gt;();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // Create an instance of BuildUpTarget1</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> target = <span style="color: blue">new</span><br />
                <span>BuildUpTarget1</span>();</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // Now, call BuildUp() on target, and</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // we should see the Gateway property assigned</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span><br />
                ObjectFactory</span>.BuildUp(target);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                target.Gateway.ShouldBeTheSameAs(theGateway);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p><!--EndFragment--></p>
<p>BuildUp() also works with primitive properties (but I&#8217;m not sure how useful this<br />
    will really be):</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>ClassThatHasConnection</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">string</span> ConnectionString {<br />
                <span style="color: blue">get</span>; <span style="color: blue">set</span>; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; [<span>TestFixture</span>]</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span><br />
                <span>demo_the_BuildUp</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span>Test</span>]</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span><br />
                <span style="color: blue">void</span> push_in_a_string_property()</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // There is a limitation to this.&nbsp; As of StructureMap 2.5.2,</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // you can only use the .WithProperty().EqualTo() syntax</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // for BuildUp()</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: green"><br />
                // SetProperty() will not work at this time.</span></p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> container = <span style="color: blue">new</span><br />
                <span>Container</span>(x =&gt;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                x.ForConcreteType&lt;<span>ClassThatHasConnection</span>&gt;().Configure</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                .WithProperty(o =&gt; o.ConnectionString).EqualTo(<span>&#8220;connect1&#8243;</span>);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: blue"><br />
                var</span> @class = <span style="color: blue">new</span><br />
                <span>ClassThatHasConnection</span>();</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container.BuildUp(@class);</p>
<p style="margin: 0px">
                &nbsp;</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
                @class.ConnectionString.ShouldEqual(<span>&#8220;connect1&#8243;</span>);</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">
&nbsp;&nbsp;&nbsp; }</p>
</p></div>
<p>&nbsp;</p>
<p><b>How my Team Uses This</b></p>
<p>I mentioned earlier that I finally did this because I wanted to use it for my project.&nbsp; We extensively use stuff in our views like:</p>
</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> dashboardUrl = <span>&#8216;&lt;%= this.ActionUrl&lt;HomeController&gt;(c =&gt; c.DashboardIndex()) %&gt;&#8217;</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">var</span> consoleUrl = <span>&#8216;&lt;%= this.ActionUrl&lt;HomeController&gt;(c =&gt; c.Console(null)) %&gt;&#8217;</span></p>
</div>
<p>That call in the view to ActionUrl&lt;T&gt;() calls into a Dovetail specific class called IUrlRegistry that &#8220;knows&#8221; what the actual url is for each controller method.&nbsp; Great, but that means my views need to get at the IUrlRegistry singleton.&nbsp; We started to get ObjectFactory.GetInstance&lt;IUrlRegistry&gt;() calls sprinkled into the base class for our views, but that&#8217;s an anti pattern.&nbsp; Instead, we now use the BuildUp() function to inject a couple common services into our views.&nbsp; First, I created some properties on the View base page called &#8220;Urls&#8221; and &#8220;Container&#8221;:</p>
</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span>DovetailViewPage</span>&lt;VIEWMODEL&gt; : <span>ViewPage</span>&lt;VIEWMODEL&gt;, <span>ITestablePage</span>, <span>IDovetailViewWithModel</span>&lt;VIEWMODEL&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">where</span> VIEWMODEL : <span>ViewModel</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> DovetailViewPage()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span>ObjectFactory</span>.BuildUp(<span style="color: blue">this</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span>IUrlRegistry</span> Urls { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span>IContainer</span> Container { <span style="color: blue">get</span>; <span style="color: blue">set</span>; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>We didn&#8217;t find a clean way to intercept the creation of WebForms objects in the MVC framework without rewriting the WebFormsEngine class completely (we&#8217;re in contact with the MVC team trying to get this relaxed a bit and get a new seam put in there), so I punted and just made a quick call to ObjectFactory.BuildUp(this) in the constructor function to force StructureMap to push in the two setters.&nbsp; It&#8217;s not ideal, but it&#8217;s good enough for the moment.&nbsp; </p>
<p>Lastly, how does StructureMap know to set those two properties, and not others?&nbsp; That&#8217;s where the <a href="/blogs/jeremy.miller/archive/2009/01/16/creating-policies-for-setter-injection-in-structuremap.aspx">new setter injection policies</a> come into play.&nbsp; Inside the Registry that we use to bootstrap our MVC application we have a setter policy that just says &#8220;always inject IUrlRegistry and IContainer&#8221;:</p>
</p>
<div style="border: thin solid black;background: white none repeat scroll 0% 0%;font-family: Courier New;font-size: 10pt;color: black">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span>WebCoreRegistry</span> : <span>Registry</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> WebCoreRegistry()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SetAllProperties(x =&gt;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; x.OfType&lt;<span>IUrlRegistry</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; x.OfType&lt;<span>IContainer</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; });</p>
<p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>The &#8220;IContainer&#8221; property is just a reference to the current Container object behind ObjectFactory.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p></p>
<p>* StructureMap uses Reflection.Emit to write out the &#8220;InstanceBuilder&#8221; classes that invoke constructor functions and apply setter injection to concrete classes.&nbsp; I did it that way partially to gain experience with IL generation for another project I ended up abandoning.&nbsp; Frankly, emitting IL is a humongous PITA.&nbsp; StructureMap 2.5 represents a near rewrite, but I left the emitting code mostly alone with just some minor cleanup.&nbsp; When .Net 4.0 hits with the ability to do much more with Expressions, I&#8217;d at least like to try to replace the emitting code with Expression munging. </p>
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/" title="Permalink to &quot;BuildUp&quot; Existing Objects with StructureMap" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/feed/" title="Comments RSS to &quot;BuildUp&quot; Existing Objects with StructureMap" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-654 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2009/01/16/creating-policies-for-setter-injection-in-structuremap/" rel="prev"><span class="meta-nav">&larr;</span> Creating Policies for Setter Injection in StructureMap</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2009/01/17/the-recordings-of-the-virtual-alt-net-meetings-are-online/" rel="next">The recordings of the Virtual ALT.NET Meetings are online <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-5149">
					<div id="dsq-comment-header-5149" class="dsq-comment-header">
						<cite id="dsq-cite-5149">
	http://http:blogs.lessthandot.com							<span id="dsq-author-user-5149">Christiaan Baes</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5149" class="dsq-comment-body">
						<div id="dsq-comment-message-5149" class="dsq-comment-message"><p>Cool. This will come in handy to inject stuff in winforms usercontrols and keep the designer happy and usable at the same time.</p>
<p>Perhaps I should read the rest of the FM.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5150">
					<div id="dsq-comment-header-5150" class="dsq-comment-header">
						<cite id="dsq-cite-5150">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-5150">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5150" class="dsq-comment-body">
						<div id="dsq-comment-message-5150" class="dsq-comment-message"><p>The &#8220;FM&#8221; is less than a week old, so I&#8217;ll make some allowances <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5151">
					<div id="dsq-comment-header-5151" class="dsq-comment-header">
						<cite id="dsq-cite-5151">
	http://www.heliosfx.com							<span id="dsq-author-user-5151">Travis</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5151" class="dsq-comment-body">
						<div id="dsq-comment-message-5151" class="dsq-comment-message"><p>Thank you for this. So the &#8220;setter injection policies&#8221; only come in to play when BuildUp() is called?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5152">
					<div id="dsq-comment-header-5152" class="dsq-comment-header">
						<cite id="dsq-cite-5152">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-5152">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5152" class="dsq-comment-body">
						<div id="dsq-comment-message-5152" class="dsq-comment-message"><p>@Travis,</p>
<p>No, the setter injection policies are global, and act in all cases.  It&#8217;s just that the BuildUp() will be much more useful with the combination of BuildUp + Setter Injection Policies.</p>
<p>Or at least that&#8217;s my theory&#8230;</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5153">
					<div id="dsq-comment-header-5153" class="dsq-comment-header">
						<cite id="dsq-cite-5153">
	http://jimmybogard.lostechies.com							<span id="dsq-author-user-5153">Jimmy Bogard</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5153" class="dsq-comment-body">
						<div id="dsq-comment-message-5153" class="dsq-comment-message"><p>Thanks for this.  Otherwise, we had a bunch of ObjectFactory.GetInstance calls inside our base view page class, manually setting all of the fields.  That was fugly.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5154">
					<div id="dsq-comment-header-5154" class="dsq-comment-header">
						<cite id="dsq-cite-5154">
								<span id="dsq-author-user-5154">Paco</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5154" class="dsq-comment-body">
						<div id="dsq-comment-message-5154" class="dsq-comment-message"><p>Good post serie about StructureMap!</p>
<p>A bit offtopic, but I wonder how you did build the IUrlRepository implementation. Does it use caching or does it use Lamba.Compile?<br />
I&#8217;m asking this because Html.ActionLink is Asp.Net mvc is the main bottleneck in the app I&#8217;m working on.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5155">
					<div id="dsq-comment-header-5155" class="dsq-comment-header">
						<cite id="dsq-cite-5155">
	http://blogs.lessthandot.com							<span id="dsq-author-user-5155">chrissie1</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5155" class="dsq-comment-body">
						<div id="dsq-comment-message-5155" class="dsq-comment-message"><p>Thank you again for all your hard work. I made a little post about this feature. <a href="http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/structuremap-is-way-cool" rel="nofollow">http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/structuremap-is-way-cool</a> . I will sacrifice an animal in your name tommorow (for the animal lovers out there, an ant or a fly nothing major).</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5156">
					<div id="dsq-comment-header-5156" class="dsq-comment-header">
						<cite id="dsq-cite-5156">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-5156">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5156" class="dsq-comment-body">
						<div id="dsq-comment-message-5156" class="dsq-comment-message"><p>@Paco:</p>
<p>We haven&#8217;t hit a performance problem on that, but we haven&#8217;t done any load testing yet.  You&#8217;re scaring me a little bit.</p>
<p>Chad&#8217;s idea for that is to have the url&#8217;s read into constants right after app initialization.  That&#8217;d largely remove that problem.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5157">
					<div id="dsq-comment-header-5157" class="dsq-comment-header">
						<cite id="dsq-cite-5157">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-5157">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5157" class="dsq-comment-body">
						<div id="dsq-comment-message-5157" class="dsq-comment-message"><p>@chrissie,</p>
<p>Thank you for the comment *and* the blog post.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-5158">
					<div id="dsq-comment-header-5158" class="dsq-comment-header">
						<cite id="dsq-cite-5158">
	http://blogs.lessthandot.com							<span id="dsq-author-user-5158">chrissie1</span>
							</cite>
					</div>
					<div id="dsq-comment-body-5158" class="dsq-comment-body">
						<div id="dsq-comment-message-5158" class="dsq-comment-message"><p>And now there is also a blogpost where I use VB.Net.</p>
<p><a href="http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/structuremap-is-way-cool-even-in-vb-net" rel="nofollow">http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/structuremap-is-way-cool-even-in-vb-net</a></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-6764">
					<div id="dsq-comment-header-6764" class="dsq-comment-header">
						<cite id="dsq-cite-6764">
	http://weblogs.asp.net/thangchung							<span id="dsq-author-user-6764">thangchung</span>
							</cite>
					</div>
					<div id="dsq-comment-body-6764" class="dsq-comment-body">
						<div id="dsq-comment-message-6764" class="dsq-comment-message"><p>Hi Jeremy,</p>
<p>This post is really good to me. I found some methods for setters injecting , and now it is become simple. I like SetAllProperties method in WebCoreRegistry, it is very amazing!</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/ ';
	var disqus_identifier = '654 /blogs/jeremy.miller/archive/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'theshadetreedeveloper';
	var disqus_title = "&quot;BuildUp&quot; Existing Objects with StructureMap";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData â€” fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=654');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/jeremymiller/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2009\/01\/16\/quot-buildup-quot-existing-objects-with-structuremap\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://weblogs.asp.net/thangchung' rel='external nofollow' class='url'>thangchung</a> on <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/#comment-6764">&quot;BuildUp&quot; Existing Objects with StructureMap</a></li><li class="recentcomments">Steven Gentile on <a href="http://codebetter.com/jeremymiller/2011/01/23/if-you-are-using-structuremap-with-mvc3-please-read-this/#comment-6763">If you are using StructureMap with MVC3, please read this:</a></li><li class="recentcomments">jabits on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6761">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">Michael Meadows on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6754">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">InspiringCode on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6753">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.270 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 02:44:34 -->
<!-- super cache -->