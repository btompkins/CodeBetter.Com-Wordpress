<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>The State Pattern:  An Underappreciated Pattern | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Mort + RAD == Business Value Now &amp;&amp; IT Headaches Later' href='http://codebetter.com/jeremymiller/2006/04/28/mort-rad-business-value-now-it-headaches-later/' />
<link rel='next' title='Need some help with the blog appearance please' href='http://codebetter.com/jeremymiller/2006/05/03/need-some-help-with-the-blog-appearance-please/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=155' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,156] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2006/04/30/the-state-pattern-an-underappreciated-pattern/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-155" class="post-155 post type-post status-publish format-standard hentry category-design-patterns">
					<h1 class="entry-title">The State Pattern:  An Underappreciated Pattern</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2006/04/30/the-state-pattern-an-underappreciated-pattern/" title="5:58 pm" rel="bookmark"><span class="entry-date">April 30, 2006</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>Following up on my post on <a href="/blogs/jeremy.miller/archive/2006/04/11/142665.aspx">Six Design Patterns to Start With</a>, I mentioned the State pattern in regards to its similarity to the Strategy pattern.&nbsp; It might not come up that often, but it&#8217;s very effective in creating cleaner code in certain situations.</p>
<p>From <a href="http://www.dofactory.com/">www.dofactory.com</a>, the State pattern is </p>
<blockquote><p>Allow an object to alter its behavior when its internal state changes. The object will appear to change its class. </p></blockquote>
<p>Many objects need to behave differently in several ways when some sort of internal state changes.&nbsp; The State pattern isolates the divergent functionality into swappable classes implementing a common interface.&nbsp; The main object simply delegates to its internal state object at the appropriate times.&nbsp; When the &#8220;state&#8221; property of the main object changes, it simply has to replace its internal state member with a different object.&nbsp; </p>
<p>Let&#8217;s jump into an example.&nbsp; For the last three years or so I&#8217;ve been using a data access layer framework I&#8217;ve written (and rewritten) to do very basic data access.&nbsp; The Facade for the data access layer is called <font face="Courier New">DataSession</font>.&nbsp; Among other things, <font face="Courier New">DataSession</font> wraps and manages all access to the underlying ADO.Net connection and transaction objects.&nbsp; What I came up with was a design that allowed consumers of a <font face="Courier New">DataSession</font> to just drop off an <font face="Courier New">IDbCommand</font> for execution not have to worry about transaction boundaries or <font face="Courier New">IDbTransaction</font> objects.&nbsp; The public interface of <font face="Courier New">IDataSession</font> looks like this:</p>
<div style="border: 1pt solid windowtext;padding: 0pt;background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: Courier New">
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; [PluginFamily("Default")]</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span> IDataSession</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">bool</span> IsInTransaction { <span style="color: blue">get</span>; }</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> BeginTransaction();</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> CommitTransaction();</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> RollbackTransaction();</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">int</span> ExecuteCommand(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">int</span> ExecuteSql(<span style="color: blue">string</span> sql);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDataReader ExecuteReader(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDataReader ExecuteReader(<span style="color: blue">string</span> sql);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; DataSet ExecuteDataSet(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">object</span> ExecuteScalar(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ICommandCollection Commands { <span style="color: blue">get</span>; }</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IReaderSourceCollection ReaderSources { <span style="color: blue">get</span>; }</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> Initialize(IInitializable initializable);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; }</pre>
</div>
<p>Internally, the ADO.Net object usage varies a little bit between an &#8220;autocommit&#8221; mode where each command is its own transaction and a full blown transactional mode.&nbsp; We could write if/then logic inside each method in DataSession to check if it is in a transactional state, but that will make each method longer, messier, and create some duplication.&nbsp; This is where the State pattern comes in to play with an interface called <font face="Courier New">IExecutionState</font>.</p>
<div style="border: 1pt solid windowtext;padding: 0pt;background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: Courier New">
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span> IExecutionState</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">int</span> Execute(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDataReader ExecuteReader(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; DataSet ExecuteDataSet(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">object</span> ExecuteScalar(IDbCommand command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; }</pre>
</div>
<p><font face="Courier New">DataSession</font> has a private field called <font face="Courier New">_currentState</font> that holds an <font face="Courier New">IExecutionState</font> object.&nbsp; Take a look at this method in <font face="Courier New">DataSession</font>:</p>
<div style="border: 1pt solid windowtext;padding: 0pt;background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: Courier New">
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">int</span> ExecuteCommand(IDbCommand command)</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">try</span></pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">return</span> _currentState.Execute(command);</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">catch</span> (Exception ex)</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br /><br />               // Just wraps the ADO exception with a full <br />               // description of the IDbCommand that failed, <br />               // including parameter values<br /></pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <span style="color: blue">throw</span> <span style="color: blue">new</span> CommandFailureException(command, ex);  <br /></pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
</div>
<p>All it does is delegate to the active State object and provide some consistent exception handling.&nbsp; So, how does the State object get set?&nbsp; First off, the <font face="Courier New">DataSession</font> starts with an <font face="Courier New">AutoCommitExecutionState</font> object in the <font face="Courier New">_currentState</font> field.&nbsp; The state object is replaced when a transaction is started.</p>
<div style="border: 1pt solid windowtext;padding: 0pt;background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: Courier New">
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> BeginTransaction()</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">if</span> (IsInTransaction)</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">throw</span> <span style="color: blue">new</span> ApplicationException("A transaction is already started!");</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _transactionalState.BeginTransaction();</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Replace the _currentState with the transactional state</span></pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _currentState = _transactionalState;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
</div>
<p>Then return to the &#8220;autocommit&#8221; state whenever the transaction is committed or rolled back.</p>
<div style="border: 1pt solid windowtext;padding: 0pt;background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: Courier New">
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> CommitTransaction()</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">if</span> (!IsInTransaction)</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">throw</span> <span style="color: blue">new</span> ApplicationException("A transaction is not started!");</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _transactionalState.CommitTransaction();</pre>
<pre style="margin: 0px">&nbsp;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Replace the _currentState with the default "Auto Commit" state</span></pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _currentState = _defaultState;</pre>
<pre style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</pre>
</div>
<p>What did the usage of the State pattern here accomplish?&nbsp; From my perspective it eliminated a lot of if/then logic and greatly simplified the <font face="Courier New">DataSession</font> class.&nbsp; It also isolated the transactional code in a single spot where it became easier to find later, and that&#8217;s awfully important.&nbsp; </p>
<h4>Some Other Examples</h4>
<p>Occasionally connected Smart Clients are a hot topic the past couple years.&nbsp; At several points the smart client has to behave differently based on whether or not its connected to its backend or running locally.&nbsp; I&#8217;ve never done this, but I bet this would be a perfect opportunity to use a State pattern.</p>
<p>I&#8217;ve used the State pattern effectively with user interface screens.&nbsp; Say you have a screen that enables users to edit some sort of business entity.&nbsp; The screen will probably need to behave differently based on whether or not the entity is being created, viewed, or edited.&nbsp; On a project a couple years ago we were able to reuse the same screen to perform several different actions by making the screen controller class delegate to an internal State object for certain operations within the normal screen flow.&nbsp; It enabled us to collapse a couple screens down to one and allowed us to add additional actions to the screen with less effort.&nbsp; This might be relevant to my current project.&nbsp; We are building a little application to manage a simple workflow of a new type of business entity with a couple different steps.&nbsp; We might be able to utilize a state pattern that enables or disables screen actions based on the current state of the business entity and the type of user using the screen.</p>
<h4>Advantages of the State Pattern</h4>
<ol>
<li>Kill off if/then statements.&nbsp; This is one of the primary goals of many of the original Gang of Four patterns, and it&#8217;s a worthy goal.&nbsp; If/then branching can breed bugs.</li>
<li>Reduces duplication by eliminating repeated if/then or switch statements, same as its close cousin the Strategy pattern.</li>
<li>Increased cohesion.&nbsp; By aggregating state specific behavior into State classes with intention revealing names it&#8217;s easier to find that specific logic, and it&#8217;s all in one place.</li>
<li>Potential extensibility.&nbsp; Going back to <font face="Courier New">DataSession</font>, I might want to add some sort of asynchronous or delayed caching mode to <font face="Courier New">DataSession</font>.&nbsp; I could do that by implementing a new version of the <font face="Courier New">IExecutionState</font> interface.</li>
<li>Better testability.&nbsp; We could have solved the <font face="Courier New">DataSession</font> state problem by using inheritance and creating separate <font face="Courier New">AutoCommitDataSession</font> and <font face="Courier New">TransactionalDataSession</font> classes, but the old &#8220;<a href="http://www.artima.com/lejava/articles/designprinciples4.html">favor composition over inheritance</a>&#8221; rule in OO design says that&#8217;s not the best idea and I agree.&nbsp; I was able to unit test the inner workings of <font face="Courier New">DataSession</font> effectively by using mock objects to test the interaction between <font face="Courier New">DataSession</font> and its <font face="Courier New">IExecutionState</font> object <b>without touching a database</b>.</li>
</ol>
<div class="shr-publisher-155"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag">Design Patterns</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2006/04/30/the-state-pattern-an-underappreciated-pattern/" title="Permalink to The State Pattern:  An Underappreciated Pattern" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2006/04/30/the-state-pattern-an-underappreciated-pattern/feed/" title="Comments RSS to The State Pattern:  An Underappreciated Pattern" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-155 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2006/04/28/mort-rad-business-value-now-it-headaches-later/" rel="prev"><span class="meta-nav">&larr;</span> Mort + RAD == Business Value Now &amp;&amp; IT Headaches Later</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2006/05/03/need-some-help-with-the-blog-appearance-please/" rel="next">Need some help with the blog appearance please <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-645">
                    <div id="dsq-comment-header-645" class="dsq-comment-header">
                        <cite id="dsq-cite-645">
    http://Ayende@ayende.com                            <span id="dsq-author-user-645">Ayende Rahien</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-645" class="dsq-comment-body">
                        <div id="dsq-comment-message-645" class="dsq-comment-message"><p>I was never able to differenciate between State and Strategy, what is the different between them, that a strategy doesn&#8217;t change on runtime (only in object construction?)</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-646">
                    <div id="dsq-comment-header-646" class="dsq-comment-header">
                        <cite id="dsq-cite-646">
                                <span id="dsq-author-user-646">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-646" class="dsq-comment-body">
                        <div id="dsq-comment-message-646" class="dsq-comment-message"><p>Ayende,</p>
<p>That sounds like a good definition to me.  I&#8217;ve seen a lot of people, and I agree, that the State pattern may just be a specialized case of Strategy.  Either way, it&#8217;s the same intention to move variation into polymorphism.</p>
<p>Jeremy</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-647">
                    <div id="dsq-comment-header-647" class="dsq-comment-header">
                        <cite id="dsq-cite-647">
    http://ebersys.blogspot.com/                            <span id="dsq-author-user-647">Eber Irigoyen</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-647" class="dsq-comment-body">
                        <div id="dsq-comment-message-647" class="dsq-comment-message"><p>I&#8217;m liking these articles, but this is so hard to read, and this is not a FireFox or IE, it looks bad in both&#8230; and even in Opera (too wide, I hope I&#8217;m not alone on this)</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-648">
                    <div id="dsq-comment-header-648" class="dsq-comment-header">
                        <cite id="dsq-cite-648">
                                <span id="dsq-author-user-648">Brian</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-648" class="dsq-comment-body">
                        <div id="dsq-comment-message-648" class="dsq-comment-message"><p>Eber: Try using an RSS reader, like google.com/reader you can then pull all your content into one place&#8230;</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-649">
                    <div id="dsq-comment-header-649" class="dsq-comment-header">
                        <cite id="dsq-cite-649">
                                <span id="dsq-author-user-649">Kevin Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-649" class="dsq-comment-body">
                        <div id="dsq-comment-message-649" class="dsq-comment-message"><p>Excellent blog posts that I really wish I could more easily read. Please please fix this.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-650">
                    <div id="dsq-comment-header-650" class="dsq-comment-header">
                        <cite id="dsq-cite-650">
    http://ebersys.blogspot.com/                            <span id="dsq-author-user-650">Eber Irigoyen</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-650" class="dsq-comment-body">
                        <div id="dsq-comment-message-650" class="dsq-comment-message"><p>&#8230;on my reader it doesn&#8217;t look too wide&#8230; i just has double spacing in all the source code =o|</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-651">
                    <div id="dsq-comment-header-651" class="dsq-comment-header">
                        <cite id="dsq-cite-651">
    http://scoundrel@gmail.com                            <span id="dsq-author-user-651">Kevin Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-651" class="dsq-comment-body">
                        <div id="dsq-comment-message-651" class="dsq-comment-message"><p>Oh yeah? On my 20&#8243; wide screen monitor it just barely fits. My point is not all people use RSS readers.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-652">
                    <div id="dsq-comment-header-652" class="dsq-comment-header">
                        <cite id="dsq-cite-652">
                                <span id="dsq-author-user-652">Michael</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-652" class="dsq-comment-body">
                        <div id="dsq-comment-message-652" class="dsq-comment-message"><p>IE on Windows&#8230;.  Firefox on Windows and Linux&#8230;.  Tiny window and fully maximized at high-res&#8230;.  Looks perfect.</p>
<p>As usual, it&#8217;s luser error.</p>
<p>Michael</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-653">
                    <div id="dsq-comment-header-653" class="dsq-comment-header">
                        <cite id="dsq-cite-653">
    http://codebetter.com/blogs/darrell.norton/                            <span id="dsq-author-user-653">darrell</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-653" class="dsq-comment-body">
                        <div id="dsq-comment-message-653" class="dsq-comment-message"><p>Why can&#8217;t you change strategy at runtime?  Both state and strategy are dynamic, as far as I know.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-654">
                    <div id="dsq-comment-header-654" class="dsq-comment-header">
                        <cite id="dsq-cite-654">
                                <span id="dsq-author-user-654">Gendo</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-654" class="dsq-comment-body">
                        <div id="dsq-comment-message-654" class="dsq-comment-message"><p>Looks fine to me, and I&#8217;m using FF 2.0b on XP.</p>
<p>Regards.</p>
<p>ps. great lectures btw, keep them coming <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-655">
                    <div id="dsq-comment-header-655" class="dsq-comment-header">
                        <cite id="dsq-cite-655">
                                <span id="dsq-author-user-655">James Taylor</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-655" class="dsq-comment-body">
                        <div id="dsq-comment-message-655" class="dsq-comment-message"><p>I thought the difference between Strategy is which class is responsible for changing implementation.</p>
<p>In Strategy, one can change the strategy/implementation class externally.</p>
<p>In State, the current State instance decides on the next State and is responsible for setting it.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-656">
                    <div id="dsq-comment-header-656" class="dsq-comment-header">
                        <cite id="dsq-cite-656">
                                <span id="dsq-author-user-656">niceboomer</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-656" class="dsq-comment-body">
                        <div id="dsq-comment-message-656" class="dsq-comment-message"><p>Thanks a lot 4 the great article.</p>
<p>I am sorry but I&#8217;m still not very clear about the state pattern in your IDataSession example. </p>
<p>Will you create 2 concrete classes implementing IExecutionState to avoid if clause in the origin example? If so, these 2 classes have almost logic the same except the Connection.Close statement, haven&#8217;t it? Some sort of duplicated code?</p>
<p>And second, you wrote, &#8220;First off, the DataSession starts with an AutoCommitExecutionState object in the _currentState field.&#8221; in the article. But I wonder will I have to hard code the initialization of AutoCommitExecutionState in my DataSession object? or will I create it via IoC container? </p>
<p>I am very appreciate your answer ^^</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-7390">
                    <div id="dsq-comment-header-7390" class="dsq-comment-header">
                        <cite id="dsq-cite-7390">
                                <span id="dsq-author-user-7390">Nilesh Gule</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-7390" class="dsq-comment-body">
                        <div id="dsq-comment-message-7390" class="dsq-comment-message"><p>Nice post. I also posted about another example of State pattern using Loan states as an example. <br />
<a href="http://www.nileshgule.com/2012/07/state-design-pattern.html " rel="nofollow">http://www.nileshgule.com/2012/07/state-design-pattern.html </a></p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2006/04/30/the-state-pattern-an-underappreciated-pattern/';
    var disqus_identifier = '155 /blogs/jeremy.miller/archive/2006/04/30/143733.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "The State Pattern:  An Underappreciated Pattern";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=155');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2006\/04\/30\/the-state-pattern-an-underappreciated-pattern\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profile’s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.844 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 14:20:04 -->
<!-- super cache -->