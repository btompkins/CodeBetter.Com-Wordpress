<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Six Design Patterns to Start With | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Just when I&#8217;m about to give up on Joel he hits one out of the park' href='http://codebetter.com/jeremymiller/2006/04/11/just-when-im-about-to-give-up-on-joel-he-hits-one-out-of-the-park/' />
<link rel='next' title='&quot;Code Complete&quot; is a lie, &quot;Done, done, done&quot; is the truth' href='http://codebetter.com/jeremymiller/2006/04/14/code-complete-is-a-lie-done-done-done-is-the-truth/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=150' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,142] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2006/04/11/six-design-patterns-to-start-with/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-150" class="post-150 post type-post status-publish format-standard hentry category-design-patterns">
					<h1 class="entry-title">Six Design Patterns to Start With</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2006/04/11/six-design-patterns-to-start-with/" title="8:08 pm" rel="bookmark"><span class="entry-date">April 11, 2006</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><P>One of my colleagues asked me to demonstrate and explain six patterns for folks with little or no exposure to design patterns.&nbsp; Thou shall count to 6, no more, no less and 8 is right out.&nbsp; Choosing the six patterns to cover first was actually a bit difficult.&nbsp; I&#8217;m sticking strictly with the original &#8220;Gang of Four&#8221; patterns initially, because that&#8217;s what you&#8217;ll bump into the most often.&nbsp; I scanned over the frequency rating of each pattern listed at <A href="http://www.dofactory.com/">www.dofactory.com</A>, but discarded patterns like <A href="http://www.dofactory.com/Patterns/PatternObserver.aspx">Observer</A> and <A href="http://www.dofactory.com/Patterns/PatternIterator.aspx">Iterator</A> that are tightly integrated into the .Net framework itself.&nbsp; <A href="/blogs/jeremy.miller/archive/2005/08/04/130302.aspx">Singleton</A> is out because it often does more harm than good (I inherited a system that overused singleton&#8217;s.&nbsp; We&#8217;re almost done ripping them out).&nbsp; I&#8217;ve got a post in the distant future about a major refactoring I made to StructureMap with a Composite and Visitor pattern combo that did wonders to improve the cyclomatic complexity numbers and unit test coverage, but those are definitely not starter patterns.&nbsp; In the end I ended up choosing these six to start, partially based on the relevance to work my team is currently doing.&nbsp; </P><br />
<OL><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternTemplate.aspx">Template Method</A><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternStrategy.aspx">Strategy</A><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternFactory.aspx">Factory Method</A><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternAbstract.aspx">Abstract Factory</A><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternFacade.aspx">Facade</A><br />
<LI><A href="http://www.dofactory.com/Patterns/PatternCommand.aspx">Command</A></LI></OL><br />
<P>If you&#8217;ve done any amount of object oriented programming you&#8217;ve probably used all of these patterns because they&#8217;re just little solutions that constantly reoccur (hence the name &#8220;pattern&#8221;).&nbsp; Learning the names of the design patterns and being conscious of pattern usage is effectively an index to a lot of existing writing and design wisdom about prior design pattern usage.&nbsp; By themselves, the pattern names are valuable as a communication tool with other developers.</P><br />
<P>Just for fun, I&#8217;m going to try to use open source tools for the source of most of the examples.&nbsp; And for Scott Bellware I&#8217;m switching to FrontPage for editing blog posts.&nbsp; We&#8217;ll see how it goes.&nbsp; When he suggested the switch my gut reaction was &#8220;but it will eat my ASP code!&#8221;&nbsp; Some memories just won&#8217;t stay down.</P><br />
<P>Please keep in mind that learning about patterns means more than memorizing pattern names and the mechanics of using the patterns.&nbsp; Learning the benefits and the drawbacks of patterns is even more important, you can look up the mechanics later.</P><br />
<H4>Template Method</H4><br />
<P>&#8220;Define the skeleton of an algorithm in an operation, deferring some steps to subclasses. Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithm&#8217;s structure. &#8220;</P><br />
<P>Let&#8217;s jump right into an example.&nbsp; You&#8217;re building a component that receives and processes incoming messages.&nbsp; Each type of message is handled and processed differently, but there are some common steps that are always performed in the same order.&nbsp; In this case you might create a common base class for all of the <FONT face="Courier New">MessageProcessor </FONT>classes like the one below to enforce and reuse the basic sequence of actions.&nbsp; </P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IMessageAuditor</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>void</SPAN> Audit(<SPAN>string</SPAN> messageType, <SPAN>string</SPAN> userName, </PRE><PRE>            <SPAN>string</SPAN> correlationId, <SPAN>string</SPAN> messageBody);</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>abstract</SPAN> <SPAN>class</SPAN> MessageProcessor</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> IMessageAuditor _auditor;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> MessageProcessor(IMessageAuditor auditor)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _auditor = auditor;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> ProcessMessage(Message message)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IPrincipal principal = Thread.CurrentPrincipal;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (<SPAN>this</SPAN>.authorize(message, principal))</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; doWork(message);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; audit(message, principal);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Template Methods that must be overriden by subclasses</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>abstract</SPAN> <SPAN>string</SPAN> messageType {<SPAN>get</SPAN>;}</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>abstract</SPAN> <SPAN>bool</SPAN> authorize(Message message, </PRE><PRE>            IPrincipal principal);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>abstract</SPAN> <SPAN>void</SPAN> doWork(Message message);</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>void</SPAN> audit(Message message, IPrincipal principal)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _auditor.Audit(<SPAN>this</SPAN>.messageType, principal.Identity.Name, </PRE><PRE>                message.CorrelationId, message.Body.ToString());</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE></DIV><br />
<P>In order, each <FONT face="Courier New">MessageProcessor</FONT> handles a message by these steps in the <FONT face="Courier New">ProcessMessage(Message)</FONT> method:</P><br />
<OL><br />
<LI>Get the current <FONT face="Courier New">IPrincipal</FONT> containing information about the identity and security rights of the authenticated user<br />
<LI>Call the <FONT face="Courier New">authorize(Message, IPrincipal)</FONT> method to check for security rights.<br />
<LI>If the user is authorized, call the <FONT face="Courier New">doWork(Message)</FONT> method to process the message<br />
<LI>Call the <FONT face="Courier New">audit()</FONT> method that uses the <FONT face="Courier New">messageType</FONT> property to create a new audit trail record of the messaging activity</LI></OL><br />
<P>In this case the <FONT face="Courier New">messageType {get;}</FONT>, <FONT face="Courier New">authorize()</FONT>, and <FONT face="Courier New">doWork()</FONT> methods are Template Methods. To create a specific <FONT face="Courier New">CancelOrderMessageProcessor</FONT> we merely need to inherit from <FONT face="Courier New">MessageProcessor</FONT> and implement these three methods.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> CancelOrderMessageProcessor : MessageProcessor</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> CancelOrderMessageProcessor(IMessageAuditor auditor)</PRE><PRE>             : <SPAN>base</SPAN>(auditor)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> <SPAN>string</SPAN> messageType</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>get</SPAN> { <SPAN>return</SPAN> &#8220;CancelOrder&#8221;; }</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> <SPAN>bool</SPAN> authorize(Message message, IPrincipal principal)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// go check whether the IPrincipal user is the same user who placed the order</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// referenced by the contents of the message</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> <SPAN>void</SPAN> doWork(Message message)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// find the order number and cancel the order in the backend system</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>So what have we really accomplished here?&nbsp; For one thing we&#8217;ve standardized the message processing.&nbsp; If we need to handle any new message types we can just create a new subclass and fill in the missing pieces.&nbsp; Somebody new to the project can create a new message type by following the established pattern.&nbsp; We&#8217;ve also eliminated some code duplication, and that&#8217;s always a good thing.</P><br />
<P>The Template pattern is definitely a double-edged sword.&nbsp; Used judiciously it eliminates duplication, standardizes the implementation of related classes, and *can* lead to better productivity.&nbsp; The downside of Template Method&#8217;s is the same as inheritance in general.&nbsp; The workings of a class are split between a super and sub class.&nbsp; My main warning for the Template Method is to avoid an &#8220;Analysis Paralysis&#8221; condition where you spend too much time obsessing over the perfect abstractions upfront. &nbsp; I&#8217;ll freely admit that I didn&#8217;t completely buy into the XP ideas of simple design and continuous design at first, but I&#8217;ve learned that it&#8217;s often easier to introduce the superclass/Template Method combinations only after the second or third similar class.&nbsp; Refactoring tools like ReSharper in conjunction with unit tests make it easier to introduce an abstract super class with its automated &#8220;<A href="http://www.refactoring.com/catalog/extractSuperclass.html">Extract Superclass</A>&#8221; refactoring.&nbsp; In other words, use the Template Method defensively because you don&#8217;t have to get it perfect upfront.</P><br />
<H4>Strategy</H4><br />
<P>&#8220;Define a family of algorithms, encapsulate each one, and make them interchangeable.&#8221;</P><br />
<P>The Strategy pattern is a widely used way move repeated if/then logic to polymorphism.&nbsp; Here&#8217;s a quick example from a previous job where I worked with supply chain and reverse logistics software for a large manufacturing company.&nbsp; One of the things you have to account for in your supply chain is the differing means of shipping parts to the manufacturing lines.&nbsp; Parts to the factory might be supplied by air, truck, or train depending on pricing, availability, and urgency.&nbsp; There are several places in the code where the logic needs to branch to account for the differing means of shipping to the factory.&nbsp; Without using a Strategy pattern you might start seeing something like the following switch statement being repeated in your code.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>switch</SPAN> (shippingType)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Air:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Air shipping specific logic and functions</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>break</SPAN>;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Truck:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Trucking specific logic and functions</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>break</SPAN>;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Train:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Train shipping specific logic and functions</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>break</SPAN>;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>default</SPAN>:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>throw</SPAN> <SPAN>new</SPAN> ArgumentOutOfRangeException(&#8220;shippingType&#8221;, shippingType, &#8220;Unrecognized shipping type!&#8221;);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>I wouldn&#8217;t say that switch statements are inherently evil, but a repeated switch statement on shipping type in different places is evidence of the classic &#8220;<A href="http://c2.com/cgi/wiki?SwitchStatementsSmell">Switch Statement Smell</A>.&#8221;&nbsp; Repeated switch statements can easily lead to duplicated code, and longish switch statements, in my experience, can lead to code that is hard to read and buggy.&nbsp; Seeing a repeated switch statement on a type code is a sign that there is an abstraction in your code that&#8217;s trying to come out.&nbsp; Now, let&#8217;s say that we went looking for the different times our code switches on shipping type and used this list to define a new interface to represent a new shipping strategy abstraction.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IShippingStrategy</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; DateTime DetermineExpectedArrivalTime(ShippingOrder order);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Decimal CalculateShippingCost(ShippingOrder order);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>bool</SPAN> IsAvailable(ShippingOrder order);</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>Next, build out the concrete implementations of <FONT face="Courier New">IShippingStrategy</FONT> for air, truck, and train shipping.&nbsp; Move all specific logic that was in the switch statements into the appropriate Strategy classes.</P><br />
<P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> AirShippingStrategy : IShippingStrategy</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> TruckShippingStrategy : IShippingStrategy</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> TrainShippingStrategy : IShippingStrategy</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P></P><br />
<P>So, what have we gained?&nbsp; I&#8217;ll claim three advantages over the switch statements:</P><br />
<OL><br />
<LI>The code is easier to maintain.&nbsp; If I need to change the logic for air shipping I only need to go to one place instead of three or more, the <FONT face="Courier New">AirShippingStrategy</FONT> class.&nbsp; The code is easier to read because I&#8217;m only looking at the code for air shipping instead of seeing it in the middle of a large switch statement.&nbsp; The code that calls the new strategy pattern is potentially much easier to read.&nbsp; The big switch statement can be replaced with a simple call to <FONT face="Courier New">_currentShippingStrategy.DetermineExpectedArrivalTime(order)</FONT>.&nbsp; This should make the workflow in the shipping controller code easier to see because its no longer getting bogged down in the specifics of the shipping type.<br />
<LI>It&#8217;s easier to add new types of shipping.&nbsp; Instead of modifying code at all the places with a switch statement on shipping type, we just need to do is create a new implementation of <FONT face="Courier New">IShippingStrategy</FONT> to add support for new types of shipping to our supply chain automation system.&nbsp; This is a very common example of the Open/Closed Principle.&nbsp; With the Strategy pattern in place we can extend the system with new types of shipping without modifying the code that uses the <FONT face="Courier New">IShippingStrategy</FONT> interface.&nbsp; Otherwise, we would have to alter a lot more classes.&nbsp; More on this topic from David Hayden <A href="http://davidhayden.com/blog/dave/archive/2005/06/04/1096.aspx">here</A>.<br />
<LI>I&#8217;d argue that testing is easier because you can test the specific air, ground, or truck shipping in isolation by just creating the Strategy class instances and exercising the methods.&nbsp; Without a strategy pattern you would have to test the specific air shipping logic through the calling code that contains the switch statement, creating a more difficult unit test to write and debug.</LI></OL><br />
<P>We have a case like this in our big legacy document messaging system.&nbsp; The system behaves differently based on what type of document is submitted to the system.&nbsp; Unfortunately, the code uses repeated switch statements.&nbsp; This is making it harder for us to map out the differences between the document types because the logical splits are scattered all over the code.&nbsp; It&#8217;s put us into a state where we&#8217;re not very confident about our ability to add new document types, which is exactly what we need to do for the business this year.&nbsp; We will be moving the variation in functionality to a separate handler class for each type of document &#8212; even if it&#8217;s the last thing I do, at least at work.</P><br />
<P>The Strategy pattern is very similar to the <A href="http://www.dofactory.com/Patterns/PatternState.aspx">State pattern</A>, to the point where I abandoned my first idea for an example of a Strategy pattern because I couldn&#8217;t decide if it was a strategy or state pattern.&nbsp; I really wouldn&#8217;t waste a lot of energy arguing whether a group of classes are implementing a State or a Strategy pattern.&nbsp; I think the State pattern is very useful in many cases and often overlooked.&nbsp; I&#8217;ll definitely post on some example usages of the State pattern someday.</P><br />
<P>Other examples:</P><br />
<UL><br />
<LI>NHibernate has an abstract class named <FONT face="Courier New">Dialect</FONT> that represents a database engine&#8217;s particular SQL syntax (because every database&#8217;s SQL is every so slightly different).&nbsp; There is a separate subclass for each type of database engine that is supported by NHibernate (Oracle, MySql, Sql Server, DB2, etc).&nbsp; New database types can be supported by creating a new subclass of <FONT face="Courier New">Dialect</FONT>.<br />
<LI>Last week I used the <FONT face="Courier New">ICellHandler</FONT> interface inside of FitNesse to create a specific handler for DateTime properties inside of FitNesse tests to parse &#8220;(today)&#8221; and &#8220;(today+3)&#8221; as valid dates to effectively test date sensitive business rules.&nbsp; Some day in the near future I&#8217;m going to create another implementation to handle .Net enumerations.&nbsp; That&#8217;s always aggravated me, until I finally realized that FitNesse is easy to extend (not that the documentation in FitNesse makes this obvious).</LI></UL><br />
<P>Okay Jeremy, exactly how do you get the different Strategy implementation inside your code?&nbsp; I distinctly remember getting a question like that from an old Cobol developer several years ago when I was explaining polymorphism and its advantages to him.&nbsp; On the off chance he&#8217;s out there somewhere, one of the more common and simpler possibilities is the Factory pattern.</P><br />
<H4>Factory Method </H4><br />
<P>&#8220;Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses. &#8220;</P><br />
<P>Last year we had to write several &#8220;translation&#8221; classes to map flat files to an xml format.&nbsp; One easy way to do this is to create an abstraction that represents the mapping from a flat file column to the xml structure.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> INodeMapping</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>void</SPAN> MapColumn(<SPAN>string</SPAN> textValue, XmlNode targetNode);</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>// Simple implementation of INodeMapping</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> BasicNodeMapping : INodeMapping</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> <SPAN>string</SPAN> _nodeName;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> BasicNodeMapping(<SPAN>string</SPAN> nodeName)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _nodeName = nodeName;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> MapColumn(<SPAN>string</SPAN> textValue, XmlNode targetNode)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; XmlElement newNode = targetNode.OwnerDocument.CreateElement(_nodeName);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; newNode.InnerText = textValue;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; targetNode.AppendChild(newNode);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>The actual translation classes aren&#8217;t much more that an aggregation of <FONT face="Courier New">INodeMapping</FONT> objects.&nbsp; The superclass for all of the translation classes has an abstract Factory Method (<FONT face="Courier New">buildMappings()</FONT> in the code below) to build the specific array of <FONT face="Courier New">INodeMapping</FONT> objects for the concrete instance.&nbsp; I think you can say that the Factory Method is a specific type of Template Method.&nbsp; Something to keep in mind with patterns is that they often occur in clusters and even in the same class.&nbsp; Please don&#8217;t waste calories arguing or worrying over exactly which pattern a class exhibits.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>abstract</SPAN> <SPAN>class</SPAN> FlatFileToXmlTranslator</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Factory Method</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>abstract</SPAN> INodeMapping[] buildMappings();</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> ReallyWeirdFlatFileFormatTranslator : FlatFileToXmlTranslator</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Factory method</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> INodeMapping[] buildMappings()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> INodeMapping[] {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>new</SPAN> BasicNodeMapping(&#8220;Name&#8221;),</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>new</SPAN> BasicNodeMapping(&#8220;Address&#8221;),</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>new</SPAN> BasicNodeMapping(&#8220;City&#8221;)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; };</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>Many people, including myself, think of a Factory Method as something different than the GoF definition.&nbsp; &#8220;Factory Method&#8221; often describes a class or a method that returns the proper Strategy or State class based on some sort of input.&nbsp; Going back to the shipping Strategy Pattern example from above, you might use something like the following method to select the proper <FONT face="Courier New">IShippingStrategy</FONT> implementation for a given <FONT face="Courier New">ShippingType</FONT>.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Yes Gary, there are *some* perfectly valid usages for static members</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>static</SPAN> IShippingStrategy SelectShippingStrategy(ShippingType shippingType)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp; </PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>switch</SPAN> (shippingType)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Air:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> AirShippingStrategy();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Truck:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> TruckShippingStrategy();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>case</SPAN> ShippingType.Train:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> TrainShippingStrategy();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>default</SPAN>:</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>throw</SPAN> <SPAN>new</SPAN> ArgumentOutOfRangeException(&#8220;shippingType&#8221;, shippingType, &#8220;Unrecognized shipping type!&#8221;);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<H4>Abstract Factory</H4><br />
<P>&#8220;Provide an interface for creating families of related or dependent objects without specifying their concrete classes.&#8221;</P><br />
<P>The main point in talking about the Abstract Factory is to differentiate it from the Factory Method.&nbsp; Think of the Abstract Factory as a way to run an application or a piece of code in multiple modes. An easy and common example is the creation of a data access layer to support multiple database engines. When you&#8217;re coding against Sql Server you&#8217;ll be using the <FONT face="Courier New">SqlConnection</FONT>, <FONT face="Courier New">SqlCommand</FONT>, and <FONT face="Courier New">SqlDataAdapter</FONT> classes.&nbsp; If you&#8217;re using a real database like Oracle you&#8217;ll be performing the exact same actions with <FONT face="Courier New">OracleConnection</FONT>, <FONT face="Courier New">OracleCommand</FONT>, and <FONT face="Courier New">OracleDataAdapter</FONT> classes.&nbsp; What you don&#8217;t want to do in this situation is to create a lot of duplicated if/then logic like this:</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> DataAccessHelper</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>string</SPAN> _connectionString;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> DatabaseEngineType _databaseEngineType;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> DataAccessHelper(<SPAN>string</SPAN> connectionString, DatabaseEngineType databaseEngineType)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _connectionString = connectionString;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _databaseEngineType = databaseEngineType;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Don&#8217;t do it this way</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>int</SPAN> ExecuteSql(<SPAN>string</SPAN> sql)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbConnection connection = <SPAN>null</SPAN>;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbCommand command = <SPAN>null</SPAN>;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (_databaseEngineType == DatabaseEngineType.SqlServer)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; connection = <SPAN>new</SPAN> SqlConnection();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command = <SPAN>new</SPAN> SqlCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>else</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; connection = <SPAN>new</SPAN> OracleConnection();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command = <SPAN>new</SPAN> OracleCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// execute the sql with the connection and command objects</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Don&#8217;t do it this way</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IDataReader GetReader(<SPAN>string</SPAN> sql)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbConnection connection = <SPAN>null</SPAN>;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbCommand command = <SPAN>null</SPAN>;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (_databaseEngineType == DatabaseEngineType.SqlServer)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; connection = <SPAN>new</SPAN> SqlConnection();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command = <SPAN>new</SPAN> SqlCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>else</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; connection = <SPAN>new</SPAN> OracleConnection();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command = <SPAN>new</SPAN> OracleCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// execute the sql with the connection and command objects</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>Plus, what if you want to add support later on for DB2 or MySql or PostgresSQL?&nbsp; One of the consistent themes of design patterns is to eliminate if/then statements and this is no exception.&nbsp; Here is an actual example of an Abstract Factory class we use in our data access library in a couple of our projects (I might release this as part of StructureMap as an alternative to the data access block in the EntLib someday, but don&#8217;t hold your breath).</P><br />
<DIV><PRE><SPAN>namespace</SPAN> StructureMap.DataAccess</PRE><PRE>{</PRE><PRE>&nbsp;&nbsp;&nbsp; [PluginFamily("MSSQL")]</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IDatabaseEngine</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbConnection GetConnection();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbCommand GetCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbCommand CreateStoredProcedureCommand(<SPAN>string</SPAN> commandText);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDbDataAdapter GetDataAdapter();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDataParameter CreateStringParameter(<SPAN>string</SPAN> parameterName, <SPAN>int</SPAN> size, <SPAN>bool</SPAN> isNullable);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IDataParameter CreateParameter(<SPAN>string</SPAN> parameterName, DbType dbType, <SPAN>bool</SPAN> isNullable);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>string</SPAN> GetParameterName(<SPAN>string</SPAN> logicalName);</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE><PRE>}</PRE></DIV><br />
<P>The Facade (more on this later) class for the data access helper has a dependency on an <FONT face="Courier New">IDatabaseEngine</FONT> that is pushed in through constructor injection.&nbsp; </P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [DefaultConstructor]</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> DataSession(IDatabaseEngine database)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; : <SPAN>this</SPAN>(database, </PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <SPAN>new</SPAN> CommandFactory(database),</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <SPAN>new</SPAN> AutoCommitExecutionState(database.GetConnection(), database.GetDataAdapter()),</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <SPAN>new</SPAN> TransactionalExecutionState(database.GetConnection(), database.GetDataAdapter()))</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE></DIV><!--EndFragment--><br />
<P>Anytime the other classes in the data access layer need an <FONT face="Courier New">IDbConnection</FONT> or an <FONT face="Courier New">IDbCommand</FONT> they create it through an instance of the <FONT face="Courier New">IDatabaseEngine</FONT> interface.&nbsp; Since we&#8217;re primarily a Sql Server shop, the only concrete implementation of <FONT face="Courier New">IDatabaseEngine</FONT> is <FONT face="Courier New">MSSQLDatabaseEngine </FONT><FONT face="Times New Roman">(partial implementation below)</FONT>, but we could easily use the data access layer against Oracle by creating a different implementation of the <FONT face="Courier New">IDatabaseEngine</FONT> interface for Oracle and inject it into the <FONT face="Courier New">DataSession</FONT> class.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; [Pluggable("MSSQL")]</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> MSSQLDatabaseEngine : IDatabaseEngine</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> <SPAN>string</SPAN> _connectionString;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [DefaultConstructor]</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> MSSQLDatabaseEngine(IConnectionStringProvider provider)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _connectionString = provider.GetConnectionString();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> MSSQLDatabaseEngine(<SPAN>string</SPAN> connectionString)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _connectionString = connectionString;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IDbConnection GetConnection()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> SqlConnection(_connectionString);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IDbCommand GetCommand()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> SqlCommand();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IDbDataAdapter GetDataAdapter()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> SqlDataAdapter();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><!--EndFragment--><br />
<P>Here&#8217;s another example.&nbsp; Occasionally-connected Smart Clients are a hot topic at the moment.&nbsp; Say you have a new Smart Client that communicates with three different web services.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IService1{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IService2{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IService3{}</PRE></DIV><br />
<P>The Smart Client is obviously going to behave very differently based on whether or not it is able to connect to the network.&nbsp; The Abstract Factory might be a very good tool in this case.&nbsp; Make both a local and remote implementation for each of the three services.&nbsp; </P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> LocalService1 : IService1{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> LocalService2 : IService2{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> LocalService3 : IService3{}</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> RemoteService1 : IService1{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> RemoteService2 : IService2{}</PRE><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> RemoteService3 : IService3{}</PRE></DIV><br />
<P>Now, make all other classes get an instance of the three services through an Abstract Factory with this signature.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IServiceFactory</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IService1 GetService1();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IService2 GetService2();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IService3 GetService3();</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>Next, build two implementations of the <FONT face="Courier New">IServiceFactory</FONT> interface.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> LocalServiceFactory : IServiceFactory</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IService1 GetService1()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> LocalService1();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IService2 GetService2()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> LocalService2();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> IService3 GetService3()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> <SPAN>new</SPAN> LocalService3();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>&nbsp;The Smart Client can now completely switch its connection mode by replacing the instance of <FONT face="Courier New">IServiceFactory</FONT> between the connected and disconnected modes.</P><br />
<H4>Command</H4><br />
<P>&#8220;Encapsulate a request as an object, thereby letting you parameterize clients with different requests, queue of log requests, and support undoable operations&#8221;</P><br />
<P>Boiling it down, you encapsulate a complex action or transaction into a single class that has a <FONT face="Courier New">void Execute()</FONT> method to kick it off.&nbsp; The command pattern is simple to use, but it has some powerful uses.&nbsp; </P><br />
<UL><br />
<LI>Transactions boundaries.&nbsp; What if you have a long running operation that potentially run several optional database operations that need to run in the same transactions. You really don&#8217;t want to keep a database connection open for all the time that you&#8217;re evaluating the gating logic on top of the time it takes to do the actual database manipulation.&nbsp; One answer is to use similar to the Fowler&#8217;s <A href="http://www.martinfowler.com/eaaCatalog/unitOfWork.html">Unit of Work</A> pattern where you first you determine what actions to take in the form of an array of command patterns that have some sort of <FONT face="Courier New">DoOperations(connection, transaction)</FONT> method that performs its data access commands against the connection and transaction objects that are passed into it.&nbsp;&nbsp; I&#8217;ve always been very leery of declarative transactions for some reason and minus distributed transactions I don&#8217;t think declarative transactions are a necessity.<br />
<LI>Reliable workflow.&nbsp; Several years ago I got to do a lot of prototyping and brainstorming for a very large manufacturing workflow application that was going to manipulate and interface with a slew of unreliable physical processes and networks.&nbsp; Wrapping operations inside of command classes that could be persisted can give you a way to queue up operations and create generalized mechanisms to retry operations that fail with network failures.<br />
<LI>In many cases using a Command pattern can be a great way to break complex code into smaller chunks that are easier to unit test.&nbsp; Say you have a case where the code is going to do a complex operation with a lot of input, that also requires a lot of logic to decide when to do this complex action.&nbsp; You end up with one set of tests where you test the command objects, and another set of classes that are solely responsible for creating and configuration of the command classes.</LI></UL><br />
<P>Here&#8217;s a typical example of using the Command pattern inside of a user interface to do &#8220;CTRL-Z undo&#8217;s&#8221; of user actions.&nbsp; Let&#8217;s define an interface for that exposes both &#8220;do&#8221; and &#8220;undo&#8221; operations for a user interface that&#8217;s built around a TreeView motif.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> IClientCommand</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>void</SPAN> Do();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>void</SPAN> UnDo();</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>Now, create an implementation of <FONT face="Courier New">IClientCommand</FONT> that removes a child object from a parent object and makes the corresponding change to the TreeView on the screen.&nbsp; This <FONT face="Courier New">RemoveChildCommand</FONT> class will also have <FONT face="Courier New">ReDo()</FONT> functionality that will also put the child and child TreeNode back.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> RemoveChildCommand : IClientCommand</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> TreeNode _childNode;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> TreeNode _parentNode;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> ParentClass _parent;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> ChildClass _child;</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> RemoveChildCommand(TreeNode node, ParentClass parent, ChildClass child)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _childNode = node;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _parent = parent;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _child = child;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> Do()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// remove the TreeNode</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _parentNode = _childNode.Parent;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _childNode.Remove();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// set the Child field of the ParentClass to null</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _parent.RemoveChild(_child);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> UnDo()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// add the Child back to the ParentClass</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _parent.AddChild(_child);</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// put the TreeNode back</SPAN></PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _parentNode.Nodes.Add(_childNode);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<P>And create a class that will maintain and manage the history of the <FONT face="Courier New">IClientCommand</FONT>&#8216;s (apologies for doing this in v1.1 sans generics).&nbsp; The top menu of the UI application would delegate to the <FONT face="Courier New">UnDoLast()</FONT> and <FONT face="Courier New">ReDoNext()</FONT> methods.</P><br />
<DIV><PRE>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> CommandHistory</PRE><PRE>&nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> Stack _pastCommands = <SPAN>new</SPAN> Stack();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> Stack _futureCommands = <SPAN>new</SPAN> Stack();</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> ExecuteCommand(IClientCommand command)</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command.Do();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _pastCommands.Push(command);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> UnDoLast()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IClientCommand command = (IClientCommand) _pastCommands.Pop();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; command.UnDo();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _futureCommands.Push(command);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> ReDoNext()</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IClientCommand command = (IClientCommand) _futureCommands.Pop();</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ExecuteCommand(command);</PRE><PRE>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</PRE><PRE>&nbsp;&nbsp;&nbsp; }</PRE></DIV><br />
<H4>Facade</H4><br />
<P>&#8220;Provide a unified interface to a set of interfaces in a subsystem. Faade defines a higher-level interface that makes the subsystem easier to use. &#8220;</P><br />
<P>The facade is one of the best tools to ensure loose coupling between subsystems by reducing the exposed surface area between subsystems.&nbsp; It&#8217;s exactly what it sounds like, an attractive covering over a complex structure.&nbsp; Think of a mechanical watch face.&nbsp; On the outside you see a circle with numbers, an hour hand, and a minute hand.&nbsp; It&#8217;s a pretty simple user interface to use to tell time, but looking behind the watch face you&#8217;ll see a complex multitude of gears and springs that do the actual work of telling time. A facade class is the watch face.</P><br />
<P>Last year my colleague and I built a custom rules engine component that was used inside a much larger messaging system.&nbsp; Internally, the rules component uses several granular services to:</P><br />
<OL><br />
<LI>Translate an industry standard xml message to the internal &#8220;<A href="http://www.enterpriseintegrationpatterns.com/CanonicalDataModel.html">canonical</A>&#8221; format that the rules engine uses<br />
<LI>Load specific information for both the sender and recipient<br />
<LI>Locate and build the rule objects for a given recipient and sender<br />
<LI>Run the rules against the canonical data model<br />
<LI>Process and coordinate any actions that result from the rules, including transaction management</LI></OL><br />
<P>For a variety of reasons, all of these services are coded separately. That&#8217;s fine and great for the team building the rules component, but it was potentially confusing for the other team that was consuming the rules component. The simple solution was to create a Facade class to shield the larger application and application team from the internal complexities of the rules component.&nbsp; This Facade class simply took in an xml document, the id&#8217;s of the sender and receiver, and returned an object array of validation errors.</P><br />
<P>Just because the Facade is in place doesn&#8217;t mean that you can&#8217;t use the granular services behind the Facade, and we&#8217;ve done just that in writing custom testing harnesses.&nbsp; Theoretically the rules component was built to be used in a different product.&nbsp; If that ever happens, we&#8217;ll probably just create a different Facade appropriate to the new application.</P><br />
<P>More about the <A href="http://c2.com/cgi/wiki?FacadePattern">Facade pattern</A> at the original Wiki.</P><br />
<P>&nbsp;</P><br />
<H4>More Resources</H4><br />
<UL><br />
<LI>Good description of the Abstract Factory pattern &#8211; <A href="http://www.developer.com/java/other/article.php/626001">http://www.developer.com/java/other/article.php/626001</A><br />
<LI><A href="/blogs/david.hayden/archive/2006/01/18/136713.aspx">OOP and Design Pattern Resources</A> from David Hayden<br />
<LI><A href="/blogs/jeremy.miller/archive/2005/09/01/131509.aspx">Learning about Design Patterns</A><br />
<LI><A id="_ctl0__ctl0__ctl0__ctl0_CategoryView__ctl0_postlist__ctl0_EntryItems__ctl8_PostTitle" href="/blogs/jeremy.miller/archive/2005/09/02/131613.aspx">Dynamic Behavior with the Decorator Pattern</A><br />
<LI><A id="_ctl0__ctl0__ctl0__ctl0_CategoryView__ctl0_postlist__ctl0_EntryItems__ctl2_PostTitle" href="/blogs/jeremy.miller/archive/2005/11/06/134359.aspx">Using the Chain of Responsibility Pattern</A> </LI></UL><br />
<P>&nbsp;</P></p>
<div class="shr-publisher-150"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag">Design Patterns</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2006/04/11/six-design-patterns-to-start-with/" title="Permalink to Six Design Patterns to Start With" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2006/04/11/six-design-patterns-to-start-with/feed/" title="Comments RSS to Six Design Patterns to Start With" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-150 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2006/04/11/just-when-im-about-to-give-up-on-joel-he-hits-one-out-of-the-park/" rel="prev"><span class="meta-nav">&larr;</span> Just when I&#8217;m about to give up on Joel he hits one out of the park</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2006/04/14/code-complete-is-a-lie-done-done-done-is-the-truth/" rel="next">&quot;Code Complete&quot; is a lie, &quot;Done, done, done&quot; is the truth <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-619">
                    <div id="dsq-comment-header-619" class="dsq-comment-header">
                        <cite id="dsq-cite-619">
    http://www.developernotes.com                            <span id="dsq-author-user-619">Nick Parker</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-619" class="dsq-comment-body">
                        <div id="dsq-comment-message-619" class="dsq-comment-message"><p>Nice work, I would also point out that the template pattern example is leading into the decorator pattern (although it  isn&#8217;t fully a decorator in it&#8217;s current state).  I am looking forward to your post on factoring out singletons.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-620">
                    <div id="dsq-comment-header-620" class="dsq-comment-header">
                        <cite id="dsq-cite-620">
                                <span id="dsq-author-user-620">Christoffer Lette</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-620" class="dsq-comment-body">
                        <div id="dsq-comment-message-620" class="dsq-comment-message"><p>Since one of my favourite refactorings happen to be &#8220;Form Template Method&#8221;, I just have to point out that your definition of the actual template method does not correspond to neither the GoF&#8217;s nor Fowler&#8217;s.</p>
<p>In your case the template method itself ought to be ProcessMessage in the abstract class. Hence, the messageType {get;}, authorize(), and doWork() methods are *not* template methods. They latters are only overrides to some of the steps in the template.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-621">
                    <div id="dsq-comment-header-621" class="dsq-comment-header">
                        <cite id="dsq-cite-621">
                                <span id="dsq-author-user-621">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-621" class="dsq-comment-body">
                        <div id="dsq-comment-message-621" class="dsq-comment-message"><p>Christoffer,</p>
<p>&#8220;overrides to some of the steps in the template&#8221; &#8211; That sounds like a template method to me.  The algorithm of ProcessMessage is set, check security, do some work, and audit.  The details of those steps are deferred to the subclasses.</p>
<p>Can you elaborate a bit more?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-622">
                    <div id="dsq-comment-header-622" class="dsq-comment-header">
                        <cite id="dsq-cite-622">
    http://http//weblogs.asp.net/firoz                            <span id="dsq-author-user-622">firoz</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-622" class="dsq-comment-body">
                        <div id="dsq-comment-message-622" class="dsq-comment-message"><p>Great Tutorial!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-623">
                    <div id="dsq-comment-header-623" class="dsq-comment-header">
                        <cite id="dsq-cite-623">
                                <span id="dsq-author-user-623">Christoffer Lette</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-623" class="dsq-comment-body">
                        <div id="dsq-comment-message-623" class="dsq-comment-message"><p>First of all, I&#8217;d like to say what the others are saying: Nice work! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>Here&#8217;s a quote from the GoF&#8217;s Design Patterns:</p>
<p>&#8220;We call OpenDocument a template method. A template method defines an algorithm in terms of abstract operations that subclasses override to provide concrete behavior.&#8221;</p>
<p>In their example, OpenDocument does what ProcessMessage does in your example. My (their?) point is that the algorithm is the template, not the individual steps.</p>
<p>Also from the book, in the &#8220;Participants&#8221; section:</p>
<p>&#8220;AbstractClass &#8211; implements a template method defining the skeleton of an algorithm.&#8221;</p>
<p>and</p>
<p>&#8220;ConcreteClass &#8211; implements the primitive operations to carry out subclass-specific steps of the algorith.&#8221;</p>
<p>Have I elaborated enough?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-624">
                    <div id="dsq-comment-header-624" class="dsq-comment-header">
                        <cite id="dsq-cite-624">
                                <span id="dsq-author-user-624">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-624" class="dsq-comment-body">
                        <div id="dsq-comment-message-624" class="dsq-comment-message"><p>Ok, I&#8217;ll buy that.  I would usually just say the superclass/subclass is a template in general.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-625">
                    <div id="dsq-comment-header-625" class="dsq-comment-header">
                        <cite id="dsq-cite-625">
    http://davidhayden.com/blog/dave/                            <span id="dsq-author-user-625">dhayden</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-625" class="dsq-comment-body">
                        <div id="dsq-comment-message-625" class="dsq-comment-message"><p>Great post, Jeremy. Adding the dependency injection to many of the examples introduces a twist to the topic in a rather unique and good way.</p>
<p>It would be interesting to add where you can find these patterns in the .NET Framework. As I just realized the other day, the DbProviderFactory is a great example of the Abstract Factory Pattern and works similar to your excellent example above.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-626">
                    <div id="dsq-comment-header-626" class="dsq-comment-header">
                        <cite id="dsq-cite-626">
    http://codebetter.com/blogs/steve.hebert                            <span id="dsq-author-user-626">shebert</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-626" class="dsq-comment-body">
                        <div id="dsq-comment-message-626" class="dsq-comment-message"><p>Nice post.</p>
<p>Here&#8217;s a thought to wrap up the discussion and might change the selection of patterns.</p>
<p>When teaching patterns, I&#8217;ve found it useful to describe the inter-relationships between patterns and how to identify them.  To me, this is the difference between identifying patterns and knowing how to apply them.</p>
<p>For example, I&#8217;d start with the &#8216;Command&#8217; pattern and then expand it to the idea of organizing the command objects into a &#8216;Composite&#8217; pattern.  And then, as a final piece, organize the runtime configuration of the &#8216;Composite&#8217; object using a &#8216;Builder&#8217; Pattern.  </p>
<p>This gives the opportunity to explore other tools in the GoF book (i.e. Design Pattern Relationships, back cover).  With this combination, you can also discuss how patterns are organized (Creational/Structural/Behavioral).</p>
<p>I personally think the Design Pattern Relationships diagram is the least understand and yet most valuable tool in the book.</p>
<p>-Steve</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-627">
                    <div id="dsq-comment-header-627" class="dsq-comment-header">
                        <cite id="dsq-cite-627">
                                <span id="dsq-author-user-627">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-627" class="dsq-comment-body">
                        <div id="dsq-comment-message-627" class="dsq-comment-message"><p>Steve,</p>
<p>I think that would be a great post for you to write;)</p>
<p>Jeremy</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-628">
                    <div id="dsq-comment-header-628" class="dsq-comment-header">
                        <cite id="dsq-cite-628">
    http://www.keithrull.com                            <span id="dsq-author-user-628">Keith Rull</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-628" class="dsq-comment-body">
                        <div id="dsq-comment-message-628" class="dsq-comment-message"><p>Nice examples! long article but really informative. you got me stuck on my screen reading and analyzing your samples.</p>
<p>cool stuff!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-629">
                    <div id="dsq-comment-header-629" class="dsq-comment-header">
                        <cite id="dsq-cite-629">
                                <span id="dsq-author-user-629">Sean</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-629" class="dsq-comment-body">
                        <div id="dsq-comment-message-629" class="dsq-comment-message"><p>Hi Jeremy,<br />
I was looking for a example exactly same like you explained in &#8220;Abstract Factory&#8221; section(Getting DB connecton of multiple databases) in java.Could you point me to a example where I can find the same thing.</p>
<p>Thanks<br />
Sean</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-630">
                    <div id="dsq-comment-header-630" class="dsq-comment-header">
                        <cite id="dsq-cite-630">
                                <span id="dsq-author-user-630">Sean</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-630" class="dsq-comment-body">
                        <div id="dsq-comment-message-630" class="dsq-comment-message"><p>Hi Jeremy,<br />
I was looking for a example exactly same like you explained in &#8220;Abstract Factory&#8221; section(Getting DB connecton of multiple databases) in java.Could you point me to a example where I can find the same thing.</p>
<p>Thanks<br />
Sean</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-631">
                    <div id="dsq-comment-header-631" class="dsq-comment-header">
                        <cite id="dsq-cite-631">
    http://www.eranachum.com                            <span id="dsq-author-user-631">Eran Nachum</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-631" class="dsq-comment-body">
                        <div id="dsq-comment-message-631" class="dsq-comment-message"><p>Hello!<br />
Very informative post, you give here the basics of these patterns which is good. I liked the explanations and examples, helped me understand better the patterns.</p>
<p>I invite you to take a look in my weblog as well at <a href="http://www.eranachum.com" rel="nofollow">http://www.eranachum.com</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-632">
                    <div id="dsq-comment-header-632" class="dsq-comment-header">
                        <cite id="dsq-cite-632">
    http://blogs.msdn.com/gblock                            <span id="dsq-author-user-632">Glenn Block</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-632" class="dsq-comment-body">
                        <div id="dsq-comment-message-632" class="dsq-comment-message"><p>Nice Post. I recommend adding adapter to your pool. Adapter can be extremely powerful especially in integration scenarios with legacy code.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-633">
                    <div id="dsq-comment-header-633" class="dsq-comment-header">
                        <cite id="dsq-cite-633">
                                <span id="dsq-author-user-633">David</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-633" class="dsq-comment-body">
                        <div id="dsq-comment-message-633" class="dsq-comment-message"><p>Your example of the factory method is what a lot of other posts miss. Factory Method is just template method applied to object creation. What that really means it that, similar to the template method, factory method is the creator and sole user of the objects it creates. </p>
<p>The next example where you show what we now consider factories is dangerous ground. A lot of people will take that example, make it non-static, and then say it&#8217;s a factory. To me, a non-static version of that code is an abstract factory. It may an abstract factory of only one product/class, but it is an abstract factory none-the-less.</p>
<p>The real difference between factory method (key word &#8216;method&#8217;) and abstract factory is that factory method is both the creator and consumer of some product class (hence the templating), whereas abstract factory is a seperate class that the client uses/is injected with, which returns some product.</p>
<p>I think this point is worth mentioning considering the confusion created by many who call a seperate class &#8220;factory pattern&#8221;.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-634">
                    <div id="dsq-comment-header-634" class="dsq-comment-header">
                        <cite id="dsq-cite-634">
    http://www.bakilerparke.com                            <span id="dsq-author-user-634">parke</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-634" class="dsq-comment-body">
                        <div id="dsq-comment-message-634" class="dsq-comment-message"><p>Thankkk you</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-635">
                    <div id="dsq-comment-header-635" class="dsq-comment-header">
                        <cite id="dsq-cite-635">
                                <span id="dsq-author-user-635">Alberto</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-635" class="dsq-comment-body">
                        <div id="dsq-comment-message-635" class="dsq-comment-message"><p>Thanks a lot for your this great introduction to<br />
desing patterns. Thanks!!! </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-6936">
                    <div id="dsq-comment-header-6936" class="dsq-comment-header">
                        <cite id="dsq-cite-6936">
    http://www.key-logger.ws                            <span id="dsq-author-user-6936">keylogger</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-6936" class="dsq-comment-body">
                        <div id="dsq-comment-message-6936" class="dsq-comment-message"><p>it&#8217;s very nice is actually a good post&#8230;&#8230;&#8230;</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-7060">
                    <div id="dsq-comment-header-7060" class="dsq-comment-header">
                        <cite id="dsq-cite-7060">
                                <span id="dsq-author-user-7060">Anonymous</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-7060" class="dsq-comment-body">
                        <div id="dsq-comment-message-7060" class="dsq-comment-message"><p>Hi buddy,I like your blogs design. </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-7061">
                    <div id="dsq-comment-header-7061" class="dsq-comment-header">
                        <cite id="dsq-cite-7061">
                                <span id="dsq-author-user-7061">Anonymous</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-7061" class="dsq-comment-body">
                        <div id="dsq-comment-message-7061" class="dsq-comment-message"><p>Hi buddy,I like your blogs design. </p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2006/04/11/six-design-patterns-to-start-with/';
    var disqus_identifier = '150 /blogs/jeremy.miller/archive/2006/04/11/142665.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "Six Design Patterns to Start With";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData  fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=150');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2006\/04\/11\/six-design-patterns-to-start-with\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profiles in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.586 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 12:35:24 -->
<!-- super cache -->