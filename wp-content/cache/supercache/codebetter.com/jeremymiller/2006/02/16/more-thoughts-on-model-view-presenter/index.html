<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>More Thoughts on Model View Presenter | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Once and for all, email is not a good medium for communication' href='http://codebetter.com/jeremymiller/2006/02/14/once-and-for-all-email-is-not-a-good-medium-for-communication/' />
<link rel='next' title='Amen to that, Brother Haack' href='http://codebetter.com/jeremymiller/2006/02/17/amen-to-that-brother-haack/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=131' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,146] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2006/02/16/more-thoughts-on-model-view-presenter/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-131" class="post-131 post type-post status-publish format-standard hentry category-design-patterns category-structuremap">
					<h1 class="entry-title">More Thoughts on Model View Presenter</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2006/02/16/more-thoughts-on-model-view-presenter/" title="5:15 am" rel="bookmark"><span class="entry-date">February 16, 2006</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>This is a follow up to my post on the <a href="/blogs/jeremy.miller/archive/2006/02/01/137457.aspx">Model View Presenter pattern with ASP.Net</a> to address or clarify some of comments from the earlier post.&nbsp; I apologize for being so slow in answering the comments.</p>
<h4>The Presenter is a GoF Mediator</h4>
<p>Carlton commented that the Presenter class looks a lot like the Gang of Four &#8220;<a href="http://www.dofactory.com/Patterns/PatternMediator.aspx">Mediator</a>&#8221; pattern.&nbsp; He&#8217;s absolutely right.&nbsp; Something to keep in mind when learning to apply design patterns is that a class or group of classes can easily be an instance of more than one pattern.&nbsp; In this case &#8220;Presenter&#8221; or &#8220;Controller&#8221; is just a more specific name for a class within a larger structural pattern.</p>
<h4>Unit Tests Aren&#8217;t Enough</h4>
<p>MVP certainly makes unit testing easier, but don&#8217;t forget to create white box integration tests as well.&nbsp; The unit tests should remove most of the problems, but only integration tests will reveal all of the defects in the code.&nbsp; Conventional wisdom says to write automated tests <a href="http://www.martinfowler.com/eaaDev/OrganizingPresentations.html">just under the skin</a> of the user interface.&nbsp; Our experience with writing integrated <a href="http://fitnesse.org/">FitNesse</a> tests against the Presenter classes with live services but a stubbed view has been positive.&nbsp; You could also write integrated tests that use the real view and the Presenter but mock or stub the backend to fully test the presentation.&nbsp; Sooner or later you&#8217;ll have to do a full end-to-end test, but I think it&#8217;s vastly easier to diagnose and fix defects with smaller white box tests first.</p>
<h4>Exposing the Model</h4>
<p><a href="http://hrboyceiii.blogspot.com/">Harris Boyce</a>&#8216;s colleague didn&#8217;t like the view class having a reference to the actual Model (<font face="Courier New">WorkItem</font>) object in the following:</p>
<pre>	// Abstracted interface of the WorkItem View screen
	public interface IWorkItemView
	{
		// Packs the user input into a new WorkItem class
		WorkItem WorkItem{get;}

		// Sets the values in the dropdown list for the WorkItem assigned to user
		string[] AssignmentList {set;}

		// Sets the values in the dropdown list for the WorkItem categories
		string[] CategoryList {set;}
	}
</pre>
<p>It&#8217;s a valid objection, but let me try to clarify what I was worried about here.&nbsp; One of the ways to bog down with the MVP pattern is to make the view interface way too chatty with far too many getters and setters like this:</p>
<pre>	public interface IWorkItemView
	{
		string AssignedTo {get; set;}
		string Category {get; set;}
		string Description {get; set;}
		string Priority {get; set;}
		string Comments {get; set;}
		
		/* More properties */
	}
</pre>
<p>In this case the Presenter starts to become way too busy with pushing data back and forth between the view getter/setters and the Model objects. One of the strengths of .Net user interface development is the strong support for databinding.&nbsp; I know it&#8217;s far from perfect, but it still saves some grunt work and frees the Presenter up to concentrate on flow logic.&nbsp; I can understand some apprehension about exposing a Domain Model object to a presentation class, so here&#8217;s some alternatives to consider:</p>
<ul>
<li>The &#8220;Model&#8221; doesn&#8217;t have to be a Domain Model class.&nbsp; You can create a custom <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnpatterns/html/DesDTO.asp">Data Transfer Object</a> (very appropriate if there is a web service in the mix) or even a lowly DataSet to be the dedicated &#8220;Model&#8221; and keep your business logic fully encapsulated from the presentation layer.&nbsp; We actually create DataSet&#8217;s from our domain classes for this very purpose.</li>
<li>I&#8217;m not entirely sold on it, but take a look at Martin Fowler&#8217;s Presentation Model pattern as an alternative to MVP.&nbsp; I&#8217;ve used it successfully for complex TreeView operations and the typical &#8220;sort/filter/page&#8221; operations in every grid reporting page.&nbsp; I&#8217;ll post more on that soon.</li>
<li>You can happily use more than one Presenter per View.&nbsp; One Presenter might handle the low level mapping from the Model to the View and input validation while a second Presenter deals with the flow logic and the backend services. </li>
</ul>
<h4>Constructing Deep Object Graphs</h4>
<p>Michael asked how we handle the creation and assembly of deep dependency chains (but he answered his own question).&nbsp; The presenter needs a reference to the view and the backend services, which probably have dependencies of their own.&nbsp; Here&#8217;s a representative case.&nbsp; A <font face="Courier New">Presenter</font> class has a dependency on <font face="Courier New">IView</font>, <font face="Courier New">IUserInformationStore</font>, and <font face="Courier New">IServiceFacade</font>.&nbsp; The concrete class <font face="Courier New">ServiceFacade</font> that implements <font face="Courier New">IServiceFacade</font> has its own dependency on <font face="Courier New">IDomainRepository</font>.&nbsp; </p>
<pre>	public class Presenter
	{
		private readonly IView _view;
		private readonly IUserInformationStore _userInformationStore;
		private readonly IServiceFacade _service;

		public Presenter(IView view, IUserInformationStore userInformationStore, IServiceFacade service)
		{
			_view = view;
			_userInformationStore = userInformationStore;
			_service = service;
		}
	}
	
	public class UserInformationStore : IUserInformationStore
	{
		public UserInformationStore(string domainControllerName){}
	}

	public class ServiceFacade : IServiceFacade
	{
		private readonly IDomainRepository _repository;

		public ServiceFacade(IDomainRepository repository)
		{
			_repository = repository;
		}
	}

	
	public class DomainRepository : IDomainRepository
	{
		private readonly IDataSession _session;

		public DomainRepository(IDataSession session)
		{
			_session = session;
		}
	}

	public class DataSession : IDataSession
	{
		public DataSession(string connectionString)
		{
			
		}
	}
</pre>
<p>I&#8217;m a huge fan of using <a href="/blogs/jeremy.miller/archive/2005/09/20/132290.aspx">Inversion of Control</a>/<a href="/blogs/jeremy.miller/archive/2005/10/06/132825.aspx">Dependency Injection</a> to promote looser coupling and better testability, but the responsibility of attaching dependencies has to go somewhere.&nbsp; We obviously don&#8217;t want the ASPX page that creates the Presenter class be responsible for creating the entire object graph of dependencies like the sample below.</p>
<pre>	public class View : Page, IView
	{
		private Presenter _presenter;

		public View()
		{
			// Absurd example
			_presenter = new Presenter(this, 
				new UserInformationStore("TheNameOfTheDomainController"), 
				new ServiceFacade(
					new DomainRepository(
						new DataSession("a connection string"))));
		}
	}
</pre>
<p>I would suggest one of two solutions.&nbsp; The simpler, but less powerful solution is to use &#8220;greedy&#8221; testing constructors to attach mock objects in tests, but use a default no argument constructor when a class is created in production code.</p>
<pre>	public class Presenter
	{
		private readonly IView _view;
		private readonly IUserInformationStore _userInformationStore;
		private readonly IServiceFacade _service;

		// "Greedy" unit testing constructor only!
		public Presenter(IView view, IUserInformationStore userInformationStore, IServiceFacade service)
		{
			_view = view;
			_userInformationStore = userInformationStore;
			_service = service;
		}

		// Default constructor
		public Presenter(IView view) : this(view, new UserInformationStore(), new ServiceFacade())
		{
		}
	}
</pre>
<p>The second and more powerful solution is to use a Dependency Injection tool like StructureMap to create the object graphs and attach all of the dependencies. My colleagues frequently snicker that my answer to most design challenges is to use StructureMap, but this case&nbsp;is exactly what I built it for.&nbsp; </p>
<pre>	public class View : Page, IView
	{
		private Presenter _presenter;

		public View()
		{
			_presenter = new Presenter(this);
		}
	}

	public class Presenter
	{
		private readonly IView _view;
		private readonly IUserInformationStore _userInformationStore;
		private readonly IServiceFacade _service;

		// "Greedy" unit testing constructor only!
		public Presenter(IView view, IUserInformationStore userInformationStore, IServiceFacade service)
		{
			_view = view;
			_userInformationStore = userInformationStore;
			_service = service;
		}

		// Default constructor
		public Presenter(IView view)
		{
			_view = view;

			// Use StructureMap to create the object graphs for UserInformationStore and ServiceFacade
			// with all of the necessary connection string and domain controller configuration
			_userInformationStore = (IUserInformationStore) ObjectFactory.GetInstance(typeof(IUserInformationStore));
			_service = (IServiceFacade) ObjectFactory.GetInstance(typeof(IServiceFacade));
		}
	}

</pre>
<p>Using StructureMap to wire up the dependencies allows for far more flexibility to mix and match the application configuration.&nbsp; For example, by my team uses StructureMap to switch our web application from using certificates for authentication to a stubbed security mode on our developer boxes by a simple change in the StructureMap configuration.&nbsp; We also use StructureMap to turn encryption off for easier debugging, stubbing the database, and switching from an installation where the application runs on two physical tiers in production mode to a testing mode where the entire application runs inside a single AppDomain for easier debugging and faster tests.&nbsp; Here&#8217;s a more detailed <a href="/blogs/jeremy.miller/archive/2005/11/18/134816.aspx">example of using StructureMap</a>. I&#8217;ve mostly used StructureMap for creating pluggable MVP architectures with WinForms applications, but I don&#8217;t see why it wouldn&#8217;t be applicable for web applications as well. </p>
<div class="shr-publisher-131"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag">Design Patterns</a>, <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2006/02/16/more-thoughts-on-model-view-presenter/" title="Permalink to More Thoughts on Model View Presenter" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2006/02/16/more-thoughts-on-model-view-presenter/feed/" title="Comments RSS to More Thoughts on Model View Presenter" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-131 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2006/02/14/once-and-for-all-email-is-not-a-good-medium-for-communication/" rel="prev"><span class="meta-nav">&larr;</span> Once and for all, email is not a good medium for communication</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2006/02/17/amen-to-that-brother-haack/" rel="next">Amen to that, Brother Haack <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-509">
                    <div id="dsq-comment-header-509" class="dsq-comment-header">
                        <cite id="dsq-cite-509">
                                <span id="dsq-author-user-509">cs</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-509" class="dsq-comment-body">
                        <div id="dsq-comment-message-509" class="dsq-comment-message"><p>Hi Jeremy,<br />
I love your articles on MVP. Do you think you could do one on MVP with a WinForms app too please? Maybe something where you combine MVP with some WinForms code and RhinoMock to show some cool testing stuff.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-510">
                    <div id="dsq-comment-header-510" class="dsq-comment-header">
                        <cite id="dsq-cite-510">
    http://www.UdiDahan.com                            <span id="dsq-author-user-510">Udi Dahan &#8211; The Software Simplist</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-510" class="dsq-comment-body">
                        <div id="dsq-comment-message-510" class="dsq-comment-message"><p>You could also have separate interfaces for your domain objects so that the views wouldn&#8217;t depend directly on their implementation.</p>
<p>There are two perspectives on this:</p>
<p>1. If the domain only exists on the client side, there are methods in your domain objects that you probably don&#8217;t want your view to see/use &#8211; so having a separate interface might be a good thing.</p>
<p>2. If you have two separate domains for your client side and server side, then having the separate interfaces probably isn&#8217;t necessary since the methods mentioned above would probably only be available on the server side.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-511">
                    <div id="dsq-comment-header-511" class="dsq-comment-header">
                        <cite id="dsq-cite-511">
                                <span id="dsq-author-user-511">dru</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-511" class="dsq-comment-body">
                        <div id="dsq-comment-message-511" class="dsq-comment-message"><p>Sweet article. +1 for the windows discussion.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-512">
                    <div id="dsq-comment-header-512" class="dsq-comment-header">
                        <cite id="dsq-cite-512">
                                <span id="dsq-author-user-512">Liang</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-512" class="dsq-comment-body">
                        <div id="dsq-comment-message-512" class="dsq-comment-message"><p>I am wondering how to orgainze the assembly. The Presenter class is in the same assembly with IView, IUserInformationStore, and IServiceFacade?</p>
<p>Thanks! </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-513">
                    <div id="dsq-comment-header-513" class="dsq-comment-header">
                        <cite id="dsq-cite-513">
                                <span id="dsq-author-user-513">Michael</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-513" class="dsq-comment-body">
                        <div id="dsq-comment-message-513" class="dsq-comment-message"><p>Thanks Jeremy!  Great information.</p>
<p>I&#8217;m still pondering testing.  I want a way to hold my stubs to the same standards as my production classes.</p>
<p>For example, suppose you code a Presenter against an IServiceFacade interface.  The Presenter calls IServiceFacade.GetListOfWidgets(), and expects null on failure, and your ServiceFacadeStub is coded accordingly to pass the Presenter tests.  Some time later, you code the live ServiceFacade against the IServiceFacade interface, and it&#8217;s passing it&#8217;s tests.</p>
<p>At this point, you have no guarantee that it&#8217;s returning null on that failure condition as the Presenter expects.  You might have writen a test that explicitly checks for an empty list instead of null on failure, and everything passes despite the flaw.  The Presenter is happy getting null from the ServiceFacadeStub, expecting the real implementation to behave the same, while the ServiceFacade is happy to return an empty list to it&#8217;s own test fixture, ignorant of it&#8217;s errant ways.</p>
<p>Your solution rings true, in that a live integration test will likely notice this.  However, what if there was some way to a) reduce the effort of duplication between unit tests and integration tests, and b) notice the flaw sooner.</p>
<p>Two things come to my mind as I write this&#8230;.</p>
<p>One is DI for test fixtures, so that you could reuse a single test fixture for both unit tests and integration tests by simply setting up two test environments with different configs, but against the same code.</p>
<p>Another is some sort of parametized fixture.  I&#8217;m not sure of the specifics, but some way to execute the same suite of tests writen for a live service against a mock or stub at will.  In such a way, the Presenter could pre-test the IServiceFacade stub against the same code writen for the live ServiceFacade.  It doesn&#8217;t have to be the full-fledged ServiceFacadeFixture, but perhaps something that simply validates that a stub implements behaviors that you want common to all implementations of IServiceFacade, such as predictable failure conditions and return values.</p>
<p>My goal isn&#8217;t to create more work, but to structure things in a way that allows test-reuse and ensures stability of stubs and mocks during unit testing, so errors can be caught sooner.</p>
<p>Am I off the mark?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-514">
                    <div id="dsq-comment-header-514" class="dsq-comment-header">
                        <cite id="dsq-cite-514">
                                <span id="dsq-author-user-514">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-514" class="dsq-comment-body">
                        <div id="dsq-comment-message-514" class="dsq-comment-message"><p>Cs and Dru, I&#8217;ll see what I can do about a WinForms specific example.  Anything specific you want to see?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-515">
                    <div id="dsq-comment-header-515" class="dsq-comment-header">
                        <cite id="dsq-cite-515">
                                <span id="dsq-author-user-515">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-515" class="dsq-comment-body">
                        <div id="dsq-comment-message-515" class="dsq-comment-message"><p>Liang,</p>
<p>I don&#8217;t think that there is any single way to structure the namespaces and assemblies, but my preference is to put the IView/Presenter pairs in the same namespace.  I generally keep the view classes in the same assembly (we use a class library project for the user controls anyway), just in a specific &#8220;Views&#8221; namespace.</p>
<p>I like to divide assemblies based mostly on the physical deployment.  I really don&#8217;t like unnecessarily granular assemblies.  It definitely makes the automated CI builds longer and it just makes configuration management harder.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-516">
                    <div id="dsq-comment-header-516" class="dsq-comment-header">
                        <cite id="dsq-cite-516">
                                <span id="dsq-author-user-516">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-516" class="dsq-comment-body">
                        <div id="dsq-comment-message-516" class="dsq-comment-message"><p>Michael,</p>
<p>Dude, you&#8217;re making me work a little bit here;)  My immediate response to you is to be careful that you&#8217;re not over-thinking the issue.</p>
<p>Even though I&#8217;m the creator of a DI tool, I *strongly* believe that the best way to attach a mock/stub object in a unit test is through constructor injection because it makes the dependency relationship more clear.  Attaching the mock or stub through a DI config file is a bit of hidden black magic.  It&#8217;s not that bad if you can do the injection inside the test itself.  With StructureMap it would be:</p>
<p>ServiceFacadeStub stub = new ServiceFacadeStub();<br />
ObjectFactory.InjectStub(typeof(IServiceFacade), stub);</p>
<p>or</p>
<p>ObjectFactory.SetDefaultInstanceName(typeof(IServiceFacade), &#8220;Stubbed&#8221;);</p>
<p>or</p>
<p>IMock serviceFacadeMock = ObjectFactory.Mock(typeof(IServiceFacade);</p>
<p>Your goal of reusing a testfixture for both unit testing and integration testing might not be feasible.  The integration testing most likely requires some additional database or file system setup that the mock objects don&#8217;t.  I&#8217;m going to have to think a bit more about this, but I write integration tests much differently than my unit tests and they don&#8217;t completely overlap.</p>
<p>You also want to keep the tests as self-contained as possible.  Both to make the tests standalone and to make the tests as intention-revealing as possible.  I want to be able to look at a test in a separate screen.  If I have to alt-tab between the test code and configuration files or database views I&#8217;m adding to the cognitive overhead of the test.</p>
<p>I don&#8217;t know that you necessarily need to be unit testing the stubs themselves, but you definitely need to writing tests against the ConcreteServiceFacade to make sure that the class behaves the way that the Presenter client expects.  This can get into absurd lengths, but the ConcreteServiceFacade can be tested against mocks that represent the lower level services.  This mock object can be set up to throw an exception so you can test the error handling behavior of the ConcreteServiceFacade.</p>
<p>The whole point of a stub or a mock is to create a fixed behavior in your automated unit tests to minimize the number of variables in any given test.  The behavior of the mock/stub should be as clear as possible to make the test self-describing.  Simply make the stub/mock/fake return null to test how the Presenter deals with the exceptional cases.  With NMock you&#8217;d have serviceFacadeMock.ExpectAndReturn(&#8220;GetListOfWidgets&#8221;, null); or serviceFacadeMock.ExpectAndThrow(&#8220;GetListOfWidgets&#8221;, new ApplicationException(&#8220;Really bad error&#8221;)); </p>
<p>I&#8217;d much rather throw an exception (easy to simulate with a mock object library) than check for nulls, but that&#8217;s just me.</p>
<p>As for a parameterized fixture, I&#8217;ve had a lot of success creating little custom assertion classes.  You might not be able to reuse the whole test fixture, but you can reuse some pieces.  I&#8217;d recommend that you harvest reusable pieces from the unit test fixtures once you start the integration tests.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-517">
                    <div id="dsq-comment-header-517" class="dsq-comment-header">
                        <cite id="dsq-cite-517">
                                <span id="dsq-author-user-517">Michael</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-517" class="dsq-comment-body">
                        <div id="dsq-comment-message-517" class="dsq-comment-message"><p>Sorry, Jeremy.  There&#8217;s no one around here to talk to about anything technical, and for some reason, my girlfriend doesn&#8217;t seem to want to hear it anymore (go figure&#8230;).  So I bug bloggers <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
<p>As to mocks/stubs&#8230; it&#8217;s just something I&#8217;ve found myself getting bitten by.  The null/empty list example is a little silly, but I&#8217;ve been in situations where I later found out a stub higher up didn&#8217;t match an implementation lower down, because they were isolated.  This was caught in integration, but I&#8217;d prefer early warning.  I&#8217;d like a tool or pattern that allows me to reuse the applicable portion of the unit tests written for concrete implementations to make sure stubs are behaving correctly as they&#8217;re written, not later, and vice versa, to make sure that concrete implementations conform to the stubs you may have already written.</p>
<p>I&#8217;ll have to think more on it.  As you mention though, I don&#8217;t want to overthink it.  If I do end up with a solution, it needs to be somewhat elegant and intuitive.  Perhaps I&#8217;m just paranoid.</p>
<p>In any case, my experiences so far with TDD have been great, and I have much more to learn.  Your input is appreciated, as always.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-518">
                    <div id="dsq-comment-header-518" class="dsq-comment-header">
                        <cite id="dsq-cite-518">
                                <span id="dsq-author-user-518">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-518" class="dsq-comment-body">
                        <div id="dsq-comment-message-518" class="dsq-comment-message"><p>No apologies necessary Michael, and thanks for the comments.  It&#8217;s funny, but my wife doesn&#8217;t really hold up her end of technical conversations either.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-519">
                    <div id="dsq-comment-header-519" class="dsq-comment-header">
                        <cite id="dsq-cite-519">
                                <span id="dsq-author-user-519">Joe Ross</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-519" class="dsq-comment-body">
                        <div id="dsq-comment-message-519" class="dsq-comment-message"><p>Jeremy, Been following lots of your posts and have read and re-read the recent MVP ones.  I have a little test app I&#8217;m working on while I figure out how we want to structure our code in future releases (ASP.NET app) and have implemented a basic MVP sample successfully.  My question for you is on the first MVP/ASP.NET post but it&#8217;s only loosely related to MVP.  Your WorkItemPresenter class has a ref to the view and a ref to the service.  The assumption being that a single service will meet all of the needs of this presenter.  Do you have scenarios where a presenter might hook into multiple backend services?  Or do all of your services always encapsulate all logic that a consumer might need?  For example, your service interface has a method GetAssignmentListForCategory.  Imagine you needed this assignment list in other parts of your app that didn&#8217;t rely on IWorkItemService.  Would you expose this method in multiple services or consume multiple services in certain presenters?</p>
<p>Thanks and good luck keeping up the informative posts!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-520">
                    <div id="dsq-comment-header-520" class="dsq-comment-header">
                        <cite id="dsq-cite-520">
                                <span id="dsq-author-user-520">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-520" class="dsq-comment-body">
                        <div id="dsq-comment-message-520" class="dsq-comment-message"><p>Joe,</p>
<p>Yes, you could easily have presenter/controller classes that would need to call into multiple backend services.  I would probably model the state management as a separate service for instance.</p>
<p>Here&#8217;s the &#8220;but&#8221; though, if you have a presenter that&#8217;s depending on several backend services I&#8217;d be suspicious about your class structure.  My rule of thumb is no class should need more than 2-3 mock objects in any given unit test.</p>
<p>You can always create a Facade class to consolidate finer-grained services behind a more coarse-grainted interface.  You could also use multiple presenter classes for a single screen to keep each class cohesive.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-521">
                    <div id="dsq-comment-header-521" class="dsq-comment-header">
                        <cite id="dsq-cite-521">
                                <span id="dsq-author-user-521">Liang</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-521" class="dsq-comment-body">
                        <div id="dsq-comment-message-521" class="dsq-comment-message"><p>Jeremy,</p>
<p>I am using MVP in my current project. I create presenter for User Controls, similar like the example you provided. The only difference is I use event call to invoke Presenter logic. But I still have question regarding how to &#8220;navigate&#8221; the pages? What is the approach you prefer?</p>
<p>Thanks a lot!!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-522">
                    <div id="dsq-comment-header-522" class="dsq-comment-header">
                        <cite id="dsq-cite-522">
                                <span id="dsq-author-user-522">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-522" class="dsq-comment-body">
                        <div id="dsq-comment-message-522" class="dsq-comment-message"><p>Liang,</p>
<p>Take a look at the &#8220;ApplicationController&#8221; pattern from Fowler&#8217;s PEAA book.  Here&#8217;s a link &#8211;> <a href="http://patternshare.org/default.aspx/Home.MF.ApplicationController" rel="nofollow">http://patternshare.org/default.aspx/Home.MF.ApplicationController</a>.</p>
<p>In effect, create an uber-controller that manages the navigation graph.  Make the page presenter/controllers delegate to the ApplicationController for navigation.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-523">
                    <div id="dsq-comment-header-523" class="dsq-comment-header">
                        <cite id="dsq-cite-523">
                                <span id="dsq-author-user-523">Liang</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-523" class="dsq-comment-body">
                        <div id="dsq-comment-message-523" class="dsq-comment-message"><p>Very appreciate, Jeremy!</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-524">
                    <div id="dsq-comment-header-524" class="dsq-comment-header">
                        <cite id="dsq-cite-524">
                                <span id="dsq-author-user-524">Liang</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-524" class="dsq-comment-body">
                        <div id="dsq-comment-message-524" class="dsq-comment-message"><p>Jeremy,</p>
<p>There has a UI implementation from Jay fields, another ThoughWork. It seems pretty interesting, check it out:<br />
<a href="http://jayfields.blogspot.com/2005/08/view-observer.html" rel="nofollow">http://jayfields.blogspot.com/2005/08/view-observer.html</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-525">
                    <div id="dsq-comment-header-525" class="dsq-comment-header">
                        <cite id="dsq-cite-525">
                                <span id="dsq-author-user-525">Dan</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-525" class="dsq-comment-body">
                        <div id="dsq-comment-message-525" class="dsq-comment-message"><p>>Cs and Dru, I&#8217;ll see what I can do about a WinForms specific example. Anything specific you want to see?</p>
<p>While Im not Cs or Dru I do have something specific Id like to see a good example of:</p>
<p>Loading some data that will take a long time to load (ie, slow running process) and that has results that needs to be displayed in the form. And also with some form of progress bar on the loading with a cancel button. (Its the interaction between the GUI thread and the worker thread, and also how to test that effectively that Im interested in.)</p>
<p>For instance: When loading up an admin form you need to load a lot of data from the database, but you dont want the program to freeze while loading the form.</p>
<p>Would be grateful for any input you could give</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-526">
                    <div id="dsq-comment-header-526" class="dsq-comment-header">
                        <cite id="dsq-cite-526">
                                <span id="dsq-author-user-526">CS</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-526" class="dsq-comment-body">
                        <div id="dsq-comment-message-526" class="dsq-comment-message"><p>&#8220;Cs and Dru, I&#8217;ll see what I can do about a WinForms specific example. Anything specific you want to see&#8221;</p>
<p>Well it doesn&#8217;t have to be anything too fancy. Maybe a form with a TreeView on the left that updates to a different panel on the right side of them form (that has buttons etc maybe for adding or removing items to a collection?). Maybe a form with a TabControl. Just a couple ideas. Thanks for the great work.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-527">
                    <div id="dsq-comment-header-527" class="dsq-comment-header">
                        <cite id="dsq-cite-527">
    http://chrisdonnan.com/blog                            <span id="dsq-author-user-527">chris donnan</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-527" class="dsq-comment-body">
                        <div id="dsq-comment-message-527" class="dsq-comment-message"><p>FYI &#8211; I am working the Spring.net desktop app framework. (DAF) browse the CVS &#8211; It has yet-another-take on MVP. DAF work is only in the sandbox area of the CVS &#8211; but it is all related to this stuff&#8230;.. </p>
<p><a href="http://springnet.cvs.sourceforge.net/springnet/Spring.Net/sandbox/src/Spring/Spring.Daf/UIModel/BasicPresenter.cs?view=markup" rel="nofollow">http://springnet.cvs.sourceforge.net/springnet/Spring.Net/sandbox/src/Spring/Spring.Daf/UIModel/BasicPresenter.cs?view=markup</a></p>
<p>start there &#8211; check out related commands, actions etc.. My problems w/ standard presenters in the past is that they get &#8216;fat&#8217;. Commands help out here.</p>
<p>-Chris</p>
<p>PS &#8211; always a good read here <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /><br />
PPS &#8211; get latest anon via cvs and build the Daf.Demo</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-528">
                    <div id="dsq-comment-header-528" class="dsq-comment-header">
                        <cite id="dsq-cite-528">
                                <span id="dsq-author-user-528">Alex</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-528" class="dsq-comment-body">
                        <div id="dsq-comment-message-528" class="dsq-comment-message"><p>Jeremy, really appreciate your work on the MVP but having an issue with the whole multiple data services of a presenter.  I have a very simple view which requires data from methods of 2 distinct web services.   These web services are well established and I cant change the methods of either so how do I pass in a single service interface to the presenter?  </p>
<p>I realise I could create a single service interface which implements both methods but I am then left with the prospect of creating another web service which will have duplicate methods of the 2 existing web services.</p>
<p>Very grateful for your ideas or those of others.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-529">
                    <div id="dsq-comment-header-529" class="dsq-comment-header">
                        <cite id="dsq-cite-529">
                                <span id="dsq-author-user-529">Vk</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-529" class="dsq-comment-body">
                        <div id="dsq-comment-message-529" class="dsq-comment-message"><p>I knw its too late to ask about this but did you get chance to develop an example on WinForms specific example. I have to develop one with multi-threading and I&#8217;m not quite sure where to thread from</p>
<p>thanks</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-530">
                    <div id="dsq-comment-header-530" class="dsq-comment-header">
                        <cite id="dsq-cite-530">
                                <span id="dsq-author-user-530">aviad</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-530" class="dsq-comment-body">
                        <div id="dsq-comment-message-530" class="dsq-comment-message"><p>Vk, </p>
<p>the link bellow has C#2.0 WinForms case study for MVP.</p>
<p><a href="http://aviadezra.blogspot.com/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html" rel="nofollow">http://aviadezra.blogspot.com/2007/07/twisting-mvp-triad-say-hello-to-mvpc.html</a></p>
<p>Hope that helps, </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-531">
                    <div id="dsq-comment-header-531" class="dsq-comment-header">
                        <cite id="dsq-cite-531">
                                <span id="dsq-author-user-531">Mohammad Azam</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-531" class="dsq-comment-body">
                        <div id="dsq-comment-message-531" class="dsq-comment-message"><p>Was my post deleted?? </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-532">
                    <div id="dsq-comment-header-532" class="dsq-comment-header">
                        <cite id="dsq-cite-532">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-532">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-532" class="dsq-comment-body">
                        <div id="dsq-comment-message-532" class="dsq-comment-message"><p> Mohammad,</p>
<p>You commented on a different post, and I don&#8217;t have an answer yet;-)</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-533">
                    <div id="dsq-comment-header-533" class="dsq-comment-header">
                        <cite id="dsq-cite-533">
                                <span id="dsq-author-user-533">Nicol&#225;s</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-533" class="dsq-comment-body">
                        <div id="dsq-comment-message-533" class="dsq-comment-message"><p>Jeremy, how do you manage diferents views opened. for example in a  MDI winform application with dialogs. How could we refresh all the related views?<br />
For example when we have form with a list and a dialog to create or edit.</p>
<p>Thanks.</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2006/02/16/more-thoughts-on-model-view-presenter/';
    var disqus_identifier = '131 /blogs/jeremy.miller/archive/2006/02/16/138382.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "More Thoughts on Model View Presenter";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=131');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2006\/02\/16\/more-thoughts-on-model-view-presenter\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profile’s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 1.452 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 12:42:49 -->
<!-- super cache -->