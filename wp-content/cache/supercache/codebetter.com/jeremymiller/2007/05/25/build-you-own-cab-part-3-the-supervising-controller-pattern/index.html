<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Build your own CAB Part #3 &#8211; The Supervising Controller Pattern | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/jeremymiller/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/jeremymiller/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Jeremy D. Miller' href='http://codebetter.com/jeremymiller/' />
<link rel='start' title='Bypass VSTS and get yourself a &quot;Poor Man&#8217;s IntelliJ&quot;' href='http://codebetter.com/jeremymiller/2005/04/12/bypass-vsts-and-get-yourself-a-poor-mans-intellij/' />
<link rel='prev' title='Build your own CAB Part #2 &#8211; The Humble Dialog Box' href='http://codebetter.com/jeremymiller/2007/05/23/build-your-own-cab-part-2-the-humble-dialog-box/' />
<link rel='next' title='What do you use to incorporate JSUnit tests into a NAnt build?' href='http://codebetter.com/jeremymiller/2007/05/28/what-do-you-use-to-incorporate-jsunit-tests-into-a-nant-build/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/jeremymiller/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern/' />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=344' />
<link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/theshadetreedeveloper/disqus.css?v=2.0" type="text/css" media="screen" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-344" class="post-344 post type-post status-publish format-standard hentry category-build-your-own-cab category-design-patterns category-featured">
					<h1 class="entry-title">Build your own CAB Part #3 &#8211; The Supervising Controller Pattern</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern/" title="11:55 am" rel="bookmark"><span class="entry-date">May 25, 2007</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/jeremymiller/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p><a href="http://codebetter.com/blogs/jeremy.miller/archive/2007/05/23/build-your-own-cab-part-2-the-humble-dialog-box.aspx">When last we left D&#8217;Artagnan</a> he had just concluded a successful duel with a number of screen concerns by dividing them with a masterful usage of the Humble Dialog Box.&nbsp; As D&#8217;Artagnan strives to regain his breathe, he&#8217;s heartened by the appearance of his three doughty companions Athos, Aramis, and Porthos.&nbsp; As the four friends sit down&nbsp;in a shady spot besides the road&nbsp;for a fine meal of delicacies (unknowingly donated by a noblewoman of Athos&#8217; acquaintance), D&#8217;Artagnan describes their predicament when they manage to corner the Lady de Winter and her host of minions.</p>
<h4>A Shipping Screen&nbsp;</h4>
<p>Let&#8217;s imagine that you need to build a little screen to allow a user to configure the shipping options for some sort of&nbsp;electronic order that looks something like this screenshot below:</p>
<p><img src="http://codebetter.com/photos/jeffrey.palermo/images/163378/278x277.aspx"> </p>
<p>The user first needs to select the state or province (since this was for a talk in Canada, I thought it would be nice to let our Canuck neighbors to the&nbsp;north&nbsp;use the app too)&nbsp;that is the destination of the shipment.&nbsp; Not every shipping vendor can ship to every destination, so we should modify the contents of the shipping vendor dropdown to reflect the destination.&nbsp; Likewise, a change in the selected shipping vendor will also cascade down to the list of shipping options (think Overnight, 2 business day, parcel, etc.).&nbsp; Some, but not all,&nbsp;shipping options allow the customer to purchase insurance in case of loss or require a signature at the destination for guaranteed delivery.&nbsp; Finally, the cost of the shipment should be recalculated and displayed on the screen anytime the shipping selections are changed.</p>
<p>I can spot a couple different responsibilities in just that paragraph, plus a couple more down the line when it&#8217;s time to actually submit the shipment.&nbsp; Even this little screen has enough complexity in it that I wouldn&#8217;t want to bundle all of the responsibilities into a single autonomous view.&nbsp; So let&#8217;s enumerate just the responsibilities from that paragraph and start thinking about how to assign these responsibilities to different classes.</p>
<ul>
<li>Display and capture&nbsp;the currently selected&nbsp;shipment options
</li>
<li>Respond to user events like selecting a value in the ComboBox&#8217;s
</li>
<li>Fetching the list of states
</li>
<li>Fetching the list of shipping vendors for a given state or province
</li>
<li>Fetching the list of options for a given state/province and vendor
</li>
<li>Changing the dropdown lists
</li>
<li>Enabling and disabling the checkbox&#8217;s for purchasing insurance and requiring a signature
</li>
<li>Calculate the shipping cost for the selected options
</li>
<li>Update the cost textbox whenever the shipment options change</li>
</ul>
<p>That&#8217;s a fair amount of behavior and business logic for one little screen.&nbsp; We know that we probably want to employ some sort of Humble View approach to split out some of the responsibilities from the Form class and into POCO classes that are easier to test.&nbsp; I&#8217;m going to show three&nbsp;sample solutions of the shipping screen, each using a bit different approach to assigning responsibilities.</p>
<h4>&nbsp;</h4>
<h4>Interlude</h4>
<p>The four friends mull over the looming fight with the forces of Lady de Winter as they finish off a fine cheese produced from the endless saddlebags of Aramis&#8217;s manservant.&nbsp; D&#8217;Artagnan&nbsp;&nbsp;poses this question to the older musketeers:&nbsp; &#8220;When I&#8217;m beset by&nbsp;a multitude of&nbsp;concerns in a single screen,&nbsp;what technique&nbsp;should I use to&nbsp;best each concern in turn?&#8221;&nbsp; The three older musketeers ponder the question raised by their younger companion.&nbsp; Finally, Athos speaks up.&nbsp; &#8220;I would not concern myself with the simpler responsibilities of a screen.&nbsp; I would first seek to eliminate the more complicated screen responsibilities by employing&#8230;&#8221;</p>
<p>&nbsp;</p>
<h4>The Supervising Controller</h4>
<p>The goal of the <a href="http://www.martinfowler.com/eaaDev/SupervisingPresenter.html">Supervising Controller</a> variant of Model View Presenter&nbsp;is to remove the more complicated screen scenarios that deserve more unit testing attention out of the view and into a separate Presenter class.&nbsp; The Supervising Controller strategy takes advantage of the data binding&nbsp;support in WinForms for simple screen synchronization.&nbsp; To that end, we&#8217;ll create a simple class called Shipment that will be our Model in the MVP triad.&nbsp;</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: teal">Shipment</span> : <span style="color: teal">INotifyPropertyChanged</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">string</span> _stateOrProvince;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">string</span> _vendor;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">string</span> _shippingOption;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">bool</span> _purchaseInsurance;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">bool</span> _requireSignature;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">double</span> _cost;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">string</span> StateOrProvince</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _stateOrProvince; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">set</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _stateOrProvince = <span style="color: blue">value</span>;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fireChanged(<span style="color: maroon">&#8220;StateOrProvince&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">string</span> Vendor</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _vendor; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">set</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _vendor = <span style="color: blue">value</span>;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; fireChanged(<span style="color: maroon">&#8220;Vendor&#8221;</span>);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// And the rest of the properties&#8230;</span></p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>The View itself simply has a setter that takes in a Shipment object and starts up the data binding.&nbsp;</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: teal">Shipment</span> Shipment</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">set</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// start up the data binding stuff</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
</div>
<p>I&#8217;ll talk about options for&nbsp;the Model in depth in a&nbsp;later post, but for now, let&#8217;s say that Shipment is just a dumb batch of getters and setters.&nbsp; Since I can&#8217;t stand writing INotifyPropertyChanged interface implementations by hand, you&#8217;ll probably want to codegen these Model classes &#8212; again giving me even more reasons to keep the Shipment class dumb.</p>
<p>We&#8217;ve taken care of the actual presentation of the shipment data, so let&#8217;s move on to more responsibilities.&nbsp; There&#8217;s no possible way that a screen should know how to calculate the shipping costs, and probably shouldn&#8217;t know how to fetch the data for the dropdown selections.&nbsp; Deciding whether or not a shipper and shipping option&nbsp;allows a user to&nbsp;purchase insurance or require a signature on receipt is business logic for the real domain logic classes, not screen logic that belongs in the screen.&nbsp; Let&#8217;s not particularly worry about how this stuff is implemented right now.&nbsp; Let&#8217;s just define an interface for all of this functionality (and a <a href="http://www.martinfowler.com/eaaCatalog/dataTransferObject.html">Data Transfer Object</a> as well).</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: teal">DeliveryOptions</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">bool</span> _purchaseInsuranceEnabled;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">bool</span> _requireSignatureEnabled;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">bool</span> PurchaseInsuranceEnabled</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _purchaseInsuranceEnabled; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _purchaseInsuranceEnabled = <span style="color: blue">value</span>; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">bool</span> RequireSignatureEnabled</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _requireSignatureEnabled; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">set</span> { _requireSignatureEnabled = <span style="color: blue">value</span>; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">interface</span> <span style="color: teal">IShippingService</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">string</span>[] GetLocations();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">string</span>[] GetShippingVendorsForLocation(<span style="color: blue">string</span> location);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">string</span>[] GetShippingOptions(<span style="color: teal">Shipment</span> shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">void</span> CalculateCost(<span style="color: teal">Shipment</span> shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">DeliveryOptions</span> GetDeliveryOptions(<span style="color: teal">Shipment</span> shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>The IShippingService interface works on our Shipment class that we&#8217;re binding to in the actual screen, as opposed to exposing primitive arguments.&nbsp; When I was writing the sample code it seemed to me to be a simple way of interacting with the service because it cuts down on any data transformations between screen and service.&nbsp; The CalculateCost(Shipment) method would also write the cost back to the Shipment object, cascading a corresponding change to the screen as the data binding updates the screen based on changes to Shipment.&nbsp; It&#8217;s probably worth noting that this IShippingService could just be a Facade class over the&nbsp;business logic&nbsp;specifically created for easier consumption by the user interface.&nbsp; In the next chapter I&#8217;ll take a different approach that exposes the underlying Domain Model classes for the shipping system.</p>
<p>At this point we&#8217;re largely left with just responsibilities for changing the dropdown options and mediating between the View and the IShippingService.&nbsp; That&#8217;s where the ShippingScreenPresenter finally comes in to provide the missing functionality that goes beyond simple data binding, as well as coordinating user actions with the IShippingService.</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: teal">ShippingScreenPresenter</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">readonly</span> <span style="color: teal">IShippingScreen</span> _view;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">readonly</span> <span style="color: teal">IShippingService</span> _service;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: teal">Shipment</span> _shipment;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> ShippingScreenPresenter(<span style="color: teal">IShippingScreen</span> view, <span style="color: teal">IShippingService</span> service)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view = view;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _service = service;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _shipment = <span style="color: blue">new</span> <span style="color: teal">Shipment</span>();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Since we&#8217;re got the INotifyPropertyChanged interface on Shipment,</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// we might as well use it to trigger updates to the Cost</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _shipment.PropertyChanged += <span style="color: blue">new</span> <span style="color: teal">PropertyChangedEventHandler</span>(_shipment_PropertyChanged);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">private</span> <span style="color: blue">void</span> _shipment_PropertyChanged(<span style="color: blue">object</span> sender, <span style="color: teal">PropertyChangedEventArgs</span> e)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _service.CalculateCost(_shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: teal">Shipment</span> Shipment</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">get</span> { <span style="color: blue">return</span> _shipment; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> Start()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view.Shipment = _shipment;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// React to the user selecting a new destination</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> LocationChanged()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view.Vendors = _service.GetShippingVendorsForLocation(_shipment.StateOrProvince);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// React to the user changing the Vendor</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> VendorChanged()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view.ShippingOptions = _service.GetShippingOptions(_shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// React to the user changing the Shipping Option</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> ShippingOptionChanged()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">DeliveryOptions</span> options = _service.GetDeliveryOptions(_shipment);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view.InsuranceEnabled = options.PurchaseInsuranceEnabled;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _view.SignatureEnabled = options.RequireSignatureEnabled;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p>Since I&#8217;ve been claiming that this style of user interface structure improves the testability of the screen as a whole, let&#8217;s take a look at what the unit tests might look like.&nbsp;&nbsp;Here&#8217;s the unit test&nbsp;for correctly enabling or disabling the insurance and signature checkbox&#8217;s on the shipping screen after the shipping option changes:</p>
<p>&nbsp;</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: teal">Test</span>]</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> EnableOrDisableTheInsuranceAndSignatureCheckboxesWhenShippingOptionChanges()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">MockRepository</span> mocks = <span style="color: blue">new</span> <span style="color: teal">MockRepository</span>();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">IShippingService</span> service = mocks.CreateMock&lt;<span style="color: teal">IShippingService</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">IShippingScreen</span> screen = mocks.CreateMock&lt;<span style="color: teal">IShippingScreen</span>&gt;();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">ShippingScreenPresenter</span> presenter = <span style="color: blue">new</span> <span style="color: teal">ShippingScreenPresenter</span>(screen, service);</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Setting up the expected set of Delivery options</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">DeliveryOptions</span> deliveryOptions = <span style="color: blue">new</span> <span style="color: teal">DeliveryOptions</span>();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; deliveryOptions.PurchaseInsuranceEnabled = <span style="color: blue">true</span>;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; deliveryOptions.RequireSignatureEnabled = <span style="color: blue">false</span>;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Set up the expectations for coordinating both</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// the service and the view</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">Expect</span>.Call(service.GetDeliveryOptions(presenter.Shipment))</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .Return(deliveryOptions);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; screen.InsuranceEnabled = deliveryOptions.PurchaseInsuranceEnabled;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; screen.SignatureEnabled = deliveryOptions.RequireSignatureEnabled;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Perform the work and check the expectations</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mocks.ReplayAll();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; presenter.ShippingOptionChanged();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mocks.VerifyAll();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
</div>
<p>The first thing you might notice is that this is definitely an <a href="http://codebetter.com/blogs/jeremy.miller/articles/129544.aspx">interaction based unit test</a>.&nbsp; That&#8217;s not surprising since one of the primary duties of a Presenter is to mediate between the services and view.&nbsp; In development with Test Driven Development / Behavior Driven Development, it&#8217;s often advantageous to separate the responsibility for performing an action away from the decision to perform that action.&nbsp; In this case, the real View&nbsp;enables the insurance and signature checkboxes&nbsp;when the&nbsp;Supervising Presenter tells it to enable or disable the checkboxes.&nbsp; In other words, the Supervising Presenter is the mostly immobile queen bee, and the View is the mobile, but relatively brainless, worker bee.&nbsp; In unit tests like the one above, we&#8217;re largely&nbsp;testing that the Presenter is sending the correct&nbsp;signals to the View and service interfaces.</p>
<p>For another example, here&#8217;s a unit test for recalculating the shipment cost as the selected shipping options change:</p>
<p>&nbsp;</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<span style="color: teal">Test</span>]</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">void</span> UpdateTheCostWheneverTheShipmentChanges()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">MockRepository</span> mocks = <span style="color: blue">new</span> <span style="color: teal">MockRepository</span>();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">IShippingService</span> service = mocks.CreateMock&lt;<span style="color: teal">IShippingService</span>&gt;();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">IShippingScreen</span> screen = mocks.CreateMock&lt;<span style="color: teal">IShippingScreen</span>&gt;();</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">ShippingScreenPresenter</span> presenter = <span style="color: blue">new</span> <span style="color: teal">ShippingScreenPresenter</span>(screen, service);</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; service.CalculateCost(presenter.Shipment);</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mocks.ReplayAll();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; presenter.Shipment.Vendor = <span style="color: maroon">&#8220;a different vendor&#8221;</span>;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mocks.VerifyAll();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
</div>
<p>That wasn&#8217;t that bad, now was it?&nbsp; But wait, you ask.&nbsp; Where&#8217;s the actual logic for calculating the shipment cost?&nbsp; For right now I&#8217;m just worried about the wiring of the screen itself.&nbsp; Yes, this unit test covers very little ground, and it&#8217;s not a &#8220;real&#8221; test, but I&#8217;ve created some level of trust that this particular linkage in the code does work.&nbsp; I can now turn my back on the screen itself&nbsp;and test the actual&nbsp;ShippingService by simply&nbsp;pushing in Shipment objects and checking that the Cost field is correctly updated.&nbsp; Not one single line of the shipping screen code needs to be present for any of that logic to be tested.&nbsp; I hope it&#8217;s needless to say that there really shouldn&#8217;t be any leakage of domain logic into the screen code.&nbsp; Real domain logic in views is just about the fastest way possible to create an utterly unmaintainable system.</p>
<p>&nbsp;</p>
<h4>Interlude</h4>
<p>The four friends pondered Athos&#8217;s solution in quiet contemplation in the state of contentment that only follows a fine meal.&nbsp; &#8220;Wait,&#8221; exclaims D&#8217;Artagnan, &#8220;You haven&#8217;t told us&nbsp;how the View talks to the Presenter, and who creates who!&nbsp; How should this work?&#8221;&nbsp; Athos simply shakes his head and says &#8220;it&#8217;s a long ride to Dunkirk, we&#8217;ll talk more of this on the road.&#8221;&nbsp; (as in, I&#8217;ll get there, just give me a couple more chapters &#8211; Jeremy).</p>
<p>&nbsp;</p>
<h4>How I Prefer to&nbsp;Work</h4>
<p>Personally, I wouldn&#8217;t order the work quite the way I showed above.&nbsp; I like to start with either a screen mockup or maybe even the actual view.&nbsp; If you start with the actual&nbsp;concrete view class, don&#8217;t wire it up yet, and whatever you do, don&#8217;t automatically implement the intended &#8220;IView&#8221; interface until you&#8217;re done with the Presenter.&nbsp; Sometimes I&#8217;ll start&nbsp;by&nbsp;taking&nbsp;some&nbsp;notes or sketching out some UML or CRC models&nbsp;about the screen scenarios.&nbsp; My next step is to encode the behavioral aspect of the screen&nbsp;in the Presenter.&nbsp; I use RhinoMocks in place of both the View and whatever service interfaces the Presenter needs.&nbsp;&nbsp;As much&nbsp;as possible, I like to define the methods and interactions of the Presenter with the services and view in a unit test body and just let ReSharper generate the methods on the dependencies.&nbsp; Since we&#8217;re strictly dealing with interfaces here, we don&#8217;t have to break our flow with the Presenter to implement the services and view just yet.&nbsp; As soon as the Presenter itself is fully fleshed out, I implement the IView interface on the real View and create an implementation for any of the service dependencies.</p>
<p>This probably isn&#8217;t realistic for complex screens, but at least on simple screens it should become quite&nbsp;ordinary for a screen to just work the first time it&#8217;s run in the UI &#8212; assuming you unit tested all of the pieces individually.</p>
<p>&nbsp;</p>
<h4>Summary</h4>
<p>I&#8217;d bet that Supervising Controller is probably the most commonly used Humble View architecture, but I don&#8217;t have any figures at hand on that.&nbsp; It&nbsp;still allows you to use the design time support to layout controls and even configure the data binding with the visual tools (but we&#8217;re going to talk about options to data binding later).&nbsp; My current project is using Supervising Controller (sans data binding), and I think it&#8217;s largely where the sweet spot is.&nbsp; I will use the&nbsp;other&nbsp;options at times though, and there are a lot of different variations on each of the other Humble Views, so we&#8217;re not done yet.</p>
<p>Is this really worth doing?&nbsp; I say yes, otherwise I wouldn&#8217;t be doing it.&nbsp; Let me put it to you this way, on the&nbsp;first project I used the Humble View (Passive View actually)&nbsp;approach,&nbsp;we saw a strong correlation between the bug count&nbsp;per screen and the unit test coverage for the code on that screen.&nbsp; Screens that were driven with unit tests on the Presenter had many&nbsp;fewer behavioral bugs.&nbsp; I&#8217;m talking it even farther on my current project by adding NUnitForms tests on the View to Presenter&nbsp;interaction, plus Fit tests on the actual screen behavior.&nbsp;</p>
<p>If you&#8217;re not a fan of interaction based testing, and using mock objects gives you an allergic reaction, don&#8217;t worry.&nbsp; I&#8217;ve got stuff for you too coming up.&nbsp; </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>Conclusion</h4>
<p>The four friends pondered the wisdom of Athos&#8217; approach while drinking their way through the rest of the wine from D&#8217;Artagnan&#8217;s packs.&nbsp; Suddenly, mighty Porthos clears his throat and&#8230;</p>
<p>&nbsp;</p>
<p>To be continued in Part #3 &#8211; The Passive View Pattern</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/build-your-own-cab/" title="View all posts in Build your own CAB" rel="category tag">Build your own CAB</a>, <a href="http://codebetter.com/jeremymiller/category/design-patterns/" title="View all posts in Design Patterns" rel="category tag">Design Patterns</a>, <a href="http://codebetter.com/jeremymiller/category/featured/" title="View all posts in Featured" rel="category tag">Featured</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern/" title="Permalink to Build your own CAB Part #3 &#8211; The Supervising Controller Pattern" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern/feed/" title="Comments RSS to Build your own CAB Part #3 &#8211; The Supervising Controller Pattern" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-344 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2007/05/23/build-your-own-cab-part-2-the-humble-dialog-box/" rel="prev"><span class="meta-nav">&larr;</span> Build your own CAB Part #2 &#8211; The Humble Dialog Box</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2007/05/28/what-do-you-use-to-incorporate-jsunit-tests-into-a-nant-build/" rel="next">What do you use to incorporate JSUnit tests into a NAnt build? <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-2001">
					<div id="dsq-comment-header-2001" class="dsq-comment-header">
						<cite id="dsq-cite-2001">
	http://kohari.org/							<span id="dsq-author-user-2001">Nate Kohari</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2001" class="dsq-comment-body">
						<div id="dsq-comment-message-2001" class="dsq-comment-message"><p>This is a great series of posts! I&#8217;m a big fan of MVP via Passive View, and I&#8217;ve used it extensively, but it&#8217;s helpful to read another take on it. I&#8217;m interested how far into the CAB you&#8217;re going to delve &#8212; SmartParts? Extension points? Dependency injection? Loose-coupled messages?</p>
<p>Keep them coming!</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2002">
					<div id="dsq-comment-header-2002" class="dsq-comment-header">
						<cite id="dsq-cite-2002">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2002">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2002" class="dsq-comment-body">
						<div id="dsq-comment-message-2002" class="dsq-comment-message"><p>@Nate,</p>
<p>Let&#8217;s see, </p>
<p>&#8220;SmartPart&#8221; &#8212; right there I&#8217;m already shaking my head at CAB nomenclature.  I&#8217;ll read up on it a bit and see if I think it&#8217;s worth showing something</p>
<p>Dependency Injection &#8212; Lot&#8217;s of people are asking for this, and I think I made some disparaging remarks in the past about ObjectBuilder, so I&#8217;ll definitely show what StructureMap can do instead.</p>
<p>Loose-coupled messages &#8212; I&#8217;ve got an example of an Event Aggregator</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2003">
					<div id="dsq-comment-header-2003" class="dsq-comment-header">
						<cite id="dsq-cite-2003">
	http://www.e-Crescendo.com							<span id="dsq-author-user-2003">jdn</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2003" class="dsq-comment-body">
						<div id="dsq-comment-message-2003" class="dsq-comment-message"><p>This is probably a silly question, but is there a specific reason why in the tests you call the view a screen and not a view?</p>
<p>Couldn&#8217;t more complicated screens implement multiple views?</p>
<p>Wondering if there was a prescriptive (or other) reason for the terminological choice, or if that is just what you typed (so to speak).</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2004">
					<div id="dsq-comment-header-2004" class="dsq-comment-header">
						<cite id="dsq-cite-2004">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2004">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2004" class="dsq-comment-body">
						<div id="dsq-comment-message-2004" class="dsq-comment-message"><p>@jdn,</p>
<p>Sloppiness?  I always call it View in my real code.  A complicated screen could easily contain multiple IView parts and/or multiple presenters.</p>
<p>Sorry, it&#8217;s just what I happened to type</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2005">
					<div id="dsq-comment-header-2005" class="dsq-comment-header">
						<cite id="dsq-cite-2005">
	http://www.e-Crescendo.com							<span id="dsq-author-user-2005">jdn</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2005" class="dsq-comment-body">
						<div id="dsq-comment-message-2005" class="dsq-comment-message"><p>Cool.  When I&#8217;m trying to really learn something, I tend to focus on every difference.</p>
<p>Great series BTW.  I&#8217;ve been reading everything about MVP I can get my hands on, and this really helps things come together.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2006">
					<div id="dsq-comment-header-2006" class="dsq-comment-header">
						<cite id="dsq-cite-2006">
								<span id="dsq-author-user-2006">Steve</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2006" class="dsq-comment-body">
						<div id="dsq-comment-message-2006" class="dsq-comment-message"><p>These posts are greatly appreciated, thanks for providing this to community.</p>
<p>I&#8217;m using MVP right now and every tidbit helps.  ie. I&#8217;m not using the INotifyPropertyChanged right now, and I&#8217;m trying to wrap my head around how I can implement this (I&#8217;m using a webform though, so not sure about the difference here)</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2007">
					<div id="dsq-comment-header-2007" class="dsq-comment-header">
						<cite id="dsq-cite-2007">
	http://mc.freezope.org/							<span id="dsq-author-user-2007">Matthias Cavigelli</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2007" class="dsq-comment-body">
						<div id="dsq-comment-message-2007" class="dsq-comment-message"><p>Thank you for the realistic example. The dependent dropdown lists are a common example of how business logic and complexity infiltrate the view.</p>
<p>It&#8217;s also interesting to see where you divide between Winforms Databinding and custom code.</p>
<p>I&#8217;m looking forward to your post on Passive View.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2008">
					<div id="dsq-comment-header-2008" class="dsq-comment-header">
						<cite id="dsq-cite-2008">
								<span id="dsq-author-user-2008">Jeremy Wiebe</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2008" class="dsq-comment-body">
						<div id="dsq-comment-message-2008" class="dsq-comment-message"><p>I&#8217;ll second all the comments about these being useful posts!  We&#8217;re just now heading down the path of evaluating the Web Client Software Factory.  Our reasoning for evaluating it is that it forces us down the path of the patterns and does some hand-holding in applying those patterns because many of us are not very familiar with the patterns (yes, we&#8217;re learning them but there&#8217;s only so many hours in a day).  The other compelling reason is that the WCSF uses WF (Workflow Foundation) for the page navigation and that brings some really nice benefits in terms of the user being able to abort a &#8220;process&#8221; and return to that exact point as if they never left.    I&#8217;m not sure how you&#8217;d build that, but just thinking about it does not seem like a simple task to grow yourself.  (I&#8217;d compare that to a build vs. buy decision).</p>
<p>Oh, and hurray for having &#8220;State or Province&#8221;!   I&#8217;m one of those crazy Canucks!  <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2009">
					<div id="dsq-comment-header-2009" class="dsq-comment-header">
						<cite id="dsq-cite-2009">
	http://bloggablea.wordpress.com							<span id="dsq-author-user-2009">Max</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2009" class="dsq-comment-body">
						<div id="dsq-comment-message-2009" class="dsq-comment-message"><p>I&#8217;d like to add my own voice to the many above congratulating you on this series <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> .</p>
<p>However, am I right in thinking that there is a slight bug in the code above in that changing ShippingScreenPresenter._shipment.Cost results in a call to _shipment_PropertyChanged, which calls IShippingService.CalculateCost(_shipment), which updates the Cost of that shipment, which results in a call to _shipment_PropertyChanged&#8230;..</p>
<p>I&#8217;ve hit this kind of circular update loop a few times in my own apps, do you know of a clean workaround? My solutions in the past have involved defining a sort of transaction in which updates to the event triggering model object are done, and events to actually be fired are queued up until the transaction commits. If a change to a model property happens when a transaction is already on progress on the model, I don&#8217;t raise the event. I&#8217;m not sure if this is the best solution however&#8230; would be interested in hearing your thoughts.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2010">
					<div id="dsq-comment-header-2010" class="dsq-comment-header">
						<cite id="dsq-cite-2010">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2010">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2010" class="dsq-comment-body">
						<div id="dsq-comment-message-2010" class="dsq-comment-message"><p>@Max,</p>
<p>Nice catch!  This isn&#8217;t real code from a working app (obviously).  Yes it certainly would create a circular event.  I use pretty well exactly what you describe in these cases where an event causes an action which potentially raises the exact same event.  There&#8217;s a pattern from messaging called the &#8220;Latch&#8221; that&#8217;s basically what you describe.  I don&#8217;t necessarily have anything better.  I&#8217;m including a little bit about that in the post on the Event Aggregator.</p>
<p>Of course, in this case you could beat it by removing Cost from the Model and pushing in the updated Cost through more of a Passive View approach.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2011">
					<div id="dsq-comment-header-2011" class="dsq-comment-header">
						<cite id="dsq-cite-2011">
								<span id="dsq-author-user-2011">ShawnD</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2011" class="dsq-comment-body">
						<div id="dsq-comment-message-2011" class="dsq-comment-message"><p>What class implements the IShippingService?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2012">
					<div id="dsq-comment-header-2012" class="dsq-comment-header">
						<cite id="dsq-cite-2012">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2012">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2012" class="dsq-comment-body">
						<div id="dsq-comment-message-2012" class="dsq-comment-message"><p>@ShawnD,</p>
<p>Just another class.  All I wanted to show was a separation of concerns for the shipping logic and data access from the Presenter.  In my systems IShippingService would be attached with an Inversion of Control tool (StructureMap).</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2013">
					<div id="dsq-comment-header-2013" class="dsq-comment-header">
						<cite id="dsq-cite-2013">
	http://dotnet.agilekiwi.com							<span id="dsq-author-user-2013">John Rusk</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2013" class="dsq-comment-body">
						<div id="dsq-comment-message-2013" class="dsq-comment-message"><p>Jeremy,</p>
<p>Here&#8217;s another way to avoid manually writting property change notification code:<br />
<a href="http://www.agilekiwi.com/dotnet/ClaytonsInterceptionDemo.cs" rel="nofollow">http://www.agilekiwi.com/dotnet/ClaytonsInterceptionDemo.cs</a><br />
(&#8220;documentation&#8221; is here:<br />
<a href="http://dotnet.agilekiwi.com/blog/2007/07/claytons-interception.html" rel="nofollow">http://dotnet.agilekiwi.com/blog/2007/07/claytons-interception.html</a> )</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2014">
					<div id="dsq-comment-header-2014" class="dsq-comment-header">
						<cite id="dsq-cite-2014">
	http://kentb.blogspot.com							<span id="dsq-author-user-2014">Kent Boogaart</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2014" class="dsq-comment-body">
						<div id="dsq-comment-message-2014" class="dsq-comment-message"><p>Another way to fix the circular/recursive event problem is to properly honor the contract of the INotifyPropertyChanged interface. The PropertyChanged event should only be raised if the property actually changes:</p>
<p>public bool SomeProperty<br />
{ get { &#8230; }<br />
  set<br />
  {<br />
     if (_someProperty != value)<br />
     {<br />
         _someProperty = value;<br />
         OnPropertyChanged(&#8220;SomeProperty&#8221;);<br />
     }<br />
   }<br />
}</p>
<p>PS. I know I&#8217;m late &#8211; just catching up on the BYOC series, and really enjoying it, Jeremy.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2015">
					<div id="dsq-comment-header-2015" class="dsq-comment-header">
						<cite id="dsq-cite-2015">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2015">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2015" class="dsq-comment-body">
						<div id="dsq-comment-message-2015" class="dsq-comment-message"><p>@Kent,</p>
<p>But then I&#8217;d have to use INotifyPropertyChanged on my domain classes;-)  I&#8217;m perfectly willing to tilt the windmill and build my own screen synchronization that binds to POCO&#8217;s instead.</p>
<p>The MicroControllers thing I use in place of data binding takes care of the latching for me.  OnChange events will not fire when the binding is being updated.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2016">
					<div id="dsq-comment-header-2016" class="dsq-comment-header">
						<cite id="dsq-cite-2016">
	http://kentb.blogspot.com							<span id="dsq-author-user-2016">Kent Boogaart</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2016" class="dsq-comment-body">
						<div id="dsq-comment-message-2016" class="dsq-comment-message"><p>@Jeremy</p>
<p>*confused* Your example already has a Shipment class that implements INotifyPropertyChanged. What I&#8217;m saying is that if you alter the implementation of Shipment to correctly honor the contract, you will avoid this problem without need of a latch.</p>
<p>And I&#8217;m curious as to why implementing INotifyPropertyChanged in your domain layer would be a bad thing. I typically have my domain layer support change notification so that binding directly to domain objects is possible. Makes things much easier, IMHO.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2017">
					<div id="dsq-comment-header-2017" class="dsq-comment-header">
						<cite id="dsq-cite-2017">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2017">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2017" class="dsq-comment-body">
						<div id="dsq-comment-message-2017" class="dsq-comment-message"><p>@Kent,</p>
<p>All I meant was that in real life I do not use INotifyPropertyChanged. I did in this example, and the naive implementation is partially because I don&#8217;t actually use it on projects.</p>
<p>&#8220;And I&#8217;m curious as to why implementing INotifyPropertyChanged in your domain layer would be a bad thing. I typically have my domain layer support change notification so that binding directly to domain objects is possible. Makes things much easier, IMHO.&#8221;</p>
<p>This is funny, I&#8217;m having this exact same argument with Ward Bell at the moment.  My point of view is that INotifyPropertyChanged/IEditableObject/IErrorInfo and what else is noise code that detracts from the readability of my domain classes.  That stuff is infrastructure concerns that shouldn&#8217;t show up in a domain model class.  It&#8217;s also modifiability to me as well.  Modifying or adding a property, then tweaking the INotifyPropertyChanged implementation is friction to me.  You could beat it all with codegen, but I really don&#8217;t want to have to codegen my domain model classes because I think that&#8217;s a drag on productivity. </p>
<p>I might happily use INotifyPropertyChanged if I was using codegen&#8217;d DTO&#8217;s for the Model.</p>
<p>I&#8217;m well aware that I&#8217;m the unusual one in the .Net world on this topic.  I&#8217;m bypassing data binding altogether in favor of my own MicroController strategy, and it&#8217;s going smoother than my prior experiences with data binding.</p>
<p>I do cover a bit of this stuff in the section on &#8220;What&#8217;s the Model?&#8221;</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2018">
					<div id="dsq-comment-header-2018" class="dsq-comment-header">
						<cite id="dsq-cite-2018">
	http://kentb.blogspot.com							<span id="dsq-author-user-2018">Kent Boogaart</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2018" class="dsq-comment-body">
						<div id="dsq-comment-message-2018" class="dsq-comment-message"><p>Thanks Jeremy. I see what you were getting at now.</p>
<p>> You could beat it all with codegen, but I really don&#8217;t want to have to codegen my domain model classes because I think that&#8217;s a drag on productivity</p>
<p>I concur, which is why I put together a home-grown codegen solution in past projects which has saved me a *heap* of time. I have formalised this solution and am planning to release it soon on CodePlex.</p>
<p>It&#8217;s basically codegen built right into VS. You change your template or input file, hit Ctrl-Shift-B and it&#8217;s done. It assumes nothing about input format or template engine (comes with NVelocity support). The core of the product is done. The only thing I have left to do is add VS integration to avoid the need for manually editing project files.</p>
<p>Anyways, basically what I do is define a simple input file that defines each of my domain objects. Then I have an NVelocity template used to generate a partial class for each domain object. Works a treat. Not only can you do stuff like change notification easily, you can also do stuff like generate custom serialization logic (ie. implement ISerializable) to keep your domain serializing like a ninja, implement IEditableObject etcetera etcetera. And all without sacrificing maintainability or productivity.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2019">
					<div id="dsq-comment-header-2019" class="dsq-comment-header">
						<cite id="dsq-cite-2019">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2019">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2019" class="dsq-comment-body">
						<div id="dsq-comment-message-2019" class="dsq-comment-message"><p>@Kent,</p>
<p>That sounds cool.  This is one of those scenarios where I&#8217;d like to play with compile time IL weaving to layer the extra stuff on sometime.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2020">
					<div id="dsq-comment-header-2020" class="dsq-comment-header">
						<cite id="dsq-cite-2020">
								<span id="dsq-author-user-2020">Sunny</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2020" class="dsq-comment-body">
						<div id="dsq-comment-message-2020" class="dsq-comment-message"><p>Hi Jeremy, I was reading the code and I just wonder if you might have missed the code to set the Locations in the view (or I have mis-read it)? and if so, am I right that it should be after setting the Shipment in the _view (at the end of the Start method)?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2021">
					<div id="dsq-comment-header-2021" class="dsq-comment-header">
						<cite id="dsq-cite-2021">
	http://www.illede.net							<span id="dsq-author-user-2021">r&#252;ya tabiri</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2021" class="dsq-comment-body">
						<div id="dsq-comment-message-2021" class="dsq-comment-message"><p>Thank you&#8230;</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2022">
					<div id="dsq-comment-header-2022" class="dsq-comment-header">
						<cite id="dsq-cite-2022">
								<span id="dsq-author-user-2022">Miksu</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2022" class="dsq-comment-body">
						<div id="dsq-comment-message-2022" class="dsq-comment-message"><p>Hi.</p>
<p>First of all, thank you for great posts. Hopefully someday you&#8217;ll finish this series but in the mean time, the already available posts contain great deal of interesting information <img src='http://codebetter.com/jeremymiller/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>I have a question about the supervising controller pattern. All the examples I&#8217;ve seen show the data binding between the view and the model as a read-only (1-way). What&#8217;s your opinion on using 2-way connections between the view and the model? I&#8217;m creating a WPF application and it seems kind of pointless to direct all the user actions first to then presenter when I could talk directly to the model.</p>
<p>For example, I have a CustomerEditView. It contains about 10 textboxes where the user can write related information. In addition to that, the view has few buttons (delete customer, update customer, cancel). If I want to show interactive information when user is changing the data (for example &#8220;Name is too short&#8221;), with the 1-way connection I kinda have to implement &#8220;Changed&#8221;-methods into the presenter for every available textbox. I then end up with methods like FirstNameChanged, LastNameChanged, AgeChanged etc. etc. These methods are called by the view when for example FirstNameTextBox changes. This method then changes the value in the model and may present an error to the user if the new value isn&#8217;t valid. Writing these feels really cumbersome.</p>
<p>So how about using 2-way data binding? This way I could delete all the Changed-methods from my presenter and just let the data binding provided by WPF to handle this stuff. Presenter would only contain the more complicated stuff, which in my case would be the handling of update, delete and cancel actions. </p>
<p>It&#8217;s rather interesting to see that even Microsoft shows the data binding between the view and the model in the supervising controller -pattern in a WPF-application as a 1-way. <a href="http://msdn.microsoft.com/en-us/library/cc707873.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/cc707873.aspx</a></p>
<p>So if I want to use 2-way data binding in a supervising controller, should I be prepared for angry people, saying that my take on the pattern is wrong?</p>
<p>Best regards,<br />
Mikael</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-2023">
					<div id="dsq-comment-header-2023" class="dsq-comment-header">
						<cite id="dsq-cite-2023">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-2023">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-2023" class="dsq-comment-body">
						<div id="dsq-comment-message-2023" class="dsq-comment-message"><p>&#8220;So if I want to use 2-way data binding in a supervising controller, should I be prepared for angry people, saying that my take on the pattern is wrong?&#8221;</p>
<p>It&#8217;s partially a case of &#8220;who cares what other people think&#8221;</p>
<p>In your case, I think you want to look at the Presentation Model pattern instead (the WPF team calls it Model &#8211; View &#8211; ViewModel).  PM is ideal for this kind of state machine screen thing you have.</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/jeremymiller/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern/ ';
	var disqus_identifier = '344 /blogs/jeremy.miller/archive/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'theshadetreedeveloper';
	var disqus_title = "Build your own CAB Part #3 &#8211; The Supervising Controller Pattern";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData  fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=344');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/jeremymiller/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2007\/05\/25\/build-you-own-cab-part-3-the-supervising-controller-pattern\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://weblogs.asp.net/thangchung' rel='external nofollow' class='url'>thangchung</a> on <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/#comment-6764">&quot;BuildUp&quot; Existing Objects with StructureMap</a></li><li class="recentcomments">Steven Gentile on <a href="http://codebetter.com/jeremymiller/2011/01/23/if-you-are-using-structuremap-with-mvc3-please-read-this/#comment-6763">If you are using StructureMap with MVC3, please read this:</a></li><li class="recentcomments">jabits on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6761">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">Michael Meadows on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6754">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">InspiringCode on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6753">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.365 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 04:19:57 -->
<!-- super cache -->