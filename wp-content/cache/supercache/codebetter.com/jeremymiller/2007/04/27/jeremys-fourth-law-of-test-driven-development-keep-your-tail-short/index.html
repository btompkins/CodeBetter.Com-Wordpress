<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Jeremy&#8217;s Fourth Law of Test Driven Development: Keep Your Tail Short | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Get a Build Server and Keep it Clean' href='http://codebetter.com/jeremymiller/2007/04/26/get-a-build-server-and-keep-it-clean/' />
<link rel='next' title='Remembering how to use Oracle' href='http://codebetter.com/jeremymiller/2007/04/30/remembering-how-to-use-oracle/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=329' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,183] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2007/04/27/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-329" class="post-329 post type-post status-publish format-standard hentry category-maintainability category-test-driven-development">
					<h1 class="entry-title">Jeremy&#8217;s Fourth Law of Test Driven Development: Keep Your Tail Short</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2007/04/27/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short/" title="12:42 pm" rel="bookmark"><span class="entry-date">April 27, 2007</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p><P>One of the first ongoing lesson for making Test Driven Development succeed for you is to learn how to write isolated tests with less effort.&nbsp; My Fourth Law of TDD is all about recognizing the need to do testing piecewise as a vital part of formulating software designs.&nbsp; One way or another, all design concepts come down to dividing the whole into granular pieces.&nbsp; <STRONG><EM>Keeping a short tail</EM></STRONG> is yet one more design cue to help guide you where you want the design to go.</P><br />
<P>To preclude any confusion, this post is in no way related to the <A href="http://en.wikipedia.org/wiki/Long_tail">Long Tail from Chris Anderson</A>, it&#8217;s only an unfortunate choice of name from me when I originally jotted down my &#8220;Laws of TDD&#8221; a couple years ago.&nbsp; Before you ask about the &#8220;Fourth,&#8221; here are links to the previous three &#8220;Jeremy&#8217;s Laws of TDD.&#8221;&nbsp; </P><br />
<OL><br />
<LI><A href="http://codebetter.com/blogs/jeremy.miller/archive/2005/10/20/133437.aspx">Isolate the Ugly Stuff</A> (Oct 2005)<br />
<LI><A href="http://codebetter.com/blogs/jeremy.miller/archive/2006/03/09/140465.aspx">Push, Don&#8217;t Pull</A> (Mar 2006)<br />
<LI><A href="http://codebetter.com/blogs/jeremy.miller/archive/2006/05/30/145752.aspx">Test Small before Testing Big</A>&nbsp;(May 2006)&nbsp;<br />
<LI>Keep Your Tail Short&nbsp;(this post, Apr 2007 &#8211; wow, did I get sidetracked)</LI></OL><br />
<P>5-10 and the Zeroeth law will follow &#8212; someday.</P><br />
<P>I&#8217;m doing a presentation at <A href="http://www.devteach.com/Session.aspx#50">DevTeach 2007 on Agile Design</A>&nbsp;that has largely&nbsp;evolved into a code-centric&nbsp;discussion&nbsp;on&nbsp;performing design continuously.&nbsp;&nbsp;A&nbsp;vital part of&nbsp;making&nbsp;the <A href="http://www.martinfowler.com/ieeeSoftware/continuousDesign.pdf">continuous design</A> philosophy effective is to structure code&nbsp;so that it can easily accept change &#8212; i.e. a heavy focus on the design principles that lead to <A href="http://codebetter.com/blogs/jeremy.miller/archive/2007/01/08/Orthogonal-Code.aspx">Orthogonal Code</A>.&nbsp; Hand in hand with orthogonality for me&nbsp;is the usage of Test Driven Development (or Behavior Driven Development) to drive the design of the code in&nbsp;an evolutionary fashion.&nbsp; TDD brings some important&nbsp;things to the continuous design&nbsp;table like a <A class="" href="http://www.codinghorror.com/blog/archives/000788.html">revved up feedback cycle</A> and an almost mandatory focus on building a system through the systematic creation of&nbsp;small working pieces of code.</P><br />
<P>I would go so far as to say that TDD is the single most important tool for doing design in the small (it shouldn&#8217;t be your only design tool, but that&#8217;s a very different post).&nbsp; That being said, my own experience includes a couple projects where TDD either failed or didn&#8217;t really wring out all of the advantages that it should.&nbsp; Looking back at those projects with 20/20 hindsight,&nbsp;it&#8217;s easy to make a diagnosis:&nbsp; TDD was just too hard because far too much of the code had a long tail of dependencies that just&nbsp;couldn&#8217;t be isolated.&nbsp; If you wanted to test business logic, you had to pull in the database, push around configuration files,&nbsp;and often fire up&nbsp;the user interface for good measure.&nbsp; TDD just flat out grinds to a halt if you have to tackle too many issues at one time.&nbsp; </P><br />
<P>Looking back at my previous writings on&nbsp;<A href="http://codebetter.com/blogs/jeremy.miller/archive/tags/Maintainability/default.aspx">Test Driven Development</A>&nbsp;and <A href="http://codebetter.com/blogs/jeremy.miller/archive/tags/Maintainability/default.aspx">designing for maintainability</A> there&#8217;s an obvious underlying theme poking out from almost all of the &#8220;best practice&#8221;&nbsp;design concepts I&#8217;ve written about&nbsp;&#8211; strive to do one thing, and only one thing,&nbsp;at a time in your code.&nbsp; I want to work on one thing at a time because the human mind&nbsp;is finite in its ability to process multiple threads of logic.&nbsp; I want to pick off some parts of the system that I understand&nbsp;and start coding and delivering value now&nbsp;instead of getting mired in &#8220;<A href="http://en.wikipedia.org/wiki/Analysis_paralysis">Analysis Paralysis</A>&#8221; trying to see the whole picture.&nbsp; I want to&nbsp;shorten the feedback cycle between coding and testing to work faster.&nbsp;&nbsp;I want the&nbsp;ability to test cohesive areas of the code in isolation from other areas of the code to simplify testing.&nbsp; And oh yeah, if I&#8217;m going to design and build things one thing at a time, I&#8217;d like to be able to put the pieces together at the end of the day and actually have them work together.</P><br />
<P>If&nbsp;you can do&nbsp;one thing at a time in your code&nbsp;the&nbsp;Test Driven Development effort&nbsp;will go much smoother.&nbsp;&nbsp;One of the first steps to doing one thing at a time is follow&nbsp;<STRONG>Jeremy&#8217;s Fourth Law of TDD:&nbsp; Keep Your Tail Short</STRONG>.&nbsp; The best description for this&nbsp;general concept&nbsp;I&#8217;ve ever heard comes from <A href="http://www.relevancellc.com/">Stuart Holloway</A> &#8211; &#8220;When you pull a class off the shelf, what else is coming with it?.&#8221;&nbsp; Think of it this way, if I want to test my business rules, or my display logic for that matter, what other areas of the code do I have to pull&nbsp;as well?&nbsp; By and large you want to&nbsp;answer that question with &#8220;not&nbsp;much.&#8221;&nbsp; Writing test code just to placate my database or web server when I&#8217;m testing business logic is purely overhead &#8212; both in terms of the mechanics of creating the test and the intellectual overhead of understanding the test.</P><br />
<P>I&#8217;m going to use several examples in this post that violate my Fourth Law to demonstrate why&nbsp;and how&nbsp;keeping a &#8220;short tail&#8221; is a more effective way to develop software.&nbsp; These examples might seem contrived, but every single case is something I&#8217;ve worked on&nbsp;or caused.&nbsp; Some of the worst examples are my recollections from my first, painful&nbsp;project using TDD when we did not keep our tail sufficiently short.&nbsp; </P><br />
<H4>My First Foray into TDD Bombed</H4><br />
<P>My obsession with creating easily&nbsp;testable code dates back to my first official project using TDD.&nbsp; Unfortunately the whole team was relatively green in regards to Agile engineering practices, and we made the typical mistakes that TDD newbies do by binding the UI and business logic too tightly to the infrastructure.&nbsp; Specifically, I&#8217;m thinking about a workflow feature that I created.&nbsp; It was a fairly simple state machine in terms of coding, but the automated testing was a different story.&nbsp; I don&#8217;t remember the exact&nbsp;details (repressed memory?), but you had to make the workflow actions in&nbsp;a perfectly sequential order.&nbsp; There wasn&#8217;t anyway just to create the state machine object to directly go to any arbitrary state.&nbsp; You had to run the state transitions one at a time, and each state transition made calls to stored procedures.&nbsp; I also had it set up so that the workflow read and wrote directly to the database.&nbsp; The end result was the tests could only run against the database and every unit test basically had to include almost every&nbsp;action of the workflow.&nbsp; The tests were difficult to write, almost impossible to debug, and very brittle since every unit test really depended on every other test.&nbsp; My workflow logic had a long tail that reached all the way into the database schema &#8212; and to add insult to injury we had a single shared Oracle schema for all development and testing.</P><br />
<P>How would I do that today to drive the workflow through testing?&nbsp; Actually, I think it would be pretty easy.&nbsp; Move all of the persistence out into a <A href="http://www.martinfowler.com/eaaCatalog/dataMapper.html">Database Mapper</A>, or just use NHibernate,&nbsp;so the core workflow logic&nbsp;doesn&#8217;t even know the database exists.&nbsp; Isolate the state machine code into a smaller class that basically only knows how to change its own state as a result of workflow state transitions, and maybe direct other services to perform actions.&nbsp; I would tie the whole thing with some sort of Controller class that directs both the state machine class and the persistence service.&nbsp; The Controller&nbsp;would be tested with mock objects in place of the persistence and the actual workflow&nbsp;state machine logic.&nbsp; A bit like this:</P><br />
<DIV><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>interface</SPAN> <SPAN>INotificationService</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>void</SPAN> SendEmail(<SPAN>EmailMessage</SPAN> message);</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> <SPAN>StateMachine</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>Status</SPAN> _status;</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// The real constructor could completely set up the StateMachine</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// to any point in the workflow</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> StateMachine(<SPAN>Status</SPAN> status)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _status = status;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> CreateNew(<SPAN>INotificationService</SPAN> service, <SPAN>string</SPAN> assignedTo, <SPAN>string</SPAN> description)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> Approve()</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _status = <SPAN>Status</SPAN>.Approved;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> Reject(<SPAN>INotificationService</SPAN> service)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>// The Controller class that just coordinates the services and </SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>// StateMachine objects</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> <SPAN>StateMachineController</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> <SPAN>IStateMachineMapper</SPAN> _mapper;</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> StateMachineController(<SPAN>IStateMachineMapper</SPAN> mapper)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _mapper = mapper;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>void</SPAN> Approve(<SPAN>int</SPAN> issueId)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>StateMachine</SPAN> machine = _mapper.Find(issueId);</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; machine.Approve();</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _mapper.Save(machine);</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P></DIV><br />
<P>My goal is to make the <FONT face="Courier New">StateMachine</FONT> easy to&nbsp;test by making it easy to setup and completely decoupled from the database.&nbsp; Most of the&nbsp;heavy duty logic is&nbsp;in <FONT face="Courier New">StateMachine</FONT>, so I would focus&nbsp;on isolating that logic and use <FONT face="Courier New">StateMachineController</FONT> to handle the coordination with other services.&nbsp; In my analogy below, <FONT face="Courier New">StateMachine</FONT> is Aerosmith and <FONT face="Courier New">StateMachineController</FONT> is the roadie for <FONT face="Courier New">StateMachine</FONT>.</P><br />
<H4>Aerosmith and Roadies</H4><br />
<P>The one system structure that will never, ever deliver either testability or maintainability is the <A href="http://www.laputan.org/mud/">Big Ball of Mud</A>.&nbsp; In software design, it&#8217;s imperative to define and assign the various&nbsp;responsibilities of your system to discrete pieces of the system.&nbsp; I&#8217;m a huge fan of <A href="http://www.wirfs-brock.com/PDFs/A%20Brief%20Tour%20of%20RDD%20in%202004.pdf">Responsibility Driven Design</A>&nbsp;(RDD)&nbsp;from <A class="" href="http://www.wirfs-brock.com/rebeccasblog.html">Rebecca Wirfs-Brock</A>.&nbsp; A key concept in Responsibility Driven Design is to think of classes in terms of&nbsp;stereotypes.&nbsp; The stereotype of a class says a lot about the role and responsibility&nbsp;of a class within the greater system.&nbsp; We can&nbsp;use the idea of class stereotypes to quickly break down a complex feature into smaller pieces and even give us some immediate ideas for minimizing the tail of dependencies between the smaller pieces.</P><br />
<P>My own little spin on class stereotypes is what I call the &#8220;Aerosmith and <A href="http://en.wikipedia.org/wiki/Roadie">Roadies</A>&#8221; analogy.&nbsp; Say you&#8217;re Wozniak and you feel like putting on your own rock concert, what are the things that have to get done, and who does it?&nbsp; The first responsibility is easy, Aerosmith plays the concert.&nbsp; That&#8217;s a great start, but it&#8217;s a good bet that Aerosmith isn&#8217;t going to set up the stage, plug in the instruments, get the green M&amp;M&#8217;s, and generally make sure that Aerosmith has everything it needs.&nbsp; You&#8217;re going to&nbsp;need the roadies and other people to setup the stage for Aerosmith so Aerosmith can concentrate on just playing the music.</P><br />
<P>I&#8217;m working with financial companies now and many projects implement some form of market or trade analysis to support or make trading decisions.&nbsp; For this case it&#8217;s almost imperative to follow the Aerosmith and Roadies division of responsibility.&nbsp; </P><br />
<P>The actual analytical code is the obvious rock star.&nbsp; The only thing the actual analytics&nbsp;code&nbsp;should&nbsp;do is&nbsp;take trade and market data that is handed to it and create knowledge and trends from that data.&nbsp; The rock star analytics code doesn&#8217;t know where it&#8217;s data comes from, and it might not even know what&#8217;s happening to the information that it creates downstream.&nbsp; It&#8217;s important to limit the responsibility of the analytics engine for a number of reasons.</P><br />
<UL><br />
<LI>The analytics code is potentially very complex.&nbsp; It should be significantly easier to code if you can work on only the analytical code without worrying about the data source and downstream dependencies.</LI><br />
<LI>The analytics code has to be easy to test, and the easiest possible class (or cluster of classes) to test is one that takes in data through it&#8217;s API&nbsp;and returns a result without calling out into anything else.&nbsp; To make this happen, I must not have a long tail of dependencies on other systems, databases, and calls to services within the analytical engine.&nbsp; In the automated tests, I can just set up the market and trade&nbsp;data in memory, run it through the analytical engine, and check the results again in memory. &nbsp;It&#8217;s critical to make the analytical code testable because it&#8217;s making decisions about what to do with someone else&#8217;s money.</LI><br />
<LI>The analytics code will change over time as the trading gurus tweak their trading algorithms.&nbsp; The underlying data source and the downstream systems probably won&#8217;t change at the same time.</LI></UL><br />
<P>The analytical code has to fed it&#8217;s data as an input, and something has to actually display or act on the results from the analysis code.&nbsp; Borrowing terminology from Responsibility Driven Design again, fetching the market and trade data is the responsibility of some sort of Service Provider stereotype.&nbsp; You would&nbsp;probably also create a separate set of service providers for carrying out the decisions made by the analytics engine after the analysis is complete.&nbsp; In my Aerosmith concert metaphor, the market data service is like a caterer or a guitar manufacturer, and these people probably don&#8217;t deal directly with Aerosmith.&nbsp; You certainly can&#8217;t expect Aerosmith to call up the caterer and make their orders over the phone, someone else is in the middle.&nbsp; Wozniak needs some middlemen to go to the caterers and the&nbsp;moving trucks and set things up for Aerosmith to play.</P><br />
<P>The middleman in the concert is the roadie.&nbsp; The roadie runs around, gets the food and&nbsp;instruments from the truck, then delivers the food to Aerosmith.&nbsp; The roadie gets the instruments out of the trucks, sets up the stage,&nbsp;and plugs in all the instruments on the stage.&nbsp; All Aerosmith has to do is walk up to the stage and put on the show.&nbsp; They don&#8217;t have to be&nbsp;distracted by logistics.&nbsp; The roadie is the Coordinator and/or Controller stereotype from Responsibility Driven Design.&nbsp; It&#8217;s a class that&#8217;s only real responsibility is coordinating the actions of other classes.&nbsp; The roadie is the glue.</P><br />
<P>So&nbsp;does all of this Aerosmith/Roadie/Class Stereotype&nbsp;exercise do for us in designing software?</P><br />
<OL><br />
<LI>Applying the concept of class stereotypes to the larger problem quickly suggests some division of responsibilities within the larger trade analysis subsystem.&nbsp; In effect, we&#8217;ve set ourselves up to &#8220;divide and conquer&#8221; the code so we can mentally&nbsp;deal with fewer variables in our design at any one time.&nbsp; We&#8217;ve reduced the bigger problem into smaller problems to limit the complexity of any one piece of code.</LI><br />
<LI>The analytical code has a short tail and can be tested in isolation.</LI><br />
<LI>The data provider is only that, a data provider.&nbsp; We can test the data provider in isolation from the analytics.&nbsp; </LI><br />
<LI>Because the analytical code has no tight dependency on the data source, we can potentially use the analytics engine in a completely new context.&nbsp; Today you&#8217;re building the analytics engine to work on the trades previously created in your system on the server side.&nbsp; What if tomorrow you want to provide &#8220;what if&#8221; calculations on potential trades&nbsp;to a user working in a completely different screen on the client side?&nbsp; With a short tail of dependencies, the analytics engine is reusable.&nbsp; With a long tail of dependencies on infrastructure, you&#8217;re not going to be able to easily reuse the analytics functionality.</LI></OL><br />
<P>Wait Jeremy, couldn&#8217;t I just isolate the analytics engine by using mock objects or stubs for the market and trade data?&nbsp;&nbsp;Yes, absolutely, but setting up mock expectations is also a dependency.&nbsp; Anytime you&nbsp;find yourself doing the exact same mock object setup &#8220;preamble&#8221;&nbsp;in multiple unit tests it&#8217;s a design cue that there might be more than one responsibility in the class under test.&nbsp; Think about splitting up the class to test with less mock object setup.&nbsp; </P><br />
<P><A href="http://codebetter.com/blogs/scott.bellware">Scott Bellware</A> absolutely groans when I use this analogy, and that&#8217;s more than enough justification to throw it in <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </P><br />
<H4>Can you get there from here?</H4><br />
<P>Here&#8217;s an analogy for systems that are hard to test.&nbsp; We live in Stamford, Connecticut.&nbsp; My extended&nbsp;family&nbsp;is mostly scattered&nbsp;across the area where Missouri, Arkansas, and Oklahoma come together.&nbsp; When we visit my relatives there simply isn&#8217;t an easy way to fly from one place&nbsp;to the other.&nbsp; We&#8217;ve got to detour through Charlotte or Pittsburgh or Houston to get from one place to another, not to mention the effort of driving to the airport.&nbsp; </P><br />
<P>A couple years ago I made a first pass at adding diagnostic functionality to <A href="http://structuremap.sourceforge.net/">StructureMap</A>&nbsp;to create user friendly messages for common configuration errors.&nbsp; I created a class hierarchy that represented an instance, all the arguments to its constructor, and its dependencies.&nbsp; This diagnostic class (InstanceGraph)&nbsp;could only be&nbsp;constructed by passing in a .Net Type and a fully formed object containing the configuration of the instance.&nbsp; Every time I needed to write another unit test I had to jump through hoops to create a fake Type with the correct constructor arguments, set up the configuration for the instance, then I could finally build the InstanceGraph object and look at the problems that it detected.&nbsp; It just took way too long to build tests, especially since I was having to do a lot of setup that really didn&#8217;t have any semantic meaning to the assertions in the unit tests.&nbsp; In the end, I realized that the diagnostics could really be modeled as two distinct responsibilities:</P><br />
<OL><br />
<LI>Parsing the .Net Type&#8217;s and the configuration into a &#8220;design time&#8221; model<br />
<LI>Analyzing the &#8220;configuration time&#8221; model to look for missing, invalid, or inconsistent&nbsp;configuration</LI></OL><br />
<P>In essence, I cut off the reflection &#8220;tail&#8221; from my diagnostic code.&nbsp; I created that new model that had absolutely zero dependencies on System.Reflection&nbsp;and just like that I was able to write unit tests with very little friction.&nbsp; I could skip the &#8220;create fake Type&#8221; test setup and go straight to the exact scenario that I wanted to test.&nbsp; I&#8217;d say that I made two improvements:</P><br />
<OL><br />
<LI>The unit tests required less mechanical setup work and therefore unit testing was faster<br />
<LI>The unit tests were easier to understand because there was less code noise from all of the test data setup.&nbsp; That&#8217;s an important quality because unit tests serve an important&nbsp;secondary role as low level API documentation.</LI></OL><br />
<P>Of course I still had to build code that knew how to use Reflection on .Net Type&#8217;s and the StructureMap configuration to build up the design time model, but that code is now&nbsp;relatively simple.</P><br />
<P>One of the important things I&#8217;ve learned is that <A href="http://blog.james-carr.org/?p=44">excessive test setup work is a code smell</A>&nbsp;that points to a possible&nbsp;problem in your design.</P><br />
<P>&nbsp;</P><br />
<H4>Test by Measuring What You are&nbsp;Trying to Test!</H4><br />
<P>A couple years ago I inherited a .Net application from another team that had just finished doing a partial rewrite from VB6 and ASP classic.&nbsp; I know that team was trying to use Test Driven Development in their daily coding, but I think they hit the exact same problems with testability that I experienced on my first TDD&nbsp;project by letting the business code&nbsp;get tightly coupled to both the database and the user interface.&nbsp; The application took in submitted invoices, performed copious amounts of business rules validation, and either succeeded and sent the invoice on to the downstream systems or reported the list of validation failure messages.&nbsp;&nbsp;One of the immediate problems was the main class that built the user response was a long set of procedural code that&nbsp;intermingled the html creation and the business logic like this (it had been a straight port from VB6 &amp; ASP Classic to C# by people who had never done .Net, so cut them some slack here):</P><br />
<DIV><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>class</SPAN> <SPAN>InvoiceScreenCreator</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>private</SPAN> <SPAN>readonly</SPAN> <SPAN>Invoice</SPAN> _invoice;</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> InvoiceScreenCreator(<SPAN>Invoice</SPAN> invoice)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _invoice = invoice;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>string</SPAN> CreateHTML()</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>string</SPAN> html = <SPAN>&#8220;&lt;h3&gt;&#8221;</SPAN> + _invoice.InvoiceId + <SPAN>&#8220;&lt;/h3&gt;&#8221;</SPAN>;</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Run the complex invoice validation logic</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (someFairlyComplexBusinessLogicDeterminationOnInvoice(_invoice))</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; html = html + <SPAN>&#8220;&lt;p&gt;The invoice succeeded!&lt;/p&gt;&#8221;</SPAN>;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>else</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>foreach</SPAN> (<SPAN>string</SPAN> errorMessage <SPAN>in</SPAN> _invoice.ErrorMessages)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; writeInvoiceError(errorMessage);</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> html;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P></DIV><br />
<P>&nbsp;</P><br />
<P>There&#8217;s plenty wrong with that general approach, but the killer to me was that there was quite a bit of complexity in the business rules and the only direct way to measure the business logic outcome was to scrape through the html created by the <FONT face="Courier New">InvoiceScreenCreator</FONT> class.&nbsp; You&#8217;re effectively testing business logic through side effects, and you&#8217;re not able to write isolated unit tests for either the user interface or the business logic.&nbsp; If something is wrong in the tests you have both UI and business logic to debug.&nbsp; Testing business logic through the user interface can easily detract from the understandability of the test as user interface verbiage is intermixed with the core business logic.&nbsp; It works the other way around too.&nbsp; Creating the user display was nontrivial and it would have been beneficial to test the user display in isolation from the invoice validation logic.</P><br />
<P>Oh, and needless to say for anyone who wrote or maintained ASP Classic back in the day, intertwining business logic in the middle of concatenating html together almost completely repels any effort to understand the business logic.</P><br />
<P>Again, the solution is to separate the responsibilities for the user display and the business logic into different classes or subsystems.&nbsp; The business logic runs against the submitted invoice, makes the validation determinations, and builds some sort of object that reports all of the validation information.&nbsp; The user interface code could just take the completed&nbsp;validation report and create the display.&nbsp; Make that separation and now you can test either piece in relative isolation.&nbsp; In reality, the user interface and business logic are likely to change at different times.&nbsp; It&#8217;s worth your while to be able to change one without either affecting the other or having to understand the other piece while you work.</P><br />
<P>Of course another lesson is that you pretty well get what you deserve when you do a straight port of dubious quality legacy&nbsp;code.</P><br />
<H4>Isolate the Churn</H4><br />
<P>Some elements of your codebase are going to change much more frequently than the rest of the system.&nbsp; Some modules may need a very large number of testing permutations to fully cover all of the input possibilities.&nbsp; In either case it&#8217;s very advantageous to isolate these areas of your code from everything else.&nbsp; It&#8217;s smart to optimize the mechanics of testing&nbsp;for these modules&nbsp;by&nbsp;having&nbsp;a quick path&nbsp;to create test inputs and measure the outcome without involving any other piece of code..&nbsp; Case in point, working with financial companies now I&#8217;m frequently&nbsp;bumping into systems that perform analysis on trade and market data to determine pricing or trading strategies.&nbsp; The analysis code, especially if it&#8217;s a trading strategy, is going to go through a lot of churn as the algorithms change while the backend storage for the trade and market&nbsp;information remains relatively unchanged.&nbsp; The analysis code will inevitably require a large number of test cases to cover all the permutations of business conditions.&nbsp; I think it&#8217;s probably fair to say that the bottleneck in delivering the trade and market analysis is most likely the testing time and overhead.&nbsp; Making that code easier to test by limiting its tail of dependencies should optimize your time to ship that code.</P><br />
<P>Of course, if you treat the trade and market analysis code like the rock star it is, then it&#8217;s already going to be isolated with a minimal tail of dependencies and you&#8217;re good to go.</P><br />
<H4>Whenever you can, keep the Database on the Sidelines</H4><br />
<P>The database cares very deeply about the complete integrity of your data &#8212; heck, that&#8217;s a large part of&nbsp;a relational database&#8217;s&nbsp;very&nbsp;purpose in life.&nbsp; That very data integrity goodness is a lot of what makes a database a PITA when you&#8217;re constructing automated tests.&nbsp; To write&nbsp;an effective automated test you need to establish&nbsp;a combination of known inputs and expected outputs.&nbsp; If you&#8217;re testing against the database that means loading the database with data.&nbsp; Sometimes that isn&#8217;t that big of a deal, but with any level of database&nbsp;complexity that quickly turns into a pain because:</P><br />
<UL><br />
<LI>Database access in tests will make the tests run slower than tests that run completely within an AppDomain.&nbsp; And yes,&nbsp;<STRONG>automated test execution time&nbsp;is a big deal, worthy of serious design consideration</STRONG>.&nbsp; Enough so that I&#8217;d call it a justification by itself for decoupling business logic from the database<br />
<LI>You have to make sure that dependent data is loaded first for referential integrity.&nbsp; You can&nbsp;load a set of known&nbsp;reference data&nbsp;to help with this, but tests are generally much more comprehensible if you can see the test inputs and outputs in the same screen.<br />
<LI>You have to supply some data to the database for non-nullable fields that isn&#8217;t relevant to the test.&nbsp; It&#8217;s extra mechanical work and it&#8217;s noise code in the tests.</LI></UL><br />
<P>Think about this very realistic case.&nbsp; You&#8217;re building a screen to edit an existing invoice.&nbsp; If the invoice has already been paid you want the screen to disable editing.&nbsp; When I&#8217;m testing my presenter/controller for this scenario the only piece of information I need to set on an Invoice object is some sort of IsPaid flag.&nbsp; Think about the test setup overhead of just creating an Invoice object and setting a single property versus the effort it typically takes to create an invoice in the database tables.</P><br />
<P><STRONG>You may not interpret anything in this section to mean you shouldn&#8217;t use referential integrity checks in the database.</STRONG>&nbsp; Leaving off referential integrity checks in the database is a lot like opening the kitchen door in the summer and letting all the fly&#8217;s in.&nbsp; It&#8217;s just asking for really weird bugs in the system.&nbsp; Moreover, I&#8217;ve often&nbsp;found that a lack of referential integrity makes it harder to write integration tests.&nbsp; Let the database do its thing, and the business logic do its thing without each other getting in each other&#8217;s way.</P><br />
<H4>Conclusion&nbsp;</H4><br />
<P>Sometimes the fastest way to get code working is to write code in more, smaller pieces.&nbsp; It may seem like more complexity, but I&#8217;ll argue vociferously that it&#8217;s better to minimize the complexity of any one part of the system rather than minimize the number of pieces in the system.&nbsp; Software design and construction is&nbsp;all about divide and conquer.&nbsp;&nbsp;Big classes and methods spanning multiple&nbsp;responsibilities and multiple concerns will never, ever be as efficient to ship as a well factored system.&nbsp; Remember when you&#8217;re deciding how to structure your code that code&nbsp;cannot ship until testing is complete.&nbsp; I</P><br />
<P>&nbsp;mostly presented the &#8220;Keep Your Tail Short&#8221; law in terms of testability, but it also goes a long way towards creating more opportunities for reuse and extension of the existing system.&nbsp; That&#8217;s crucial for doing continuous design.&nbsp; Putting off technical complexity and delaying architectural commitment works best when the code is malleable, and that&#8217;s enabled by minimizing the dependency tails between the classes in the code.</P><br />
<P>&nbsp;</P><br />
<P>Wait, there&#8217;s even more!&nbsp; I&#8217;ll write a follow up soon with some more concrete&nbsp;examples of &#8220;Keep Your Tail Short&#8221;&nbsp;in regards to enterprise development.&nbsp; I&#8217;m using this post, and several others over the next couple weeks, to flesh out my talking points for my &#8220;Laws of Agile Design&#8221; talk at DevTeach.&nbsp; Feedback and criticism on this post would be very much appreciated.</P><br />
<P>&nbsp;</P></p>
<div class="shr-publisher-329"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/maintainability/" title="View all posts in Maintainability" rel="category tag">Maintainability</a>, <a href="http://codebetter.com/jeremymiller/category/test-driven-development/" title="View all posts in Test Driven Development" rel="category tag">Test Driven Development</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2007/04/27/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short/" title="Permalink to Jeremy&#8217;s Fourth Law of Test Driven Development: Keep Your Tail Short" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2007/04/27/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short/feed/" title="Comments RSS to Jeremy&#8217;s Fourth Law of Test Driven Development: Keep Your Tail Short" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-329 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2007/04/26/get-a-build-server-and-keep-it-clean/" rel="prev"><span class="meta-nav">&larr;</span> Get a Build Server and Keep it Clean</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2007/04/30/remembering-how-to-use-oracle/" rel="next">Remembering how to use Oracle <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-1879">
                    <div id="dsq-comment-header-1879" class="dsq-comment-header">
                        <cite id="dsq-cite-1879">
                                <span id="dsq-author-user-1879">Carlton</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1879" class="dsq-comment-body">
                        <div id="dsq-comment-message-1879" class="dsq-comment-message"><p>I&#8217;ll go out on a limb&#8230;I find referential integrity a real roadblock to writing integration tests.  You need to populate way more data than is needed and only adds to the complexity of the tests, makes them harder to understand and more brittle.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1880">
                    <div id="dsq-comment-header-1880" class="dsq-comment-header">
                        <cite id="dsq-cite-1880">
    http://community.ative.dk/blogs/                            <span id="dsq-author-user-1880">Martin Jul</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1880" class="dsq-comment-body">
                        <div id="dsq-comment-message-1880" class="dsq-comment-message"><p>Regarding referential integrity as a roadblock here is a trick we use to keep the test code short and readable: we use a set of factories for generating semantically complete instances for testing (we also use them for stubs). The factories use each other to also keep the factories simple.</p>
<p>The point is especially to have relevant parts of the reference tables in the database duplicated in the factories so they match. This way, we can write &#8220;Country denmark = CountryFactory.CreateDenmark(); in the test and be sure that the ISO country code etc is populated with the same values as in the database. This way, if-and-when the reference data changes only the factories need to be updated.</p>
<p>And when we test that saving Users work we don&#8217;t have to worry about the country codes and other referential integrity stuff &#8211; we just do &#8220;user.Country = denmark&#8221; with knowledge that we are violating any DB constraints on countries when we save.</p>
<p>Also, the tests are much clearer since I tend to write them so they tell a story, eg. &#8220;UserFactory.CreateAliceTheSupervisor()&#8221; tells much more than populating a User object in the test fixture with all kinds of stuff that clutters the intention of the test.</p>
<p>I find that working this way &#8211; and relying heavily on inversion-of-control as indicated by Jeremy&#8217;s post &#8211; testing, including integration testing, is very light touch.</p>
<p>And that is the key to making TDD work.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1881">
                    <div id="dsq-comment-header-1881" class="dsq-comment-header">
                        <cite id="dsq-cite-1881">
    http://colinjack.blogspot.com/                            <span id="dsq-author-user-1881">Colin Jack</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1881" class="dsq-comment-body">
                        <div id="dsq-comment-message-1881" class="dsq-comment-message"><p>Good stuff but I must admit the whole Aerosmith analogy did lose me a bit, having said that after a re-read it all made perfect sense.</p>
<p>Its also interesting to see you referencing &#8220;Object Design&#8221;. I found it to be a bit of a boreathon but I&#8217;ll have to re-read it, this time with lots of caffeine to help me through it.</p>
<p>Out of interest have you thought about writing a book about RDD, TDD and so on?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1882">
                    <div id="dsq-comment-header-1882" class="dsq-comment-header">
                        <cite id="dsq-cite-1882">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1882">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1882" class="dsq-comment-body">
                        <div id="dsq-comment-message-1882" class="dsq-comment-message"><p>Colin,</p>
<p>Yeah, I thought &#8220;Object Design&#8221; was horribly boring too and I barely managed to slog through it.  Then I started to find myself using RDD left and right, so you can&#8217;t call the book a total loss.</p>
<p>Jeremy </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1883">
                    <div id="dsq-comment-header-1883" class="dsq-comment-header">
                        <cite id="dsq-cite-1883">
    http://colinjack.blogspot.com/                            <span id="dsq-author-user-1883">Colin Jack</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1883" class="dsq-comment-body">
                        <div id="dsq-comment-message-1883" class="dsq-comment-message"><p>Phew!  I&#8217;m glad I wasn&#8217;t the only one who found Object Design hard going, I&#8217;ll definitely give it another try.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1884">
                    <div id="dsq-comment-header-1884" class="dsq-comment-header">
                        <cite id="dsq-cite-1884">
    http://blog.softwarearchitecture.com                            <span id="dsq-author-user-1884">Brian Sondergaard</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1884" class="dsq-comment-body">
                        <div id="dsq-comment-message-1884" class="dsq-comment-message"><p>You reference a couple of my favorite books here. Out of curiosity, have you had a look at the recently released 3rd edition of Object-Oriented Analysis and Design with Applications?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1885">
                    <div id="dsq-comment-header-1885" class="dsq-comment-header">
                        <cite id="dsq-cite-1885">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1885">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1885" class="dsq-comment-body">
                        <div id="dsq-comment-message-1885" class="dsq-comment-message"><p>Brian,</p>
<p>*Shudder,*  I know Grady Booch is brilliant and he has a lot to say, but I think jis writing style excruciatingly boring.  I&#8217;d go so far in saying that the success of XP and Agile in general is in no small part due to the fact that Kent Beck and Martin Fowler are vastly better authers.</p>
<p>Jeremy</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1886">
                    <div id="dsq-comment-header-1886" class="dsq-comment-header">
                        <cite id="dsq-cite-1886">
    http://blog.softwarearchitecture.com                            <span id="dsq-author-user-1886">Brian Sondergaard</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1886" class="dsq-comment-body">
                        <div id="dsq-comment-message-1886" class="dsq-comment-message"><p>But where would we be without all those clouds? <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </p>
<p>Brian<br />
<a href="http://blog.softwarearchitecture.com" rel="nofollow">http://blog.softwarearchitecture.com</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1887">
                    <div id="dsq-comment-header-1887" class="dsq-comment-header">
                        <cite id="dsq-cite-1887">
    http://zhaorui.cnblogs.com                            <span id="dsq-author-user-1887">zhaorui</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1887" class="dsq-comment-body">
                        <div id="dsq-comment-message-1887" class="dsq-comment-message"><p>Glad to read these article.</p>
<p>Is someday coming ?</p>
<p>Where are the 5-10 and the Zeroth law?</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2007/04/27/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short/';
    var disqus_identifier = '329 /blogs/jeremy.miller/archive/2007/04/27/Jeremy_2700_s-Fourth-Law-of-Test-Driven-Development_3A00_-Keep-Your-Tail-Short.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "Jeremy&#8217;s Fourth Law of Test Driven Development: Keep Your Tail Short";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData  fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=329');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2007\/04\/27\/jeremys-fourth-law-of-test-driven-development-keep-your-tail-short\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profiles in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.549 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 12:36:29 -->
<!-- super cache -->