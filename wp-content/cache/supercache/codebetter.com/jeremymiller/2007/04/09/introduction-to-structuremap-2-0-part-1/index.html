<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Introduction to StructureMap 2.0 (Part 1) | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='On Process and Practices' href='http://codebetter.com/jeremymiller/2007/04/09/on-process-and-practices/' />
<link rel='next' title='Prioritizing by Technical Risk versus Business Value' href='http://codebetter.com/jeremymiller/2007/04/10/prioritizing-by-technical-risk-versus-business-value/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=314' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,150] -->
<link rel="canonical" href="http://codebetter.com/jeremymiller/2007/04/09/introduction-to-structuremap-2-0-part-1/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-314" class="post-314 post type-post status-publish format-standard hentry category-structuremap">
					<h1 class="entry-title">Introduction to StructureMap 2.0 (Part 1)</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2007/04/09/introduction-to-structuremap-2-0-part-1/" title="11:32 am" rel="bookmark"><span class="entry-date">April 9, 2007</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>I&#039;m assuming some prior knowledge of Inversion of Control/Dependency<br />
Injection tools in this post.&nbsp; The most exciting addition to<br />
StructureMap 2.0 for me is the new Fluent Interface API for<br />
programmatic configuration of object composition.&nbsp; There are two<br />
entry points into this functionality:</p>
<ol>
<li>You can make calls directly to&nbsp;the static StructureMapConfiguration class in some sort of application startup.
</li>
<li>Create your own Registry subclass in an assembly that<br />
StructureMap.&nbsp; You will have to direct StructureMap to scan the<br />
assembly containing your custom Registry class.&nbsp; I meant the<br />
Registry class to be an easy way to segregate the configuration into<br />
more manageable chunks and to make the configuration of composite<br />
applications easier.&nbsp; More on this in a later post.</li>
</ol>
<p>&nbsp;</p>
<h4>QuickStart</h4>
<p>Let&#039;s jump right in.&nbsp; The simplest possible usage of<br />
StructureMap is to define the default concrete type to use for a given<br />
abstraction.&nbsp; In this case, I have an interface called <font face="Courier New">IService</font>, and the default instance I&#039;d like to use within the application is a concrete implementation called <font face="Courier New">LocalService</font>.&nbsp; </p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// You know what, I don&#039;t want to use the StructureMap.config file</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.UseDefaultStructureMapConfigFile = <span style="color: blue">false</span>;</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .TheDefaultIsConcreteType&lt;<span style="color: teal">LocalService</span>&gt;();</p>
</div>
<p>Before I configured the IService interface, I shut off the usage of<br />
the default&nbsp;StructureMap.config file so StructureMap doesn&#039;t whine<br />
at you if that file doesn&#039;t exist.&nbsp; Now, you&#039;re completely ready<br />
to request <font face="Courier New">IService</font> instances from ObjectFactory like this:</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">IService</span> service = <span style="color: teal">ObjectFactory</span>.GetInstance&lt;<span style="color: teal">IService</span>&gt;();</p>
</div>
<h4>Scoping</h4>
<p>That&#039;s the simplest possible and most common&nbsp;usage of<br />
StructureMap, but there are plenty more usages of Dependency Injection<br />
supported by StructureMap.&nbsp; Let&#039;s take another step and control<br />
the scoping of the <font face="Courier New">IService</font><br />
instances.&nbsp; By default, StructureMap builds a brand new instance<br />
for each request to GetInstance&lt;T&gt;(), but that behavior can be<br />
overridden.&nbsp; For example, when you use an ORM like NHibernate you<br />
typically want to share the NHibernate ISession across all classes<br />
executing in the current thread or HttpContext.&nbsp; In that case a<br />
&quot;PerRequest&quot; instance isn&#039;t desirable, so&nbsp;I&#039;m going to make the<br />
scope of <font face="Courier New">IService</font> be ThreadLocal.&nbsp; Anytime an <font face="Courier New">IService</font><br />
is requested, StructureMap is going to first check if there is an<br />
existing instance cached in ThreadLocalStorage and return that instance<br />
if it exists.&nbsp; Otherwise, it will build a new instance and cache<br />
the new instance on ThreadLocalStorage.</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .TheDefaultIsConcreteType&lt;<span style="color: teal">LocalService</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <strong>.CacheBy(<span style="color: teal">InstanceScope</span>.ThreadLocal)</strong>;</p>
</div>
<p>Notice the bolded part of the code above.&nbsp;&nbsp;Other options<br />
for scoping&nbsp;available today are a Singleton, HttpContext, and<br />
a&nbsp;Hybrid model that&nbsp;looks for a current HttpContext first and<br />
defaults back to ThreadLocalStorage if the code isn&#039;t running inside<br />
ASP.Net.&nbsp; Because it&#039;s so common in usage, there is a convenience<br />
method for marking instances as a Singleton.</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .TheDefaultIsConcreteType&lt;<span style="color: teal">LocalService</span>&gt;()</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .AsSingletons();</p>
</div>
<h4>Primitive Constructor Arguments</h4>
<p>Connecting abstract types to concrete types is the most common usage<br />
of a Dependency Injection tool, but many concrete types are going to<br />
need additional information like connection strings, server names,<br />
filenames, and any other number of configuration items.&nbsp;<br />
StructureMap has always supported that need, and it&#039;s actually how I<br />
generally do configuration.&nbsp; Let&#039;s introduce a new type of <font face="Courier New">IService</font> that needs a couple of constructor arguments:</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: teal">RemoteService</span> : <span style="color: teal">IService</span>, <span style="color: teal">ICloneable</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue">public</span> RemoteService(<span style="color: blue">string</span> host, <span style="color: blue">int</span> port)</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _host = host;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; _port = port;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p>
</div>
<p><font face="Courier New">RemoteService</font> above exposes a pair<br />
of constructor arguments to connect to a remote server.&nbsp; Let&#039;s say<br />
that you&#039;re perfectly fine with just embedding the server name and port<br />
into your code.&nbsp; The&nbsp;configuration of <font face="Courier New">RemoteService</font> would look like this:</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;().TheDefaultIs(</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">Registry</span>.Instance&lt;<span style="color: teal">IService</span>&gt;().UsingConcreteType&lt;<span style="color: teal">RemoteService</span>&gt;()</p>
<p style="margin: 0px"><strong>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .WithProperty(<span style="color: maroon">&quot;host&quot;</span>).EqualTo(<span style="color: maroon">&quot;localhost&quot;</span>)</strong></p>
<p style="margin: 0px"><strong>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .WithProperty(<span style="color: maroon">&quot;port&quot;</span>).EqualTo(5018)</strong></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );</p>
</div>
<p>In reality, you&#039;re going to pull most of this kind of information<br />
from some sort of configuration.&nbsp; I&#039;ve added&nbsp;a convenience<br />
method to the new Fluent Interface to grab information from the<br />
AppSettings in the application config file.</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;().TheDefaultIs(</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">Registry</span>.Instance&lt;<span style="color: teal">IService</span>&gt;().UsingConcreteType&lt;<span style="color: teal">RemoteService</span>&gt;()</p>
<p style="margin: 0px"><strong>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .WithProperty(<span style="color: maroon">&quot;host&quot;</span>).EqualToAppSetting(<span style="color: maroon">&quot;SERVER-HOST&quot;</span>)</strong></p>
<p style="margin: 0px"><strong>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .WithProperty(<span style="color: maroon">&quot;port&quot;</span>).EqualToAppSetting(<span style="color: maroon">&quot;SERVER-PORT&quot;</span>)</strong></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );</p>
</div>
<p>There are a lot of other tricks and traps for managing configuration<br />
over multiple environments, but I&#039;m going to leave that for it&#039;s own<br />
post.&nbsp; What I will say is that I&#039;ve found that doing configuration<br />
in this way is very beneficial.&nbsp; By just injecting information<br />
through constructor arguments your configuration reflects your code<br />
instead of the other way around.&nbsp; Your code is now perfectly able<br />
to run without any hard coupling to the existence of a certain<br />
configuration strategy.&nbsp; That decoupling leads to code that&#039;s<br />
easier to test and promotes better opportunities for reuse.</p>
<h4>I want to build the instance, you just deliver it!</h4>
<p>This is all new for version 2.0.&nbsp; You might just want to create<br />
the objects yourself for some reason or another and just direct<br />
StructureMap to deliver your instance on calls to <font face="Courier New">ObjectFactory.GetInstance&lt;T&gt;()</font>.&nbsp; That can be done in a couple ways like these examples shown below:</p>
<div style="background: white none repeat scroll 0% 50%;font-size: 10pt;color: black;font-family: courier new">
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Register a prebuild instance, this exact instance will be returned on</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// any request to ObjectFactory.GetInstance&lt;IService&gt;()</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;().TheDefaultIs(</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <strong><span style="color: teal">Registry</span>.Object&lt;<span style="color: teal">IService</span>&gt;(<span style="color: blue">new</span> <span style="color: teal">LocalService</span>())</strong></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );</p>
<p style="margin: 0px">&nbsp;</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// Register a prebuild instance, a clone of this instance will be returned on</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// any request to ObjectFactory.GetInstance&lt;IService&gt;().&nbsp; The concrete type</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green">// will have to implement ICloneable for this to work</span></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">RemoteService</span> service = buildService();</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: teal">StructureMapConfiguration</span>.BuildInstancesOf&lt;<span style="color: teal">IService</span>&gt;().TheDefaultIs(</p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <strong><span style="color: teal">Registry</span>.Prototype&lt;<span style="color: teal">IService</span>&gt;(service)</strong></p>
<p style="margin: 0px">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>There will be&nbsp;more.&nbsp; Next time I&#039;ll take a look at auto<br />
wiring, configuring child dependencies, and scanning assemblies for<br />
classic StructureMap attributes.</p>
<div class="shr-publisher-314"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/structuremap/" title="View all posts in StructureMap" rel="category tag">StructureMap</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2007/04/09/introduction-to-structuremap-2-0-part-1/" title="Permalink to Introduction to StructureMap 2.0 (Part 1)" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2007/04/09/introduction-to-structuremap-2-0-part-1/feed/" title="Comments RSS to Introduction to StructureMap 2.0 (Part 1)" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-314 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2007/04/09/on-process-and-practices/" rel="prev"><span class="meta-nav">&larr;</span> On Process and Practices</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2007/04/10/prioritizing-by-technical-risk-versus-business-value/" rel="next">Prioritizing by Technical Risk versus Business Value <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
                    <div id="dsq-content">
            <ul id="dsq-comments">
                    <li id="dsq-comment-1776">
                    <div id="dsq-comment-header-1776" class="dsq-comment-header">
                        <cite id="dsq-cite-1776">
    http://www.developernotes.com                            <span id="dsq-author-user-1776">Nick Parker</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1776" class="dsq-comment-body">
                        <div id="dsq-comment-message-1776" class="dsq-comment-message"><p>Does StructureMap support defining custom scoping?  With WindsorContainer a custom lifestyle for a component (<a href="http://castleproject.org/container/documentation/trunk/usersguide/lifestyles.html" rel="nofollow">http://castleproject.org/container/documentation/trunk/usersguide/lifestyles.html</a>).</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1777">
                    <div id="dsq-comment-header-1777" class="dsq-comment-header">
                        <cite id="dsq-cite-1777">
                                <span id="dsq-author-user-1777">Samuel</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1777" class="dsq-comment-body">
                        <div id="dsq-comment-message-1777" class="dsq-comment-message"><p>Are you going to post the source code for StructureMap v2.0 sometime in the near future?  I&#8217;d be particularly interested in looking at some of the underlying implementation of this great tool.</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1778">
                    <div id="dsq-comment-header-1778" class="dsq-comment-header">
                        <cite id="dsq-cite-1778">
    http://newisv.blogspot.com/2007/04/great-introduction-to-structuremap-20.html                            <span id="dsq-author-user-1778">Marko Rangel</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1778" class="dsq-comment-body">
                        <div id="dsq-comment-message-1778" class="dsq-comment-message"><p>This really does help me get a better understanding on how to use StructureMap.  It seemed to me recently that I could not find any good examples on how to use StructureMap in a real word application as all the examples I found either needed a lot of prior knowledge on how to use such a tool, or were more advanced examples (perhaps I was looking for examples in the wrong places).</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1779">
                    <div id="dsq-comment-header-1779" class="dsq-comment-header">
                        <cite id="dsq-cite-1779">
    http://www.ayende.com/Blog                            <span id="dsq-author-user-1779">Ayende Rahien</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1779" class="dsq-comment-body">
                        <div id="dsq-comment-message-1779" class="dsq-comment-message"><p>* In that case a &#8220;PerRequest&#8221; instance isn&#8217;t desirable,<br />
PerRequest is often used to denote PerWebRequest, not per call to GetInstance, the term that I have heard used to decribe such instances is transient</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1780">
                    <div id="dsq-comment-header-1780" class="dsq-comment-header">
                        <cite id="dsq-cite-1780">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1780">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1780" class="dsq-comment-body">
                        <div id="dsq-comment-message-1780" class="dsq-comment-message"><p>Nick,</p>
<p>Yes you can, I just need to document it a little bit. You&#8217;d have to go to the xml configuration at the moment.  I thought about adding something to the Fluent interface for that, but didn&#8217;t get around to it.  It works basically the exact same way.  You could also use it to intercept requests for a named instance and return a different one. That might be worth a post.</p>
<p>Samuel,</p>
<p>I&#8217;ll add a download, but you can grab it out of SVN from sourceforge.  </p>
<p> svn co <a href="https://structuremap.svn.sourceforge.net/svnroot/structuremap/trunk" rel="nofollow">https://structuremap.svn.sourceforge.net/svnroot/structuremap/trunk</a> structuremap</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1781">
                    <div id="dsq-comment-header-1781" class="dsq-comment-header">
                        <cite id="dsq-cite-1781">
    http://udidahan.weblogs.us                            <span id="dsq-author-user-1781">Udi Dahan</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1781" class="dsq-comment-body">
                        <div id="dsq-comment-message-1781" class="dsq-comment-message"><p>Does StructureMap support &#8220;generic matching&#8221; like I detail here:</p>
<p><a href="http://udidahan.weblogs.us/2007/04/09/advanced-object-creation-with-dependency-injection" rel="nofollow">http://udidahan.weblogs.us/2007/04/09/advanced-object-creation-with-dependency-injection</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1782">
                    <div id="dsq-comment-header-1782" class="dsq-comment-header">
                        <cite id="dsq-cite-1782">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1782">jmiller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1782" class="dsq-comment-body">
                        <div id="dsq-comment-message-1782" class="dsq-comment-message"><p>Udi,</p>
<p>Not quite the scenario you describe no.  I could think of workarounds and I know how I&#8217;d code that feature.  </p>
<p>You could do something like have the Xml configuration to define the abstract types and assemblies you care about.  When StructureMap scans the assemblies on its first request for an instance, it looks for concrete classes with a [Pluggable("some name")] attribute and decides where these concrete classes could plug into.  That logic would attach CustomValidator<t> and GenericValidator</t><t> to IValidator</t><t>, but not the more specific types.</p>
<p>In StructureMap everything revolves around the abstract type you&#8217;re requesting.  There isn&#8217;t anything that would check across &#8220;PluginType&#8217;s&#8221; to do what you&#8217;re looking for.</p>
<p>One thing I do have coming up on my project is the need to do something like:</p>
<p>Get the right IPresenter</t><t> where T : Trade by just passing in the type of a Trade object.  I&#8217;ll probably extend StructureMap for that case which might be a workaround as well for yours I suppose.</t></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1783">
                    <div id="dsq-comment-header-1783" class="dsq-comment-header">
                        <cite id="dsq-cite-1783">
                                <span id="dsq-author-user-1783">Mike</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1783" class="dsq-comment-body">
                        <div id="dsq-comment-message-1783" class="dsq-comment-message"><p>I am new to StructureMap. At this point I have used the PluginFamily and Plugin StructureMap.config tags fairly successfully. However, I have not figured out what the Instance tags are for, nor have I been able to use them successfully.</p>
<p>I would also like to see an example of how to do the following:</p>
<p>StructureMapConfiguration.BuildInstancesOf<iservice>().TheDefaultIs(                Registry.Instance</iservice><iservice>().UsingConcreteType<remoteservice>()<br />
                    .WithProperty(&#8220;host&#8221;).EqualTo(&#8220;localhost&#8221;)<br />
                    .WithProperty(&#8220;port&#8221;).EqualTo(5018)<br />
                );</p>
<p>in the config file instead of in code.</p>
<p>Any help would be greatly appreciated.</remoteservice></iservice></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1784">
                    <div id="dsq-comment-header-1784" class="dsq-comment-header">
                        <cite id="dsq-cite-1784">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1784">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1784" class="dsq-comment-body">
                        <div id="dsq-comment-message-1784" class="dsq-comment-message"><p>Mike,</p>
<p>Try this, and yell at me if this doesn&#8217;t help.</p>
<p><!-- The MementoStyle attribute matters! --><br />
<structuremap MementoStyle="Attribute"></p>
<pluginfamily PluginType="assembly qualified name of IService">
    <instance Key="Local"  PluggedType="assembly qualified name of concrete class" host="localhost" port="5018" />
</pluginfamily>
<p></structuremap></p>
<p>Get this by going:  IService service = ObjectFactory.GetNamedInstance<iservice>(&#8220;Local&#8221;);</p>
<p><a href="http://structuremap.sourceforge.net/Configuration.htm#Instance" rel="nofollow">http://structuremap.sourceforge.net/Configuration.htm#Instance</a></iservice></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1785">
                    <div id="dsq-comment-header-1785" class="dsq-comment-header">
                        <cite id="dsq-cite-1785">
    http://haacked.com/                            <span id="dsq-author-user-1785">Haacked</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1785" class="dsq-comment-body">
                        <div id="dsq-comment-message-1785" class="dsq-comment-message"><p>One question, by doing this, I&#8217;ve now added a concrete dependency to a specific service. If I want to swap out that service with another at runtime, I couldn&#8217;t use this approach. Not that that is a big problem. I think it just means the use cases are different. If I want to use this as a plugin model, I&#8217;d use the config file. If I simply want DI and IOC, I could use this mode *or* the config model.</p>
<p>Is that correct or am I missing something?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1786">
                    <div id="dsq-comment-header-1786" class="dsq-comment-header">
                        <cite id="dsq-cite-1786">
    http://haacked.com/                            <span id="dsq-author-user-1786">Haacked</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1786" class="dsq-comment-body">
                        <div id="dsq-comment-message-1786" class="dsq-comment-message"><p>One question, by doing this, I&#8217;ve now added a concrete dependency to a specific service. If I want to swap out that service with another at runtime, I couldn&#8217;t use this approach. Not that that is a big problem. I think it just means the use cases are different. If I want to use this as a plugin model, I&#8217;d use the config file. If I simply want DI and IOC, I could use this mode *or* the config model.</p>
<p>Is that correct or am I missing something?</p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1787">
                    <div id="dsq-comment-header-1787" class="dsq-comment-header">
                        <cite id="dsq-cite-1787">
    http://codebetter.com/blogs/jeremy.miller                            <span id="dsq-author-user-1787">Jeremy D. Miller</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1787" class="dsq-comment-body">
                        <div id="dsq-comment-message-1787" class="dsq-comment-message"><p>@Phil,</p>
<p>I&#8217;m not understanding you here.  You should be able to swap almost anything out at runtime, regardless of how the configuration was done.  The Fluent Interface &#038; xml both arrive at the exact same point.  You can also mix and match the two.  </p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1788">
                    <div id="dsq-comment-header-1788" class="dsq-comment-header">
                        <cite id="dsq-cite-1788">
    http://creedcultcode.blogspot.com                            <span id="dsq-author-user-1788">Dale Smith</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1788" class="dsq-comment-body">
                        <div id="dsq-comment-message-1788" class="dsq-comment-message"><p>Anyone who knows me will tell you I&#8217;m all about punctuality.  So now that StructureMap 2.0 has been around for a year and a half, I swiped some code from Joshua Flanagan and threw together a sample app:</p>
<p><a href="http://creedcultcode.blogspot.com/2008/08/boba-fett-greedo-and-structuremap.html" rel="nofollow">http://creedcultcode.blogspot.com/2008/08/boba-fett-greedo-and-structuremap.html</a></p>
</div>
                    </div>
                </li>
                    <li id="dsq-comment-1789">
                    <div id="dsq-comment-header-1789" class="dsq-comment-header">
                        <cite id="dsq-cite-1789">
                                <span id="dsq-author-user-1789">Matt</span>
                            </cite>
                    </div>
                    <div id="dsq-comment-body-1789" class="dsq-comment-body">
                        <div id="dsq-comment-message-1789" class="dsq-comment-message"><p>Jeremy,</p>
<p>What does the <code>InstanceScope.HybridHttpSession</code> option do exactly?</p>
</div>
                    </div>
                </li>
                </ul>
        </div>
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://codebetter.com/jeremymiller/2007/04/09/introduction-to-structuremap-2-0-part-1/';
    var disqus_identifier = '314 /blogs/jeremy.miller/archive/2007/04/09/Introduction-to-StructureMap-2.0-_2800_Part-1_2900_.aspx';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'theshadetreedeveloper';
    var disqus_title = "Introduction to StructureMap 2.0 (Part 1)";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData â€” fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=314');
        });
                    };
    var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2007\/04\/09\/introduction-to-structuremap-2-0-part-1\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2012/01/' title='January 2012'>January 2012</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://zacherygaines.webstarts.com/' rel='external nofollow' class='url'>KadeemFulton</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7523">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments"><a href='http://jonsonbettly.wordpress.com/' rel='external nofollow' class='url'>ScottWorkman</a> on <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/#comment-7517">The Build Your Own CAB Series Table of Contents</a></li><li class="recentcomments">haihao on <a href="http://codebetter.com/jeremymiller/2008/10/18/profile-s-in-structuremap/#comment-7513">Profileâ€™s in StructureMap</a></li><li class="recentcomments">neon on <a href="http://codebetter.com/jeremymiller/2008/09/10/using-the-structuremap-container-independently-of-objectfactory/#comment-7512">Using the StructureMap Container independently of ObjectFactory</a></li><li class="recentcomments">weaponfan on <a href="http://codebetter.com/jeremymiller/2008/09/25/using-structuremap-2-5-to-inject-your-entity-objects-into-services/#comment-7511">Using StructureMap 2.5 to inject your Entity objects into Services</a></li></ul></li>				</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.576 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 14:07:09 -->
<!-- super cache -->