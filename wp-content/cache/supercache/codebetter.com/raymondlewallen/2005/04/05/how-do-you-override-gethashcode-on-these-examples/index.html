<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>How do you override GetHashCode on these examples? | Raymond Lewallen</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/raymondlewallen/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/raymondlewallen/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='What is an application domain &#8211; an explanation for .Net beginners' href='http://codebetter.com/raymondlewallen/2005/04/04/what-is-an-application-domain-an-explanation-for-net-beginners/' />
<link rel='next' title='Did you know you can rate our content?' href='http://codebetter.com/raymondlewallen/2005/04/06/did-you-know-you-can-rate-our-content/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/raymondlewallen/?p=95' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,159] -->
<link rel="canonical" href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-95" class="post-95 post type-post status-publish format-standard hentry category-net-development">
					<h1 class="entry-title">How do you override GetHashCode on these examples?</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/raymondlewallen/author/raymondlewallen/" title="View all posts by raymondlewallen">raymondlewallen</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/" title="12:15 pm" rel="bookmark"><span class="entry-date">April 5, 2005</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/raymondlewallen/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/raymondlewallen/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p></p>
<p>Short and sweet, how do you go about overriding GetHashCode on the<br />
following structures?
</p>
<fieldset>
<legend>Point Value Type</legend>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">Public</span><span style="font-size: 10pt;font-family: Arial"> <span style="color: blue">Structure</span> Point</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Private</span> _x <span style="color: blue">As</span> Int32</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Private</span> _y <span style="color: blue">As</span> Int32</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Overrides</span> <span style="color: blue">Function</span> ToString() <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> <span style="color: blue">String</span>.Format(&#8220;{0},{1}&#8221;, _x.ToString(), _y.ToString())</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Function</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Overloads</span> <span style="color: blue">Overrides</span> <span style="color: blue">Function</span> Equals(<span style="color: blue">ByVal</span> obj <span style="color: blue">As</span> <span style="color: blue">Object</span>) <span style="color: blue">As</span> <span style="color: blue">Boolean</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> obj <span style="color: blue">Is</span> <span style="color: blue">Nothing</span> <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> <span style="color: blue">Not</span> (<span style="color: blue">TypeOf</span> obj <span style="color: blue">Is</span> Point) <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Dim</span> pointObject <span style="color: blue">As</span> Point = <span style="color: blue">CType</span>(obj, Point)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> pointObject.X = <span style="color: blue">Me</span>.X <span style="color: blue">AndAlso</span> pointObject.Y = <span style="color: blue">Me</span>.Y <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">True</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Function</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Property</span> X() <span style="color: blue">As</span> Int32</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> _x</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Set</span>(<span style="color: blue">ByVal</span> Value <span style="color: blue">As</span> Int32)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> Value &lt; 0 <span style="color: blue">Then</span> <span style="color: blue">Throw</span> <span style="color: blue">New</span> ArgumentOutOfRangeException(&#8220;value&#8221;)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;</span>_x = Value</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Set</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Property</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Property</span> Y() <span style="color: blue">As</span> Int32</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> _y</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Set</span>(<span style="color: blue">ByVal</span> Value <span style="color: blue">As</span> Int32)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> Value &lt; 0 <span style="color: blue">Then</span> <span style="color: blue">Throw</span> <span style="color: blue">New</span> ArgumentOutOfRangeException(&#8220;value&#8221;)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>_y = Value</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Set</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Property</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">End</span><span style="font-size: 10pt;font-family: Arial"> <span style="color: blue">Structure</span></span></p>
</fieldset>
<p>Now try this one</p>
<fieldset>
<legend>Name Value Type</legend>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">Public</span><span style="font-size: 10pt;font-family: Arial"> <span style="color: blue">Structure</span> Name</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Private</span> _firstName <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Private</span> _lastName <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Overrides</span> <span style="color: blue">Function</span> ToString() <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> <span style="color: blue">String</span>.Format(&#8220;{0} {1}&#8221;, IIf(_firstName <span style="color: blue">Is</span> <span style="color: blue">Nothing</span>, <span style="color: blue">String</span>.Empty, _firstName), IIf(_lastName <span style="color: blue">Is</span> <span style="color: blue">Nothing</span>, <span style="color: blue">String</span>.Empty, _lastName))</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Function</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Overloads</span> <span style="color: blue">Overrides</span> <span style="color: blue">Function</span> Equals(<span style="color: blue">ByVal</span> obj <span style="color: blue">As</span> <span style="color: blue">Object</span>) <span style="color: blue">As</span> <span style="color: blue">Boolean</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> obj <span style="color: blue">Is</span> <span style="color: blue">Nothing</span> <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> <span style="color: blue">Not</span> (<span style="color: blue">TypeOf</span> obj <span style="color: blue">Is</span> Name) <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Dim</span> nameObject <span style="color: blue">As</span> Name = <span style="color: blue">CType</span>(obj, Name)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">If</span> nameObject.FirstName = <span style="color: blue">Me</span>.FirstName <span style="color: blue">AndAlso</span> nameObject.LastName = <span style="color: blue">Me</span>.LastName <span style="color: blue">Then</span> <span style="color: blue">Return</span> <span style="color: blue">True</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> <span style="color: blue">False</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Function</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Property</span> FirstName() <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue">Return</span> _firstName</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Set</span>(<span style="color: blue">ByVal</span> Value <span style="color: blue">As</span> <span style="color: blue">String</span>)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>_firstName = Value</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Set</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Property</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Public</span> <span style="color: blue">Property</span> LastName() <span style="color: blue">As</span> <span style="color: blue">String</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Return</span> _lastName</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Get</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">Set</span>(<span style="color: blue">ByVal</span> Value <span style="color: blue">As</span> <span style="color: blue">String</span>)</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>_lastName = Value</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Set</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;font-family: Arial"><span>&nbsp;&nbsp;&nbsp; </span><span style="color: blue">End</span> <span style="color: blue">Property</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><span style="font-size: 10pt;color: blue;font-family: Arial">End</span><span style="font-size: 10pt;font-family: Arial"> <span style="color: blue">Structure</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt"><font face="Times New Roman" size="3">&nbsp;</font></p>
</fieldset>
<div class="shr-publisher-95"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/raymondlewallen/category/net-development/" title="View all posts in .Net Development" rel="category tag">.Net Development</a>. Bookmark the <a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/" title="Permalink to How do you override GetHashCode on these examples?" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/feed/" title="Comments RSS to How do you override GetHashCode on these examples?" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-95 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/raymondlewallen/2005/04/04/what-is-an-application-domain-an-explanation-for-net-beginners/" rel="prev"><span class="meta-nav">&larr;</span> What is an application domain &#8211; an explanation for .Net beginners</a></div>
					<div class="nav-next"><a href="http://codebetter.com/raymondlewallen/2005/04/06/did-you-know-you-can-rate-our-content/" rel="next">Did you know you can rate our content? <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">29 Responses to <em>How do you override GetHashCode on these examples?</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-359">
		<div id="comment-359">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://jp-labs.blogspot.com' rel='external nofollow' class='url'>JP</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-359">May 19, 2009 at 4:54 pm</a></div>

		<div class="comment-body"><p>The best way to solve this is by merging the hash codes of the parts involved (i.e.: x and y in the 1st example, and firstName with lastName in the 2nd).</p>
<p>Look at this: <a href="http://devpinoy.org/blogs/joeycalisay/archive/2006/07/17/Overriding-Equals-and-GetHashCode.aspx" rel="nofollow">http://devpinoy.org/blogs/joeycalisay/archive/2006/07/17/Overriding-Equals-and-GetHashCode.aspx</a></p>
<p>Or, use .NET Reflector and check how the .NET framework calculates the hash code of an Int64. For the impatient, I&#8217;ll past it here:<br />
return (((int) this) ^ ((int) (this >> 0&#215;20)));</p>
<p>have a nice day</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-358">
		<div id="comment-358">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://jp-labs.blogspot.com' rel='external nofollow' class='url'>JP</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-358">May 19, 2009 at 4:42 pm</a></div>

		<div class="comment-body"><p>I know this is  a long dead thread, but I saw that there was a common agreement on a mistake. Just like MuteThis said, the value of GetHashCode can change.</p>
<p>Citing MSDN (<a href="http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx</a>):<br />
&#8220;The GetHashCode method for an object must consistently return the same hash code as long as there is no modification to the object state that determines the return value of the object&#8217;s Equals method. Note that this is true only for the current execution of an application, and that a different hash code can be returned if the application is run again.&#8221;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-357">
		<div id="comment-357">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">MuteThis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-357">June 29, 2007 at 1:00 am</a></div>

		<div class="comment-body"><p>Ok, this is an old likely dead thread, but I wanted to ask a question anyway.</p>
<p>I see above that it is being said that &#8220;the hashcode of an object should never change&#8221; and I see that Guids are being used to generate hashcodes.</p>
<p>This seems wrong to me.  It seems to me that a hashcode should be something that can change as the contents change.  This is the whole reason that overriding Equals and NOT GetHashCode is a warning.  Why is it a warning you might ask?  Because you are altering the way your object is identified.  If you specify a custom .Equal, and a default hashcode, your struct of x = 1, y = 2 is identifable via ==, but inserting your object into a hashtable with a default GetHashCode implementation will not allow a similar &#8216;find&#8217; using a hashcode.  Why?  Because Point a and Point b will hash differently.</p>
<p>The point?  GetHashCode should always return the SAME hashcode for the SAME internal values.  GetHashCode is about identifying an object by its data, not uniquely identifying your object across its lifetime.</p>
<p>If you have a point reference to 1, 1 and update it to 1, 2 then put that into a hash table, checking with another point that is valued at 1, 2 should see that yes, a class with that data exists.</p>
<p>Let&#8217;s look at it like this for example, if you hash the string &#8220;Foo&#8221;, you should always see a hashcode of -1788410423&#8230;  In fact, this is the premis for string.Intern, the same string will always hash to the value.</p>
<p>If the data in you objects changes, update your hashcode, or someone that wants to avoid data duplication, may duplicate data inadverntly.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-356">
		<div id="comment-356">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ha!</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-356">July 7, 2006 at 4:59 pm</a></div>

		<div class="comment-body"><p>Blessed Be Microsoft MSDN!!!<br />
check this out<br />
<a href="http://www.interact-sw.co.uk/iangblog/2004/06/21/gethashcode" rel="nofollow">http://www.interact-sw.co.uk/iangblog/2004/06/21/gethashcode</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-355">
		<div id="comment-355">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-355">April 7, 2005 at 9:50 am</a></div>

		<div class="comment-body"><p>I guess that is it then.  We&#8217;re not going to be able to meet all requirements for hash codes in these cases.  The easy route is probbably to ignore the fact that the hash codes must match when objects are equal, although that pretty much defeats the purpose.  So that is where it stands.  Even though there are definative requirements for hash codes, there are what appear to be pretty common scenarios where you are just not going to be able to meet the requirments.  I&#8217;ll have to see if I can get this scenario to someone at MS and get some feedback.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-354">
		<div id="comment-354">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-354">April 6, 2005 at 4:22 pm</a></div>

		<div class="comment-body"><p>Ok, so you have three requirements:</p>
<p>1: You want the HashCode to present a consistent definition of equality. IOW, if two objects are equal, so should their HashCodes be.<br />
2: You want to make the HashCode immutable because you&#8217;re dealing with Reference objects.<br />
3: You want to be able to modify the values of the object that determine it&#8217;s equality after instantiation.</p>
<p>I&#8217;m positive there&#8217;s no solution that satisfies all three. 2 and 3 just aren&#8217;t compatible. It&#8217;s like saying &#8220;You can&#8217;t change your name, but feel free to change it whenever you want&#8221;. A struct doesn&#8217;t have a reason to require #2, so we just drop that requirement. With classes I don&#8217;t see a reason to do anything but return base.GetHashCode() though. You just have to remember when adding to a Hashtable that it goes by identity, not value. But that&#8217;s how every other ReferenceType works anyways, so nothing special there.</p>
<p>So my conclusion is, with Structs drop requirement 2, with Classes drop requirement 1, as long as 3 is a requirement in both cases.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-353">
		<div id="comment-353">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dotnetjunkies.com/WebLog/imranko/' rel='external nofollow' class='url'>Imran Koradia</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-353">April 6, 2005 at 11:44 am</a></div>

		<div class="comment-body"><p>Ok..I wasn&#8217;t thinking right <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_sad.gif' alt=':(' class='wp-smiley' /> . That still violates the 3rd rule for the hash. It would be interesting to see the solution to this one..</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-352">
		<div id="comment-352">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dotnetjunkies.com/WebLog/imranko/' rel='external nofollow' class='url'>Imran Koradia</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-352">April 6, 2005 at 11:36 am</a></div>

		<div class="comment-body"><p>For the point structure, we could probably treat it as a &#8216;complex number&#8217; and get the hashcode accordingly.<br />
Say something like this:<br />
Public Overrides Function GetHashCode() As Int32<br />
    Return CInt(_x^_y)<br />
End Function</p>
<p>I&#8217;m not sure if that would work out..but just my 2 cents. And btw, I saw this piece of code in a C# implementation of a complex number.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-351">
		<div id="comment-351">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-351">April 6, 2005 at 10:24 am</a></div>

		<div class="comment-body"><p>Thanks for the input, &#8220;Pedrito&#8221; <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
<p>#1 is the case I am attempting to get to.  &#8220;You want a truly uniqueID for an object which does not change with modifications to its data members.&#8221;  I personally think the ideas and documentation regarding hash codes is all over the place, because I&#8217;ve read so much conflicting information about them and how to deal with them in certain situations.</p>
<p>I think you missed the overall issue, if I&#8217;m understanding you correctly.  Generating a hashcode is the easy part, and we could just use the default System.Object.GetHashCode if we wanted, but in the example we are overriding .Equals, and therefor we are required to override .GetHashCode.  We still haven&#8217;t solved the fact that the hashcode should be the same as it is for another object that is equal to the first object based on our code in our overriden equals method.  If 2 objects are equal, based on our logic and not the default &#8220;references the same address space&#8221;, they are supposed to have the same hash code.  Therein is where the problem lies.. how to get that same hashcode for 2 objects that are equal based on our custom logic for defining equal.</p>
<p>Its not the uniqueness so much that is the problem, I realize that the CLR doesn&#8217;t guarantee it by default.  If I stated somewhere previously where that was a requirement, I didn&#8217;t mean to and I apologize for the confusion.  The main goal here to to guarantee that the hash code is the same for 2 objects that are equal when we&#8217;ve overriden the equals method.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-350">
		<div id="comment-350">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.powten.com' rel='external nofollow' class='url'>Pedrito</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-350">April 6, 2005 at 10:07 am</a></div>

		<div class="comment-body"><p>First off, this is an impossible problem.  Hashcodes really are not unique anyway.  They are 32 bit integers basically, so if you have a struct which contains <i>more than</i> 32 bits of data in it, there will always exist cases where GetHashCodes will result in duplicate values for different objects.  Therefore, if you can&#8217;t guarantee that your objects will contain less data in them than that, then worrying about hash collisions is pointless&#8230;they&#8217;re gonna happen.</p>
<p>Secondly, even the base implementation of GetHashCode in System.Object, there is no guaranteed protection from collisions. From the documentation: <i>&#8220;The default implementation of GetHashCode does not guarantee uniqueness or consistency; therefore, it must not be used as a unique object identifier for hashing purposes.&#8221;</i> So if the base implementation from MS for this method doesn&#8217;t guarantee uniqueness, why would we attempt to do so in derived types?</p>
<p>If you dig deep you&#8217;ll see that the CLR actually does recycle only unused hashcodes during object lifetimes, however this is basically a nicety the CLR does even though the documentation tells us not to expect it.  </p>
<p>I guess it depends on what you are actually trying to accomplish with this.  I see several scenarios with each having a different course of action.  For example:<br />
1. You want a truly uniqueID for an object which does not change with modifications to its data members.<br />
2. You want a uniqueID for an object that DOES change with modifications to its data values for true object comparison.</p>
<p>If 1, then I would create a static member &#038; corrsponding method which assigns an internal value upon object creation in which one could compute an MD5 hash for that object.  Probably some form of large number randomization to seed with to <i>virtually</i> guarantee uniqueness. Another option would be to store the memory address location for the object itself, as during the lifetime of the object it would always be unique.</p>
<p>If 2, then some sort of computed value based on some custom serialization value of the object based on the unique data which you wish to test for comparison.  Although given the time one could probably come up with speedier solutions.  </p>
<p>Anyway, just my thoughts.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-349">
		<div id="comment-349">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-349">April 6, 2005 at 9:49 am</a></div>

		<div class="comment-body"><p>And the &#8220;funk&#8221; is the quandry.  If you use the default System.Object.GetHashCode, you won&#8217;t have the problem of getting a different hash code if you change a value on the object, but the default used a GUID that the CLR says is guaranteed to remain constant throughout the life of the object.  And if you use the default System.Object.Equals, 2 objects are equal if they reference the same address space, so they&#8217;ll have the same hashcode.  So far so good.</p>
<p>Without overriding .GetHashCode and .Equals, the following is true:</p>
<p>[AirCode]<br />
Point point = new Point(10,20);<br />
Point point2 = point;<br />
Assert.IsTrue(point.Equals(point2)); // Will pass assertion<br />
Assert.AreEqual(point.GetHashCode(), point2.GetHashCode()); //Will pass assertion</p>
<p>But, back the beginning: we need to override Equals because the default behavior doesn&#8217;t fit our needs.  And, this is where the root of this entire problem lies, we don&#8217;t have any private identify fields that are guaranteed not to change during the life of the object.  We&#8217;ve seen and proven some things here, but we still don&#8217;t have our solution.  When 2 objects are equal according to your logic in the overriden equals method, how do you get them to carry identical hashcodes when there are no private fields?  If you do create a private field, how to do insure that they are going to be the same in multiple instances of an object where the instances are equal, so that you can use that private field for generating a hash code?</p>
<p>It is obvious that not all of the rules regarding hash codes can be applied in all types of situations, but this is a situation where all rules need to apply.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-348">
		<div id="comment-348">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-348">April 5, 2005 at 8:49 pm</a></div>

		<div class="comment-body"><p>Nevermind, I modified the example, and now hopefully have more of a clue what Mr.Chen was talking about:</p>
<p>public class Program<br />
{<br />
	public static void Main()<br />
	{<br />
		Hashtable hash = new Hashtable();</p>
<p>		Point point = new Point(1, 2);<br />
		hash[point] = point.ToString();</p>
<p>		Console.WriteLine(hash[point]); // Here we expect to see &#8220;1, 2&#8243; since that&#8217;s what our key equates to.</p>
<p>		Point point2 = new Point(1, 2);<br />
		Console.WriteLine(hash[point2]); // Just to prove that a new instance isn&#8217;t a problem retrieving the same key.</p>
<p>		point.X = 2;<br />
		Console.WriteLine(hash[point2]); // Here&#8217;s where the funk happens. Think about it&#8230; the reference&#8217;s hashCode is different&#8230;</p>
<p>		Console.ReadLine();<br />
	}<br />
}</p>
<p>Oh, and thanks for humouring me. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-347">
		<div id="comment-347">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-347">April 5, 2005 at 8:35 pm</a></div>

		<div class="comment-body"><p>I&#8217;m sorry for spamming your blog! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>Ok, I&#8217;m going to have to disagree with Raymond Chen&#8217;s example. I&#8217;m sure he knows a lot more than moi, it was probably just not the best example. Hopefully the following example will help:</p>
<p>using System;<br />
using System.Collections;</p>
<p>public class MyClass<br />
{<br />
	public static void Main()<br />
	{<br />
		Hashtable hash = new Hashtable();</p>
<p>		Point point = new Point(1, 2);<br />
		hash[point] = point.ToString();</p>
<p>		Console.WriteLine(hash[point]); // Here we expect to see &#8220;1, 2&#8243; since that&#8217;s what our key equates to.</p>
<p>		point.X = 2;<br />
		Console.WriteLine(hash[point]); // Here we should get null because the new hashCode is not present in our Hashtable.</p>
<p>		point.X = 1;<br />
		Console.WriteLine(hash[point]); // Here we should get &#8220;1, 2&#8243; again since again we should have a matching hashCode.</p>
<p>		Point point2 = new Point(1, 2);<br />
		Console.WriteLine(hash[point2]); // This instance should have the same hashCode, so retrieving our original with it should not be a problem.</p>
<p>		Console.WriteLine(point.Equals(point2)); // Just to verify&#8230;</p>
<p>		Console.ReadLine();<br />
	}<br />
}</p>
<p>class Point {<br />
	public uint X, Y;</p>
<p>	public Point(uint x, uint y) {<br />
		this.X = x;<br />
		this.Y = y;<br />
	}</p>
<p>	public override string ToString() {<br />
		return String.Format(&#8220;{0},{1}&#8221;, this.X, this.Y);<br />
	}</p>
<p>	public override bool Equals(object obj) {<br />
		Point p = obj as Point;<br />
		return p != null &#038;&#038; p.X == this.X &#038;&#038; p.Y == this.Y;<br />
	}</p>
<p>	public override int GetHashCode() {<br />
		return this.ToString().GetHashCode();<br />
	}<br />
}</p>
<p>I think we just have to ask ourselves what&#8217;s going on, what is GetHashCode for? It&#8217;s there so we don&#8217;t add the same key twice to a Hashtable. (As far as I know anyways. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />  ) When we change the definition of equality though by overriding equals, we have to ask ourselves a question, and this is where the warning about also overriding GetHashCode comes in: We have to make a decision, do we want our object, when used as a key, to be referred to by value, or by identity? We can&#8217;t have both. There&#8217;s no GetHashCodeByValue or GetHashCodeByIdentity. We have to make a design decision and pick one. We can return base.GetHashCode() (which is 10 times prettier than my earlier &#8220;stateful&#8221; example. I must&#8217;ve been on crack at the time), or we can base our HashCode on our new definition of equality, but we have to understand the impact this is going to have.</p>
<p>As long as you do, I can&#8217;t justify the 3rd rule. Why should the HashCode be immutable? If you know what you&#8217;ve got your hands on, it&#8217;s not a problem. Now I could see this being a problem when using 3rd party libraries since you might not notice that it was overridden, but making it immutable doesn&#8217;t solve that problem. So I think there must be more to GetHashCode than Hashtables, otherwise the 3rd rule just doesn&#8217;t make any sense?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-346">
		<div id="comment-346">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-346">April 5, 2005 at 8:17 pm</a></div>

		<div class="comment-body"><p>And thanks for all your input Sam.  I&#8217;m having a great time discussing this <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-345">
		<div id="comment-345">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-345">April 5, 2005 at 8:16 pm</a></div>

		<div class="comment-body"><p>Ok, so now we are at the point, according to Chen, that once we&#8217;ve boxed a value and put it in the hashtable, we&#8217;d better now start changing public fields of that type or we&#8217;re screwed.  I don&#8217;t necessarily like it, but I suppose I can live with it if I have to.</p>
<p>Now, thinking that we&#8217;ve changed our structs to classes, now we are dealing with objects on the heap and are just using the address pointer.  No copies are being made.  Now it becomes even more imparitive that if Point1 and Point2 are equal, not based on the default sharing the same address space, but based on our overrides equals function that says they are equal if p1.x = p2.x and p1.y = p2.y, we absolutely must have a hashcode that returns the same value for both if we say they are equal, according to Microsoft.  If so, then you&#8217;re method of using a unique GUID (which is the default for reference types anyways) will not work because P1 and P2 will return different hashcodes even though we&#8217;ve said they are equal objects. </p>
<p>So back to square one, we have no private piece of our Point Class in order to use to contruct a hashcode that would be the same hashcode to use if another instance of the Point Class is equal to the first based on our equals logic we have implemented.  We are still left with how to solve the original problem.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-344">
		<div id="comment-344">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-344">April 5, 2005 at 7:58 pm</a></div>

		<div class="comment-body"><p>Sorry, should have commented that, but formatting&#8217;s ugly enough as it is. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>The second case there doesn&#8217;t really fail IMO. At least not in the way Raymond Chen demonstrated with classes. The problem there was that if you allowed GetHashCode to mutate, you can&#8217;t reference the value by key anymore. I think. I&#8217;m making the assumption that if you did a .ContainsKey it would still come back true, but I haven&#8217;t tested this.</p>
<p>The thing is, with a struct, you&#8217;re dealing with a ValueType. There&#8217;s no such thing as a reference. You can&#8217;t initialize a struct, add it to a Hashtable, change one of the values in the original and expect the instance in the Hashtable to update. They aren&#8217;t the same instance, the one in the Hashtable is a copy of the original. That&#8217;s why you can create another instance, with the same hashCode, and magically be able to retrieve *a copy* of the instance with a matching hashCode from the Hashtable. As Mr.Chen demonstrated you can&#8217;t do that with ReferenceTypes.</p>
<p>So in the struct scenario, I really don&#8217;t see a good reason (yet) that the hashCode should be constant.</p>
<p>If we&#8217;re talking about classes, then you can solve this easily enough with a private int for the hashCode, and I suppose a boolean for state. Something like this:</p>
<p>public override int GetHashCode() {<br />
if(this.hashCodeInitialized) {<br />
return this.hashCode;<br />
} else {<br />
this.hashCodeInitialized = true;<br />
this.hashCode = Guid.NewGuid().GetHashCode();<br />
}<br />
}</p>
<p>That&#8217;s kinda ugly though I admit. Still, it satisfies the requirement if your values can&#8217;t be immutable. I would be surprised if there wasn&#8217;t a much prettier solution out there though.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-343">
		<div id="comment-343">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-343">April 5, 2005 at 7:22 pm</a></div>

		<div class="comment-body"><p>Let us also take this into consideration.  Lets modify the code so that we must override the equals because we want name to be equal to another name only if last name is a match, disregarding the first name.  As Sam said, we don&#8217;t need to overrides equals as the code is originally written because we evaluate all public fields, but now it does become a requirement because we want to exclude first name from the name value type and exclude y from the equals comparison of the point type.  Now does it become even more clear the GetHashCode MUST be overriden because we MUST override equals, or not?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-342">
		<div id="comment-342">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-342">April 5, 2005 at 6:35 pm</a></div>

		<div class="comment-body"><p>Sam, actually the very beginning of your example fails.</p>
<p> public static void Main()<br />
{<br />
Hashtable hash = new Hashtable();</p>
<p>Point point = new Point(4, 6);<br />
hash[point] = 10;</p>
<p>Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]);</p>
<p>point.X = 5;<br />
Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]); </p>
<p>The second console writeline should output 10, but I&#8217;m pretty sure its going to output nothing.  If we change the value of a public field, the hash code should not change but there is nothing custom written to handle the hash code algorithms, so in your case it does.  The hash code should remain constant throughout the lifetime of the object, as I understand it.  I could very well be wrong.  Without overriding GetHashCode, you can&#8217;t get that desired behavior.</p>
<p>Just for fun, lets try changing the structs to classes, and deal with it from that point of view.  I&#8217;ll be testing more later this afternoon and evening when I have time.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-341">
		<div id="comment-341">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-341">April 5, 2005 at 5:35 pm</a></div>

		<div class="comment-body"><p>Ok, yeah, I tested it with Raymond Chen&#8217;s example. The 3rd rule doesn&#8217;t seem to apply to structs. You can&#8217;t change the value of a struct that&#8217;s been added to a Hashtable since it&#8217;s a value type, and what you get out of it is a value type. So it&#8217;s internally consistent.</p>
<p>So there&#8217;s no need to override .GetHashCode() as far as I can tell. No need to override .Equals() either since the value type comparison will already happen due to it being a struct. So the following will work how you seem to intend:</p>
<p>struct Point {<br />
	public Point(uint x, uint y) {<br />
		this.X = x;<br />
		this.Y = y;<br />
	}</p>
<p>	public uint X, Y;</p>
<p>	public override string ToString() {<br />
		return String.Format(&#8220;{0},{1}&#8221;, this.X, this.Y);<br />
	}<br />
}</p>
<p>But then a new struct with the same value could overwrite an old struct in the Hashtable. Yup, but since they are the same value, with nothing at all to distinguish them, so what?</p>
<p>That&#8217;s my best shot anyways. Here&#8217;s the example I used to prove it:</p>
<p>using System;<br />
using System.Collections;</p>
<p>public class Program<br />
{<br />
	public static void Main()<br />
	{<br />
		Hashtable hash = new Hashtable();</p>
<p>		Point point = new Point(4, 6);<br />
		hash[point] = 10;</p>
<p>		Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]);</p>
<p>		point.X = 5;<br />
		Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]);</p>
<p>		Point point2 = new Point(5, 6);<br />
		hash[point2] = 11;<br />
		Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]);</p>
<p>		Point point3 = new Point(4, 6);<br />
		hash[point3] = 11;<br />
		Console.WriteLine(&#8220;point = {0}&#8221;, hash[point3]);</p>
<p>		point.X = 4;<br />
		Console.WriteLine(&#8220;point = {0}&#8221;, hash[point]);</p>
<p>		Console.ReadKey();<br />
	}<br />
}</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-340">
		<div id="comment-340">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-340">April 5, 2005 at 4:41 pm</a></div>

		<div class="comment-body"><p>Hehe, you guys are under the impression I know the answer.  On the contrary, the purpose of this post is for us, as a development community and with the help of others, to come up with a solution, because I can&#8217;t come up with one on my own.  I hope I&#8217;m not disappointing anybody by telling you I don&#8217;t have the answer, but as you can see, the answer is not as easy as one might think, therefore I am stumped and need help <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-339">
		<div id="comment-339">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/john.papa' rel='external nofollow' class='url'>johnpapa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-339">April 5, 2005 at 4:21 pm</a></div>

		<div class="comment-body"><p>You got me hanging. It seems the requirements are just too disparate. Even the Microsoft documentation in MSDN shows examples of using variables, which means the values can change &#8230; but then they say right below their examples that has code should not change. </p>
<p>It&#8217;s like that old riddle &#8230; &#8220;Everything I type is false.&#8221; Well, if it is, then that statement is false. And if that statement is false, then what I type is true &#8230; you get the idea &#8230; <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </p>
<p>I am looking forward to the answer &#8230; good stumper.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-338">
		<div id="comment-338">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-338">April 5, 2005 at 3:59 pm</a></div>

		<div class="comment-body"><p>Since a struct is a value type, does that 3rd rule really apply? You don&#8217;t even need to override .Equals to get the same behaviour as the above. Or does this mean that you should always override .GetHashCode() for structs? You can&#8217;t remove the default constructor in a struct, so it seems kind of broken to remove the property setters.</p>
<p>In the Point example, I would do away with the properties, and set the fields to readonly uints. The logic in the setter is unnecessary if you Type a little stronger, and this solves the hashcode problem.</p>
<p>But vb.net doesn&#8217;t have uints does it? So that won&#8217;t work&#8230; I give up! I await the answer with great anticipation! <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-337">
		<div id="comment-337">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-337">April 5, 2005 at 3:58 pm</a></div>

		<div class="comment-body"><p>But John, is that the solution, to create a private variable? Let&#8217;s say we do that. Now how do you assign that private variable so that 2 copies of Point will return True when comparing with Equals(obj), and also still return the same hashcode because they are equal? Now change one of the points so that X is a different value. Now equals should return false, but the hashcodes should still pass an assert.AreEqual(point1.GetHashCode, point2.GetHashCode), because the rules say HashCodes should not change during the lifetime of the object. If 2 objects are equal, then their hashcodes must be equal, but if 2 objects are not equal but they were created as equals, then the hashcodes should match.  A quandry, indeed.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-336">
		<div id="comment-336">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/john.papa' rel='external nofollow' class='url'>johnpapa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-336">April 5, 2005 at 3:50 pm</a></div>

		<div class="comment-body"><p>So that is the question. If you use variables that are exposed (like your _x and _y) then you rhas code could be different since the values can change. &#8230;VIOLATION. If you use ToString, same thing could occur &#8230; VIOLATION</p>
<p>So, short of creating some values that are fixed or private variables with no accessors, what do you do? hmmmmm&#8230;..</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-335">
		<div id="comment-335">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-335">April 5, 2005 at 3:29 pm</a></div>

		<div class="comment-body"><p>D&#8217;oh! You&#8217;ve explained that one before to me too. Well&#8230; hmm&#8230; lemme think. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-334">
		<div id="comment-334">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.codebetter.com/blogs/raymond.lewallen' rel='external nofollow' class='url'>rlewallen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-334">April 5, 2005 at 3:05 pm</a></div>

		<div class="comment-body"><p>All correct Brendan.  As currently designed, there is no way to correctly implement a GetHashCode without violating some rules of hashcodes in either example.  So what is the solution?  How do you modify either structure without changing its purpose so that you can create a reliable hash code algorithm?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-333">
		<div id="comment-333">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codbetter.com/blogs/brendan.tompkins' rel='external nofollow' class='url'>Brendan Tompkins</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-333">April 5, 2005 at 2:57 pm</a></div>

		<div class="comment-body"><p>Hashcodes aren&#8217;t supposed to change over the lifetime of an object, so since you have public setters in both examples, you&#8217;ll be breaking this rule of hashcodes.  </p>
<p>So, say you create your object, get your hashcode&#8230;</p>
<p>Then you mutate one of your values, you&#8217;ve got a different hashcode! Now, you&#8217;ve really confused anything that finds your object based on its hashcode (like a hashtable), since the hashcode code has changed. </p>
<p>This is from a comment to a post I made on the same subject, from none other than Raymond Chen:</p>
<p>&#8220;If you allow users to change the StateCode then you are violating the third rule of hash codes:&#8221;</p>
<p>&#8220;The hash function must return exactly the same value regardless of any changes that are made to the object.&#8221;</p>
<p><a href="http://codebetter.com/blogs/brendan.tompkins/archive/2004/07/09/18700.aspx#18714" rel="nofollow">http://codebetter.com/blogs/brendan.tompkins/archive/2004/07/09/18700.aspx#18714</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-332">
		<div id="comment-332">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-332">April 5, 2005 at 1:12 pm</a></div>

		<div class="comment-body"><p>Also, I think you can save a few characters in the .Equals overrides like this:</p>
<p>Public Overloads Overrides Function Equals(ByVal obj As Object) As Boolean<br />
        If obj Is Nothing OrElse Not (TypeOf obj Is Name) Then Return False</p>
<p>        Dim nameObject As Name = CType(obj, Name)<br />
        Return nameObject.FirstName = Me.FirstName AndAlso nameObject.LastName = Me.LastName<br />
End Function</p>
<p>Maybe not tho&#8217;. I&#8217;m no VB wizard. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-331">
		<div id="comment-331">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#comment-331">April 5, 2005 at 1:05 pm</a></div>

		<div class="comment-body"><p>Since you override .ToString() in both examples, perhaps the following?:</p>
<p>public override int GetHashCode() {<br />
		return this.ToString().GetHashCode();<br />
}</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/raymondlewallen/2005/04/05/how-do-you-override-gethashcode-on-these-examples/#respond" style="display:none;">Cancel reply</a></small></h3>
									<p class="must-log-in">You must be <a href="http://codebetter.com/raymondlewallen/wp-login.php?redirect_to=http%3A%2F%2Fcodebetter.com%2Fraymondlewallen%2F2005%2F04%2F05%2Fhow-do-you-override-gethashcode-on-these-examples%2F">logged in</a> to post a comment.</p>												</div><!-- #respond -->
						
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.444 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 20:09:18 -->
<!-- super cache -->