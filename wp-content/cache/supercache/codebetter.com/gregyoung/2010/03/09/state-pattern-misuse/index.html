<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>State Pattern Misuse | Greg Young</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/gregyoung/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css?v=3912785705" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js?ver=3.4.2'></script>
<script type='text/javascript' src='http://dtym7iokkjlif.cloudfront.net/dough/1.0/recipe.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/gregyoung/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Why use Event Sourcing?' href='http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/' />
<link rel='next' title='The 98th Thing Every Programmer Should Know' href='http://codebetter.com/gregyoung/2010/03/24/the-98th-thing-every-programmer-should-know/' />
<meta name="generator" content="WordPress 3.4.2" />
<link rel='shortlink' href='http://codebetter.com/gregyoung/?p=139' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[83,123] -->
<link rel="canonical" href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/" />
<!-- /all in one seo pack -->
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.3.3" type="text/css" media="screen" />

<!-- Start Shareaholic OgTags -->

	<!-- Shareaholic Notice: There is neither a featured nor gallery image set -->

<!-- End Shareaholic OgTags -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/dc168cf39155d7b5d39f696ca94d5980.js?v=5302176208">/*Is Cache!*/</script>
                	
	<script type='text/javascript' src='http://d1.openx.org/spcjs.php?id=7744&amp;target=_blank'></script>
	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>
<!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">
			<!-- BuySellAds Zone Code -->
<div id="bsap_1276080" class="bsarocks bsap_4fe632babdccc2b4b049e4f08cc3c549"></div>
<!-- End BuySellAds Zone Code --></div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-139" class="post-139 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">State Pattern Misuse</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/gregyoung/author/gregyoung/" title="View all posts by gregyoung">gregyoung</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/" title="6:37 am" rel="bookmark"><span class="entry-date">March 9, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/gregyoung/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/gregyoung/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><!-- Start Shareaholic LikeButtonSetTop Automatic --><!-- End Shareaholic LikeButtonSetTop Automatic --><p>Just a quick run by posting from some discussions yesterday. I see many people using the State Pattern in their domains. More often than not though they are making a mistake that can be seen by analyzing the OO aspects of their code. Let’s go through a quick example of a Loan Application. </p>
<p>&#160;</p>
<p>When its “In process” you can edit data on it or submit for approval.</p>
<p>When its “awaiting approval” you can no longer edit details data but you can approve or deny the application.</p>
<p>When its “completed” it has become immutable and can no longer be edited but may have some getters on it for viewing of historical data</p>
<p>&#160;</p>
<p>I went through and made a quick little example of this </p>
<p>public interface ILoanApplicationState   <br />{    <br />&#160;&#160;&#160; void Approve();    <br />&#160;&#160;&#160; void Deny();    <br />&#160;&#160;&#160; InterestRate GetApprovedInterestRate();    <br />&#160;&#160;&#160; InterestRate CalculateLikelyInterestRate();    <br />&#160;&#160;&#160; void SubmitForApproval();    <br />&#160;&#160;&#160; void ChangeDetails(LoanDetails details);    <br />} </p>
<p>public class LoanApplicationState : ILoanApplicationState   <br />{    <br />&#160;&#160;&#160; private LoanApplication parent;    <br />&#160;&#160;&#160; public LoanApplicationState(LoanApplication Parent)    <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; parent = Parent;    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public virtual void Approve() {}   <br />&#160;&#160;&#160; public virtual void Deny(){}    <br />&#160;&#160;&#160; public virtual InterestRate GetApprovedInterestRate() {}    <br />&#160;&#160;&#160; public virtual InterestRate CalculateLikelyInterestRate() {}    <br />&#160;&#160;&#160; public virtual void SubmitForApproval(){}    <br />&#160;&#160;&#160; public virtual void ChangeDetails(LoanDetails details) {} </p>
<p>} </p>
<p>public class InProcessState : LoanApplicationState   <br />{    <br />&#160;&#160;&#160; public InProcessState(LoanApplication Parent) : base(Parent) { } </p>
<p>&#160;&#160;&#160; public override void Approve()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Cannot approve an inprocess application&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void Deny()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Cannot deny an inprocess application&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate GetApprovedInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;No approved interest rate exists on an in process application&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate CalculateLikelyInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; return InterestRate.Default;    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void SubmitForApproval()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //change parent state to submitted    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void ChangeDetails(LoanDetails details)   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //change parent details    <br />&#160;&#160;&#160; }    <br />} </p>
<p>public class AwaitingApprovalState : LoanApplicationState   <br />{    <br />&#160;&#160;&#160; public InProcessState(LoanApplication Parent) : base(Parent) { } </p>
<p>&#160;&#160;&#160; public override void Approve()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //change parent state to approved and issue some behavior    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void Deny()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //change parent state to denied and issue some behavior    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate GetApprovedInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;No approved interest rate exists on an awaiting approval application&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate CalculateLikelyInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; return InterestRate.Default;    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void SubmitForApproval()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Already awaiting approval&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void ChangeDetails(LoanDetails details)   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;No approved interest rate exists on an in process application&quot;);    <br />&#160;&#160;&#160; }    <br />}</p>
<p>public class CompletedApplicationState : LoanApplicationState   <br />{    <br />&#160;&#160;&#160; public InProcessState(LoanApplication Parent) : base(Parent) { } </p>
<p>&#160;&#160;&#160; public override void Approve()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Application has already been completed&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void Deny()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Application has already been completed&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate GetApprovedInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //return parents approved interest rate     <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override InterestRate CalculateLikelyInterestRate()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; //return parents approved interest rate    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void SubmitForApproval()   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Already completed&quot;);    <br />&#160;&#160;&#160; } </p>
<p>&#160;&#160;&#160; public override void ChangeDetails(LoanDetails details)   <br />&#160;&#160;&#160; {    <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; throw new InvalidOperationException(&quot;Application is already completed&quot;);    <br />&#160;&#160;&#160; }    <br />}</p>
<p>&#160;</p>
<p>&#160;</p>
<p>OK enough yucky code you guys get the idea (the state pattern is also very verbose). The idea here is we plug in these state objects to our object and they handle the behavior changes from the original object. </p>
<p>My contention here is that you should not use the State Pattern like this. Where is the polymorphism? What if we think about the gross violation of LSP that we just created? This does however happen way too often. </p>
<p>The solution is that we really have three classes here InProcessApplication, AwaitingApprovalApplication, and CompletedApplication. </p>
<p>public class InProcessApplication {</p>
<p>&#160;&#160;&#160; InProcessApplication SubmitForApproval(ILoanProcessingService processor) { …&#160; }</p>
<p>}</p>
<p>this will force us to end up with smaller and easier to understand classes… and I mean hey, its not like polymorphism would have worked before anyways. It also makes our Ubiquitous Language more concise.</p>
<p>There is a particular code smell here that will help us distinguish whether we want the State Pattern or separate classes. Do some of the data/behavior only make sense in certain states? If so use three separate classes. Going along with this, if we find “throws” in our state implementors we should realize through LSP that we are doing something bad. </p>
<div class="shr-publisher-139"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/gregyoung/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/" title="Permalink to State Pattern Misuse" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/feed/" title="Comments RSS to State Pattern Misuse" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-139 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/" rel="prev"><span class="meta-nav">&larr;</span> Why use Event Sourcing?</a></div>
					<div class="nav-next"><a href="http://codebetter.com/gregyoung/2010/03/24/the-98th-thing-every-programmer-should-know/" rel="next">The 98th Thing Every Programmer Should Know <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">19 Responses to <em>State Pattern Misuse</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-2928">
		<div id="comment-2928">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jason</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2928">March 20, 2010 at 8:15 pm</a></div>

		<div class="comment-body"><p>Apparently what I was describing in my last post comes closer to a PetriNet than a Finite State Machine is better modeled here </p>
<p><a href="http://aabs.wordpress.com/2010/03/10/programming-with-petri-nets/" rel="nofollow">http://aabs.wordpress.com/2010/03/10/programming-with-petri-nets/</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2927">
		<div id="comment-2927">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jason</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2927">March 19, 2010 at 4:25 pm</a></div>

		<div class="comment-body"><p>I&#8217;ve found that the traditional GoF pattern is limited and almost dangerous when used directly.  I&#8217;ve implemented directly as you did above, and not been able to make heads or tails of my own code when I came back to it later.  That&#8217;s very bad.</p>
<p>If you enhance it a bit by returning an IEnumerable<br />
<transition> from your state operations, you get a lot of benefits:</p>
<p>- Encapsulate the transitions<br />
- Increase readability: named transitions are easier to understand than the in-state code.  Examples: CalculateInterestRate, Approve, etc<br />
- Can reuse and compose the transitions<br />
- Never have to throw unless you really want to .. and can still return error messages as needed.  Think InvalidTransition(&#8220;ErrorMessage&#8221;)<br />
- Clearly separate commands and queries: think CommandTransition, QueryTransition<br />
- can add a command stack and undo functionality quite easily</p>
<p>I&#8217;ve found this to be very successful in maintaining states even across distributed, partially-connected systems.  I just send the transitions around and if some fail, I roll back.  Purely deterministic.</transition>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2926">
		<div id="comment-2926">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">DM</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2926">March 10, 2010 at 3:29 pm</a></div>

		<div class="comment-body"><p>Thanks for the article Greg. I would also like to see the full solution if you get a chance to post it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2925">
		<div id="comment-2925">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Remi Despres-Smyth</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2925">March 10, 2010 at 12:47 pm</a></div>

		<div class="comment-body"><p>Greg,<br />
Out of curiosity, can you give a scenario or two where you *would* use the state pattern then?  Maybe it&#8217;s just the type of problem I&#8217;ve had to work on, but I can&#8217;t see many cases where you wouldn&#8217;t need to throw in some states.</p>
<p>Isn&#8217;t that the whole point of the pattern? Use state to help define the valid transitions between states &#8211; and if the invalid transitions don&#8217;t throw, what do they do?</p>
<p>Regards,<br />
Remi.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2924">
		<div id="comment-2924">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2924">March 10, 2010 at 10:39 am</a></div>

		<div class="comment-body"><p>&#8220;its not like polymorphism would have worked before __anyway__.&#8221;</p>
<p>There is no such word as &#8216;anyways&#8217;.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2923">
		<div id="comment-2923">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sebastian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2923">March 9, 2010 at 8:30 pm</a></div>

		<div class="comment-body"><p>Hey Greg, </p>
<p>that&#8217;s exactly what I&#8217;ve been asked the other day for a job interview. I was asked how to implement a machine of throwing out a chewing gum each time I put a coin in. The traditional response was to implement the State pattern exactly as you mention it (WithCoin) (WithouCoin) and you are right, there are behaviour that doesn&#8217;t make sense at all for some state impl.<br />
What does the method &#8220;throwOutChewingGum()&#8221; means in a &#8220;WithoutCoin&#8221; State? Obviously this perfect suites for throwing a runtime &#8220;NotImplementedYetException&#8221; other than business exception.<br />
Well, in conclusion I gave roles to actors as ThrowOutMachine.throwOut(ThrowOutMachineContent, Money) where there&#8217;re State validations in the &#8220;ThrowOutMachine < -> ThrowOutMachineContent&#8221; collaboration that replaces the State pattern purpose.<br />
So I ask myself given your post, is State pattern really a good solution? Should be first look for a collaboration pattern such as Container &#8211; Content<br />
Yeah, ppl always tend to open the GoF book&#8230; I don&#8217;t know why, there&#8217;s always a better solution using tradicional OO.<br />
Cheers,<br />
Sebastian.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2922">
		<div id="comment-2922">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Calum</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2922">March 9, 2010 at 8:16 pm</a></div>

		<div class="comment-body"><p>hi,</p>
<p>Great article.</p>
<p>Could you post the full code for the solution?  I would like to compare the bad code with the good code as I understand the theory but would like to see how it is done practically.</p>
<p>Thanks,</p>
<p>Calum</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2921">
		<div id="comment-2921">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://None' rel='external nofollow' class='url'>Sebastian</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2921">March 9, 2010 at 8:02 pm</a></div>

		<div class="comment-body"><p>Hey Greg, </p>
<p>that&#8217;s exactly what I&#8217;ve been asked the other day for a job interview. I was asked how to implement a machine of throwing out a chewing gum each time I put a coin in. The traditional response was to implement the State pattern exactly as you mention it (WithCoin) (WithouCoin) and you are right, there are behaviour that doesn&#8217;t make sense at all for some state impl.<br />
What does the method &#8220;throwOutChewingGum()&#8221; means in a &#8220;WithoutCoin&#8221; State? Obviously this perfect suites for throwing a runtime &#8220;NotImplementedYetException&#8221; other than business exception.<br />
Well, in conclusion I gave roles to actors as ThrowOutMachine.throwOut(ThrowOutMachineContent, Money) where there&#8217;re State validations in the &#8220;ThrowOutMachine < -> ThrowOutMachineContent&#8221; collaboration that replaces the State pattern purpose.<br />
So I ask myself given your post, is State pattern really a good solution? Should be first look for a collaboration pattern such as Container &#8211; Content<br />
Yeah, ppl always tend to open the GoF book&#8230; I don&#8217;t know why, there&#8217;s always a better solution using tradicional OO.<br />
Cheers,<br />
Sebastian.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2920">
		<div id="comment-2920">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2920">March 9, 2010 at 4:34 pm</a></div>

		<div class="comment-body"><p>So the Ubiquitous Language now speaks of 3 different Application classes as if they are separate? Conceptually, it&#8217;s always a single Application, with a unique Id, no? I think it might be clearer to think of it as a single stateful object.</p>
<p>I agree State is wrongly applied here because in this case, all the implementations that just throw an exception aren&#8217;t really valid operations, they should probably never be called.</p>
<p>In this case, I might rather just keep it to one class and do a check at the top of certain methods, throwing an exception if the method isn&#8217;t allowed.</p>
<p>That way, you could keep it to<br />
1. retrieve the application by id<br />
2. perform the operation<br />
3. save the changes</p>
<p>If the UI was implemented correctly, those exception throwing operations should never even be called, right?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2919">
		<div id="comment-2919">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Balaji</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2919">March 9, 2010 at 3:49 pm</a></div>

		<div class="comment-body"><p>Canyou finish the example so that we can get the full taste of what you are saying</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2918">
		<div id="comment-2918">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Phil B</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2918">March 9, 2010 at 3:11 pm</a></div>

		<div class="comment-body"><p>In the past I&#8217;ve handled this by adding properties such as CanApprove, CanDeny, etc.  It changes the client usage pattern so that they must check if an action can be done before attempting to execute it.  This takes care of the LSP violation because the client code should expect an exception when it calls a method whose corresponding Can* property is false.  I have always gotten a bit of a code smell from this solution though.  You make some good points here.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2917">
		<div id="comment-2917">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Peter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2917">March 9, 2010 at 1:49 pm</a></div>

		<div class="comment-body"><p>I&#8217;m glad you included the code in all its gory LSP-violating detail.  But I&#8217;m not sure I see what you&#8217;re proposing as the alternative.  Are the three classes derived from a common parent?  If not, how are they consumed?  What about common data for the application?  Do you see an accompanying information holder for that stuff, e.g., LoanApplicationData?  </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2916">
		<div id="comment-2916">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://colinjack.blogspot.com' rel='external nofollow' class='url'>Colin Jack</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2916">March 9, 2010 at 1:24 pm</a></div>

		<div class="comment-body"><p>&#8220;Do some of the data/behavior only make sense in certain states? If so use three separate classes. Going along with this, if we find “throws” in our state implementors we should realize through LSP that we are doing something bad. &#8221;</p>
<p>Definitely agree it can be useful, but I do think its easily overused. Where there are a lot of states I&#8217;ve had success using separate classes each of which has 1 or more states.</p>
<p>On LSP, my view is its a LSP violation if a subclass breaks the contract by throwing an exception, if the exception is part of the contract of the base class then it isn&#8217;t.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2915">
		<div id="comment-2915">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Paul Eaton</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2915">March 9, 2010 at 11:31 am</a></div>

		<div class="comment-body"><p>Why not a LoanApplication base class in your final example?   </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2914">
		<div id="comment-2914">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Andy Rose</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2914">March 9, 2010 at 10:45 am</a></div>

		<div class="comment-body"><p>Greg, I think you have a copy/paste issue with the constructors in your second and third state classes. Possibly another issue with this kind of pattern ;- )</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2913">
		<div id="comment-2913">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://carsten.ringe@web.de' rel='external nofollow' class='url'>Carsten</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2913">March 9, 2010 at 10:20 am</a></div>

		<div class="comment-body"><p>Isn&#8217;t this about the &#8220;Tell, don&#8217;t ask&#8221; principle? If you have to call Approve() on something and get a response like &#8220;Already approved&#8221; it smells to me like asking the object for a state instead of telling the object to transition to another state.</p>
<p>I hope I get a chance to implement (or at least see) this pattern on some code soon. I&#8217;ll keep your post in my mind until then. <img src='http://cdn1.codebetter.com/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2912">
		<div id="comment-2912">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">St</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2912">March 9, 2010 at 10:10 am</a></div>

		<div class="comment-body"><p>I think the state-pattern makes sense in order to implement state transition logic.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2911">
		<div id="comment-2911">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://thinkbeforecoding.com' rel='external nofollow' class='url'>thinkbeforecoding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2911">March 9, 2010 at 9:54 am</a></div>

		<div class="comment-body"><p>Perhaps the three classes even belong to different contexts&#8230;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-2910">
		<div id="comment-2910">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Kasper Frank</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/#comment-2910">March 9, 2010 at 7:11 am</a></div>

		<div class="comment-body"><p>Wouldn&#8217;t that be&#8230;</p>
<p>public class InProcessApplication {</p>
<p>    AwaitingApprovalApplication SubmitForApproval(ILoanProcessingService processor) { …  }</p>
<p>}</p>
<p>?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/gregyoung/2010/03/09/state-pattern-misuse/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://codebetter.com/gregyoung/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='139' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="899a73a8d2" /></p>					</form>
							</div><!-- #respond -->
						
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29416);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=2782afb'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29416&amp;n=2782afb' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29417);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=e94cea6'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29417&amp;n=e94cea6' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29418);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=9ba3022'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29418&amp;n=9ba3022' /></a></noscript><script type='text/javascript'><!--// <![CDATA[
    OA_show(29419);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=f467b52'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29419&amp;n=f467b52' /></a></noscript>
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(220407);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=68b8307'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=220407&amp;n=68b8307' /></a></noscript>				
				
				<ul class="xoxo">		
									</ul>	
				
<script type='text/javascript'><!--// <![CDATA[
    OA_show(29421);
// ]]> --></script><noscript><a target='_blank' href='http://d1.openx.org/ck.php?n=3f8e353'><img border='0' alt='' src='http://d1.openx.org/avw.php?zoneid=29421&amp;n=3f8e353' /></a></noscript>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="http://red-gate.com/">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="http://telerik.com">Telerik .NET Tools</a></li>
<li><a href="http://jetbrains.com/resharper/">JetBrains - ReSharper</a></li>
<li><a href="http://scootersoftware.com">Beyond Compare</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a></li>
<li><a href="http://umbraco.com" target="_blank">Umbraco</a></li>
<li><a href="http://nservicebus.com" target="_blank">NServiceBus</a></li>
<li><a href="http://ravendb.net" target="_blank">RavenDb</a></li>
<li><a href="http://www.websequencediagrams.com/" target="_blank">Web Sequence Diagrams</a></li>
	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '12<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = true; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.428 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-11-09 20:06:41 -->
<!-- super cache -->